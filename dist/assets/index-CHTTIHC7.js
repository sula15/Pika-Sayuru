function qD(t,s){for(var o=0;o<s.length;o++){const i=s[o];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const c=Object.getOwnPropertyDescriptor(i,a);c&&Object.defineProperty(t,a,c.get?c:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function o(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=o(a);fetch(a.href,c)}})();var Qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ea(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $O={exports:{}},Tf={},_O={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ju=Symbol.for("react.element"),ZD=Symbol.for("react.portal"),QD=Symbol.for("react.fragment"),eP=Symbol.for("react.strict_mode"),tP=Symbol.for("react.profiler"),nP=Symbol.for("react.provider"),sP=Symbol.for("react.context"),oP=Symbol.for("react.forward_ref"),iP=Symbol.for("react.suspense"),rP=Symbol.for("react.memo"),lP=Symbol.for("react.lazy"),tk=Symbol.iterator;function aP(t){return t===null||typeof t!="object"?null:(t=tk&&t[tk]||t["@@iterator"],typeof t=="function"?t:null)}var TO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bO=Object.assign,yO={};function va(t,s,o){this.props=t,this.context=s,this.refs=yO,this.updater=o||TO}va.prototype.isReactComponent={};va.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};va.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EO(){}EO.prototype=va.prototype;function oy(t,s,o){this.props=t,this.context=s,this.refs=yO,this.updater=o||TO}var iy=oy.prototype=new EO;iy.constructor=oy;bO(iy,va.prototype);iy.isPureReactComponent=!0;var nk=Array.isArray,vO=Object.prototype.hasOwnProperty,ry={current:null},CO={key:!0,ref:!0,__self:!0,__source:!0};function SO(t,s,o){var i,a={},c=null,u=null;if(s!=null)for(i in s.ref!==void 0&&(u=s.ref),s.key!==void 0&&(c=""+s.key),s)vO.call(s,i)&&!CO.hasOwnProperty(i)&&(a[i]=s[i]);var h=arguments.length-2;if(h===1)a.children=o;else if(1<h){for(var p=Array(h),f=0;f<h;f++)p[f]=arguments[f+2];a.children=p}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)a[i]===void 0&&(a[i]=h[i]);return{$$typeof:ju,type:t,key:c,ref:u,props:a,_owner:ry.current}}function cP(t,s){return{$$typeof:ju,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function ly(t){return typeof t=="object"&&t!==null&&t.$$typeof===ju}function uP(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(o){return s[o]})}var sk=/\/+/g;function w_(t,s){return typeof t=="object"&&t!==null&&t.key!=null?uP(""+t.key):s.toString(36)}function dp(t,s,o,i,a){var c=typeof t;(c==="undefined"||c==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(c){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case ju:case ZD:u=!0}}if(u)return u=t,a=a(u),t=i===""?"."+w_(u,0):i,nk(a)?(o="",t!=null&&(o=t.replace(sk,"$&/")+"/"),dp(a,s,o,"",function(f){return f})):a!=null&&(ly(a)&&(a=cP(a,o+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(sk,"$&/")+"/")+t)),s.push(a)),1;if(u=0,i=i===""?".":i+":",nk(t))for(var h=0;h<t.length;h++){c=t[h];var p=i+w_(c,h);u+=dp(c,s,o,p,a)}else if(p=aP(t),typeof p=="function")for(t=p.call(t),h=0;!(c=t.next()).done;)c=c.value,p=i+w_(c,h++),u+=dp(c,s,o,p,a);else if(c==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return u}function Vh(t,s,o){if(t==null)return t;var i=[],a=0;return dp(t,i,"","",function(c){return s.call(o,c,a++)}),i}function dP(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(o){(t._status===0||t._status===-1)&&(t._status=1,t._result=o)},function(o){(t._status===0||t._status===-1)&&(t._status=2,t._result=o)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Ln={current:null},hp={transition:null},hP={ReactCurrentDispatcher:Ln,ReactCurrentBatchConfig:hp,ReactCurrentOwner:ry};function IO(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Vh,forEach:function(t,s,o){Vh(t,function(){s.apply(this,arguments)},o)},count:function(t){var s=0;return Vh(t,function(){s++}),s},toArray:function(t){return Vh(t,function(s){return s})||[]},only:function(t){if(!ly(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xe.Component=va;Xe.Fragment=QD;Xe.Profiler=tP;Xe.PureComponent=oy;Xe.StrictMode=eP;Xe.Suspense=iP;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hP;Xe.act=IO;Xe.cloneElement=function(t,s,o){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=bO({},t.props),a=t.key,c=t.ref,u=t._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,u=ry.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(p in s)vO.call(s,p)&&!CO.hasOwnProperty(p)&&(i[p]=s[p]===void 0&&h!==void 0?h[p]:s[p])}var p=arguments.length-2;if(p===1)i.children=o;else if(1<p){h=Array(p);for(var f=0;f<p;f++)h[f]=arguments[f+2];i.children=h}return{$$typeof:ju,type:t.type,key:a,ref:c,props:i,_owner:u}};Xe.createContext=function(t){return t={$$typeof:sP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nP,_context:t},t.Consumer=t};Xe.createElement=SO;Xe.createFactory=function(t){var s=SO.bind(null,t);return s.type=t,s};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(t){return{$$typeof:oP,render:t}};Xe.isValidElement=ly;Xe.lazy=function(t){return{$$typeof:lP,_payload:{_status:-1,_result:t},_init:dP}};Xe.memo=function(t,s){return{$$typeof:rP,type:t,compare:s===void 0?null:s}};Xe.startTransition=function(t){var s=hp.transition;hp.transition={};try{t()}finally{hp.transition=s}};Xe.unstable_act=IO;Xe.useCallback=function(t,s){return Ln.current.useCallback(t,s)};Xe.useContext=function(t){return Ln.current.useContext(t)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(t){return Ln.current.useDeferredValue(t)};Xe.useEffect=function(t,s){return Ln.current.useEffect(t,s)};Xe.useId=function(){return Ln.current.useId()};Xe.useImperativeHandle=function(t,s,o){return Ln.current.useImperativeHandle(t,s,o)};Xe.useInsertionEffect=function(t,s){return Ln.current.useInsertionEffect(t,s)};Xe.useLayoutEffect=function(t,s){return Ln.current.useLayoutEffect(t,s)};Xe.useMemo=function(t,s){return Ln.current.useMemo(t,s)};Xe.useReducer=function(t,s,o){return Ln.current.useReducer(t,s,o)};Xe.useRef=function(t){return Ln.current.useRef(t)};Xe.useState=function(t){return Ln.current.useState(t)};Xe.useSyncExternalStore=function(t,s,o){return Ln.current.useSyncExternalStore(t,s,o)};Xe.useTransition=function(){return Ln.current.useTransition()};Xe.version="18.3.1";_O.exports=Xe;var O=_O.exports;const ye=Ea(O),pP=qD({__proto__:null,default:ye},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fP=O,mP=Symbol.for("react.element"),gP=Symbol.for("react.fragment"),$P=Object.prototype.hasOwnProperty,_P=fP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TP={key:!0,ref:!0,__self:!0,__source:!0};function wO(t,s,o){var i,a={},c=null,u=null;o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(u=s.ref);for(i in s)$P.call(s,i)&&!TP.hasOwnProperty(i)&&(a[i]=s[i]);if(t&&t.defaultProps)for(i in s=t.defaultProps,s)a[i]===void 0&&(a[i]=s[i]);return{$$typeof:mP,type:t,key:c,ref:u,props:a,_owner:_P.current}}Tf.Fragment=gP;Tf.jsx=wO;Tf.jsxs=wO;$O.exports=Tf;var _=$O.exports,kO={exports:{}},ps={},RO={exports:{}},xO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(F,ue){var ae=F.length;F.push(ue);e:for(;0<ae;){var fe=ae-1>>>1,Ee=F[fe];if(0<a(Ee,ue))F[fe]=ue,F[ae]=Ee,ae=fe;else break e}}function o(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var ue=F[0],ae=F.pop();if(ae!==ue){F[0]=ae;e:for(var fe=0,Ee=F.length,xe=Ee>>>1;fe<xe;){var ke=2*(fe+1)-1,qe=F[ke],Re=ke+1,Oe=F[Re];if(0>a(qe,ae))Re<Ee&&0>a(Oe,qe)?(F[fe]=Oe,F[Re]=ae,fe=Re):(F[fe]=qe,F[ke]=ae,fe=ke);else if(Re<Ee&&0>a(Oe,ae))F[fe]=Oe,F[Re]=ae,fe=Re;else break e}}return ue}function a(F,ue){var ae=F.sortIndex-ue.sortIndex;return ae!==0?ae:F.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var p=[],f=[],g=1,m=null,T=3,I=!1,C=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(F){for(var ue=o(f);ue!==null;){if(ue.callback===null)i(f);else if(ue.startTime<=F)i(f),ue.sortIndex=ue.expirationTime,s(p,ue);else break;ue=o(f)}}function M(F){if(w=!1,v(F),!C)if(o(p)!==null)C=!0,de(L);else{var ue=o(f);ue!==null&&ce(M,ue.startTime-F)}}function L(F,ue){C=!1,w&&(w=!1,S(N),N=-1),I=!0;var ae=T;try{for(v(ue),m=o(p);m!==null&&(!(m.expirationTime>ue)||F&&!Te());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,T=m.priorityLevel;var Ee=fe(m.expirationTime<=ue);ue=t.unstable_now(),typeof Ee=="function"?m.callback=Ee:m===o(p)&&i(p),v(ue)}else i(p);m=o(p)}if(m!==null)var xe=!0;else{var ke=o(f);ke!==null&&ce(M,ke.startTime-ue),xe=!1}return xe}finally{m=null,T=ae,I=!1}}var P=!1,B=null,N=-1,ee=5,ie=-1;function Te(){return!(t.unstable_now()-ie<ee)}function Ue(){if(B!==null){var F=t.unstable_now();ie=F;var ue=!0;try{ue=B(!0,F)}finally{ue?je():(P=!1,B=null)}}else P=!1}var je;if(typeof y=="function")je=function(){y(Ue)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Fe=we.port2;we.port1.onmessage=Ue,je=function(){Fe.postMessage(null)}}else je=function(){A(Ue,0)};function de(F){B=F,P||(P=!0,je())}function ce(F,ue){N=A(function(){F(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){C||I||(C=!0,de(L))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return o(p)},t.unstable_next=function(F){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var ae=T;T=ue;try{return F()}finally{T=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,ue){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ae=T;T=F;try{return ue()}finally{T=ae}},t.unstable_scheduleCallback=function(F,ue,ae){var fe=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?fe+ae:fe):ae=fe,F){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ae+Ee,F={id:g++,callback:ue,priorityLevel:F,startTime:ae,expirationTime:Ee,sortIndex:-1},ae>fe?(F.sortIndex=ae,s(f,F),o(p)===null&&F===o(f)&&(w?(S(N),N=-1):w=!0,ce(M,ae-fe))):(F.sortIndex=Ee,s(p,F),C||I||(C=!0,de(L))),F},t.unstable_shouldYield=Te,t.unstable_wrapCallback=function(F){var ue=T;return function(){var ae=T;T=ue;try{return F.apply(this,arguments)}finally{T=ae}}}})(xO);RO.exports=xO;var bP=RO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yP=O,hs=bP;function re(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OO=new Set,pu={};function Zr(t,s){pa(t,s),pa(t+"Capture",s)}function pa(t,s){for(pu[t]=s,t=0;t<s.length;t++)OO.add(s[t])}var Qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kT=Object.prototype.hasOwnProperty,EP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ok={},ik={};function vP(t){return kT.call(ik,t)?!0:kT.call(ok,t)?!1:EP.test(t)?ik[t]=!0:(ok[t]=!0,!1)}function CP(t,s,o,i){if(o!==null&&o.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return i?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SP(t,s,o,i){if(s===null||typeof s>"u"||CP(t,s,o,i))return!0;if(i)return!1;if(o!==null)switch(o.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Dn(t,s,o,i,a,c,u){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=o,this.propertyName=t,this.type=s,this.sanitizeURL=c,this.removeEmptyString=u}var gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gn[t]=new Dn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];gn[s]=new Dn(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gn[t]=new Dn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gn[t]=new Dn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gn[t]=new Dn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gn[t]=new Dn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gn[t]=new Dn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gn[t]=new Dn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gn[t]=new Dn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ay=/[\-:]([a-z])/g;function cy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(ay,cy);gn[s]=new Dn(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(ay,cy);gn[s]=new Dn(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(ay,cy);gn[s]=new Dn(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gn[t]=new Dn(t,1,!1,t.toLowerCase(),null,!1,!1)});gn.xlinkHref=new Dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gn[t]=new Dn(t,1,!1,t.toLowerCase(),null,!0,!0)});function uy(t,s,o,i){var a=gn.hasOwnProperty(s)?gn[s]:null;(a!==null?a.type!==0:i||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(SP(s,o,a,i)&&(o=null),i||a===null?vP(s)&&(o===null?t.removeAttribute(s):t.setAttribute(s,""+o)):a.mustUseProperty?t[a.propertyName]=o===null?a.type===3?!1:"":o:(s=a.attributeName,i=a.attributeNamespace,o===null?t.removeAttribute(s):(a=a.type,o=a===3||a===4&&o===!0?"":""+o,i?t.setAttributeNS(i,s,o):t.setAttribute(s,o))))}var ri=yP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hh=Symbol.for("react.element"),Hl=Symbol.for("react.portal"),Gl=Symbol.for("react.fragment"),dy=Symbol.for("react.strict_mode"),RT=Symbol.for("react.profiler"),AO=Symbol.for("react.provider"),NO=Symbol.for("react.context"),hy=Symbol.for("react.forward_ref"),xT=Symbol.for("react.suspense"),OT=Symbol.for("react.suspense_list"),py=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),MO=Symbol.for("react.offscreen"),rk=Symbol.iterator;function Nc(t){return t===null||typeof t!="object"?null:(t=rk&&t[rk]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Object.assign,k_;function jc(t){if(k_===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);k_=s&&s[1]||""}return`
`+k_+t}var R_=!1;function x_(t,s){if(!t||R_)return"";R_=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(f){var i=f}Reflect.construct(t,[],s)}else{try{s.call()}catch(f){i=f}t.call(s.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var a=f.stack.split(`
`),c=i.stack.split(`
`),u=a.length-1,h=c.length-1;1<=u&&0<=h&&a[u]!==c[h];)h--;for(;1<=u&&0<=h;u--,h--)if(a[u]!==c[h]){if(u!==1||h!==1)do if(u--,h--,0>h||a[u]!==c[h]){var p=`
`+a[u].replace(" at new "," at ");return t.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",t.displayName)),p}while(1<=u&&0<=h);break}}}finally{R_=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?jc(t):""}function IP(t){switch(t.tag){case 5:return jc(t.type);case 16:return jc("Lazy");case 13:return jc("Suspense");case 19:return jc("SuspenseList");case 0:case 2:case 15:return t=x_(t.type,!1),t;case 11:return t=x_(t.type.render,!1),t;case 1:return t=x_(t.type,!0),t;default:return""}}function AT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gl:return"Fragment";case Hl:return"Portal";case RT:return"Profiler";case dy:return"StrictMode";case xT:return"Suspense";case OT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NO:return(t.displayName||"Context")+".Consumer";case AO:return(t._context.displayName||"Context")+".Provider";case hy:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case py:return s=t.displayName||null,s!==null?s:AT(t.type)||"Memo";case xi:s=t._payload,t=t._init;try{return AT(t(s))}catch{}}return null}function wP(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return AT(s);case 8:return s===dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Yi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function LO(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function kP(t){var s=LO(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),i=""+t[s];if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var a=o.get,c=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(u){i=""+u,c.call(this,u)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Gh(t){t._valueTracker||(t._valueTracker=kP(t))}function DO(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var o=s.getValue(),i="";return t&&(i=LO(t)?t.checked?"true":"false":t.value),t=i,t!==o?(s.setValue(t),!0):!1}function Op(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function NT(t,s){var o=s.checked;return kt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function lk(t,s){var o=s.defaultValue==null?"":s.defaultValue,i=s.checked!=null?s.checked:s.defaultChecked;o=Yi(s.value!=null?s.value:o),t._wrapperState={initialChecked:i,initialValue:o,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function PO(t,s){s=s.checked,s!=null&&uy(t,"checked",s,!1)}function MT(t,s){PO(t,s);var o=Yi(s.value),i=s.type;if(o!=null)i==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?LT(t,s.type,o):s.hasOwnProperty("defaultValue")&&LT(t,s.type,Yi(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function ak(t,s,o){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var i=s.type;if(!(i!=="submit"&&i!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,o||s===t.value||(t.value=s),t.defaultValue=s}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function LT(t,s,o){(s!=="number"||Op(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Wc=Array.isArray;function ra(t,s,o,i){if(t=t.options,s){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=!0;for(o=0;o<t.length;o++)a=s.hasOwnProperty("$"+t[o].value),t[o].selected!==a&&(t[o].selected=a),a&&i&&(t[o].defaultSelected=!0)}else{for(o=""+Yi(o),s=null,a=0;a<t.length;a++){if(t[a].value===o){t[a].selected=!0,i&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function DT(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(re(91));return kt({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ck(t,s){var o=s.value;if(o==null){if(o=s.children,s=s.defaultValue,o!=null){if(s!=null)throw Error(re(92));if(Wc(o)){if(1<o.length)throw Error(re(93));o=o[0]}s=o}s==null&&(s=""),o=s}t._wrapperState={initialValue:Yi(o)}}function BO(t,s){var o=Yi(s.value),i=Yi(s.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),s.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),i!=null&&(t.defaultValue=""+i)}function uk(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function FO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function PT(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?FO(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jh,UO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,o,i,a){MSApp.execUnsafeLocalFunction(function(){return t(s,o,i,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(jh=jh||document.createElement("div"),jh.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=jh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function fu(t,s){if(s){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=s;return}}t.textContent=s}var Jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RP=["Webkit","ms","Moz","O"];Object.keys(Jc).forEach(function(t){RP.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Jc[s]=Jc[t]})});function VO(t,s,o){return s==null||typeof s=="boolean"||s===""?"":o||typeof s!="number"||s===0||Jc.hasOwnProperty(t)&&Jc[t]?(""+s).trim():s+"px"}function HO(t,s){t=t.style;for(var o in s)if(s.hasOwnProperty(o)){var i=o.indexOf("--")===0,a=VO(o,s[o],i);o==="float"&&(o="cssFloat"),i?t.setProperty(o,a):t[o]=a}}var xP=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function BT(t,s){if(s){if(xP[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(re(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(re(61))}if(s.style!=null&&typeof s.style!="object")throw Error(re(62))}}function FT(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UT=null;function fy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var VT=null,la=null,aa=null;function dk(t){if(t=Xu(t)){if(typeof VT!="function")throw Error(re(280));var s=t.stateNode;s&&(s=Cf(s),VT(t.stateNode,t.type,s))}}function GO(t){la?aa?aa.push(t):aa=[t]:la=t}function jO(){if(la){var t=la,s=aa;if(aa=la=null,dk(t),s)for(t=0;t<s.length;t++)dk(s[t])}}function WO(t,s){return t(s)}function zO(){}var O_=!1;function XO(t,s,o){if(O_)return t(s,o);O_=!0;try{return WO(t,s,o)}finally{O_=!1,(la!==null||aa!==null)&&(zO(),jO())}}function mu(t,s){var o=t.stateNode;if(o===null)return null;var i=Cf(o);if(i===null)return null;o=i[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(re(231,s,typeof o));return o}var HT=!1;if(Qo)try{var Mc={};Object.defineProperty(Mc,"passive",{get:function(){HT=!0}}),window.addEventListener("test",Mc,Mc),window.removeEventListener("test",Mc,Mc)}catch{HT=!1}function OP(t,s,o,i,a,c,u,h,p){var f=Array.prototype.slice.call(arguments,3);try{s.apply(o,f)}catch(g){this.onError(g)}}var qc=!1,Ap=null,Np=!1,GT=null,AP={onError:function(t){qc=!0,Ap=t}};function NP(t,s,o,i,a,c,u,h,p){qc=!1,Ap=null,OP.apply(AP,arguments)}function MP(t,s,o,i,a,c,u,h,p){if(NP.apply(this,arguments),qc){if(qc){var f=Ap;qc=!1,Ap=null}else throw Error(re(198));Np||(Np=!0,GT=f)}}function Qr(t){var s=t,o=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(o=s.return),t=s.return;while(t)}return s.tag===3?o:null}function YO(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function hk(t){if(Qr(t)!==t)throw Error(re(188))}function LP(t){var s=t.alternate;if(!s){if(s=Qr(t),s===null)throw Error(re(188));return s!==t?null:t}for(var o=t,i=s;;){var a=o.return;if(a===null)break;var c=a.alternate;if(c===null){if(i=a.return,i!==null){o=i;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===o)return hk(a),t;if(c===i)return hk(a),s;c=c.sibling}throw Error(re(188))}if(o.return!==i.return)o=a,i=c;else{for(var u=!1,h=a.child;h;){if(h===o){u=!0,o=a,i=c;break}if(h===i){u=!0,i=a,o=c;break}h=h.sibling}if(!u){for(h=c.child;h;){if(h===o){u=!0,o=c,i=a;break}if(h===i){u=!0,i=c,o=a;break}h=h.sibling}if(!u)throw Error(re(189))}}if(o.alternate!==i)throw Error(re(190))}if(o.tag!==3)throw Error(re(188));return o.stateNode.current===o?t:s}function KO(t){return t=LP(t),t!==null?JO(t):null}function JO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=JO(t);if(s!==null)return s;t=t.sibling}return null}var qO=hs.unstable_scheduleCallback,pk=hs.unstable_cancelCallback,DP=hs.unstable_shouldYield,PP=hs.unstable_requestPaint,Ht=hs.unstable_now,BP=hs.unstable_getCurrentPriorityLevel,my=hs.unstable_ImmediatePriority,ZO=hs.unstable_UserBlockingPriority,Mp=hs.unstable_NormalPriority,FP=hs.unstable_LowPriority,QO=hs.unstable_IdlePriority,bf=null,Co=null;function UP(t){if(Co&&typeof Co.onCommitFiberRoot=="function")try{Co.onCommitFiberRoot(bf,t,void 0,(t.current.flags&128)===128)}catch{}}var eo=Math.clz32?Math.clz32:GP,VP=Math.log,HP=Math.LN2;function GP(t){return t>>>=0,t===0?32:31-(VP(t)/HP|0)|0}var Wh=64,zh=4194304;function zc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lp(t,s){var o=t.pendingLanes;if(o===0)return 0;var i=0,a=t.suspendedLanes,c=t.pingedLanes,u=o&268435455;if(u!==0){var h=u&~a;h!==0?i=zc(h):(c&=u,c!==0&&(i=zc(c)))}else u=o&~a,u!==0?i=zc(u):c!==0&&(i=zc(c));if(i===0)return 0;if(s!==0&&s!==i&&!(s&a)&&(a=i&-i,c=s&-s,a>=c||a===16&&(c&4194240)!==0))return s;if(i&4&&(i|=o&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=i;0<s;)o=31-eo(s),a=1<<o,i|=t[o],s&=~a;return i}function jP(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WP(t,s){for(var o=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,c=t.pendingLanes;0<c;){var u=31-eo(c),h=1<<u,p=a[u];p===-1?(!(h&o)||h&i)&&(a[u]=jP(h,s)):p<=s&&(t.expiredLanes|=h),c&=~h}}function jT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eA(){var t=Wh;return Wh<<=1,!(Wh&4194240)&&(Wh=64),t}function A_(t){for(var s=[],o=0;31>o;o++)s.push(t);return s}function Wu(t,s,o){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-eo(s),t[s]=o}function zP(t,s){var o=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<o;){var a=31-eo(o),c=1<<a;s[a]=0,i[a]=-1,t[a]=-1,o&=~c}}function gy(t,s){var o=t.entangledLanes|=s;for(t=t.entanglements;o;){var i=31-eo(o),a=1<<i;a&s|t[i]&s&&(t[i]|=s),o&=~a}}var at=0;function tA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nA,$y,sA,oA,iA,WT=!1,Xh=[],Fi=null,Ui=null,Vi=null,gu=new Map,$u=new Map,Ni=[],XP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fk(t,s){switch(t){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":gu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(s.pointerId)}}function Lc(t,s,o,i,a,c){return t===null||t.nativeEvent!==c?(t={blockedOn:s,domEventName:o,eventSystemFlags:i,nativeEvent:c,targetContainers:[a]},s!==null&&(s=Xu(s),s!==null&&$y(s)),t):(t.eventSystemFlags|=i,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function YP(t,s,o,i,a){switch(s){case"focusin":return Fi=Lc(Fi,t,s,o,i,a),!0;case"dragenter":return Ui=Lc(Ui,t,s,o,i,a),!0;case"mouseover":return Vi=Lc(Vi,t,s,o,i,a),!0;case"pointerover":var c=a.pointerId;return gu.set(c,Lc(gu.get(c)||null,t,s,o,i,a)),!0;case"gotpointercapture":return c=a.pointerId,$u.set(c,Lc($u.get(c)||null,t,s,o,i,a)),!0}return!1}function rA(t){var s=Lr(t.target);if(s!==null){var o=Qr(s);if(o!==null){if(s=o.tag,s===13){if(s=YO(o),s!==null){t.blockedOn=s,iA(t.priority,function(){sA(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pp(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var o=zT(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var i=new o.constructor(o.type,o);UT=i,o.target.dispatchEvent(i),UT=null}else return s=Xu(o),s!==null&&$y(s),t.blockedOn=o,!1;s.shift()}return!0}function mk(t,s,o){pp(t)&&o.delete(s)}function KP(){WT=!1,Fi!==null&&pp(Fi)&&(Fi=null),Ui!==null&&pp(Ui)&&(Ui=null),Vi!==null&&pp(Vi)&&(Vi=null),gu.forEach(mk),$u.forEach(mk)}function Dc(t,s){t.blockedOn===s&&(t.blockedOn=null,WT||(WT=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,KP)))}function _u(t){function s(a){return Dc(a,t)}if(0<Xh.length){Dc(Xh[0],t);for(var o=1;o<Xh.length;o++){var i=Xh[o];i.blockedOn===t&&(i.blockedOn=null)}}for(Fi!==null&&Dc(Fi,t),Ui!==null&&Dc(Ui,t),Vi!==null&&Dc(Vi,t),gu.forEach(s),$u.forEach(s),o=0;o<Ni.length;o++)i=Ni[o],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ni.length&&(o=Ni[0],o.blockedOn===null);)rA(o),o.blockedOn===null&&Ni.shift()}var ca=ri.ReactCurrentBatchConfig,Dp=!0;function JP(t,s,o,i){var a=at,c=ca.transition;ca.transition=null;try{at=1,_y(t,s,o,i)}finally{at=a,ca.transition=c}}function qP(t,s,o,i){var a=at,c=ca.transition;ca.transition=null;try{at=4,_y(t,s,o,i)}finally{at=a,ca.transition=c}}function _y(t,s,o,i){if(Dp){var a=zT(t,s,o,i);if(a===null)H_(t,s,i,Pp,o),fk(t,i);else if(YP(a,t,s,o,i))i.stopPropagation();else if(fk(t,i),s&4&&-1<XP.indexOf(t)){for(;a!==null;){var c=Xu(a);if(c!==null&&nA(c),c=zT(t,s,o,i),c===null&&H_(t,s,i,Pp,o),c===a)break;a=c}a!==null&&i.stopPropagation()}else H_(t,s,i,null,o)}}var Pp=null;function zT(t,s,o,i){if(Pp=null,t=fy(i),t=Lr(t),t!==null)if(s=Qr(t),s===null)t=null;else if(o=s.tag,o===13){if(t=YO(s),t!==null)return t;t=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Pp=t,null}function lA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BP()){case my:return 1;case ZO:return 4;case Mp:case FP:return 16;case QO:return 536870912;default:return 16}default:return 16}}var Li=null,Ty=null,fp=null;function aA(){if(fp)return fp;var t,s=Ty,o=s.length,i,a="value"in Li?Li.value:Li.textContent,c=a.length;for(t=0;t<o&&s[t]===a[t];t++);var u=o-t;for(i=1;i<=u&&s[o-i]===a[c-i];i++);return fp=a.slice(t,1<i?1-i:void 0)}function mp(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Yh(){return!0}function gk(){return!1}function fs(t){function s(o,i,a,c,u){this._reactName=o,this._targetInst=a,this.type=i,this.nativeEvent=c,this.target=u,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(o=t[h],this[h]=o?o(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Yh:gk,this.isPropagationStopped=gk,this}return kt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Yh)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Yh)},persist:function(){},isPersistent:Yh}),s}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},by=fs(Ca),zu=kt({},Ca,{view:0,detail:0}),ZP=fs(zu),N_,M_,Pc,yf=kt({},zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pc&&(Pc&&t.type==="mousemove"?(N_=t.screenX-Pc.screenX,M_=t.screenY-Pc.screenY):M_=N_=0,Pc=t),N_)},movementY:function(t){return"movementY"in t?t.movementY:M_}}),$k=fs(yf),QP=kt({},yf,{dataTransfer:0}),e1=fs(QP),t1=kt({},zu,{relatedTarget:0}),L_=fs(t1),n1=kt({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),s1=fs(n1),o1=kt({},Ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),i1=fs(o1),r1=kt({},Ca,{data:0}),_k=fs(r1),l1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u1(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=c1[t])?!!s[t]:!1}function yy(){return u1}var d1=kt({},zu,{key:function(t){if(t.key){var s=l1[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=mp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?a1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yy,charCode:function(t){return t.type==="keypress"?mp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),h1=fs(d1),p1=kt({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tk=fs(p1),f1=kt({},zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yy}),m1=fs(f1),g1=kt({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),$1=fs(g1),_1=kt({},yf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),T1=fs(_1),b1=[9,13,27,32],Ey=Qo&&"CompositionEvent"in window,Zc=null;Qo&&"documentMode"in document&&(Zc=document.documentMode);var y1=Qo&&"TextEvent"in window&&!Zc,cA=Qo&&(!Ey||Zc&&8<Zc&&11>=Zc),bk=" ",yk=!1;function uA(t,s){switch(t){case"keyup":return b1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jl=!1;function E1(t,s){switch(t){case"compositionend":return dA(s);case"keypress":return s.which!==32?null:(yk=!0,bk);case"textInput":return t=s.data,t===bk&&yk?null:t;default:return null}}function v1(t,s){if(jl)return t==="compositionend"||!Ey&&uA(t,s)?(t=aA(),fp=Ty=Li=null,jl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return cA&&s.locale!=="ko"?null:s.data;default:return null}}var C1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ek(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!C1[t.type]:s==="textarea"}function hA(t,s,o,i){GO(i),s=Bp(s,"onChange"),0<s.length&&(o=new by("onChange","change",null,o,i),t.push({event:o,listeners:s}))}var Qc=null,Tu=null;function S1(t){vA(t,0)}function Ef(t){var s=Xl(t);if(DO(s))return t}function I1(t,s){if(t==="change")return s}var pA=!1;if(Qo){var D_;if(Qo){var P_="oninput"in document;if(!P_){var vk=document.createElement("div");vk.setAttribute("oninput","return;"),P_=typeof vk.oninput=="function"}D_=P_}else D_=!1;pA=D_&&(!document.documentMode||9<document.documentMode)}function Ck(){Qc&&(Qc.detachEvent("onpropertychange",fA),Tu=Qc=null)}function fA(t){if(t.propertyName==="value"&&Ef(Tu)){var s=[];hA(s,Tu,t,fy(t)),XO(S1,s)}}function w1(t,s,o){t==="focusin"?(Ck(),Qc=s,Tu=o,Qc.attachEvent("onpropertychange",fA)):t==="focusout"&&Ck()}function k1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ef(Tu)}function R1(t,s){if(t==="click")return Ef(s)}function x1(t,s){if(t==="input"||t==="change")return Ef(s)}function O1(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var no=typeof Object.is=="function"?Object.is:O1;function bu(t,s){if(no(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var o=Object.keys(t),i=Object.keys(s);if(o.length!==i.length)return!1;for(i=0;i<o.length;i++){var a=o[i];if(!kT.call(s,a)||!no(t[a],s[a]))return!1}return!0}function Sk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ik(t,s){var o=Sk(t);t=0;for(var i;o;){if(o.nodeType===3){if(i=t+o.textContent.length,t<=s&&i>=s)return{node:o,offset:s-t};t=i}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Sk(o)}}function mA(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?mA(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function gA(){for(var t=window,s=Op();s instanceof t.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)t=s.contentWindow;else break;s=Op(t.document)}return s}function vy(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function A1(t){var s=gA(),o=t.focusedElem,i=t.selectionRange;if(s!==o&&o&&o.ownerDocument&&mA(o.ownerDocument.documentElement,o)){if(i!==null&&vy(o)){if(s=i.start,t=i.end,t===void 0&&(t=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(t,o.value.length);else if(t=(s=o.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=o.textContent.length,c=Math.min(i.start,a);i=i.end===void 0?c:Math.min(i.end,a),!t.extend&&c>i&&(a=i,i=c,c=a),a=Ik(o,c);var u=Ik(o,i);a&&u&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),c>i?(t.addRange(s),t.extend(u.node,u.offset)):(s.setEnd(u.node,u.offset),t.addRange(s)))}}for(s=[],t=o;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)t=s[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var N1=Qo&&"documentMode"in document&&11>=document.documentMode,Wl=null,XT=null,eu=null,YT=!1;function wk(t,s,o){var i=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;YT||Wl==null||Wl!==Op(i)||(i=Wl,"selectionStart"in i&&vy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),eu&&bu(eu,i)||(eu=i,i=Bp(XT,"onSelect"),0<i.length&&(s=new by("onSelect","select",null,s,o),t.push({event:s,listeners:i}),s.target=Wl)))}function Kh(t,s){var o={};return o[t.toLowerCase()]=s.toLowerCase(),o["Webkit"+t]="webkit"+s,o["Moz"+t]="moz"+s,o}var zl={animationend:Kh("Animation","AnimationEnd"),animationiteration:Kh("Animation","AnimationIteration"),animationstart:Kh("Animation","AnimationStart"),transitionend:Kh("Transition","TransitionEnd")},B_={},$A={};Qo&&($A=document.createElement("div").style,"AnimationEvent"in window||(delete zl.animationend.animation,delete zl.animationiteration.animation,delete zl.animationstart.animation),"TransitionEvent"in window||delete zl.transitionend.transition);function vf(t){if(B_[t])return B_[t];if(!zl[t])return t;var s=zl[t],o;for(o in s)if(s.hasOwnProperty(o)&&o in $A)return B_[t]=s[o];return t}var _A=vf("animationend"),TA=vf("animationiteration"),bA=vf("animationstart"),yA=vf("transitionend"),EA=new Map,kk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(t,s){EA.set(t,s),Zr(s,[t])}for(var F_=0;F_<kk.length;F_++){var U_=kk[F_],M1=U_.toLowerCase(),L1=U_[0].toUpperCase()+U_.slice(1);Zi(M1,"on"+L1)}Zi(_A,"onAnimationEnd");Zi(TA,"onAnimationIteration");Zi(bA,"onAnimationStart");Zi("dblclick","onDoubleClick");Zi("focusin","onFocus");Zi("focusout","onBlur");Zi(yA,"onTransitionEnd");pa("onMouseEnter",["mouseout","mouseover"]);pa("onMouseLeave",["mouseout","mouseover"]);pa("onPointerEnter",["pointerout","pointerover"]);pa("onPointerLeave",["pointerout","pointerover"]);Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xc));function Rk(t,s,o){var i=t.type||"unknown-event";t.currentTarget=o,MP(i,s,void 0,t),t.currentTarget=null}function vA(t,s){s=(s&4)!==0;for(var o=0;o<t.length;o++){var i=t[o],a=i.event;i=i.listeners;e:{var c=void 0;if(s)for(var u=i.length-1;0<=u;u--){var h=i[u],p=h.instance,f=h.currentTarget;if(h=h.listener,p!==c&&a.isPropagationStopped())break e;Rk(a,h,f),c=p}else for(u=0;u<i.length;u++){if(h=i[u],p=h.instance,f=h.currentTarget,h=h.listener,p!==c&&a.isPropagationStopped())break e;Rk(a,h,f),c=p}}}if(Np)throw t=GT,Np=!1,GT=null,t}function $t(t,s){var o=s[QT];o===void 0&&(o=s[QT]=new Set);var i=t+"__bubble";o.has(i)||(CA(s,t,2,!1),o.add(i))}function V_(t,s,o){var i=0;s&&(i|=4),CA(o,t,i,s)}var Jh="_reactListening"+Math.random().toString(36).slice(2);function yu(t){if(!t[Jh]){t[Jh]=!0,OO.forEach(function(o){o!=="selectionchange"&&(D1.has(o)||V_(o,!1,t),V_(o,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Jh]||(s[Jh]=!0,V_("selectionchange",!1,s))}}function CA(t,s,o,i){switch(lA(s)){case 1:var a=JP;break;case 4:a=qP;break;default:a=_y}o=a.bind(null,s,o,t),a=void 0,!HT||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),i?a!==void 0?t.addEventListener(s,o,{capture:!0,passive:a}):t.addEventListener(s,o,!0):a!==void 0?t.addEventListener(s,o,{passive:a}):t.addEventListener(s,o,!1)}function H_(t,s,o,i,a){var c=i;if(!(s&1)&&!(s&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var h=i.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(u===4)for(u=i.return;u!==null;){var p=u.tag;if((p===3||p===4)&&(p=u.stateNode.containerInfo,p===a||p.nodeType===8&&p.parentNode===a))return;u=u.return}for(;h!==null;){if(u=Lr(h),u===null)return;if(p=u.tag,p===5||p===6){i=c=u;continue e}h=h.parentNode}}i=i.return}XO(function(){var f=c,g=fy(o),m=[];e:{var T=EA.get(t);if(T!==void 0){var I=by,C=t;switch(t){case"keypress":if(mp(o)===0)break e;case"keydown":case"keyup":I=h1;break;case"focusin":C="focus",I=L_;break;case"focusout":C="blur",I=L_;break;case"beforeblur":case"afterblur":I=L_;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=$k;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=e1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=m1;break;case _A:case TA:case bA:I=s1;break;case yA:I=$1;break;case"scroll":I=ZP;break;case"wheel":I=T1;break;case"copy":case"cut":case"paste":I=i1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Tk}var w=(s&4)!==0,A=!w&&t==="scroll",S=w?T!==null?T+"Capture":null:T;w=[];for(var y=f,v;y!==null;){v=y;var M=v.stateNode;if(v.tag===5&&M!==null&&(v=M,S!==null&&(M=mu(y,S),M!=null&&w.push(Eu(y,M,v)))),A)break;y=y.return}0<w.length&&(T=new I(T,C,null,o,g),m.push({event:T,listeners:w}))}}if(!(s&7)){e:{if(T=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",T&&o!==UT&&(C=o.relatedTarget||o.fromElement)&&(Lr(C)||C[ei]))break e;if((I||T)&&(T=g.window===g?g:(T=g.ownerDocument)?T.defaultView||T.parentWindow:window,I?(C=o.relatedTarget||o.toElement,I=f,C=C?Lr(C):null,C!==null&&(A=Qr(C),C!==A||C.tag!==5&&C.tag!==6)&&(C=null)):(I=null,C=f),I!==C)){if(w=$k,M="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=Tk,M="onPointerLeave",S="onPointerEnter",y="pointer"),A=I==null?T:Xl(I),v=C==null?T:Xl(C),T=new w(M,y+"leave",I,o,g),T.target=A,T.relatedTarget=v,M=null,Lr(g)===f&&(w=new w(S,y+"enter",C,o,g),w.target=v,w.relatedTarget=A,M=w),A=M,I&&C)t:{for(w=I,S=C,y=0,v=w;v;v=Ul(v))y++;for(v=0,M=S;M;M=Ul(M))v++;for(;0<y-v;)w=Ul(w),y--;for(;0<v-y;)S=Ul(S),v--;for(;y--;){if(w===S||S!==null&&w===S.alternate)break t;w=Ul(w),S=Ul(S)}w=null}else w=null;I!==null&&xk(m,T,I,w,!1),C!==null&&A!==null&&xk(m,A,C,w,!0)}}e:{if(T=f?Xl(f):window,I=T.nodeName&&T.nodeName.toLowerCase(),I==="select"||I==="input"&&T.type==="file")var L=I1;else if(Ek(T))if(pA)L=x1;else{L=k1;var P=w1}else(I=T.nodeName)&&I.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(L=R1);if(L&&(L=L(t,f))){hA(m,L,o,g);break e}P&&P(t,T,f),t==="focusout"&&(P=T._wrapperState)&&P.controlled&&T.type==="number"&&LT(T,"number",T.value)}switch(P=f?Xl(f):window,t){case"focusin":(Ek(P)||P.contentEditable==="true")&&(Wl=P,XT=f,eu=null);break;case"focusout":eu=XT=Wl=null;break;case"mousedown":YT=!0;break;case"contextmenu":case"mouseup":case"dragend":YT=!1,wk(m,o,g);break;case"selectionchange":if(N1)break;case"keydown":case"keyup":wk(m,o,g)}var B;if(Ey)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else jl?uA(t,o)&&(N="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(N="onCompositionStart");N&&(cA&&o.locale!=="ko"&&(jl||N!=="onCompositionStart"?N==="onCompositionEnd"&&jl&&(B=aA()):(Li=g,Ty="value"in Li?Li.value:Li.textContent,jl=!0)),P=Bp(f,N),0<P.length&&(N=new _k(N,t,null,o,g),m.push({event:N,listeners:P}),B?N.data=B:(B=dA(o),B!==null&&(N.data=B)))),(B=y1?E1(t,o):v1(t,o))&&(f=Bp(f,"onBeforeInput"),0<f.length&&(g=new _k("onBeforeInput","beforeinput",null,o,g),m.push({event:g,listeners:f}),g.data=B))}vA(m,s)})}function Eu(t,s,o){return{instance:t,listener:s,currentTarget:o}}function Bp(t,s){for(var o=s+"Capture",i=[];t!==null;){var a=t,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=mu(t,o),c!=null&&i.unshift(Eu(t,c,a)),c=mu(t,s),c!=null&&i.push(Eu(t,c,a))),t=t.return}return i}function Ul(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xk(t,s,o,i,a){for(var c=s._reactName,u=[];o!==null&&o!==i;){var h=o,p=h.alternate,f=h.stateNode;if(p!==null&&p===i)break;h.tag===5&&f!==null&&(h=f,a?(p=mu(o,c),p!=null&&u.unshift(Eu(o,p,h))):a||(p=mu(o,c),p!=null&&u.push(Eu(o,p,h)))),o=o.return}u.length!==0&&t.push({event:s,listeners:u})}var P1=/\r\n?/g,B1=/\u0000|\uFFFD/g;function Ok(t){return(typeof t=="string"?t:""+t).replace(P1,`
`).replace(B1,"")}function qh(t,s,o){if(s=Ok(s),Ok(t)!==s&&o)throw Error(re(425))}function Fp(){}var KT=null,JT=null;function qT(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ZT=typeof setTimeout=="function"?setTimeout:void 0,F1=typeof clearTimeout=="function"?clearTimeout:void 0,Ak=typeof Promise=="function"?Promise:void 0,U1=typeof queueMicrotask=="function"?queueMicrotask:typeof Ak<"u"?function(t){return Ak.resolve(null).then(t).catch(V1)}:ZT;function V1(t){setTimeout(function(){throw t})}function G_(t,s){var o=s,i=0;do{var a=o.nextSibling;if(t.removeChild(o),a&&a.nodeType===8)if(o=a.data,o==="/$"){if(i===0){t.removeChild(a),_u(s);return}i--}else o!=="$"&&o!=="$?"&&o!=="$!"||i++;o=a}while(o);_u(s)}function Hi(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Nk(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return t;s--}else o==="/$"&&s++}t=t.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),vo="__reactFiber$"+Sa,vu="__reactProps$"+Sa,ei="__reactContainer$"+Sa,QT="__reactEvents$"+Sa,H1="__reactListeners$"+Sa,G1="__reactHandles$"+Sa;function Lr(t){var s=t[vo];if(s)return s;for(var o=t.parentNode;o;){if(s=o[ei]||o[vo]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(t=Nk(t);t!==null;){if(o=t[vo])return o;t=Nk(t)}return s}t=o,o=t.parentNode}return null}function Xu(t){return t=t[vo]||t[ei],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function Cf(t){return t[vu]||null}var eb=[],Yl=-1;function Qi(t){return{current:t}}function _t(t){0>Yl||(t.current=eb[Yl],eb[Yl]=null,Yl--)}function gt(t,s){Yl++,eb[Yl]=t.current,t.current=s}var Ki={},Sn=Qi(Ki),Xn=Qi(!1),zr=Ki;function fa(t,s){var o=t.type.contextTypes;if(!o)return Ki;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===s)return i.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in o)a[c]=s[c];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function Yn(t){return t=t.childContextTypes,t!=null}function Up(){_t(Xn),_t(Sn)}function Mk(t,s,o){if(Sn.current!==Ki)throw Error(re(168));gt(Sn,s),gt(Xn,o)}function SA(t,s,o){var i=t.stateNode;if(s=s.childContextTypes,typeof i.getChildContext!="function")return o;i=i.getChildContext();for(var a in i)if(!(a in s))throw Error(re(108,wP(t)||"Unknown",a));return kt({},o,i)}function Vp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ki,zr=Sn.current,gt(Sn,t),gt(Xn,Xn.current),!0}function Lk(t,s,o){var i=t.stateNode;if(!i)throw Error(re(169));o?(t=SA(t,s,zr),i.__reactInternalMemoizedMergedChildContext=t,_t(Xn),_t(Sn),gt(Sn,t)):_t(Xn),gt(Xn,o)}var Ko=null,Sf=!1,j_=!1;function IA(t){Ko===null?Ko=[t]:Ko.push(t)}function j1(t){Sf=!0,IA(t)}function er(){if(!j_&&Ko!==null){j_=!0;var t=0,s=at;try{var o=Ko;for(at=1;t<o.length;t++){var i=o[t];do i=i(!0);while(i!==null)}Ko=null,Sf=!1}catch(a){throw Ko!==null&&(Ko=Ko.slice(t+1)),qO(my,er),a}finally{at=s,j_=!1}}return null}var Kl=[],Jl=0,Hp=null,Gp=0,Os=[],As=0,Xr=null,Jo=1,qo="";function Ar(t,s){Kl[Jl++]=Gp,Kl[Jl++]=Hp,Hp=t,Gp=s}function wA(t,s,o){Os[As++]=Jo,Os[As++]=qo,Os[As++]=Xr,Xr=t;var i=Jo;t=qo;var a=32-eo(i)-1;i&=~(1<<a),o+=1;var c=32-eo(s)+a;if(30<c){var u=a-a%5;c=(i&(1<<u)-1).toString(32),i>>=u,a-=u,Jo=1<<32-eo(s)+a|o<<a|i,qo=c+t}else Jo=1<<c|o<<a|i,qo=t}function Cy(t){t.return!==null&&(Ar(t,1),wA(t,1,0))}function Sy(t){for(;t===Hp;)Hp=Kl[--Jl],Kl[Jl]=null,Gp=Kl[--Jl],Kl[Jl]=null;for(;t===Xr;)Xr=Os[--As],Os[As]=null,qo=Os[--As],Os[As]=null,Jo=Os[--As],Os[As]=null}var us=null,cs=null,Et=!1,Zs=null;function kA(t,s){var o=Ns(5,null,null,0);o.elementType="DELETED",o.stateNode=s,o.return=t,s=t.deletions,s===null?(t.deletions=[o],t.flags|=16):s.push(o)}function Dk(t,s){switch(t.tag){case 5:var o=t.type;return s=s.nodeType!==1||o.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,us=t,cs=Hi(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,us=t,cs=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(o=Xr!==null?{id:Jo,overflow:qo}:null,t.memoizedState={dehydrated:s,treeContext:o,retryLane:1073741824},o=Ns(18,null,null,0),o.stateNode=s,o.return=t,t.child=o,us=t,cs=null,!0):!1;default:return!1}}function tb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nb(t){if(Et){var s=cs;if(s){var o=s;if(!Dk(t,s)){if(tb(t))throw Error(re(418));s=Hi(o.nextSibling);var i=us;s&&Dk(t,s)?kA(i,o):(t.flags=t.flags&-4097|2,Et=!1,us=t)}}else{if(tb(t))throw Error(re(418));t.flags=t.flags&-4097|2,Et=!1,us=t}}}function Pk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;us=t}function Zh(t){if(t!==us)return!1;if(!Et)return Pk(t),Et=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!qT(t.type,t.memoizedProps)),s&&(s=cs)){if(tb(t))throw RA(),Error(re(418));for(;s;)kA(t,s),s=Hi(s.nextSibling)}if(Pk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(s===0){cs=Hi(t.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++}t=t.nextSibling}cs=null}}else cs=us?Hi(t.stateNode.nextSibling):null;return!0}function RA(){for(var t=cs;t;)t=Hi(t.nextSibling)}function ma(){cs=us=null,Et=!1}function Iy(t){Zs===null?Zs=[t]:Zs.push(t)}var W1=ri.ReactCurrentBatchConfig;function Bc(t,s,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(re(309));var i=o.stateNode}if(!i)throw Error(re(147,t));var a=i,c=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(u){var h=a.refs;u===null?delete h[c]:h[c]=u},s._stringRef=c,s)}if(typeof t!="string")throw Error(re(284));if(!o._owner)throw Error(re(290,t))}return t}function Qh(t,s){throw t=Object.prototype.toString.call(s),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Bk(t){var s=t._init;return s(t._payload)}function xA(t){function s(S,y){if(t){var v=S.deletions;v===null?(S.deletions=[y],S.flags|=16):v.push(y)}}function o(S,y){if(!t)return null;for(;y!==null;)s(S,y),y=y.sibling;return null}function i(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function a(S,y){return S=zi(S,y),S.index=0,S.sibling=null,S}function c(S,y,v){return S.index=v,t?(v=S.alternate,v!==null?(v=v.index,v<y?(S.flags|=2,y):v):(S.flags|=2,y)):(S.flags|=1048576,y)}function u(S){return t&&S.alternate===null&&(S.flags|=2),S}function h(S,y,v,M){return y===null||y.tag!==6?(y=q_(v,S.mode,M),y.return=S,y):(y=a(y,v),y.return=S,y)}function p(S,y,v,M){var L=v.type;return L===Gl?g(S,y,v.props.children,M,v.key):y!==null&&(y.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xi&&Bk(L)===y.type)?(M=a(y,v.props),M.ref=Bc(S,y,v),M.return=S,M):(M=Ep(v.type,v.key,v.props,null,S.mode,M),M.ref=Bc(S,y,v),M.return=S,M)}function f(S,y,v,M){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Z_(v,S.mode,M),y.return=S,y):(y=a(y,v.children||[]),y.return=S,y)}function g(S,y,v,M,L){return y===null||y.tag!==7?(y=Hr(v,S.mode,M,L),y.return=S,y):(y=a(y,v),y.return=S,y)}function m(S,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=q_(""+y,S.mode,v),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hh:return v=Ep(y.type,y.key,y.props,null,S.mode,v),v.ref=Bc(S,null,y),v.return=S,v;case Hl:return y=Z_(y,S.mode,v),y.return=S,y;case xi:var M=y._init;return m(S,M(y._payload),v)}if(Wc(y)||Nc(y))return y=Hr(y,S.mode,v,null),y.return=S,y;Qh(S,y)}return null}function T(S,y,v,M){var L=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return L!==null?null:h(S,y,""+v,M);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Hh:return v.key===L?p(S,y,v,M):null;case Hl:return v.key===L?f(S,y,v,M):null;case xi:return L=v._init,T(S,y,L(v._payload),M)}if(Wc(v)||Nc(v))return L!==null?null:g(S,y,v,M,null);Qh(S,v)}return null}function I(S,y,v,M,L){if(typeof M=="string"&&M!==""||typeof M=="number")return S=S.get(v)||null,h(y,S,""+M,L);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Hh:return S=S.get(M.key===null?v:M.key)||null,p(y,S,M,L);case Hl:return S=S.get(M.key===null?v:M.key)||null,f(y,S,M,L);case xi:var P=M._init;return I(S,y,v,P(M._payload),L)}if(Wc(M)||Nc(M))return S=S.get(v)||null,g(y,S,M,L,null);Qh(y,M)}return null}function C(S,y,v,M){for(var L=null,P=null,B=y,N=y=0,ee=null;B!==null&&N<v.length;N++){B.index>N?(ee=B,B=null):ee=B.sibling;var ie=T(S,B,v[N],M);if(ie===null){B===null&&(B=ee);break}t&&B&&ie.alternate===null&&s(S,B),y=c(ie,y,N),P===null?L=ie:P.sibling=ie,P=ie,B=ee}if(N===v.length)return o(S,B),Et&&Ar(S,N),L;if(B===null){for(;N<v.length;N++)B=m(S,v[N],M),B!==null&&(y=c(B,y,N),P===null?L=B:P.sibling=B,P=B);return Et&&Ar(S,N),L}for(B=i(S,B);N<v.length;N++)ee=I(B,S,N,v[N],M),ee!==null&&(t&&ee.alternate!==null&&B.delete(ee.key===null?N:ee.key),y=c(ee,y,N),P===null?L=ee:P.sibling=ee,P=ee);return t&&B.forEach(function(Te){return s(S,Te)}),Et&&Ar(S,N),L}function w(S,y,v,M){var L=Nc(v);if(typeof L!="function")throw Error(re(150));if(v=L.call(v),v==null)throw Error(re(151));for(var P=L=null,B=y,N=y=0,ee=null,ie=v.next();B!==null&&!ie.done;N++,ie=v.next()){B.index>N?(ee=B,B=null):ee=B.sibling;var Te=T(S,B,ie.value,M);if(Te===null){B===null&&(B=ee);break}t&&B&&Te.alternate===null&&s(S,B),y=c(Te,y,N),P===null?L=Te:P.sibling=Te,P=Te,B=ee}if(ie.done)return o(S,B),Et&&Ar(S,N),L;if(B===null){for(;!ie.done;N++,ie=v.next())ie=m(S,ie.value,M),ie!==null&&(y=c(ie,y,N),P===null?L=ie:P.sibling=ie,P=ie);return Et&&Ar(S,N),L}for(B=i(S,B);!ie.done;N++,ie=v.next())ie=I(B,S,N,ie.value,M),ie!==null&&(t&&ie.alternate!==null&&B.delete(ie.key===null?N:ie.key),y=c(ie,y,N),P===null?L=ie:P.sibling=ie,P=ie);return t&&B.forEach(function(Ue){return s(S,Ue)}),Et&&Ar(S,N),L}function A(S,y,v,M){if(typeof v=="object"&&v!==null&&v.type===Gl&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Hh:e:{for(var L=v.key,P=y;P!==null;){if(P.key===L){if(L=v.type,L===Gl){if(P.tag===7){o(S,P.sibling),y=a(P,v.props.children),y.return=S,S=y;break e}}else if(P.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xi&&Bk(L)===P.type){o(S,P.sibling),y=a(P,v.props),y.ref=Bc(S,P,v),y.return=S,S=y;break e}o(S,P);break}else s(S,P);P=P.sibling}v.type===Gl?(y=Hr(v.props.children,S.mode,M,v.key),y.return=S,S=y):(M=Ep(v.type,v.key,v.props,null,S.mode,M),M.ref=Bc(S,y,v),M.return=S,S=M)}return u(S);case Hl:e:{for(P=v.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){o(S,y.sibling),y=a(y,v.children||[]),y.return=S,S=y;break e}else{o(S,y);break}else s(S,y);y=y.sibling}y=Z_(v,S.mode,M),y.return=S,S=y}return u(S);case xi:return P=v._init,A(S,y,P(v._payload),M)}if(Wc(v))return C(S,y,v,M);if(Nc(v))return w(S,y,v,M);Qh(S,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(o(S,y.sibling),y=a(y,v),y.return=S,S=y):(o(S,y),y=q_(v,S.mode,M),y.return=S,S=y),u(S)):o(S,y)}return A}var ga=xA(!0),OA=xA(!1),jp=Qi(null),Wp=null,ql=null,wy=null;function ky(){wy=ql=Wp=null}function Ry(t){var s=jp.current;_t(jp),t._currentValue=s}function sb(t,s,o){for(;t!==null;){var i=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,i!==null&&(i.childLanes|=s)):i!==null&&(i.childLanes&s)!==s&&(i.childLanes|=s),t===o)break;t=t.return}}function ua(t,s){Wp=t,wy=ql=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Wn=!0),t.firstContext=null)}function Ps(t){var s=t._currentValue;if(wy!==t)if(t={context:t,memoizedValue:s,next:null},ql===null){if(Wp===null)throw Error(re(308));ql=t,Wp.dependencies={lanes:0,firstContext:t}}else ql=ql.next=t;return s}var Dr=null;function xy(t){Dr===null?Dr=[t]:Dr.push(t)}function AA(t,s,o,i){var a=s.interleaved;return a===null?(o.next=o,xy(s)):(o.next=a.next,a.next=o),s.interleaved=o,ti(t,i)}function ti(t,s){t.lanes|=s;var o=t.alternate;for(o!==null&&(o.lanes|=s),o=t,t=t.return;t!==null;)t.childLanes|=s,o=t.alternate,o!==null&&(o.childLanes|=s),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Oi=!1;function Oy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NA(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zo(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Gi(t,s,o){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,nt&2){var a=i.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s,ti(t,o)}return a=i.interleaved,a===null?(s.next=s,xy(i)):(s.next=a.next,a.next=s),i.interleaved=s,ti(t,o)}function gp(t,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194240)!==0)){var i=s.lanes;i&=t.pendingLanes,o|=i,s.lanes=o,gy(t,o)}}function Fk(t,s){var o=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,o===i)){var a=null,c=null;if(o=o.firstBaseUpdate,o!==null){do{var u={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};c===null?a=c=u:c=c.next=u,o=o.next}while(o!==null);c===null?a=c=s:c=c.next=s}else a=c=s;o={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:i.shared,effects:i.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=s:t.next=s,o.lastBaseUpdate=s}function zp(t,s,o,i){var a=t.updateQueue;Oi=!1;var c=a.firstBaseUpdate,u=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var p=h,f=p.next;p.next=null,u===null?c=f:u.next=f,u=p;var g=t.alternate;g!==null&&(g=g.updateQueue,h=g.lastBaseUpdate,h!==u&&(h===null?g.firstBaseUpdate=f:h.next=f,g.lastBaseUpdate=p))}if(c!==null){var m=a.baseState;u=0,g=f=p=null,h=c;do{var T=h.lane,I=h.eventTime;if((i&T)===T){g!==null&&(g=g.next={eventTime:I,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var C=t,w=h;switch(T=s,I=o,w.tag){case 1:if(C=w.payload,typeof C=="function"){m=C.call(I,m,T);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=w.payload,T=typeof C=="function"?C.call(I,m,T):C,T==null)break e;m=kt({},m,T);break e;case 2:Oi=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,T=a.effects,T===null?a.effects=[h]:T.push(h))}else I={eventTime:I,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},g===null?(f=g=I,p=m):g=g.next=I,u|=T;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;T=h,h=T.next,T.next=null,a.lastBaseUpdate=T,a.shared.pending=null}}while(!0);if(g===null&&(p=m),a.baseState=p,a.firstBaseUpdate=f,a.lastBaseUpdate=g,s=a.shared.interleaved,s!==null){a=s;do u|=a.lane,a=a.next;while(a!==s)}else c===null&&(a.shared.lanes=0);Kr|=u,t.lanes=u,t.memoizedState=m}}function Uk(t,s,o){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var i=t[s],a=i.callback;if(a!==null){if(i.callback=null,i=o,typeof a!="function")throw Error(re(191,a));a.call(i)}}}var Yu={},So=Qi(Yu),Cu=Qi(Yu),Su=Qi(Yu);function Pr(t){if(t===Yu)throw Error(re(174));return t}function Ay(t,s){switch(gt(Su,s),gt(Cu,t),gt(So,Yu),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:PT(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=PT(s,t)}_t(So),gt(So,s)}function $a(){_t(So),_t(Cu),_t(Su)}function MA(t){Pr(Su.current);var s=Pr(So.current),o=PT(s,t.type);s!==o&&(gt(Cu,t),gt(So,o))}function Ny(t){Cu.current===t&&(_t(So),_t(Cu))}var vt=Qi(0);function Xp(t){for(var s=t;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var W_=[];function My(){for(var t=0;t<W_.length;t++)W_[t]._workInProgressVersionPrimary=null;W_.length=0}var $p=ri.ReactCurrentDispatcher,z_=ri.ReactCurrentBatchConfig,Yr=0,St=null,Qt=null,ln=null,Yp=!1,tu=!1,Iu=0,z1=0;function Tn(){throw Error(re(321))}function Ly(t,s){if(s===null)return!1;for(var o=0;o<s.length&&o<t.length;o++)if(!no(t[o],s[o]))return!1;return!0}function Dy(t,s,o,i,a,c){if(Yr=c,St=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$p.current=t===null||t.memoizedState===null?J1:q1,t=o(i,a),tu){c=0;do{if(tu=!1,Iu=0,25<=c)throw Error(re(301));c+=1,ln=Qt=null,s.updateQueue=null,$p.current=Z1,t=o(i,a)}while(tu)}if($p.current=Kp,s=Qt!==null&&Qt.next!==null,Yr=0,ln=Qt=St=null,Yp=!1,s)throw Error(re(300));return t}function Py(){var t=Iu!==0;return Iu=0,t}function yo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?St.memoizedState=ln=t:ln=ln.next=t,ln}function Bs(){if(Qt===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Qt.next;var s=ln===null?St.memoizedState:ln.next;if(s!==null)ln=s,Qt=t;else{if(t===null)throw Error(re(310));Qt=t,t={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},ln===null?St.memoizedState=ln=t:ln=ln.next=t}return ln}function wu(t,s){return typeof s=="function"?s(t):s}function X_(t){var s=Bs(),o=s.queue;if(o===null)throw Error(re(311));o.lastRenderedReducer=t;var i=Qt,a=i.baseQueue,c=o.pending;if(c!==null){if(a!==null){var u=a.next;a.next=c.next,c.next=u}i.baseQueue=a=c,o.pending=null}if(a!==null){c=a.next,i=i.baseState;var h=u=null,p=null,f=c;do{var g=f.lane;if((Yr&g)===g)p!==null&&(p=p.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var m={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};p===null?(h=p=m,u=i):p=p.next=m,St.lanes|=g,Kr|=g}f=f.next}while(f!==null&&f!==c);p===null?u=i:p.next=h,no(i,s.memoizedState)||(Wn=!0),s.memoizedState=i,s.baseState=u,s.baseQueue=p,o.lastRenderedState=i}if(t=o.interleaved,t!==null){a=t;do c=a.lane,St.lanes|=c,Kr|=c,a=a.next;while(a!==t)}else a===null&&(o.lanes=0);return[s.memoizedState,o.dispatch]}function Y_(t){var s=Bs(),o=s.queue;if(o===null)throw Error(re(311));o.lastRenderedReducer=t;var i=o.dispatch,a=o.pending,c=s.memoizedState;if(a!==null){o.pending=null;var u=a=a.next;do c=t(c,u.action),u=u.next;while(u!==a);no(c,s.memoizedState)||(Wn=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),o.lastRenderedState=c}return[c,i]}function LA(){}function DA(t,s){var o=St,i=Bs(),a=s(),c=!no(i.memoizedState,a);if(c&&(i.memoizedState=a,Wn=!0),i=i.queue,By(FA.bind(null,o,i,t),[t]),i.getSnapshot!==s||c||ln!==null&&ln.memoizedState.tag&1){if(o.flags|=2048,ku(9,BA.bind(null,o,i,a,s),void 0,null),cn===null)throw Error(re(349));Yr&30||PA(o,s,a)}return a}function PA(t,s,o){t.flags|=16384,t={getSnapshot:s,value:o},s=St.updateQueue,s===null?(s={lastEffect:null,stores:null},St.updateQueue=s,s.stores=[t]):(o=s.stores,o===null?s.stores=[t]:o.push(t))}function BA(t,s,o,i){s.value=o,s.getSnapshot=i,UA(s)&&VA(t)}function FA(t,s,o){return o(function(){UA(s)&&VA(t)})}function UA(t){var s=t.getSnapshot;t=t.value;try{var o=s();return!no(t,o)}catch{return!0}}function VA(t){var s=ti(t,1);s!==null&&to(s,t,1,-1)}function Vk(t){var s=yo();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wu,lastRenderedState:t},s.queue=t,t=t.dispatch=K1.bind(null,St,t),[s.memoizedState,t]}function ku(t,s,o,i){return t={tag:t,create:s,destroy:o,deps:i,next:null},s=St.updateQueue,s===null?(s={lastEffect:null,stores:null},St.updateQueue=s,s.lastEffect=t.next=t):(o=s.lastEffect,o===null?s.lastEffect=t.next=t:(i=o.next,o.next=t,t.next=i,s.lastEffect=t)),t}function HA(){return Bs().memoizedState}function _p(t,s,o,i){var a=yo();St.flags|=t,a.memoizedState=ku(1|s,o,void 0,i===void 0?null:i)}function If(t,s,o,i){var a=Bs();i=i===void 0?null:i;var c=void 0;if(Qt!==null){var u=Qt.memoizedState;if(c=u.destroy,i!==null&&Ly(i,u.deps)){a.memoizedState=ku(s,o,c,i);return}}St.flags|=t,a.memoizedState=ku(1|s,o,c,i)}function Hk(t,s){return _p(8390656,8,t,s)}function By(t,s){return If(2048,8,t,s)}function GA(t,s){return If(4,2,t,s)}function jA(t,s){return If(4,4,t,s)}function WA(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function zA(t,s,o){return o=o!=null?o.concat([t]):null,If(4,4,WA.bind(null,s,t),o)}function Fy(){}function XA(t,s){var o=Bs();s=s===void 0?null:s;var i=o.memoizedState;return i!==null&&s!==null&&Ly(s,i[1])?i[0]:(o.memoizedState=[t,s],t)}function YA(t,s){var o=Bs();s=s===void 0?null:s;var i=o.memoizedState;return i!==null&&s!==null&&Ly(s,i[1])?i[0]:(t=t(),o.memoizedState=[t,s],t)}function KA(t,s,o){return Yr&21?(no(o,s)||(o=eA(),St.lanes|=o,Kr|=o,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Wn=!0),t.memoizedState=o)}function X1(t,s){var o=at;at=o!==0&&4>o?o:4,t(!0);var i=z_.transition;z_.transition={};try{t(!1),s()}finally{at=o,z_.transition=i}}function JA(){return Bs().memoizedState}function Y1(t,s,o){var i=Wi(t);if(o={lane:i,action:o,hasEagerState:!1,eagerState:null,next:null},qA(t))ZA(s,o);else if(o=AA(t,s,o,i),o!==null){var a=Mn();to(o,t,i,a),QA(o,s,i)}}function K1(t,s,o){var i=Wi(t),a={lane:i,action:o,hasEagerState:!1,eagerState:null,next:null};if(qA(t))ZA(s,a);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var u=s.lastRenderedState,h=c(u,o);if(a.hasEagerState=!0,a.eagerState=h,no(h,u)){var p=s.interleaved;p===null?(a.next=a,xy(s)):(a.next=p.next,p.next=a),s.interleaved=a;return}}catch{}finally{}o=AA(t,s,a,i),o!==null&&(a=Mn(),to(o,t,i,a),QA(o,s,i))}}function qA(t){var s=t.alternate;return t===St||s!==null&&s===St}function ZA(t,s){tu=Yp=!0;var o=t.pending;o===null?s.next=s:(s.next=o.next,o.next=s),t.pending=s}function QA(t,s,o){if(o&4194240){var i=s.lanes;i&=t.pendingLanes,o|=i,s.lanes=o,gy(t,o)}}var Kp={readContext:Ps,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},J1={readContext:Ps,useCallback:function(t,s){return yo().memoizedState=[t,s===void 0?null:s],t},useContext:Ps,useEffect:Hk,useImperativeHandle:function(t,s,o){return o=o!=null?o.concat([t]):null,_p(4194308,4,WA.bind(null,s,t),o)},useLayoutEffect:function(t,s){return _p(4194308,4,t,s)},useInsertionEffect:function(t,s){return _p(4,2,t,s)},useMemo:function(t,s){var o=yo();return s=s===void 0?null:s,t=t(),o.memoizedState=[t,s],t},useReducer:function(t,s,o){var i=yo();return s=o!==void 0?o(s):s,i.memoizedState=i.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=Y1.bind(null,St,t),[i.memoizedState,t]},useRef:function(t){var s=yo();return t={current:t},s.memoizedState=t},useState:Vk,useDebugValue:Fy,useDeferredValue:function(t){return yo().memoizedState=t},useTransition:function(){var t=Vk(!1),s=t[0];return t=X1.bind(null,t[1]),yo().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,o){var i=St,a=yo();if(Et){if(o===void 0)throw Error(re(407));o=o()}else{if(o=s(),cn===null)throw Error(re(349));Yr&30||PA(i,s,o)}a.memoizedState=o;var c={value:o,getSnapshot:s};return a.queue=c,Hk(FA.bind(null,i,c,t),[t]),i.flags|=2048,ku(9,BA.bind(null,i,c,o,s),void 0,null),o},useId:function(){var t=yo(),s=cn.identifierPrefix;if(Et){var o=qo,i=Jo;o=(i&~(1<<32-eo(i)-1)).toString(32)+o,s=":"+s+"R"+o,o=Iu++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=z1++,s=":"+s+"r"+o.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},q1={readContext:Ps,useCallback:XA,useContext:Ps,useEffect:By,useImperativeHandle:zA,useInsertionEffect:GA,useLayoutEffect:jA,useMemo:YA,useReducer:X_,useRef:HA,useState:function(){return X_(wu)},useDebugValue:Fy,useDeferredValue:function(t){var s=Bs();return KA(s,Qt.memoizedState,t)},useTransition:function(){var t=X_(wu)[0],s=Bs().memoizedState;return[t,s]},useMutableSource:LA,useSyncExternalStore:DA,useId:JA,unstable_isNewReconciler:!1},Z1={readContext:Ps,useCallback:XA,useContext:Ps,useEffect:By,useImperativeHandle:zA,useInsertionEffect:GA,useLayoutEffect:jA,useMemo:YA,useReducer:Y_,useRef:HA,useState:function(){return Y_(wu)},useDebugValue:Fy,useDeferredValue:function(t){var s=Bs();return Qt===null?s.memoizedState=t:KA(s,Qt.memoizedState,t)},useTransition:function(){var t=Y_(wu)[0],s=Bs().memoizedState;return[t,s]},useMutableSource:LA,useSyncExternalStore:DA,useId:JA,unstable_isNewReconciler:!1};function Js(t,s){if(t&&t.defaultProps){s=kt({},s),t=t.defaultProps;for(var o in t)s[o]===void 0&&(s[o]=t[o]);return s}return s}function ob(t,s,o,i){s=t.memoizedState,o=o(i,s),o=o==null?s:kt({},s,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var wf={isMounted:function(t){return(t=t._reactInternals)?Qr(t)===t:!1},enqueueSetState:function(t,s,o){t=t._reactInternals;var i=Mn(),a=Wi(t),c=Zo(i,a);c.payload=s,o!=null&&(c.callback=o),s=Gi(t,c,a),s!==null&&(to(s,t,a,i),gp(s,t,a))},enqueueReplaceState:function(t,s,o){t=t._reactInternals;var i=Mn(),a=Wi(t),c=Zo(i,a);c.tag=1,c.payload=s,o!=null&&(c.callback=o),s=Gi(t,c,a),s!==null&&(to(s,t,a,i),gp(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var o=Mn(),i=Wi(t),a=Zo(o,i);a.tag=2,s!=null&&(a.callback=s),s=Gi(t,a,i),s!==null&&(to(s,t,i,o),gp(s,t,i))}};function Gk(t,s,o,i,a,c,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,c,u):s.prototype&&s.prototype.isPureReactComponent?!bu(o,i)||!bu(a,c):!0}function e0(t,s,o){var i=!1,a=Ki,c=s.contextType;return typeof c=="object"&&c!==null?c=Ps(c):(a=Yn(s)?zr:Sn.current,i=s.contextTypes,c=(i=i!=null)?fa(t,a):Ki),s=new s(o,c),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=wf,t.stateNode=s,s._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=c),s}function jk(t,s,o,i){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,i),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,i),s.state!==t&&wf.enqueueReplaceState(s,s.state,null)}function ib(t,s,o,i){var a=t.stateNode;a.props=o,a.state=t.memoizedState,a.refs={},Oy(t);var c=s.contextType;typeof c=="object"&&c!==null?a.context=Ps(c):(c=Yn(s)?zr:Sn.current,a.context=fa(t,c)),a.state=t.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(ob(t,s,c,o),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&wf.enqueueReplaceState(a,a.state,null),zp(t,o,a,i),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function _a(t,s){try{var o="",i=s;do o+=IP(i),i=i.return;while(i);var a=o}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:t,source:s,stack:a,digest:null}}function K_(t,s,o){return{value:t,source:null,stack:o??null,digest:s??null}}function rb(t,s){try{console.error(s.value)}catch(o){setTimeout(function(){throw o})}}var Q1=typeof WeakMap=="function"?WeakMap:Map;function t0(t,s,o){o=Zo(-1,o),o.tag=3,o.payload={element:null};var i=s.value;return o.callback=function(){qp||(qp=!0,gb=i),rb(t,s)},o}function n0(t,s,o){o=Zo(-1,o),o.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var a=s.value;o.payload=function(){return i(a)},o.callback=function(){rb(t,s)}}var c=t.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(o.callback=function(){rb(t,s),typeof i!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var u=s.stack;this.componentDidCatch(s.value,{componentStack:u!==null?u:""})}),o}function Wk(t,s,o){var i=t.pingCache;if(i===null){i=t.pingCache=new Q1;var a=new Set;i.set(s,a)}else a=i.get(s),a===void 0&&(a=new Set,i.set(s,a));a.has(o)||(a.add(o),t=pB.bind(null,t,s,o),s.then(t,t))}function zk(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Xk(t,s,o,i,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(s=Zo(-1,1),s.tag=2,Gi(o,s,1))),o.lanes|=1),t)}var eB=ri.ReactCurrentOwner,Wn=!1;function An(t,s,o,i){s.child=t===null?OA(s,null,o,i):ga(s,t.child,o,i)}function Yk(t,s,o,i,a){o=o.render;var c=s.ref;return ua(s,a),i=Dy(t,s,o,i,c,a),o=Py(),t!==null&&!Wn?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,ni(t,s,a)):(Et&&o&&Cy(s),s.flags|=1,An(t,s,i,a),s.child)}function Kk(t,s,o,i,a){if(t===null){var c=o.type;return typeof c=="function"&&!Xy(c)&&c.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(s.tag=15,s.type=c,s0(t,s,c,i,a)):(t=Ep(o.type,null,i,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(c=t.child,!(t.lanes&a)){var u=c.memoizedProps;if(o=o.compare,o=o!==null?o:bu,o(u,i)&&t.ref===s.ref)return ni(t,s,a)}return s.flags|=1,t=zi(c,i),t.ref=s.ref,t.return=s,s.child=t}function s0(t,s,o,i,a){if(t!==null){var c=t.memoizedProps;if(bu(c,i)&&t.ref===s.ref)if(Wn=!1,s.pendingProps=i=c,(t.lanes&a)!==0)t.flags&131072&&(Wn=!0);else return s.lanes=t.lanes,ni(t,s,a)}return lb(t,s,o,i,a)}function o0(t,s,o){var i=s.pendingProps,a=i.children,c=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Ql,as),as|=o;else{if(!(o&1073741824))return t=c!==null?c.baseLanes|o:o,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,gt(Ql,as),as|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:o,gt(Ql,as),as|=i}else c!==null?(i=c.baseLanes|o,s.memoizedState=null):i=o,gt(Ql,as),as|=i;return An(t,s,a,o),s.child}function i0(t,s){var o=s.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(s.flags|=512,s.flags|=2097152)}function lb(t,s,o,i,a){var c=Yn(o)?zr:Sn.current;return c=fa(s,c),ua(s,a),o=Dy(t,s,o,i,c,a),i=Py(),t!==null&&!Wn?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,ni(t,s,a)):(Et&&i&&Cy(s),s.flags|=1,An(t,s,o,a),s.child)}function Jk(t,s,o,i,a){if(Yn(o)){var c=!0;Vp(s)}else c=!1;if(ua(s,a),s.stateNode===null)Tp(t,s),e0(s,o,i),ib(s,o,i,a),i=!0;else if(t===null){var u=s.stateNode,h=s.memoizedProps;u.props=h;var p=u.context,f=o.contextType;typeof f=="object"&&f!==null?f=Ps(f):(f=Yn(o)?zr:Sn.current,f=fa(s,f));var g=o.getDerivedStateFromProps,m=typeof g=="function"||typeof u.getSnapshotBeforeUpdate=="function";m||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==i||p!==f)&&jk(s,u,i,f),Oi=!1;var T=s.memoizedState;u.state=T,zp(s,i,u,a),p=s.memoizedState,h!==i||T!==p||Xn.current||Oi?(typeof g=="function"&&(ob(s,o,g,i),p=s.memoizedState),(h=Oi||Gk(s,o,h,i,T,p,f))?(m||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(s.flags|=4194308)):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=i,s.memoizedState=p),u.props=i,u.state=p,u.context=f,i=h):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),i=!1)}else{u=s.stateNode,NA(t,s),h=s.memoizedProps,f=s.type===s.elementType?h:Js(s.type,h),u.props=f,m=s.pendingProps,T=u.context,p=o.contextType,typeof p=="object"&&p!==null?p=Ps(p):(p=Yn(o)?zr:Sn.current,p=fa(s,p));var I=o.getDerivedStateFromProps;(g=typeof I=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==m||T!==p)&&jk(s,u,i,p),Oi=!1,T=s.memoizedState,u.state=T,zp(s,i,u,a);var C=s.memoizedState;h!==m||T!==C||Xn.current||Oi?(typeof I=="function"&&(ob(s,o,I,i),C=s.memoizedState),(f=Oi||Gk(s,o,f,i,T,C,p)||!1)?(g||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,C,p),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,C,p)),typeof u.componentDidUpdate=="function"&&(s.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(s.flags|=1024),s.memoizedProps=i,s.memoizedState=C),u.props=i,u.state=C,u.context=p,i=f):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(s.flags|=1024),i=!1)}return ab(t,s,o,i,c,a)}function ab(t,s,o,i,a,c){i0(t,s);var u=(s.flags&128)!==0;if(!i&&!u)return a&&Lk(s,o,!1),ni(t,s,c);i=s.stateNode,eB.current=s;var h=u&&typeof o.getDerivedStateFromError!="function"?null:i.render();return s.flags|=1,t!==null&&u?(s.child=ga(s,t.child,null,c),s.child=ga(s,null,h,c)):An(t,s,h,c),s.memoizedState=i.state,a&&Lk(s,o,!0),s.child}function r0(t){var s=t.stateNode;s.pendingContext?Mk(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Mk(t,s.context,!1),Ay(t,s.containerInfo)}function qk(t,s,o,i,a){return ma(),Iy(a),s.flags|=256,An(t,s,o,i),s.child}var cb={dehydrated:null,treeContext:null,retryLane:0};function ub(t){return{baseLanes:t,cachePool:null,transitions:null}}function l0(t,s,o){var i=s.pendingProps,a=vt.current,c=!1,u=(s.flags&128)!==0,h;if((h=u)||(h=t!==null&&t.memoizedState===null?!1:(a&2)!==0),h?(c=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),gt(vt,a&1),t===null)return nb(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(u=i.children,t=i.fallback,c?(i=s.mode,c=s.child,u={mode:"hidden",children:u},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=u):c=xf(u,i,0,null),t=Hr(t,i,o,null),c.return=s,t.return=s,c.sibling=t,s.child=c,s.child.memoizedState=ub(o),s.memoizedState=cb,t):Uy(s,u));if(a=t.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return tB(t,s,u,i,h,a,o);if(c){c=i.fallback,u=s.mode,a=t.child,h=a.sibling;var p={mode:"hidden",children:i.children};return!(u&1)&&s.child!==a?(i=s.child,i.childLanes=0,i.pendingProps=p,s.deletions=null):(i=zi(a,p),i.subtreeFlags=a.subtreeFlags&14680064),h!==null?c=zi(h,c):(c=Hr(c,u,o,null),c.flags|=2),c.return=s,i.return=s,i.sibling=c,s.child=i,i=c,c=s.child,u=t.child.memoizedState,u=u===null?ub(o):{baseLanes:u.baseLanes|o,cachePool:null,transitions:u.transitions},c.memoizedState=u,c.childLanes=t.childLanes&~o,s.memoizedState=cb,i}return c=t.child,t=c.sibling,i=zi(c,{mode:"visible",children:i.children}),!(s.mode&1)&&(i.lanes=o),i.return=s,i.sibling=null,t!==null&&(o=s.deletions,o===null?(s.deletions=[t],s.flags|=16):o.push(t)),s.child=i,s.memoizedState=null,i}function Uy(t,s){return s=xf({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function ep(t,s,o,i){return i!==null&&Iy(i),ga(s,t.child,null,o),t=Uy(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function tB(t,s,o,i,a,c,u){if(o)return s.flags&256?(s.flags&=-257,i=K_(Error(re(422))),ep(t,s,u,i)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(c=i.fallback,a=s.mode,i=xf({mode:"visible",children:i.children},a,0,null),c=Hr(c,a,u,null),c.flags|=2,i.return=s,c.return=s,i.sibling=c,s.child=i,s.mode&1&&ga(s,t.child,null,u),s.child.memoizedState=ub(u),s.memoizedState=cb,c);if(!(s.mode&1))return ep(t,s,u,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var h=i.dgst;return i=h,c=Error(re(419)),i=K_(c,i,void 0),ep(t,s,u,i)}if(h=(u&t.childLanes)!==0,Wn||h){if(i=cn,i!==null){switch(u&-u){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|u)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,ti(t,a),to(i,t,a,-1))}return zy(),i=K_(Error(re(421))),ep(t,s,u,i)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=fB.bind(null,t),a._reactRetry=s,null):(t=c.treeContext,cs=Hi(a.nextSibling),us=s,Et=!0,Zs=null,t!==null&&(Os[As++]=Jo,Os[As++]=qo,Os[As++]=Xr,Jo=t.id,qo=t.overflow,Xr=s),s=Uy(s,i.children),s.flags|=4096,s)}function Zk(t,s,o){t.lanes|=s;var i=t.alternate;i!==null&&(i.lanes|=s),sb(t.return,s,o)}function J_(t,s,o,i,a){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:i,tail:o,tailMode:a}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=o,c.tailMode=a)}function a0(t,s,o){var i=s.pendingProps,a=i.revealOrder,c=i.tail;if(An(t,s,i.children,o),i=vt.current,i&2)i=i&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zk(t,o,s);else if(t.tag===19)Zk(t,o,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(gt(vt,i),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(o=s.child,a=null;o!==null;)t=o.alternate,t!==null&&Xp(t)===null&&(a=o),o=o.sibling;o=a,o===null?(a=s.child,s.child=null):(a=o.sibling,o.sibling=null),J_(s,!1,a,o,c);break;case"backwards":for(o=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&Xp(t)===null){s.child=a;break}t=a.sibling,a.sibling=o,o=a,a=t}J_(s,!0,o,null,c);break;case"together":J_(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Tp(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function ni(t,s,o){if(t!==null&&(s.dependencies=t.dependencies),Kr|=s.lanes,!(o&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(re(153));if(s.child!==null){for(t=s.child,o=zi(t,t.pendingProps),s.child=o,o.return=s;t.sibling!==null;)t=t.sibling,o=o.sibling=zi(t,t.pendingProps),o.return=s;o.sibling=null}return s.child}function nB(t,s,o){switch(s.tag){case 3:r0(s),ma();break;case 5:MA(s);break;case 1:Yn(s.type)&&Vp(s);break;case 4:Ay(s,s.stateNode.containerInfo);break;case 10:var i=s.type._context,a=s.memoizedProps.value;gt(jp,i._currentValue),i._currentValue=a;break;case 13:if(i=s.memoizedState,i!==null)return i.dehydrated!==null?(gt(vt,vt.current&1),s.flags|=128,null):o&s.child.childLanes?l0(t,s,o):(gt(vt,vt.current&1),t=ni(t,s,o),t!==null?t.sibling:null);gt(vt,vt.current&1);break;case 19:if(i=(o&s.childLanes)!==0,t.flags&128){if(i)return a0(t,s,o);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),gt(vt,vt.current),i)break;return null;case 22:case 23:return s.lanes=0,o0(t,s,o)}return ni(t,s,o)}var c0,db,u0,d0;c0=function(t,s){for(var o=s.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};db=function(){};u0=function(t,s,o,i){var a=t.memoizedProps;if(a!==i){t=s.stateNode,Pr(So.current);var c=null;switch(o){case"input":a=NT(t,a),i=NT(t,i),c=[];break;case"select":a=kt({},a,{value:void 0}),i=kt({},i,{value:void 0}),c=[];break;case"textarea":a=DT(t,a),i=DT(t,i),c=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Fp)}BT(o,i);var u;o=null;for(f in a)if(!i.hasOwnProperty(f)&&a.hasOwnProperty(f)&&a[f]!=null)if(f==="style"){var h=a[f];for(u in h)h.hasOwnProperty(u)&&(o||(o={}),o[u]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(pu.hasOwnProperty(f)?c||(c=[]):(c=c||[]).push(f,null));for(f in i){var p=i[f];if(h=a!=null?a[f]:void 0,i.hasOwnProperty(f)&&p!==h&&(p!=null||h!=null))if(f==="style")if(h){for(u in h)!h.hasOwnProperty(u)||p&&p.hasOwnProperty(u)||(o||(o={}),o[u]="");for(u in p)p.hasOwnProperty(u)&&h[u]!==p[u]&&(o||(o={}),o[u]=p[u])}else o||(c||(c=[]),c.push(f,o)),o=p;else f==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,h=h?h.__html:void 0,p!=null&&h!==p&&(c=c||[]).push(f,p)):f==="children"?typeof p!="string"&&typeof p!="number"||(c=c||[]).push(f,""+p):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(pu.hasOwnProperty(f)?(p!=null&&f==="onScroll"&&$t("scroll",t),c||h===p||(c=[])):(c=c||[]).push(f,p))}o&&(c=c||[]).push("style",o);var f=c;(s.updateQueue=f)&&(s.flags|=4)}};d0=function(t,s,o,i){o!==i&&(s.flags|=4)};function Fc(t,s){if(!Et)switch(t.tailMode){case"hidden":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var i=null;o!==null;)o.alternate!==null&&(i=o),o=o.sibling;i===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function bn(t){var s=t.alternate!==null&&t.alternate.child===t.child,o=0,i=0;if(s)for(var a=t.child;a!==null;)o|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)o|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=i,t.childLanes=o,s}function sB(t,s,o){var i=s.pendingProps;switch(Sy(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(s),null;case 1:return Yn(s.type)&&Up(),bn(s),null;case 3:return i=s.stateNode,$a(),_t(Xn),_t(Sn),My(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Zh(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Zs!==null&&(Tb(Zs),Zs=null))),db(t,s),bn(s),null;case 5:Ny(s);var a=Pr(Su.current);if(o=s.type,t!==null&&s.stateNode!=null)u0(t,s,o,i,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!i){if(s.stateNode===null)throw Error(re(166));return bn(s),null}if(t=Pr(So.current),Zh(s)){i=s.stateNode,o=s.type;var c=s.memoizedProps;switch(i[vo]=s,i[vu]=c,t=(s.mode&1)!==0,o){case"dialog":$t("cancel",i),$t("close",i);break;case"iframe":case"object":case"embed":$t("load",i);break;case"video":case"audio":for(a=0;a<Xc.length;a++)$t(Xc[a],i);break;case"source":$t("error",i);break;case"img":case"image":case"link":$t("error",i),$t("load",i);break;case"details":$t("toggle",i);break;case"input":lk(i,c),$t("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},$t("invalid",i);break;case"textarea":ck(i,c),$t("invalid",i)}BT(o,c),a=null;for(var u in c)if(c.hasOwnProperty(u)){var h=c[u];u==="children"?typeof h=="string"?i.textContent!==h&&(c.suppressHydrationWarning!==!0&&qh(i.textContent,h,t),a=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&qh(i.textContent,h,t),a=["children",""+h]):pu.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&$t("scroll",i)}switch(o){case"input":Gh(i),ak(i,c,!0);break;case"textarea":Gh(i),uk(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=Fp)}i=a,s.updateQueue=i,i!==null&&(s.flags|=4)}else{u=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=FO(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=u.createElement(o,{is:i.is}):(t=u.createElement(o),o==="select"&&(u=t,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):t=u.createElementNS(t,o),t[vo]=s,t[vu]=i,c0(t,s,!1,!1),s.stateNode=t;e:{switch(u=FT(o,i),o){case"dialog":$t("cancel",t),$t("close",t),a=i;break;case"iframe":case"object":case"embed":$t("load",t),a=i;break;case"video":case"audio":for(a=0;a<Xc.length;a++)$t(Xc[a],t);a=i;break;case"source":$t("error",t),a=i;break;case"img":case"image":case"link":$t("error",t),$t("load",t),a=i;break;case"details":$t("toggle",t),a=i;break;case"input":lk(t,i),a=NT(t,i),$t("invalid",t);break;case"option":a=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},a=kt({},i,{value:void 0}),$t("invalid",t);break;case"textarea":ck(t,i),a=DT(t,i),$t("invalid",t);break;default:a=i}BT(o,a),h=a;for(c in h)if(h.hasOwnProperty(c)){var p=h[c];c==="style"?HO(t,p):c==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&UO(t,p)):c==="children"?typeof p=="string"?(o!=="textarea"||p!=="")&&fu(t,p):typeof p=="number"&&fu(t,""+p):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(pu.hasOwnProperty(c)?p!=null&&c==="onScroll"&&$t("scroll",t):p!=null&&uy(t,c,p,u))}switch(o){case"input":Gh(t),ak(t,i,!1);break;case"textarea":Gh(t),uk(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Yi(i.value));break;case"select":t.multiple=!!i.multiple,c=i.value,c!=null?ra(t,!!i.multiple,c,!1):i.defaultValue!=null&&ra(t,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Fp)}switch(o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return bn(s),null;case 6:if(t&&s.stateNode!=null)d0(t,s,t.memoizedProps,i);else{if(typeof i!="string"&&s.stateNode===null)throw Error(re(166));if(o=Pr(Su.current),Pr(So.current),Zh(s)){if(i=s.stateNode,o=s.memoizedProps,i[vo]=s,(c=i.nodeValue!==o)&&(t=us,t!==null))switch(t.tag){case 3:qh(i.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qh(i.nodeValue,o,(t.mode&1)!==0)}c&&(s.flags|=4)}else i=(o.nodeType===9?o:o.ownerDocument).createTextNode(i),i[vo]=s,s.stateNode=i}return bn(s),null;case 13:if(_t(vt),i=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&cs!==null&&s.mode&1&&!(s.flags&128))RA(),ma(),s.flags|=98560,c=!1;else if(c=Zh(s),i!==null&&i.dehydrated!==null){if(t===null){if(!c)throw Error(re(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(re(317));c[vo]=s}else ma(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;bn(s),c=!1}else Zs!==null&&(Tb(Zs),Zs=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=o,s):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(s.child.flags|=8192,s.mode&1&&(t===null||vt.current&1?tn===0&&(tn=3):zy())),s.updateQueue!==null&&(s.flags|=4),bn(s),null);case 4:return $a(),db(t,s),t===null&&yu(s.stateNode.containerInfo),bn(s),null;case 10:return Ry(s.type._context),bn(s),null;case 17:return Yn(s.type)&&Up(),bn(s),null;case 19:if(_t(vt),c=s.memoizedState,c===null)return bn(s),null;if(i=(s.flags&128)!==0,u=c.rendering,u===null)if(i)Fc(c,!1);else{if(tn!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(u=Xp(t),u!==null){for(s.flags|=128,Fc(c,!1),i=u.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),s.subtreeFlags=0,i=o,o=s.child;o!==null;)c=o,t=i,c.flags&=14680066,u=c.alternate,u===null?(c.childLanes=0,c.lanes=t,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=u.childLanes,c.lanes=u.lanes,c.child=u.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=u.memoizedProps,c.memoizedState=u.memoizedState,c.updateQueue=u.updateQueue,c.type=u.type,t=u.dependencies,c.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return gt(vt,vt.current&1|2),s.child}t=t.sibling}c.tail!==null&&Ht()>Ta&&(s.flags|=128,i=!0,Fc(c,!1),s.lanes=4194304)}else{if(!i)if(t=Xp(u),t!==null){if(s.flags|=128,i=!0,o=t.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),Fc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!u.alternate&&!Et)return bn(s),null}else 2*Ht()-c.renderingStartTime>Ta&&o!==1073741824&&(s.flags|=128,i=!0,Fc(c,!1),s.lanes=4194304);c.isBackwards?(u.sibling=s.child,s.child=u):(o=c.last,o!==null?o.sibling=u:s.child=u,c.last=u)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Ht(),s.sibling=null,o=vt.current,gt(vt,i?o&1|2:o&1),s):(bn(s),null);case 22:case 23:return Wy(),i=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(s.flags|=8192),i&&s.mode&1?as&1073741824&&(bn(s),s.subtreeFlags&6&&(s.flags|=8192)):bn(s),null;case 24:return null;case 25:return null}throw Error(re(156,s.tag))}function oB(t,s){switch(Sy(s),s.tag){case 1:return Yn(s.type)&&Up(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return $a(),_t(Xn),_t(Sn),My(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return Ny(s),null;case 13:if(_t(vt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(re(340));ma()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return _t(vt),null;case 4:return $a(),null;case 10:return Ry(s.type._context),null;case 22:case 23:return Wy(),null;case 24:return null;default:return null}}var tp=!1,En=!1,iB=typeof WeakSet=="function"?WeakSet:Set,be=null;function Zl(t,s){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(i){Pt(t,s,i)}else o.current=null}function hb(t,s,o){try{o()}catch(i){Pt(t,s,i)}}var Qk=!1;function rB(t,s){if(KT=Dp,t=gA(),vy(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var i=o.getSelection&&o.getSelection();if(i&&i.rangeCount!==0){o=i.anchorNode;var a=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{o.nodeType,c.nodeType}catch{o=null;break e}var u=0,h=-1,p=-1,f=0,g=0,m=t,T=null;t:for(;;){for(var I;m!==o||a!==0&&m.nodeType!==3||(h=u+a),m!==c||i!==0&&m.nodeType!==3||(p=u+i),m.nodeType===3&&(u+=m.nodeValue.length),(I=m.firstChild)!==null;)T=m,m=I;for(;;){if(m===t)break t;if(T===o&&++f===a&&(h=u),T===c&&++g===i&&(p=u),(I=m.nextSibling)!==null)break;m=T,T=m.parentNode}m=I}o=h===-1||p===-1?null:{start:h,end:p}}else o=null}o=o||{start:0,end:0}}else o=null;for(JT={focusedElem:t,selectionRange:o},Dp=!1,be=s;be!==null;)if(s=be,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,be=t;else for(;be!==null;){s=be;try{var C=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var w=C.memoizedProps,A=C.memoizedState,S=s.stateNode,y=S.getSnapshotBeforeUpdate(s.elementType===s.type?w:Js(s.type,w),A);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=s.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(M){Pt(s,s.return,M)}if(t=s.sibling,t!==null){t.return=s.return,be=t;break}be=s.return}return C=Qk,Qk=!1,C}function nu(t,s,o){var i=s.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var c=a.destroy;a.destroy=void 0,c!==void 0&&hb(s,o,c)}a=a.next}while(a!==i)}}function kf(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&t)===t){var i=o.create;o.destroy=i()}o=o.next}while(o!==s)}}function pb(t){var s=t.ref;if(s!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof s=="function"?s(t):s.current=t}}function h0(t){var s=t.alternate;s!==null&&(t.alternate=null,h0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[vo],delete s[vu],delete s[QT],delete s[H1],delete s[G1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function p0(t){return t.tag===5||t.tag===3||t.tag===4}function eR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||p0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fb(t,s,o){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(t,s):o.insertBefore(t,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(t,o)):(s=o,s.appendChild(t)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Fp));else if(i!==4&&(t=t.child,t!==null))for(fb(t,s,o),t=t.sibling;t!==null;)fb(t,s,o),t=t.sibling}function mb(t,s,o){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?o.insertBefore(t,s):o.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(mb(t,s,o),t=t.sibling;t!==null;)mb(t,s,o),t=t.sibling}var pn=null,qs=!1;function wi(t,s,o){for(o=o.child;o!==null;)f0(t,s,o),o=o.sibling}function f0(t,s,o){if(Co&&typeof Co.onCommitFiberUnmount=="function")try{Co.onCommitFiberUnmount(bf,o)}catch{}switch(o.tag){case 5:En||Zl(o,s);case 6:var i=pn,a=qs;pn=null,wi(t,s,o),pn=i,qs=a,pn!==null&&(qs?(t=pn,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):pn.removeChild(o.stateNode));break;case 18:pn!==null&&(qs?(t=pn,o=o.stateNode,t.nodeType===8?G_(t.parentNode,o):t.nodeType===1&&G_(t,o),_u(t)):G_(pn,o.stateNode));break;case 4:i=pn,a=qs,pn=o.stateNode.containerInfo,qs=!0,wi(t,s,o),pn=i,qs=a;break;case 0:case 11:case 14:case 15:if(!En&&(i=o.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var c=a,u=c.destroy;c=c.tag,u!==void 0&&(c&2||c&4)&&hb(o,s,u),a=a.next}while(a!==i)}wi(t,s,o);break;case 1:if(!En&&(Zl(o,s),i=o.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=o.memoizedProps,i.state=o.memoizedState,i.componentWillUnmount()}catch(h){Pt(o,s,h)}wi(t,s,o);break;case 21:wi(t,s,o);break;case 22:o.mode&1?(En=(i=En)||o.memoizedState!==null,wi(t,s,o),En=i):wi(t,s,o);break;default:wi(t,s,o)}}function tR(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new iB),s.forEach(function(i){var a=mB.bind(null,t,i);o.has(i)||(o.add(i),i.then(a,a))})}}function Ys(t,s){var o=s.deletions;if(o!==null)for(var i=0;i<o.length;i++){var a=o[i];try{var c=t,u=s,h=u;e:for(;h!==null;){switch(h.tag){case 5:pn=h.stateNode,qs=!1;break e;case 3:pn=h.stateNode.containerInfo,qs=!0;break e;case 4:pn=h.stateNode.containerInfo,qs=!0;break e}h=h.return}if(pn===null)throw Error(re(160));f0(c,u,a),pn=null,qs=!1;var p=a.alternate;p!==null&&(p.return=null),a.return=null}catch(f){Pt(a,s,f)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)m0(s,t),s=s.sibling}function m0(t,s){var o=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ys(s,t),To(t),i&4){try{nu(3,t,t.return),kf(3,t)}catch(w){Pt(t,t.return,w)}try{nu(5,t,t.return)}catch(w){Pt(t,t.return,w)}}break;case 1:Ys(s,t),To(t),i&512&&o!==null&&Zl(o,o.return);break;case 5:if(Ys(s,t),To(t),i&512&&o!==null&&Zl(o,o.return),t.flags&32){var a=t.stateNode;try{fu(a,"")}catch(w){Pt(t,t.return,w)}}if(i&4&&(a=t.stateNode,a!=null)){var c=t.memoizedProps,u=o!==null?o.memoizedProps:c,h=t.type,p=t.updateQueue;if(t.updateQueue=null,p!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&PO(a,c),FT(h,u);var f=FT(h,c);for(u=0;u<p.length;u+=2){var g=p[u],m=p[u+1];g==="style"?HO(a,m):g==="dangerouslySetInnerHTML"?UO(a,m):g==="children"?fu(a,m):uy(a,g,m,f)}switch(h){case"input":MT(a,c);break;case"textarea":BO(a,c);break;case"select":var T=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var I=c.value;I!=null?ra(a,!!c.multiple,I,!1):T!==!!c.multiple&&(c.defaultValue!=null?ra(a,!!c.multiple,c.defaultValue,!0):ra(a,!!c.multiple,c.multiple?[]:"",!1))}a[vu]=c}catch(w){Pt(t,t.return,w)}}break;case 6:if(Ys(s,t),To(t),i&4){if(t.stateNode===null)throw Error(re(162));a=t.stateNode,c=t.memoizedProps;try{a.nodeValue=c}catch(w){Pt(t,t.return,w)}}break;case 3:if(Ys(s,t),To(t),i&4&&o!==null&&o.memoizedState.isDehydrated)try{_u(s.containerInfo)}catch(w){Pt(t,t.return,w)}break;case 4:Ys(s,t),To(t);break;case 13:Ys(s,t),To(t),a=t.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(Gy=Ht())),i&4&&tR(t);break;case 22:if(g=o!==null&&o.memoizedState!==null,t.mode&1?(En=(f=En)||g,Ys(s,t),En=f):Ys(s,t),To(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!g&&t.mode&1)for(be=t,g=t.child;g!==null;){for(m=be=g;be!==null;){switch(T=be,I=T.child,T.tag){case 0:case 11:case 14:case 15:nu(4,T,T.return);break;case 1:Zl(T,T.return);var C=T.stateNode;if(typeof C.componentWillUnmount=="function"){i=T,o=T.return;try{s=i,C.props=s.memoizedProps,C.state=s.memoizedState,C.componentWillUnmount()}catch(w){Pt(i,o,w)}}break;case 5:Zl(T,T.return);break;case 22:if(T.memoizedState!==null){sR(m);continue}}I!==null?(I.return=T,be=I):sR(m)}g=g.sibling}e:for(g=null,m=t;;){if(m.tag===5){if(g===null){g=m;try{a=m.stateNode,f?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=m.stateNode,p=m.memoizedProps.style,u=p!=null&&p.hasOwnProperty("display")?p.display:null,h.style.display=VO("display",u))}catch(w){Pt(t,t.return,w)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(w){Pt(t,t.return,w)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ys(s,t),To(t),i&4&&tR(t);break;case 21:break;default:Ys(s,t),To(t)}}function To(t){var s=t.flags;if(s&2){try{e:{for(var o=t.return;o!==null;){if(p0(o)){var i=o;break e}o=o.return}throw Error(re(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(fu(a,""),i.flags&=-33);var c=eR(t);mb(t,c,a);break;case 3:case 4:var u=i.stateNode.containerInfo,h=eR(t);fb(t,h,u);break;default:throw Error(re(161))}}catch(p){Pt(t,t.return,p)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function lB(t,s,o){be=t,g0(t)}function g0(t,s,o){for(var i=(t.mode&1)!==0;be!==null;){var a=be,c=a.child;if(a.tag===22&&i){var u=a.memoizedState!==null||tp;if(!u){var h=a.alternate,p=h!==null&&h.memoizedState!==null||En;h=tp;var f=En;if(tp=u,(En=p)&&!f)for(be=a;be!==null;)u=be,p=u.child,u.tag===22&&u.memoizedState!==null?oR(a):p!==null?(p.return=u,be=p):oR(a);for(;c!==null;)be=c,g0(c),c=c.sibling;be=a,tp=h,En=f}nR(t)}else a.subtreeFlags&8772&&c!==null?(c.return=a,be=c):nR(t)}}function nR(t){for(;be!==null;){var s=be;if(s.flags&8772){var o=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:En||kf(5,s);break;case 1:var i=s.stateNode;if(s.flags&4&&!En)if(o===null)i.componentDidMount();else{var a=s.elementType===s.type?o.memoizedProps:Js(s.type,o.memoizedProps);i.componentDidUpdate(a,o.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&Uk(s,c,i);break;case 3:var u=s.updateQueue;if(u!==null){if(o=null,s.child!==null)switch(s.child.tag){case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}Uk(s,u,o)}break;case 5:var h=s.stateNode;if(o===null&&s.flags&4){o=h;var p=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&o.focus();break;case"img":p.src&&(o.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var f=s.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&_u(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}En||s.flags&512&&pb(s)}catch(T){Pt(s,s.return,T)}}if(s===t){be=null;break}if(o=s.sibling,o!==null){o.return=s.return,be=o;break}be=s.return}}function sR(t){for(;be!==null;){var s=be;if(s===t){be=null;break}var o=s.sibling;if(o!==null){o.return=s.return,be=o;break}be=s.return}}function oR(t){for(;be!==null;){var s=be;try{switch(s.tag){case 0:case 11:case 15:var o=s.return;try{kf(4,s)}catch(p){Pt(s,o,p)}break;case 1:var i=s.stateNode;if(typeof i.componentDidMount=="function"){var a=s.return;try{i.componentDidMount()}catch(p){Pt(s,a,p)}}var c=s.return;try{pb(s)}catch(p){Pt(s,c,p)}break;case 5:var u=s.return;try{pb(s)}catch(p){Pt(s,u,p)}}}catch(p){Pt(s,s.return,p)}if(s===t){be=null;break}var h=s.sibling;if(h!==null){h.return=s.return,be=h;break}be=s.return}}var aB=Math.ceil,Jp=ri.ReactCurrentDispatcher,Vy=ri.ReactCurrentOwner,Ms=ri.ReactCurrentBatchConfig,nt=0,cn=null,Xt=null,mn=0,as=0,Ql=Qi(0),tn=0,Ru=null,Kr=0,Rf=0,Hy=0,su=null,jn=null,Gy=0,Ta=1/0,Yo=null,qp=!1,gb=null,ji=null,np=!1,Di=null,Zp=0,ou=0,$b=null,bp=-1,yp=0;function Mn(){return nt&6?Ht():bp!==-1?bp:bp=Ht()}function Wi(t){return t.mode&1?nt&2&&mn!==0?mn&-mn:W1.transition!==null?(yp===0&&(yp=eA()),yp):(t=at,t!==0||(t=window.event,t=t===void 0?16:lA(t.type)),t):1}function to(t,s,o,i){if(50<ou)throw ou=0,$b=null,Error(re(185));Wu(t,o,i),(!(nt&2)||t!==cn)&&(t===cn&&(!(nt&2)&&(Rf|=o),tn===4&&Mi(t,mn)),Kn(t,i),o===1&&nt===0&&!(s.mode&1)&&(Ta=Ht()+500,Sf&&er()))}function Kn(t,s){var o=t.callbackNode;WP(t,s);var i=Lp(t,t===cn?mn:0);if(i===0)o!==null&&pk(o),t.callbackNode=null,t.callbackPriority=0;else if(s=i&-i,t.callbackPriority!==s){if(o!=null&&pk(o),s===1)t.tag===0?j1(iR.bind(null,t)):IA(iR.bind(null,t)),U1(function(){!(nt&6)&&er()}),o=null;else{switch(tA(i)){case 1:o=my;break;case 4:o=ZO;break;case 16:o=Mp;break;case 536870912:o=QO;break;default:o=Mp}o=C0(o,$0.bind(null,t))}t.callbackPriority=s,t.callbackNode=o}}function $0(t,s){if(bp=-1,yp=0,nt&6)throw Error(re(327));var o=t.callbackNode;if(da()&&t.callbackNode!==o)return null;var i=Lp(t,t===cn?mn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||s)s=Qp(t,i);else{s=i;var a=nt;nt|=2;var c=T0();(cn!==t||mn!==s)&&(Yo=null,Ta=Ht()+500,Vr(t,s));do try{dB();break}catch(h){_0(t,h)}while(!0);ky(),Jp.current=c,nt=a,Xt!==null?s=0:(cn=null,mn=0,s=tn)}if(s!==0){if(s===2&&(a=jT(t),a!==0&&(i=a,s=_b(t,a))),s===1)throw o=Ru,Vr(t,0),Mi(t,i),Kn(t,Ht()),o;if(s===6)Mi(t,i);else{if(a=t.current.alternate,!(i&30)&&!cB(a)&&(s=Qp(t,i),s===2&&(c=jT(t),c!==0&&(i=c,s=_b(t,c))),s===1))throw o=Ru,Vr(t,0),Mi(t,i),Kn(t,Ht()),o;switch(t.finishedWork=a,t.finishedLanes=i,s){case 0:case 1:throw Error(re(345));case 2:Nr(t,jn,Yo);break;case 3:if(Mi(t,i),(i&130023424)===i&&(s=Gy+500-Ht(),10<s)){if(Lp(t,0)!==0)break;if(a=t.suspendedLanes,(a&i)!==i){Mn(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=ZT(Nr.bind(null,t,jn,Yo),s);break}Nr(t,jn,Yo);break;case 4:if(Mi(t,i),(i&4194240)===i)break;for(s=t.eventTimes,a=-1;0<i;){var u=31-eo(i);c=1<<u,u=s[u],u>a&&(a=u),i&=~c}if(i=a,i=Ht()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*aB(i/1960))-i,10<i){t.timeoutHandle=ZT(Nr.bind(null,t,jn,Yo),i);break}Nr(t,jn,Yo);break;case 5:Nr(t,jn,Yo);break;default:throw Error(re(329))}}}return Kn(t,Ht()),t.callbackNode===o?$0.bind(null,t):null}function _b(t,s){var o=su;return t.current.memoizedState.isDehydrated&&(Vr(t,s).flags|=256),t=Qp(t,s),t!==2&&(s=jn,jn=o,s!==null&&Tb(s)),t}function Tb(t){jn===null?jn=t:jn.push.apply(jn,t)}function cB(t){for(var s=t;;){if(s.flags&16384){var o=s.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var i=0;i<o.length;i++){var a=o[i],c=a.getSnapshot;a=a.value;try{if(!no(c(),a))return!1}catch{return!1}}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Mi(t,s){for(s&=~Hy,s&=~Rf,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var o=31-eo(s),i=1<<o;t[o]=-1,s&=~i}}function iR(t){if(nt&6)throw Error(re(327));da();var s=Lp(t,0);if(!(s&1))return Kn(t,Ht()),null;var o=Qp(t,s);if(t.tag!==0&&o===2){var i=jT(t);i!==0&&(s=i,o=_b(t,i))}if(o===1)throw o=Ru,Vr(t,0),Mi(t,s),Kn(t,Ht()),o;if(o===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Nr(t,jn,Yo),Kn(t,Ht()),null}function jy(t,s){var o=nt;nt|=1;try{return t(s)}finally{nt=o,nt===0&&(Ta=Ht()+500,Sf&&er())}}function Jr(t){Di!==null&&Di.tag===0&&!(nt&6)&&da();var s=nt;nt|=1;var o=Ms.transition,i=at;try{if(Ms.transition=null,at=1,t)return t()}finally{at=i,Ms.transition=o,nt=s,!(nt&6)&&er()}}function Wy(){as=Ql.current,_t(Ql)}function Vr(t,s){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,F1(o)),Xt!==null)for(o=Xt.return;o!==null;){var i=o;switch(Sy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Up();break;case 3:$a(),_t(Xn),_t(Sn),My();break;case 5:Ny(i);break;case 4:$a();break;case 13:_t(vt);break;case 19:_t(vt);break;case 10:Ry(i.type._context);break;case 22:case 23:Wy()}o=o.return}if(cn=t,Xt=t=zi(t.current,null),mn=as=s,tn=0,Ru=null,Hy=Rf=Kr=0,jn=su=null,Dr!==null){for(s=0;s<Dr.length;s++)if(o=Dr[s],i=o.interleaved,i!==null){o.interleaved=null;var a=i.next,c=o.pending;if(c!==null){var u=c.next;c.next=a,i.next=u}o.pending=i}Dr=null}return t}function _0(t,s){do{var o=Xt;try{if(ky(),$p.current=Kp,Yp){for(var i=St.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Yp=!1}if(Yr=0,ln=Qt=St=null,tu=!1,Iu=0,Vy.current=null,o===null||o.return===null){tn=1,Ru=s,Xt=null;break}e:{var c=t,u=o.return,h=o,p=s;if(s=mn,h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var f=p,g=h,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var T=g.alternate;T?(g.updateQueue=T.updateQueue,g.memoizedState=T.memoizedState,g.lanes=T.lanes):(g.updateQueue=null,g.memoizedState=null)}var I=zk(u);if(I!==null){I.flags&=-257,Xk(I,u,h,c,s),I.mode&1&&Wk(c,f,s),s=I,p=f;var C=s.updateQueue;if(C===null){var w=new Set;w.add(p),s.updateQueue=w}else C.add(p);break e}else{if(!(s&1)){Wk(c,f,s),zy();break e}p=Error(re(426))}}else if(Et&&h.mode&1){var A=zk(u);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Xk(A,u,h,c,s),Iy(_a(p,h));break e}}c=p=_a(p,h),tn!==4&&(tn=2),su===null?su=[c]:su.push(c),c=u;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var S=t0(c,p,s);Fk(c,S);break e;case 1:h=p;var y=c.type,v=c.stateNode;if(!(c.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ji===null||!ji.has(v)))){c.flags|=65536,s&=-s,c.lanes|=s;var M=n0(c,h,s);Fk(c,M);break e}}c=c.return}while(c!==null)}y0(o)}catch(L){s=L,Xt===o&&o!==null&&(Xt=o=o.return);continue}break}while(!0)}function T0(){var t=Jp.current;return Jp.current=Kp,t===null?Kp:t}function zy(){(tn===0||tn===3||tn===2)&&(tn=4),cn===null||!(Kr&268435455)&&!(Rf&268435455)||Mi(cn,mn)}function Qp(t,s){var o=nt;nt|=2;var i=T0();(cn!==t||mn!==s)&&(Yo=null,Vr(t,s));do try{uB();break}catch(a){_0(t,a)}while(!0);if(ky(),nt=o,Jp.current=i,Xt!==null)throw Error(re(261));return cn=null,mn=0,tn}function uB(){for(;Xt!==null;)b0(Xt)}function dB(){for(;Xt!==null&&!DP();)b0(Xt)}function b0(t){var s=v0(t.alternate,t,as);t.memoizedProps=t.pendingProps,s===null?y0(t):Xt=s,Vy.current=null}function y0(t){var s=t;do{var o=s.alternate;if(t=s.return,s.flags&32768){if(o=oB(o,s),o!==null){o.flags&=32767,Xt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tn=6,Xt=null;return}}else if(o=sB(o,s,as),o!==null){Xt=o;return}if(s=s.sibling,s!==null){Xt=s;return}Xt=s=t}while(s!==null);tn===0&&(tn=5)}function Nr(t,s,o){var i=at,a=Ms.transition;try{Ms.transition=null,at=1,hB(t,s,o,i)}finally{Ms.transition=a,at=i}return null}function hB(t,s,o,i){do da();while(Di!==null);if(nt&6)throw Error(re(327));o=t.finishedWork;var a=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var c=o.lanes|o.childLanes;if(zP(t,c),t===cn&&(Xt=cn=null,mn=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||np||(np=!0,C0(Mp,function(){return da(),null})),c=(o.flags&15990)!==0,o.subtreeFlags&15990||c){c=Ms.transition,Ms.transition=null;var u=at;at=1;var h=nt;nt|=4,Vy.current=null,rB(t,o),m0(o,t),A1(JT),Dp=!!KT,JT=KT=null,t.current=o,lB(o),PP(),nt=h,at=u,Ms.transition=c}else t.current=o;if(np&&(np=!1,Di=t,Zp=a),c=t.pendingLanes,c===0&&(ji=null),UP(o.stateNode),Kn(t,Ht()),s!==null)for(i=t.onRecoverableError,o=0;o<s.length;o++)a=s[o],i(a.value,{componentStack:a.stack,digest:a.digest});if(qp)throw qp=!1,t=gb,gb=null,t;return Zp&1&&t.tag!==0&&da(),c=t.pendingLanes,c&1?t===$b?ou++:(ou=0,$b=t):ou=0,er(),null}function da(){if(Di!==null){var t=tA(Zp),s=Ms.transition,o=at;try{if(Ms.transition=null,at=16>t?16:t,Di===null)var i=!1;else{if(t=Di,Di=null,Zp=0,nt&6)throw Error(re(331));var a=nt;for(nt|=4,be=t.current;be!==null;){var c=be,u=c.child;if(be.flags&16){var h=c.deletions;if(h!==null){for(var p=0;p<h.length;p++){var f=h[p];for(be=f;be!==null;){var g=be;switch(g.tag){case 0:case 11:case 15:nu(8,g,c)}var m=g.child;if(m!==null)m.return=g,be=m;else for(;be!==null;){g=be;var T=g.sibling,I=g.return;if(h0(g),g===f){be=null;break}if(T!==null){T.return=I,be=T;break}be=I}}}var C=c.alternate;if(C!==null){var w=C.child;if(w!==null){C.child=null;do{var A=w.sibling;w.sibling=null,w=A}while(w!==null)}}be=c}}if(c.subtreeFlags&2064&&u!==null)u.return=c,be=u;else e:for(;be!==null;){if(c=be,c.flags&2048)switch(c.tag){case 0:case 11:case 15:nu(9,c,c.return)}var S=c.sibling;if(S!==null){S.return=c.return,be=S;break e}be=c.return}}var y=t.current;for(be=y;be!==null;){u=be;var v=u.child;if(u.subtreeFlags&2064&&v!==null)v.return=u,be=v;else e:for(u=y;be!==null;){if(h=be,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:kf(9,h)}}catch(L){Pt(h,h.return,L)}if(h===u){be=null;break e}var M=h.sibling;if(M!==null){M.return=h.return,be=M;break e}be=h.return}}if(nt=a,er(),Co&&typeof Co.onPostCommitFiberRoot=="function")try{Co.onPostCommitFiberRoot(bf,t)}catch{}i=!0}return i}finally{at=o,Ms.transition=s}}return!1}function rR(t,s,o){s=_a(o,s),s=t0(t,s,1),t=Gi(t,s,1),s=Mn(),t!==null&&(Wu(t,1,s),Kn(t,s))}function Pt(t,s,o){if(t.tag===3)rR(t,t,o);else for(;s!==null;){if(s.tag===3){rR(s,t,o);break}else if(s.tag===1){var i=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ji===null||!ji.has(i))){t=_a(o,t),t=n0(s,t,1),s=Gi(s,t,1),t=Mn(),s!==null&&(Wu(s,1,t),Kn(s,t));break}}s=s.return}}function pB(t,s,o){var i=t.pingCache;i!==null&&i.delete(s),s=Mn(),t.pingedLanes|=t.suspendedLanes&o,cn===t&&(mn&o)===o&&(tn===4||tn===3&&(mn&130023424)===mn&&500>Ht()-Gy?Vr(t,0):Hy|=o),Kn(t,s)}function E0(t,s){s===0&&(t.mode&1?(s=zh,zh<<=1,!(zh&130023424)&&(zh=4194304)):s=1);var o=Mn();t=ti(t,s),t!==null&&(Wu(t,s,o),Kn(t,o))}function fB(t){var s=t.memoizedState,o=0;s!==null&&(o=s.retryLane),E0(t,o)}function mB(t,s){var o=0;switch(t.tag){case 13:var i=t.stateNode,a=t.memoizedState;a!==null&&(o=a.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(re(314))}i!==null&&i.delete(s),E0(t,o)}var v0;v0=function(t,s,o){if(t!==null)if(t.memoizedProps!==s.pendingProps||Xn.current)Wn=!0;else{if(!(t.lanes&o)&&!(s.flags&128))return Wn=!1,nB(t,s,o);Wn=!!(t.flags&131072)}else Wn=!1,Et&&s.flags&1048576&&wA(s,Gp,s.index);switch(s.lanes=0,s.tag){case 2:var i=s.type;Tp(t,s),t=s.pendingProps;var a=fa(s,Sn.current);ua(s,o),a=Dy(null,s,i,t,a,o);var c=Py();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Yn(i)?(c=!0,Vp(s)):c=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Oy(s),a.updater=wf,s.stateNode=a,a._reactInternals=s,ib(s,i,t,o),s=ab(null,s,i,!0,c,o)):(s.tag=0,Et&&c&&Cy(s),An(null,s,a,o),s=s.child),s;case 16:i=s.elementType;e:{switch(Tp(t,s),t=s.pendingProps,a=i._init,i=a(i._payload),s.type=i,a=s.tag=$B(i),t=Js(i,t),a){case 0:s=lb(null,s,i,t,o);break e;case 1:s=Jk(null,s,i,t,o);break e;case 11:s=Yk(null,s,i,t,o);break e;case 14:s=Kk(null,s,i,Js(i.type,t),o);break e}throw Error(re(306,i,""))}return s;case 0:return i=s.type,a=s.pendingProps,a=s.elementType===i?a:Js(i,a),lb(t,s,i,a,o);case 1:return i=s.type,a=s.pendingProps,a=s.elementType===i?a:Js(i,a),Jk(t,s,i,a,o);case 3:e:{if(r0(s),t===null)throw Error(re(387));i=s.pendingProps,c=s.memoizedState,a=c.element,NA(t,s),zp(s,i,null,o);var u=s.memoizedState;if(i=u.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){a=_a(Error(re(423)),s),s=qk(t,s,i,o,a);break e}else if(i!==a){a=_a(Error(re(424)),s),s=qk(t,s,i,o,a);break e}else for(cs=Hi(s.stateNode.containerInfo.firstChild),us=s,Et=!0,Zs=null,o=OA(s,null,i,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ma(),i===a){s=ni(t,s,o);break e}An(t,s,i,o)}s=s.child}return s;case 5:return MA(s),t===null&&nb(s),i=s.type,a=s.pendingProps,c=t!==null?t.memoizedProps:null,u=a.children,qT(i,a)?u=null:c!==null&&qT(i,c)&&(s.flags|=32),i0(t,s),An(t,s,u,o),s.child;case 6:return t===null&&nb(s),null;case 13:return l0(t,s,o);case 4:return Ay(s,s.stateNode.containerInfo),i=s.pendingProps,t===null?s.child=ga(s,null,i,o):An(t,s,i,o),s.child;case 11:return i=s.type,a=s.pendingProps,a=s.elementType===i?a:Js(i,a),Yk(t,s,i,a,o);case 7:return An(t,s,s.pendingProps,o),s.child;case 8:return An(t,s,s.pendingProps.children,o),s.child;case 12:return An(t,s,s.pendingProps.children,o),s.child;case 10:e:{if(i=s.type._context,a=s.pendingProps,c=s.memoizedProps,u=a.value,gt(jp,i._currentValue),i._currentValue=u,c!==null)if(no(c.value,u)){if(c.children===a.children&&!Xn.current){s=ni(t,s,o);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var h=c.dependencies;if(h!==null){u=c.child;for(var p=h.firstContext;p!==null;){if(p.context===i){if(c.tag===1){p=Zo(-1,o&-o),p.tag=2;var f=c.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?p.next=p:(p.next=g.next,g.next=p),f.pending=p}}c.lanes|=o,p=c.alternate,p!==null&&(p.lanes|=o),sb(c.return,o,s),h.lanes|=o;break}p=p.next}}else if(c.tag===10)u=c.type===s.type?null:c.child;else if(c.tag===18){if(u=c.return,u===null)throw Error(re(341));u.lanes|=o,h=u.alternate,h!==null&&(h.lanes|=o),sb(u,o,s),u=c.sibling}else u=c.child;if(u!==null)u.return=c;else for(u=c;u!==null;){if(u===s){u=null;break}if(c=u.sibling,c!==null){c.return=u.return,u=c;break}u=u.return}c=u}An(t,s,a.children,o),s=s.child}return s;case 9:return a=s.type,i=s.pendingProps.children,ua(s,o),a=Ps(a),i=i(a),s.flags|=1,An(t,s,i,o),s.child;case 14:return i=s.type,a=Js(i,s.pendingProps),a=Js(i.type,a),Kk(t,s,i,a,o);case 15:return s0(t,s,s.type,s.pendingProps,o);case 17:return i=s.type,a=s.pendingProps,a=s.elementType===i?a:Js(i,a),Tp(t,s),s.tag=1,Yn(i)?(t=!0,Vp(s)):t=!1,ua(s,o),e0(s,i,a),ib(s,i,a,o),ab(null,s,i,!0,t,o);case 19:return a0(t,s,o);case 22:return o0(t,s,o)}throw Error(re(156,s.tag))};function C0(t,s){return qO(t,s)}function gB(t,s,o,i){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(t,s,o,i){return new gB(t,s,o,i)}function Xy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $B(t){if(typeof t=="function")return Xy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hy)return 11;if(t===py)return 14}return 2}function zi(t,s){var o=t.alternate;return o===null?(o=Ns(t.tag,s,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=s,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Ep(t,s,o,i,a,c){var u=2;if(i=t,typeof t=="function")Xy(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case Gl:return Hr(o.children,a,c,s);case dy:u=8,a|=8;break;case RT:return t=Ns(12,o,s,a|2),t.elementType=RT,t.lanes=c,t;case xT:return t=Ns(13,o,s,a),t.elementType=xT,t.lanes=c,t;case OT:return t=Ns(19,o,s,a),t.elementType=OT,t.lanes=c,t;case MO:return xf(o,a,c,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case AO:u=10;break e;case NO:u=9;break e;case hy:u=11;break e;case py:u=14;break e;case xi:u=16,i=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return s=Ns(u,o,s,a),s.elementType=t,s.type=i,s.lanes=c,s}function Hr(t,s,o,i){return t=Ns(7,t,i,s),t.lanes=o,t}function xf(t,s,o,i){return t=Ns(22,t,i,s),t.elementType=MO,t.lanes=o,t.stateNode={isHidden:!1},t}function q_(t,s,o){return t=Ns(6,t,null,s),t.lanes=o,t}function Z_(t,s,o){return s=Ns(4,t.children!==null?t.children:[],t.key,s),s.lanes=o,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function _B(t,s,o,i,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=A_(0),this.expirationTimes=A_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A_(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Yy(t,s,o,i,a,c,u,h,p){return t=new _B(t,s,o,h,p),s===1?(s=1,c===!0&&(s|=8)):s=0,c=Ns(3,null,null,s),t.current=c,c.stateNode=t,c.memoizedState={element:i,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oy(c),t}function TB(t,s,o){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hl,key:i==null?null:""+i,children:t,containerInfo:s,implementation:o}}function S0(t){if(!t)return Ki;t=t._reactInternals;e:{if(Qr(t)!==t||t.tag!==1)throw Error(re(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Yn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(re(171))}if(t.tag===1){var o=t.type;if(Yn(o))return SA(t,o,s)}return s}function I0(t,s,o,i,a,c,u,h,p){return t=Yy(o,i,!0,t,a,c,u,h,p),t.context=S0(null),o=t.current,i=Mn(),a=Wi(o),c=Zo(i,a),c.callback=s??null,Gi(o,c,a),t.current.lanes=a,Wu(t,a,i),Kn(t,i),t}function Of(t,s,o,i){var a=s.current,c=Mn(),u=Wi(a);return o=S0(o),s.context===null?s.context=o:s.pendingContext=o,s=Zo(c,u),s.payload={element:t},i=i===void 0?null:i,i!==null&&(s.callback=i),t=Gi(a,s,u),t!==null&&(to(t,a,u,c),gp(t,a,u)),u}function ef(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lR(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<s?o:s}}function Ky(t,s){lR(t,s),(t=t.alternate)&&lR(t,s)}function bB(){return null}var w0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jy(t){this._internalRoot=t}Af.prototype.render=Jy.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(re(409));Of(t,s,null,null)};Af.prototype.unmount=Jy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Jr(function(){Of(null,t,null,null)}),s[ei]=null}};function Af(t){this._internalRoot=t}Af.prototype.unstable_scheduleHydration=function(t){if(t){var s=oA();t={blockedOn:null,target:t,priority:s};for(var o=0;o<Ni.length&&s!==0&&s<Ni[o].priority;o++);Ni.splice(o,0,t),o===0&&rA(t)}};function qy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function aR(){}function yB(t,s,o,i,a){if(a){if(typeof i=="function"){var c=i;i=function(){var f=ef(u);c.call(f)}}var u=I0(s,i,t,0,null,!1,!1,"",aR);return t._reactRootContainer=u,t[ei]=u.current,yu(t.nodeType===8?t.parentNode:t),Jr(),u}for(;a=t.lastChild;)t.removeChild(a);if(typeof i=="function"){var h=i;i=function(){var f=ef(p);h.call(f)}}var p=Yy(t,0,!1,null,null,!1,!1,"",aR);return t._reactRootContainer=p,t[ei]=p.current,yu(t.nodeType===8?t.parentNode:t),Jr(function(){Of(s,p,o,i)}),p}function Mf(t,s,o,i,a){var c=o._reactRootContainer;if(c){var u=c;if(typeof a=="function"){var h=a;a=function(){var p=ef(u);h.call(p)}}Of(s,u,t,a)}else u=yB(o,s,t,a,i);return ef(u)}nA=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var o=zc(s.pendingLanes);o!==0&&(gy(s,o|1),Kn(s,Ht()),!(nt&6)&&(Ta=Ht()+500,er()))}break;case 13:Jr(function(){var i=ti(t,1);if(i!==null){var a=Mn();to(i,t,1,a)}}),Ky(t,1)}};$y=function(t){if(t.tag===13){var s=ti(t,134217728);if(s!==null){var o=Mn();to(s,t,134217728,o)}Ky(t,134217728)}};sA=function(t){if(t.tag===13){var s=Wi(t),o=ti(t,s);if(o!==null){var i=Mn();to(o,t,s,i)}Ky(t,s)}};oA=function(){return at};iA=function(t,s){var o=at;try{return at=t,s()}finally{at=o}};VT=function(t,s,o){switch(s){case"input":if(MT(t,o),s=o.name,o.type==="radio"&&s!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<o.length;s++){var i=o[s];if(i!==t&&i.form===t.form){var a=Cf(i);if(!a)throw Error(re(90));DO(i),MT(i,a)}}}break;case"textarea":BO(t,o);break;case"select":s=o.value,s!=null&&ra(t,!!o.multiple,s,!1)}};WO=jy;zO=Jr;var EB={usingClientEntryPoint:!1,Events:[Xu,Xl,Cf,GO,jO,jy]},Uc={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vB={bundleType:Uc.bundleType,version:Uc.version,rendererPackageName:Uc.rendererPackageName,rendererConfig:Uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KO(t),t===null?null:t.stateNode},findFiberByHostInstance:Uc.findFiberByHostInstance||bB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sp.isDisabled&&sp.supportsFiber)try{bf=sp.inject(vB),Co=sp}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EB;ps.createPortal=function(t,s){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qy(s))throw Error(re(200));return TB(t,s,null,o)};ps.createRoot=function(t,s){if(!qy(t))throw Error(re(299));var o=!1,i="",a=w0;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Yy(t,1,!1,null,null,o,!1,i,a),t[ei]=s.current,yu(t.nodeType===8?t.parentNode:t),new Jy(s)};ps.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=KO(s),t=t===null?null:t.stateNode,t};ps.flushSync=function(t){return Jr(t)};ps.hydrate=function(t,s,o){if(!Nf(s))throw Error(re(200));return Mf(null,t,s,!0,o)};ps.hydrateRoot=function(t,s,o){if(!qy(t))throw Error(re(405));var i=o!=null&&o.hydratedSources||null,a=!1,c="",u=w0;if(o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onRecoverableError!==void 0&&(u=o.onRecoverableError)),s=I0(s,null,t,1,o??null,a,!1,c,u),t[ei]=s.current,yu(t),i)for(t=0;t<i.length;t++)o=i[t],a=o._getVersion,a=a(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,a]:s.mutableSourceEagerHydrationData.push(o,a);return new Af(s)};ps.render=function(t,s,o){if(!Nf(s))throw Error(re(200));return Mf(null,t,s,!1,o)};ps.unmountComponentAtNode=function(t){if(!Nf(t))throw Error(re(40));return t._reactRootContainer?(Jr(function(){Mf(null,null,t,!1,function(){t._reactRootContainer=null,t[ei]=null})}),!0):!1};ps.unstable_batchedUpdates=jy;ps.unstable_renderSubtreeIntoContainer=function(t,s,o,i){if(!Nf(o))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return Mf(t,s,o,!1,i)};ps.version="18.3.1-next-f1338f8080-20240426";function k0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k0)}catch(t){console.error(t)}}k0(),kO.exports=ps;var ea=kO.exports,R0,cR=ea;R0=cR.createRoot,cR.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xu(){return xu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},xu.apply(this,arguments)}var Pi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Pi||(Pi={}));const uR="popstate";function CB(t){t===void 0&&(t={});function s(i,a){let{pathname:c,search:u,hash:h}=i.location;return bb("",{pathname:c,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function o(i,a){return typeof a=="string"?a:tf(a)}return IB(s,o,null,t)}function Gt(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function x0(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function SB(){return Math.random().toString(36).substr(2,8)}function dR(t,s){return{usr:t.state,key:t.key,idx:s}}function bb(t,s,o,i){return o===void 0&&(o=null),xu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Ia(s):s,{state:o,key:s&&s.key||i||SB()})}function tf(t){let{pathname:s="/",search:o="",hash:i=""}=t;return o&&o!=="?"&&(s+=o.charAt(0)==="?"?o:"?"+o),i&&i!=="#"&&(s+=i.charAt(0)==="#"?i:"#"+i),s}function Ia(t){let s={};if(t){let o=t.indexOf("#");o>=0&&(s.hash=t.substr(o),t=t.substr(0,o));let i=t.indexOf("?");i>=0&&(s.search=t.substr(i),t=t.substr(0,i)),t&&(s.pathname=t)}return s}function IB(t,s,o,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:c=!1}=i,u=a.history,h=Pi.Pop,p=null,f=g();f==null&&(f=0,u.replaceState(xu({},u.state,{idx:f}),""));function g(){return(u.state||{idx:null}).idx}function m(){h=Pi.Pop;let A=g(),S=A==null?null:A-f;f=A,p&&p({action:h,location:w.location,delta:S})}function T(A,S){h=Pi.Push;let y=bb(w.location,A,S);f=g()+1;let v=dR(y,f),M=w.createHref(y);try{u.pushState(v,"",M)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;a.location.assign(M)}c&&p&&p({action:h,location:w.location,delta:1})}function I(A,S){h=Pi.Replace;let y=bb(w.location,A,S);f=g();let v=dR(y,f),M=w.createHref(y);u.replaceState(v,"",M),c&&p&&p({action:h,location:w.location,delta:0})}function C(A){let S=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof A=="string"?A:tf(A);return y=y.replace(/ $/,"%20"),Gt(S,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,S)}let w={get action(){return h},get location(){return t(a,u)},listen(A){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(uR,m),p=A,()=>{a.removeEventListener(uR,m),p=null}},createHref(A){return s(a,A)},createURL:C,encodeLocation(A){let S=C(A);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:T,replace:I,go(A){return u.go(A)}};return w}var hR;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hR||(hR={}));function wB(t,s,o){return o===void 0&&(o="/"),kB(t,s,o)}function kB(t,s,o,i){let a=typeof s=="string"?Ia(s):s,c=Zy(a.pathname||"/",o);if(c==null)return null;let u=O0(t);RB(u);let h=null;for(let p=0;h==null&&p<u.length;++p){let f=VB(c);h=BB(u[p],f)}return h}function O0(t,s,o,i){s===void 0&&(s=[]),o===void 0&&(o=[]),i===void 0&&(i="");let a=(c,u,h)=>{let p={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};p.relativePath.startsWith("/")&&(Gt(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let f=Xi([i,p.relativePath]),g=o.concat(p);c.children&&c.children.length>0&&(Gt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),O0(c.children,s,g,f)),!(c.path==null&&!c.index)&&s.push({path:f,score:DB(f,c.index),routesMeta:g})};return t.forEach((c,u)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))a(c,u);else for(let p of A0(c.path))a(c,u,p)}),s}function A0(t){let s=t.split("/");if(s.length===0)return[];let[o,...i]=s,a=o.endsWith("?"),c=o.replace(/\?$/,"");if(i.length===0)return a?[c,""]:[c];let u=A0(i.join("/")),h=[];return h.push(...u.map(p=>p===""?c:[c,p].join("/"))),a&&h.push(...u),h.map(p=>t.startsWith("/")&&p===""?"/":p)}function RB(t){t.sort((s,o)=>s.score!==o.score?o.score-s.score:PB(s.routesMeta.map(i=>i.childrenIndex),o.routesMeta.map(i=>i.childrenIndex)))}const xB=/^:[\w-]+$/,OB=3,AB=2,NB=1,MB=10,LB=-2,pR=t=>t==="*";function DB(t,s){let o=t.split("/"),i=o.length;return o.some(pR)&&(i+=LB),s&&(i+=AB),o.filter(a=>!pR(a)).reduce((a,c)=>a+(xB.test(c)?OB:c===""?NB:MB),i)}function PB(t,s){return t.length===s.length&&t.slice(0,-1).every((i,a)=>i===s[a])?t[t.length-1]-s[s.length-1]:0}function BB(t,s,o){let{routesMeta:i}=t,a={},c="/",u=[];for(let h=0;h<i.length;++h){let p=i[h],f=h===i.length-1,g=c==="/"?s:s.slice(c.length)||"/",m=FB({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},g),T=p.route;if(!m)return null;Object.assign(a,m.params),u.push({params:a,pathname:Xi([c,m.pathname]),pathnameBase:WB(Xi([c,m.pathnameBase])),route:T}),m.pathnameBase!=="/"&&(c=Xi([c,m.pathnameBase]))}return u}function FB(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[o,i]=UB(t.path,t.caseSensitive,t.end),a=s.match(o);if(!a)return null;let c=a[0],u=c.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((f,g,m)=>{let{paramName:T,isOptional:I}=g;if(T==="*"){let w=h[m]||"";u=c.slice(0,c.length-w.length).replace(/(.)\/+$/,"$1")}const C=h[m];return I&&!C?f[T]=void 0:f[T]=(C||"").replace(/%2F/g,"/"),f},{}),pathname:c,pathnameBase:u,pattern:t}}function UB(t,s,o){s===void 0&&(s=!1),o===void 0&&(o=!0),x0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),i]}function VB(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return x0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Zy(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let o=s.endsWith("/")?s.length-1:s.length,i=t.charAt(o);return i&&i!=="/"?null:t.slice(o)||"/"}function HB(t,s){s===void 0&&(s="/");let{pathname:o,search:i="",hash:a=""}=typeof t=="string"?Ia(t):t;return{pathname:o?o.startsWith("/")?o:GB(o,s):s,search:zB(i),hash:XB(a)}}function GB(t,s){let o=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?o.length>1&&o.pop():a!=="."&&o.push(a)}),o.length>1?o.join("/"):"/"}function Q_(t,s,o,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jB(t){return t.filter((s,o)=>o===0||s.route.path&&s.route.path.length>0)}function Qy(t,s){let o=jB(t);return s?o.map((i,a)=>a===o.length-1?i.pathname:i.pathnameBase):o.map(i=>i.pathnameBase)}function eE(t,s,o,i){i===void 0&&(i=!1);let a;typeof t=="string"?a=Ia(t):(a=xu({},t),Gt(!a.pathname||!a.pathname.includes("?"),Q_("?","pathname","search",a)),Gt(!a.pathname||!a.pathname.includes("#"),Q_("#","pathname","hash",a)),Gt(!a.search||!a.search.includes("#"),Q_("#","search","hash",a)));let c=t===""||a.pathname==="",u=c?"/":a.pathname,h;if(u==null)h=o;else{let m=s.length-1;if(!i&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),m-=1;a.pathname=T.join("/")}h=m>=0?s[m]:"/"}let p=HB(a,h),f=u&&u!=="/"&&u.endsWith("/"),g=(c||u===".")&&o.endsWith("/");return!p.pathname.endsWith("/")&&(f||g)&&(p.pathname+="/"),p}const Xi=t=>t.join("/").replace(/\/\/+/g,"/"),WB=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,XB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function YB(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const N0=["post","put","patch","delete"];new Set(N0);const KB=["get",...N0];new Set(KB);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Ou.apply(this,arguments)}const tE=O.createContext(null),JB=O.createContext(null),tr=O.createContext(null),Lf=O.createContext(null),li=O.createContext({outlet:null,matches:[],isDataRoute:!1}),M0=O.createContext(null);function qB(t,s){let{relative:o}=s===void 0?{}:s;wa()||Gt(!1);let{basename:i,navigator:a}=O.useContext(tr),{hash:c,pathname:u,search:h}=D0(t,{relative:o}),p=u;return i!=="/"&&(p=u==="/"?i:Xi([i,u])),a.createHref({pathname:p,search:h,hash:c})}function wa(){return O.useContext(Lf)!=null}function Ku(){return wa()||Gt(!1),O.useContext(Lf).location}function L0(t){O.useContext(tr).static||O.useLayoutEffect(t)}function ai(){let{isDataRoute:t}=O.useContext(li);return t?dF():ZB()}function ZB(){wa()||Gt(!1);let t=O.useContext(tE),{basename:s,future:o,navigator:i}=O.useContext(tr),{matches:a}=O.useContext(li),{pathname:c}=Ku(),u=JSON.stringify(Qy(a,o.v7_relativeSplatPath)),h=O.useRef(!1);return L0(()=>{h.current=!0}),O.useCallback(function(f,g){if(g===void 0&&(g={}),!h.current)return;if(typeof f=="number"){i.go(f);return}let m=eE(f,JSON.parse(u),c,g.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:Xi([s,m.pathname])),(g.replace?i.replace:i.push)(m,g.state,g)},[s,i,u,c,t])}function QB(){let{matches:t}=O.useContext(li),s=t[t.length-1];return s?s.params:{}}function D0(t,s){let{relative:o}=s===void 0?{}:s,{future:i}=O.useContext(tr),{matches:a}=O.useContext(li),{pathname:c}=Ku(),u=JSON.stringify(Qy(a,i.v7_relativeSplatPath));return O.useMemo(()=>eE(t,JSON.parse(u),c,o==="path"),[t,u,c,o])}function eF(t,s){return tF(t,s)}function tF(t,s,o,i){wa()||Gt(!1);let{navigator:a,static:c}=O.useContext(tr),{matches:u}=O.useContext(li),h=u[u.length-1],p=h?h.params:{};h&&h.pathname;let f=h?h.pathnameBase:"/";h&&h.route;let g=Ku(),m;if(s){var T;let S=typeof s=="string"?Ia(s):s;f==="/"||(T=S.pathname)!=null&&T.startsWith(f)||Gt(!1),m=S}else m=g;let I=m.pathname||"/",C=I;if(f!=="/"){let S=f.replace(/^\//,"").split("/");C="/"+I.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=wB(t,{pathname:C}),A=rF(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},p,S.params),pathname:Xi([f,a.encodeLocation?a.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:Xi([f,a.encodeLocation?a.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),u,o,i);return s&&A?O.createElement(Lf.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Pi.Pop}},A):A}function nF(){let t=uF(),s=YB(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),o=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},s),o?O.createElement("pre",{style:a},o):null,null)}const sF=O.createElement(nF,null);class oF extends O.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,o){return o.location!==s.location||o.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:o.error,location:o.location,revalidation:s.revalidation||o.revalidation}}componentDidCatch(s,o){console.error("React Router caught the following error during render",s,o)}render(){return this.state.error!==void 0?O.createElement(li.Provider,{value:this.props.routeContext},O.createElement(M0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iF(t){let{routeContext:s,match:o,children:i}=t,a=O.useContext(tE);return a&&a.static&&a.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=o.route.id),O.createElement(li.Provider,{value:s},i)}function rF(t,s,o,i){var a;if(s===void 0&&(s=[]),o===void 0&&(o=null),i===void 0&&(i=null),t==null){var c;if(!o)return null;if(o.errors)t=o.matches;else if((c=i)!=null&&c.v7_partialHydration&&s.length===0&&!o.initialized&&o.matches.length>0)t=o.matches;else return null}let u=t,h=(a=o)==null?void 0:a.errors;if(h!=null){let g=u.findIndex(m=>m.route.id&&(h==null?void 0:h[m.route.id])!==void 0);g>=0||Gt(!1),u=u.slice(0,Math.min(u.length,g+1))}let p=!1,f=-1;if(o&&i&&i.v7_partialHydration)for(let g=0;g<u.length;g++){let m=u[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=g),m.route.id){let{loaderData:T,errors:I}=o,C=m.route.loader&&T[m.route.id]===void 0&&(!I||I[m.route.id]===void 0);if(m.route.lazy||C){p=!0,f>=0?u=u.slice(0,f+1):u=[u[0]];break}}}return u.reduceRight((g,m,T)=>{let I,C=!1,w=null,A=null;o&&(I=h&&m.route.id?h[m.route.id]:void 0,w=m.route.errorElement||sF,p&&(f<0&&T===0?(hF("route-fallback"),C=!0,A=null):f===T&&(C=!0,A=m.route.hydrateFallbackElement||null)));let S=s.concat(u.slice(0,T+1)),y=()=>{let v;return I?v=w:C?v=A:m.route.Component?v=O.createElement(m.route.Component,null):m.route.element?v=m.route.element:v=g,O.createElement(iF,{match:m,routeContext:{outlet:g,matches:S,isDataRoute:o!=null},children:v})};return o&&(m.route.ErrorBoundary||m.route.errorElement||T===0)?O.createElement(oF,{location:o.location,revalidation:o.revalidation,component:w,error:I,children:y(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):y()},null)}var P0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(P0||{}),B0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(B0||{});function lF(t){let s=O.useContext(tE);return s||Gt(!1),s}function aF(t){let s=O.useContext(JB);return s||Gt(!1),s}function cF(t){let s=O.useContext(li);return s||Gt(!1),s}function F0(t){let s=cF(),o=s.matches[s.matches.length-1];return o.route.id||Gt(!1),o.route.id}function uF(){var t;let s=O.useContext(M0),o=aF(),i=F0();return s!==void 0?s:(t=o.errors)==null?void 0:t[i]}function dF(){let{router:t}=lF(P0.UseNavigateStable),s=F0(B0.UseNavigateStable),o=O.useRef(!1);return L0(()=>{o.current=!0}),O.useCallback(function(a,c){c===void 0&&(c={}),o.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Ou({fromRouteId:s},c)))},[t,s])}const fR={};function hF(t,s,o){fR[t]||(fR[t]=!0)}function pF(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function U0(t){let{to:s,replace:o,state:i,relative:a}=t;wa()||Gt(!1);let{future:c,static:u}=O.useContext(tr),{matches:h}=O.useContext(li),{pathname:p}=Ku(),f=ai(),g=eE(s,Qy(h,c.v7_relativeSplatPath),p,a==="path"),m=JSON.stringify(g);return O.useEffect(()=>f(JSON.parse(m),{replace:o,state:i,relative:a}),[f,m,a,o,i]),null}function Eo(t){Gt(!1)}function fF(t){let{basename:s="/",children:o=null,location:i,navigationType:a=Pi.Pop,navigator:c,static:u=!1,future:h}=t;wa()&&Gt(!1);let p=s.replace(/^\/*/,"/"),f=O.useMemo(()=>({basename:p,navigator:c,static:u,future:Ou({v7_relativeSplatPath:!1},h)}),[p,h,c,u]);typeof i=="string"&&(i=Ia(i));let{pathname:g="/",search:m="",hash:T="",state:I=null,key:C="default"}=i,w=O.useMemo(()=>{let A=Zy(g,p);return A==null?null:{location:{pathname:A,search:m,hash:T,state:I,key:C},navigationType:a}},[p,g,m,T,I,C,a]);return w==null?null:O.createElement(tr.Provider,{value:f},O.createElement(Lf.Provider,{children:o,value:w}))}function V0(t){let{children:s,location:o}=t;return eF(yb(s),o)}new Promise(()=>{});function yb(t,s){s===void 0&&(s=[]);let o=[];return O.Children.forEach(t,(i,a)=>{if(!O.isValidElement(i))return;let c=[...s,a];if(i.type===O.Fragment){o.push.apply(o,yb(i.props.children,c));return}i.type!==Eo&&Gt(!1),!i.props.index||!i.props.children||Gt(!1);let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=yb(i.props.children,c)),o.push(u)}),o}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eb(){return Eb=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Eb.apply(this,arguments)}function mF(t,s){if(t==null)return{};var o={},i=Object.keys(t),a,c;for(c=0;c<i.length;c++)a=i[c],!(s.indexOf(a)>=0)&&(o[a]=t[a]);return o}function gF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $F(t,s){return t.button===0&&(!s||s==="_self")&&!gF(t)}const _F=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TF="6";try{window.__reactRouterVersion=TF}catch{}const bF="startTransition",mR=pP[bF];function yF(t){let{basename:s,children:o,future:i,window:a}=t,c=O.useRef();c.current==null&&(c.current=CB({window:a,v5Compat:!0}));let u=c.current,[h,p]=O.useState({action:u.action,location:u.location}),{v7_startTransition:f}=i||{},g=O.useCallback(m=>{f&&mR?mR(()=>p(m)):p(m)},[p,f]);return O.useLayoutEffect(()=>u.listen(g),[u,g]),O.useEffect(()=>pF(i),[i]),O.createElement(fF,{basename:s,children:o,location:h.location,navigationType:h.action,navigator:u,future:i})}const EF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H0=O.forwardRef(function(s,o){let{onClick:i,relative:a,reloadDocument:c,replace:u,state:h,target:p,to:f,preventScrollReset:g,viewTransition:m}=s,T=mF(s,_F),{basename:I}=O.useContext(tr),C,w=!1;if(typeof f=="string"&&vF.test(f)&&(C=f,EF))try{let v=new URL(window.location.href),M=f.startsWith("//")?new URL(v.protocol+f):new URL(f),L=Zy(M.pathname,I);M.origin===v.origin&&L!=null?f=L+M.search+M.hash:w=!0}catch{}let A=qB(f,{relative:a}),S=CF(f,{replace:u,state:h,target:p,preventScrollReset:g,relative:a,viewTransition:m});function y(v){i&&i(v),v.defaultPrevented||S(v)}return O.createElement("a",Eb({},T,{href:C||A,onClick:w||c?i:y,ref:o,target:p}))});var gR;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gR||(gR={}));var $R;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($R||($R={}));function CF(t,s){let{target:o,replace:i,state:a,preventScrollReset:c,relative:u,viewTransition:h}=s===void 0?{}:s,p=ai(),f=Ku(),g=D0(t,{relative:u});return O.useCallback(m=>{if($F(m,o)){m.preventDefault();let T=i!==void 0?i:tf(f)===tf(g);p(t,{replace:T,state:a,preventScrollReset:c,relative:u,viewTransition:h})}},[f,p,g,i,a,o,t,c,u,h])}const _R=t=>{let s;const o=new Set,i=(f,g)=>{const m=typeof f=="function"?f(s):f;if(!Object.is(m,s)){const T=s;s=g??(typeof m!="object"||m===null)?m:Object.assign({},s,m),o.forEach(I=>I(s,T))}},a=()=>s,h={setState:i,getState:a,getInitialState:()=>p,subscribe:f=>(o.add(f),()=>o.delete(f))},p=s=t(i,a,h);return h},SF=t=>t?_R(t):_R,IF=t=>t;function wF(t,s=IF){const o=ye.useSyncExternalStore(t.subscribe,()=>s(t.getState()),()=>s(t.getInitialState()));return ye.useDebugValue(o),o}const TR=t=>{const s=SF(t),o=i=>wF(s,i);return Object.assign(o,s),o},kF=t=>t?TR(t):TR;function RF(t,s){let o;try{o=t()}catch{return}return{getItem:a=>{var c;const u=p=>p===null?null:JSON.parse(p,void 0),h=(c=o.getItem(a))!=null?c:null;return h instanceof Promise?h.then(u):u(h)},setItem:(a,c)=>o.setItem(a,JSON.stringify(c,void 0)),removeItem:a=>o.removeItem(a)}}const vb=t=>s=>{try{const o=t(s);return o instanceof Promise?o:{then(i){return vb(i)(o)},catch(i){return this}}}catch(o){return{then(i){return this},catch(i){return vb(i)(o)}}}},xF=(t,s)=>(o,i,a)=>{let c={storage:RF(()=>localStorage),partialize:w=>w,version:0,merge:(w,A)=>({...A,...w}),...s},u=!1;const h=new Set,p=new Set;let f=c.storage;if(!f)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),o(...w)},i,a);const g=()=>{const w=c.partialize({...i()});return f.setItem(c.name,{state:w,version:c.version})},m=a.setState;a.setState=(w,A)=>{m(w,A),g()};const T=t((...w)=>{o(...w),g()},i,a);a.getInitialState=()=>T;let I;const C=()=>{var w,A;if(!f)return;u=!1,h.forEach(y=>{var v;return y((v=i())!=null?v:T)});const S=((A=c.onRehydrateStorage)==null?void 0:A.call(c,(w=i())!=null?w:T))||void 0;return vb(f.getItem.bind(f))(c.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==c.version){if(c.migrate){const v=c.migrate(y.state,y.version);return v instanceof Promise?v.then(M=>[!0,M]):[!0,v]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var v;const[M,L]=y;if(I=c.merge(L,(v=i())!=null?v:T),o(I,!0),M)return g()}).then(()=>{S==null||S(I,void 0),I=i(),u=!0,p.forEach(y=>y(I))}).catch(y=>{S==null||S(void 0,y)})};return a.persist={setOptions:w=>{c={...c,...w},w.storage&&(f=w.storage)},clearStorage:()=>{f==null||f.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>C(),hasHydrated:()=>u,onHydrate:w=>(h.add(w),()=>{h.delete(w)}),onFinishHydration:w=>(p.add(w),()=>{p.delete(w)})},c.skipHydration||C(),I||T},OF=xF,AF={name:"app-store",partialize:t=>{const{workspace:s,...o}=t;return o}},NF=t=>({activeTab:"DESIGN",debugMode:!1,advanceMode:!1,currentProject:null,selectedScreen:null,selectedComponent:null,showDeleteDialog:!1,screenToDelete:null,history:{past:[],future:[]},blocklyXml:"",dartCode:"",workspace:null,setActiveTab:s=>t({activeTab:s}),setDebugMode:s=>t(o=>({debugMode:s(o.debugMode)})),setAdvanceMode:s=>t(o=>({advanceMode:s(o.advanceMode)})),setCurrentProject:s=>t(o=>({currentProject:s,history:{past:o.currentProject?[...o.history.past,o.currentProject]:[...o.history.past],future:[]}})),setSelectedScreen:s=>t({selectedScreen:s}),setSelectedComponent:s=>t({selectedComponent:s}),setShowDeleteDialog:s=>t({showDeleteDialog:s}),setScreenToDelete:s=>t({screenToDelete:s}),addScreen:s=>t(o=>({currentProject:o.currentProject?{...o.currentProject,screens:[...o.currentProject.screens,s]}:null,history:{past:[...o.history.past,o.currentProject],future:[]}})),deleteScreen:s=>t(o=>{var c;if(!o.currentProject)return o;const i=o.currentProject.screens.filter(u=>u.id!==s),a=o.selectedScreen===s?((c=i[0])==null?void 0:c.id)||null:o.selectedScreen;return{currentProject:{...o.currentProject,screens:i},selectedScreen:a,showDeleteDialog:!1,screenToDelete:null,history:{past:[...o.history.past,o.currentProject],future:[]}}}),updateScreen:(s,o)=>t(i=>i.currentProject?{currentProject:{...i.currentProject,screens:i.currentProject.screens.map(c=>c.id===s?{...c,...o}:c)},history:{past:[...i.history.past,i.currentProject],future:[]}}:i),addComponent:(s,o)=>t(i=>i.currentProject?{currentProject:{...i.currentProject,screens:i.currentProject.screens.map(c=>c.id===s?{...c,components:[...c.components,o]}:c)},history:{past:[...i.history.past,i.currentProject],future:[]}}:i),updateComponent:(s,o,i)=>t(a=>a.currentProject?{currentProject:{...a.currentProject,screens:a.currentProject.screens.map(u=>u.id===s?{...u,components:u.components.map(h=>h.id===o?{...h,...i}:h)}:u)},history:{past:[...a.history.past,a.currentProject],future:[]}}:a),deleteComponent:(s,o)=>t(i=>i.currentProject?{currentProject:{...i.currentProject,screens:i.currentProject.screens.map(c=>c.id===s?{...c,components:c.components.filter(u=>u.id!==o)}:c)},selectedComponent:null,history:{past:[...i.history.past,i.currentProject],future:[]}}:i),undo:()=>t(s=>{const o=s.history.past[s.history.past.length-1];if(!o)return s;const i=s.history.past.slice(0,-1);return{currentProject:o,history:{past:i,future:s.currentProject?[s.currentProject,...s.history.future]:[...s.history.future]}}}),redo:()=>t(s=>{const o=s.history.future[0];if(!o)return s;const i=s.history.future.slice(1);return{currentProject:o,history:{past:s.currentProject?[...s.history.past,s.currentProject]:[...s.history.past],future:i}}}),renameProject:s=>t(o=>o.currentProject?{currentProject:{...o.currentProject,name:s.trim()||"My First Project"},history:{past:[...o.history.past,o.currentProject],future:[]}}:o),setBlocklyXml:s=>t({blocklyXml:s}),setDartCode:s=>t({dartCode:s}),setWorkspace:s=>t({workspace:s}),clearComponents:s=>t(o=>o.currentProject?{currentProject:{...o.currentProject,screens:o.currentProject.screens.map(a=>a.id===s?{...a,components:[]}:a)},selectedComponent:null,history:{past:[...o.history.past,o.currentProject],future:[]}}:o)}),MF=OF(NF,AF),ds=kF(MF);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Le=(t,s)=>{const o=O.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:h="",children:p,...f},g)=>O.createElement("svg",{ref:g,...LF,width:a,height:a,stroke:i,strokeWidth:u?Number(c)*24/Number(a):c,className:["lucide",`lucide-${DF(t)}`,h].join(" "),...f},[...s.map(([m,T])=>O.createElement(m,T)),...Array.isArray(p)?p:[p]]));return o.displayName=`${t}`,o};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=Le("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=Le("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=Le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=Le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=Le("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=Le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=Le("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=Le("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=Le("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=Le("Computer",[["rect",{width:"14",height:"8",x:"5",y:"2",rx:"2",key:"wc9tft"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6 18h2",key:"rwmk9e"}],["path",{d:"M12 18h6",key:"aqd8w3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=Le("Donut",[["path",{d:"M20.5 10a2.5 2.5 0 0 1-2.4-3H18a2.95 2.95 0 0 1-2.6-4.4 10 10 0 1 0 6.3 7.1c-.3.2-.8.3-1.2.3",key:"19sr3x"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=Le("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=Le("FileInput",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 15h10",key:"jfw4w8"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=Le("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=Le("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=Le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=Le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=Le("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=Le("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=Le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=Le("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=Le("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=Le("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=Le("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=Le("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=Le("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=Le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=Le("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=Le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=Le("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=Le("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=Le("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=Le("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=Le("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=Le("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=Le("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function eN(t,s){return function(){return t.apply(s,arguments)}}const{toString:dU}=Object.prototype,{getPrototypeOf:sE}=Object,{iterator:Df,toStringTag:tN}=Symbol,Pf=(t=>s=>{const o=dU.call(s);return t[o]||(t[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),oo=t=>(t=t.toLowerCase(),s=>Pf(s)===t),Bf=t=>s=>typeof s===t,{isArray:ka}=Array,Nu=Bf("undefined");function hU(t){return t!==null&&!Nu(t)&&t.constructor!==null&&!Nu(t.constructor)&&Jn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nN=oo("ArrayBuffer");function pU(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&nN(t.buffer),s}const fU=Bf("string"),Jn=Bf("function"),sN=Bf("number"),Ff=t=>t!==null&&typeof t=="object",mU=t=>t===!0||t===!1,vp=t=>{if(Pf(t)!=="object")return!1;const s=sE(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(tN in t)&&!(Df in t)},gU=oo("Date"),$U=oo("File"),_U=oo("Blob"),TU=oo("FileList"),bU=t=>Ff(t)&&Jn(t.pipe),yU=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Jn(t.append)&&((s=Pf(t))==="formdata"||s==="object"&&Jn(t.toString)&&t.toString()==="[object FormData]"))},EU=oo("URLSearchParams"),[vU,CU,SU,IU]=["ReadableStream","Request","Response","Headers"].map(oo),wU=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ju(t,s,{allOwnKeys:o=!1}={}){if(t===null||typeof t>"u")return;let i,a;if(typeof t!="object"&&(t=[t]),ka(t))for(i=0,a=t.length;i<a;i++)s.call(null,t[i],i,t);else{const c=o?Object.getOwnPropertyNames(t):Object.keys(t),u=c.length;let h;for(i=0;i<u;i++)h=c[i],s.call(null,t[h],h,t)}}function oN(t,s){s=s.toLowerCase();const o=Object.keys(t);let i=o.length,a;for(;i-- >0;)if(a=o[i],s===a.toLowerCase())return a;return null}const Br=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,iN=t=>!Nu(t)&&t!==Br;function Sb(){const{caseless:t}=iN(this)&&this||{},s={},o=(i,a)=>{const c=t&&oN(s,a)||a;vp(s[c])&&vp(i)?s[c]=Sb(s[c],i):vp(i)?s[c]=Sb({},i):ka(i)?s[c]=i.slice():s[c]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Ju(arguments[i],o);return s}const kU=(t,s,o,{allOwnKeys:i}={})=>(Ju(s,(a,c)=>{o&&Jn(a)?t[c]=eN(a,o):t[c]=a},{allOwnKeys:i}),t),RU=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),xU=(t,s,o,i)=>{t.prototype=Object.create(s.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),o&&Object.assign(t.prototype,o)},OU=(t,s,o,i)=>{let a,c,u;const h={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),c=a.length;c-- >0;)u=a[c],(!i||i(u,t,s))&&!h[u]&&(s[u]=t[u],h[u]=!0);t=o!==!1&&sE(t)}while(t&&(!o||o(t,s))&&t!==Object.prototype);return s},AU=(t,s,o)=>{t=String(t),(o===void 0||o>t.length)&&(o=t.length),o-=s.length;const i=t.indexOf(s,o);return i!==-1&&i===o},NU=t=>{if(!t)return null;if(ka(t))return t;let s=t.length;if(!sN(s))return null;const o=new Array(s);for(;s-- >0;)o[s]=t[s];return o},MU=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&sE(Uint8Array)),LU=(t,s)=>{const i=(t&&t[Df]).call(t);let a;for(;(a=i.next())&&!a.done;){const c=a.value;s.call(t,c[0],c[1])}},DU=(t,s)=>{let o;const i=[];for(;(o=t.exec(s))!==null;)i.push(o);return i},PU=oo("HTMLFormElement"),BU=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,i,a){return i.toUpperCase()+a}),bR=(({hasOwnProperty:t})=>(s,o)=>t.call(s,o))(Object.prototype),FU=oo("RegExp"),rN=(t,s)=>{const o=Object.getOwnPropertyDescriptors(t),i={};Ju(o,(a,c)=>{let u;(u=s(a,c,t))!==!1&&(i[c]=u||a)}),Object.defineProperties(t,i)},UU=t=>{rN(t,(s,o)=>{if(Jn(t)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const i=t[o];if(Jn(i)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},VU=(t,s)=>{const o={},i=a=>{a.forEach(c=>{o[c]=!0})};return ka(t)?i(t):i(String(t).split(s)),o},HU=()=>{},GU=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function jU(t){return!!(t&&Jn(t.append)&&t[tN]==="FormData"&&t[Df])}const WU=t=>{const s=new Array(10),o=(i,a)=>{if(Ff(i)){if(s.indexOf(i)>=0)return;if(!("toJSON"in i)){s[a]=i;const c=ka(i)?[]:{};return Ju(i,(u,h)=>{const p=o(u,a+1);!Nu(p)&&(c[h]=p)}),s[a]=void 0,c}}return i};return o(t,0)},zU=oo("AsyncFunction"),XU=t=>t&&(Ff(t)||Jn(t))&&Jn(t.then)&&Jn(t.catch),lN=((t,s)=>t?setImmediate:s?((o,i)=>(Br.addEventListener("message",({source:a,data:c})=>{a===Br&&c===o&&i.length&&i.shift()()},!1),a=>{i.push(a),Br.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",Jn(Br.postMessage)),YU=typeof queueMicrotask<"u"?queueMicrotask.bind(Br):typeof process<"u"&&process.nextTick||lN,KU=t=>t!=null&&Jn(t[Df]),J={isArray:ka,isArrayBuffer:nN,isBuffer:hU,isFormData:yU,isArrayBufferView:pU,isString:fU,isNumber:sN,isBoolean:mU,isObject:Ff,isPlainObject:vp,isReadableStream:vU,isRequest:CU,isResponse:SU,isHeaders:IU,isUndefined:Nu,isDate:gU,isFile:$U,isBlob:_U,isRegExp:FU,isFunction:Jn,isStream:bU,isURLSearchParams:EU,isTypedArray:MU,isFileList:TU,forEach:Ju,merge:Sb,extend:kU,trim:wU,stripBOM:RU,inherits:xU,toFlatObject:OU,kindOf:Pf,kindOfTest:oo,endsWith:AU,toArray:NU,forEachEntry:LU,matchAll:DU,isHTMLForm:PU,hasOwnProperty:bR,hasOwnProp:bR,reduceDescriptors:rN,freezeMethods:UU,toObjectSet:VU,toCamelCase:BU,noop:HU,toFiniteNumber:GU,findKey:oN,global:Br,isContextDefined:iN,isSpecCompliantForm:jU,toJSONObject:WU,isAsyncFn:zU,isThenable:XU,setImmediate:lN,asap:YU,isIterable:KU};function Pe(t,s,o,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),o&&(this.config=o),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}J.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.status}}});const aN=Pe.prototype,cN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{cN[t]={value:t}});Object.defineProperties(Pe,cN);Object.defineProperty(aN,"isAxiosError",{value:!0});Pe.from=(t,s,o,i,a,c)=>{const u=Object.create(aN);return J.toFlatObject(t,u,function(p){return p!==Error.prototype},h=>h!=="isAxiosError"),Pe.call(u,t.message,s,o,i,a),u.cause=t,u.name=t.name,c&&Object.assign(u,c),u};const JU=null;function Ib(t){return J.isPlainObject(t)||J.isArray(t)}function uN(t){return J.endsWith(t,"[]")?t.slice(0,-2):t}function yR(t,s,o){return t?t.concat(s).map(function(a,c){return a=uN(a),!o&&c?"["+a+"]":a}).join(o?".":""):s}function qU(t){return J.isArray(t)&&!t.some(Ib)}const ZU=J.toFlatObject(J,{},null,function(s){return/^is[A-Z]/.test(s)});function Uf(t,s,o){if(!J.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,o=J.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,A){return!J.isUndefined(A[w])});const i=o.metaTokens,a=o.visitor||g,c=o.dots,u=o.indexes,p=(o.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(s);if(!J.isFunction(a))throw new TypeError("visitor must be a function");function f(C){if(C===null)return"";if(J.isDate(C))return C.toISOString();if(!p&&J.isBlob(C))throw new Pe("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(C)||J.isTypedArray(C)?p&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function g(C,w,A){let S=C;if(C&&!A&&typeof C=="object"){if(J.endsWith(w,"{}"))w=i?w:w.slice(0,-2),C=JSON.stringify(C);else if(J.isArray(C)&&qU(C)||(J.isFileList(C)||J.endsWith(w,"[]"))&&(S=J.toArray(C)))return w=uN(w),S.forEach(function(v,M){!(J.isUndefined(v)||v===null)&&s.append(u===!0?yR([w],M,c):u===null?w:w+"[]",f(v))}),!1}return Ib(C)?!0:(s.append(yR(A,w,c),f(C)),!1)}const m=[],T=Object.assign(ZU,{defaultVisitor:g,convertValue:f,isVisitable:Ib});function I(C,w){if(!J.isUndefined(C)){if(m.indexOf(C)!==-1)throw Error("Circular reference detected in "+w.join("."));m.push(C),J.forEach(C,function(S,y){(!(J.isUndefined(S)||S===null)&&a.call(s,S,J.isString(y)?y.trim():y,w,T))===!0&&I(S,w?w.concat(y):[y])}),m.pop()}}if(!J.isObject(t))throw new TypeError("data must be an object");return I(t),s}function ER(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return s[i]})}function oE(t,s){this._pairs=[],t&&Uf(t,this,s)}const dN=oE.prototype;dN.append=function(s,o){this._pairs.push([s,o])};dN.toString=function(s){const o=s?function(i){return s.call(this,i,ER)}:ER;return this._pairs.map(function(a){return o(a[0])+"="+o(a[1])},"").join("&")};function QU(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hN(t,s,o){if(!s)return t;const i=o&&o.encode||QU;J.isFunction(o)&&(o={serialize:o});const a=o&&o.serialize;let c;if(a?c=a(s,o):c=J.isURLSearchParams(s)?s.toString():new oE(s,o).toString(i),c){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}class vR{constructor(){this.handlers=[]}use(s,o,i){return this.handlers.push({fulfilled:s,rejected:o,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){J.forEach(this.handlers,function(i){i!==null&&s(i)})}}const pN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eV=typeof URLSearchParams<"u"?URLSearchParams:oE,tV=typeof FormData<"u"?FormData:null,nV=typeof Blob<"u"?Blob:null,sV={isBrowser:!0,classes:{URLSearchParams:eV,FormData:tV,Blob:nV},protocols:["http","https","file","blob","url","data"]},iE=typeof window<"u"&&typeof document<"u",wb=typeof navigator=="object"&&navigator||void 0,oV=iE&&(!wb||["ReactNative","NativeScript","NS"].indexOf(wb.product)<0),iV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rV=iE&&window.location.href||"http://localhost",lV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:iE,hasStandardBrowserEnv:oV,hasStandardBrowserWebWorkerEnv:iV,navigator:wb,origin:rV},Symbol.toStringTag,{value:"Module"})),vn={...lV,...sV};function aV(t,s){return Uf(t,new vn.classes.URLSearchParams,Object.assign({visitor:function(o,i,a,c){return vn.isNode&&J.isBuffer(o)?(this.append(i,o.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},s))}function cV(t){return J.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function uV(t){const s={},o=Object.keys(t);let i;const a=o.length;let c;for(i=0;i<a;i++)c=o[i],s[c]=t[c];return s}function fN(t){function s(o,i,a,c){let u=o[c++];if(u==="__proto__")return!0;const h=Number.isFinite(+u),p=c>=o.length;return u=!u&&J.isArray(a)?a.length:u,p?(J.hasOwnProp(a,u)?a[u]=[a[u],i]:a[u]=i,!h):((!a[u]||!J.isObject(a[u]))&&(a[u]=[]),s(o,i,a[u],c)&&J.isArray(a[u])&&(a[u]=uV(a[u])),!h)}if(J.isFormData(t)&&J.isFunction(t.entries)){const o={};return J.forEachEntry(t,(i,a)=>{s(cV(i),a,o,0)}),o}return null}function dV(t,s,o){if(J.isString(t))try{return(s||JSON.parse)(t),J.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(o||JSON.stringify)(t)}const qu={transitional:pN,adapter:["xhr","http","fetch"],transformRequest:[function(s,o){const i=o.getContentType()||"",a=i.indexOf("application/json")>-1,c=J.isObject(s);if(c&&J.isHTMLForm(s)&&(s=new FormData(s)),J.isFormData(s))return a?JSON.stringify(fN(s)):s;if(J.isArrayBuffer(s)||J.isBuffer(s)||J.isStream(s)||J.isFile(s)||J.isBlob(s)||J.isReadableStream(s))return s;if(J.isArrayBufferView(s))return s.buffer;if(J.isURLSearchParams(s))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let h;if(c){if(i.indexOf("application/x-www-form-urlencoded")>-1)return aV(s,this.formSerializer).toString();if((h=J.isFileList(s))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Uf(h?{"files[]":s}:s,p&&new p,this.formSerializer)}}return c||a?(o.setContentType("application/json",!1),dV(s)):s}],transformResponse:[function(s){const o=this.transitional||qu.transitional,i=o&&o.forcedJSONParsing,a=this.responseType==="json";if(J.isResponse(s)||J.isReadableStream(s))return s;if(s&&J.isString(s)&&(i&&!this.responseType||a)){const u=!(o&&o.silentJSONParsing)&&a;try{return JSON.parse(s)}catch(h){if(u)throw h.name==="SyntaxError"?Pe.from(h,Pe.ERR_BAD_RESPONSE,this,null,this.response):h}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vn.classes.FormData,Blob:vn.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],t=>{qu.headers[t]={}});const hV=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pV=t=>{const s={};let o,i,a;return t&&t.split(`
`).forEach(function(u){a=u.indexOf(":"),o=u.substring(0,a).trim().toLowerCase(),i=u.substring(a+1).trim(),!(!o||s[o]&&hV[o])&&(o==="set-cookie"?s[o]?s[o].push(i):s[o]=[i]:s[o]=s[o]?s[o]+", "+i:i)}),s},CR=Symbol("internals");function Vc(t){return t&&String(t).trim().toLowerCase()}function Cp(t){return t===!1||t==null?t:J.isArray(t)?t.map(Cp):String(t)}function fV(t){const s=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=o.exec(t);)s[i[1]]=i[2];return s}const mV=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function tT(t,s,o,i,a){if(J.isFunction(i))return i.call(this,s,o);if(a&&(s=o),!!J.isString(s)){if(J.isString(i))return s.indexOf(i)!==-1;if(J.isRegExp(i))return i.test(s)}}function gV(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,o,i)=>o.toUpperCase()+i)}function $V(t,s){const o=J.toCamelCase(" "+s);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+o,{value:function(a,c,u){return this[i].call(this,s,a,c,u)},configurable:!0})})}let qn=class{constructor(s){s&&this.set(s)}set(s,o,i){const a=this;function c(h,p,f){const g=Vc(p);if(!g)throw new Error("header name must be a non-empty string");const m=J.findKey(a,g);(!m||a[m]===void 0||f===!0||f===void 0&&a[m]!==!1)&&(a[m||p]=Cp(h))}const u=(h,p)=>J.forEach(h,(f,g)=>c(f,g,p));if(J.isPlainObject(s)||s instanceof this.constructor)u(s,o);else if(J.isString(s)&&(s=s.trim())&&!mV(s))u(pV(s),o);else if(J.isObject(s)&&J.isIterable(s)){let h={},p,f;for(const g of s){if(!J.isArray(g))throw TypeError("Object iterator must return a key-value pair");h[f=g[0]]=(p=h[f])?J.isArray(p)?[...p,g[1]]:[p,g[1]]:g[1]}u(h,o)}else s!=null&&c(o,s,i);return this}get(s,o){if(s=Vc(s),s){const i=J.findKey(this,s);if(i){const a=this[i];if(!o)return a;if(o===!0)return fV(a);if(J.isFunction(o))return o.call(this,a,i);if(J.isRegExp(o))return o.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,o){if(s=Vc(s),s){const i=J.findKey(this,s);return!!(i&&this[i]!==void 0&&(!o||tT(this,this[i],i,o)))}return!1}delete(s,o){const i=this;let a=!1;function c(u){if(u=Vc(u),u){const h=J.findKey(i,u);h&&(!o||tT(i,i[h],h,o))&&(delete i[h],a=!0)}}return J.isArray(s)?s.forEach(c):c(s),a}clear(s){const o=Object.keys(this);let i=o.length,a=!1;for(;i--;){const c=o[i];(!s||tT(this,this[c],c,s,!0))&&(delete this[c],a=!0)}return a}normalize(s){const o=this,i={};return J.forEach(this,(a,c)=>{const u=J.findKey(i,c);if(u){o[u]=Cp(a),delete o[c];return}const h=s?gV(c):String(c).trim();h!==c&&delete o[c],o[h]=Cp(a),i[h]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const o=Object.create(null);return J.forEach(this,(i,a)=>{i!=null&&i!==!1&&(o[a]=s&&J.isArray(i)?i.join(", "):i)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,o])=>s+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...o){const i=new this(s);return o.forEach(a=>i.set(a)),i}static accessor(s){const i=(this[CR]=this[CR]={accessors:{}}).accessors,a=this.prototype;function c(u){const h=Vc(u);i[h]||($V(a,u),i[h]=!0)}return J.isArray(s)?s.forEach(c):c(s),this}};qn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);J.reduceDescriptors(qn.prototype,({value:t},s)=>{let o=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(i){this[o]=i}}});J.freezeMethods(qn);function nT(t,s){const o=this||qu,i=s||o,a=qn.from(i.headers);let c=i.data;return J.forEach(t,function(h){c=h.call(o,c,a.normalize(),s?s.status:void 0)}),a.normalize(),c}function mN(t){return!!(t&&t.__CANCEL__)}function Ra(t,s,o){Pe.call(this,t??"canceled",Pe.ERR_CANCELED,s,o),this.name="CanceledError"}J.inherits(Ra,Pe,{__CANCEL__:!0});function gN(t,s,o){const i=o.config.validateStatus;!o.status||!i||i(o.status)?t(o):s(new Pe("Request failed with status code "+o.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function _V(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function TV(t,s){t=t||10;const o=new Array(t),i=new Array(t);let a=0,c=0,u;return s=s!==void 0?s:1e3,function(p){const f=Date.now(),g=i[c];u||(u=f),o[a]=p,i[a]=f;let m=c,T=0;for(;m!==a;)T+=o[m++],m=m%t;if(a=(a+1)%t,a===c&&(c=(c+1)%t),f-u<s)return;const I=g&&f-g;return I?Math.round(T*1e3/I):void 0}}function bV(t,s){let o=0,i=1e3/s,a,c;const u=(f,g=Date.now())=>{o=g,a=null,c&&(clearTimeout(c),c=null),t.apply(null,f)};return[(...f)=>{const g=Date.now(),m=g-o;m>=i?u(f,g):(a=f,c||(c=setTimeout(()=>{c=null,u(a)},i-m)))},()=>a&&u(a)]}const nf=(t,s,o=3)=>{let i=0;const a=TV(50,250);return bV(c=>{const u=c.loaded,h=c.lengthComputable?c.total:void 0,p=u-i,f=a(p),g=u<=h;i=u;const m={loaded:u,total:h,progress:h?u/h:void 0,bytes:p,rate:f||void 0,estimated:f&&h&&g?(h-u)/f:void 0,event:c,lengthComputable:h!=null,[s?"download":"upload"]:!0};t(m)},o)},SR=(t,s)=>{const o=t!=null;return[i=>s[0]({lengthComputable:o,total:t,loaded:i}),s[1]]},IR=t=>(...s)=>J.asap(()=>t(...s)),yV=vn.hasStandardBrowserEnv?((t,s)=>o=>(o=new URL(o,vn.origin),t.protocol===o.protocol&&t.host===o.host&&(s||t.port===o.port)))(new URL(vn.origin),vn.navigator&&/(msie|trident)/i.test(vn.navigator.userAgent)):()=>!0,EV=vn.hasStandardBrowserEnv?{write(t,s,o,i,a,c){const u=[t+"="+encodeURIComponent(s)];J.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),J.isString(i)&&u.push("path="+i),J.isString(a)&&u.push("domain="+a),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vV(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function CV(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function $N(t,s,o){let i=!vV(s);return t&&(i||o==!1)?CV(t,s):s}const wR=t=>t instanceof qn?{...t}:t;function qr(t,s){s=s||{};const o={};function i(f,g,m,T){return J.isPlainObject(f)&&J.isPlainObject(g)?J.merge.call({caseless:T},f,g):J.isPlainObject(g)?J.merge({},g):J.isArray(g)?g.slice():g}function a(f,g,m,T){if(J.isUndefined(g)){if(!J.isUndefined(f))return i(void 0,f,m,T)}else return i(f,g,m,T)}function c(f,g){if(!J.isUndefined(g))return i(void 0,g)}function u(f,g){if(J.isUndefined(g)){if(!J.isUndefined(f))return i(void 0,f)}else return i(void 0,g)}function h(f,g,m){if(m in s)return i(f,g);if(m in t)return i(void 0,f)}const p={url:c,method:c,data:c,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:h,headers:(f,g,m)=>a(wR(f),wR(g),m,!0)};return J.forEach(Object.keys(Object.assign({},t,s)),function(g){const m=p[g]||a,T=m(t[g],s[g],g);J.isUndefined(T)&&m!==h||(o[g]=T)}),o}const _N=t=>{const s=qr({},t);let{data:o,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:c,headers:u,auth:h}=s;s.headers=u=qn.from(u),s.url=hN($N(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&u.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let p;if(J.isFormData(o)){if(vn.hasStandardBrowserEnv||vn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((p=u.getContentType())!==!1){const[f,...g]=p?p.split(";").map(m=>m.trim()).filter(Boolean):[];u.setContentType([f||"multipart/form-data",...g].join("; "))}}if(vn.hasStandardBrowserEnv&&(i&&J.isFunction(i)&&(i=i(s)),i||i!==!1&&yV(s.url))){const f=a&&c&&EV.read(c);f&&u.set(a,f)}return s},SV=typeof XMLHttpRequest<"u",IV=SV&&function(t){return new Promise(function(o,i){const a=_N(t);let c=a.data;const u=qn.from(a.headers).normalize();let{responseType:h,onUploadProgress:p,onDownloadProgress:f}=a,g,m,T,I,C;function w(){I&&I(),C&&C(),a.cancelToken&&a.cancelToken.unsubscribe(g),a.signal&&a.signal.removeEventListener("abort",g)}let A=new XMLHttpRequest;A.open(a.method.toUpperCase(),a.url,!0),A.timeout=a.timeout;function S(){if(!A)return;const v=qn.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),L={data:!h||h==="text"||h==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:v,config:t,request:A};gN(function(B){o(B),w()},function(B){i(B),w()},L),A=null}"onloadend"in A?A.onloadend=S:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(S)},A.onabort=function(){A&&(i(new Pe("Request aborted",Pe.ECONNABORTED,t,A)),A=null)},A.onerror=function(){i(new Pe("Network Error",Pe.ERR_NETWORK,t,A)),A=null},A.ontimeout=function(){let M=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const L=a.transitional||pN;a.timeoutErrorMessage&&(M=a.timeoutErrorMessage),i(new Pe(M,L.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,t,A)),A=null},c===void 0&&u.setContentType(null),"setRequestHeader"in A&&J.forEach(u.toJSON(),function(M,L){A.setRequestHeader(L,M)}),J.isUndefined(a.withCredentials)||(A.withCredentials=!!a.withCredentials),h&&h!=="json"&&(A.responseType=a.responseType),f&&([T,C]=nf(f,!0),A.addEventListener("progress",T)),p&&A.upload&&([m,I]=nf(p),A.upload.addEventListener("progress",m),A.upload.addEventListener("loadend",I)),(a.cancelToken||a.signal)&&(g=v=>{A&&(i(!v||v.type?new Ra(null,t,A):v),A.abort(),A=null)},a.cancelToken&&a.cancelToken.subscribe(g),a.signal&&(a.signal.aborted?g():a.signal.addEventListener("abort",g)));const y=_V(a.url);if(y&&vn.protocols.indexOf(y)===-1){i(new Pe("Unsupported protocol "+y+":",Pe.ERR_BAD_REQUEST,t));return}A.send(c||null)})},wV=(t,s)=>{const{length:o}=t=t?t.filter(Boolean):[];if(s||o){let i=new AbortController,a;const c=function(f){if(!a){a=!0,h();const g=f instanceof Error?f:this.reason;i.abort(g instanceof Pe?g:new Ra(g instanceof Error?g.message:g))}};let u=s&&setTimeout(()=>{u=null,c(new Pe(`timeout ${s} of ms exceeded`,Pe.ETIMEDOUT))},s);const h=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(c):f.removeEventListener("abort",c)}),t=null)};t.forEach(f=>f.addEventListener("abort",c));const{signal:p}=i;return p.unsubscribe=()=>J.asap(h),p}},kV=function*(t,s){let o=t.byteLength;if(o<s){yield t;return}let i=0,a;for(;i<o;)a=i+s,yield t.slice(i,a),i=a},RV=async function*(t,s){for await(const o of xV(t))yield*kV(o,s)},xV=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:o,value:i}=await s.read();if(o)break;yield i}}finally{await s.cancel()}},kR=(t,s,o,i)=>{const a=RV(t,s);let c=0,u,h=p=>{u||(u=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:f,value:g}=await a.next();if(f){h(),p.close();return}let m=g.byteLength;if(o){let T=c+=m;o(T)}p.enqueue(new Uint8Array(g))}catch(f){throw h(f),f}},cancel(p){return h(p),a.return()}},{highWaterMark:2})},Vf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",TN=Vf&&typeof ReadableStream=="function",OV=Vf&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),bN=(t,...s)=>{try{return!!t(...s)}catch{return!1}},AV=TN&&bN(()=>{let t=!1;const s=new Request(vn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),RR=64*1024,kb=TN&&bN(()=>J.isReadableStream(new Response("").body)),sf={stream:kb&&(t=>t.body)};Vf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!sf[s]&&(sf[s]=J.isFunction(t[s])?o=>o[s]():(o,i)=>{throw new Pe(`Response type '${s}' is not supported`,Pe.ERR_NOT_SUPPORT,i)})})})(new Response);const NV=async t=>{if(t==null)return 0;if(J.isBlob(t))return t.size;if(J.isSpecCompliantForm(t))return(await new Request(vn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(J.isArrayBufferView(t)||J.isArrayBuffer(t))return t.byteLength;if(J.isURLSearchParams(t)&&(t=t+""),J.isString(t))return(await OV(t)).byteLength},MV=async(t,s)=>{const o=J.toFiniteNumber(t.getContentLength());return o??NV(s)},LV=Vf&&(async t=>{let{url:s,method:o,data:i,signal:a,cancelToken:c,timeout:u,onDownloadProgress:h,onUploadProgress:p,responseType:f,headers:g,withCredentials:m="same-origin",fetchOptions:T}=_N(t);f=f?(f+"").toLowerCase():"text";let I=wV([a,c&&c.toAbortSignal()],u),C;const w=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let A;try{if(p&&AV&&o!=="get"&&o!=="head"&&(A=await MV(g,i))!==0){let L=new Request(s,{method:"POST",body:i,duplex:"half"}),P;if(J.isFormData(i)&&(P=L.headers.get("content-type"))&&g.setContentType(P),L.body){const[B,N]=SR(A,nf(IR(p)));i=kR(L.body,RR,B,N)}}J.isString(m)||(m=m?"include":"omit");const S="credentials"in Request.prototype;C=new Request(s,{...T,signal:I,method:o.toUpperCase(),headers:g.normalize().toJSON(),body:i,duplex:"half",credentials:S?m:void 0});let y=await fetch(C);const v=kb&&(f==="stream"||f==="response");if(kb&&(h||v&&w)){const L={};["status","statusText","headers"].forEach(ee=>{L[ee]=y[ee]});const P=J.toFiniteNumber(y.headers.get("content-length")),[B,N]=h&&SR(P,nf(IR(h),!0))||[];y=new Response(kR(y.body,RR,B,()=>{N&&N(),w&&w()}),L)}f=f||"text";let M=await sf[J.findKey(sf,f)||"text"](y,t);return!v&&w&&w(),await new Promise((L,P)=>{gN(L,P,{data:M,headers:qn.from(y.headers),status:y.status,statusText:y.statusText,config:t,request:C})})}catch(S){throw w&&w(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,t,C),{cause:S.cause||S}):Pe.from(S,S&&S.code,t,C)}}),Rb={http:JU,xhr:IV,fetch:LV};J.forEach(Rb,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const xR=t=>`- ${t}`,DV=t=>J.isFunction(t)||t===null||t===!1,yN={getAdapter:t=>{t=J.isArray(t)?t:[t];const{length:s}=t;let o,i;const a={};for(let c=0;c<s;c++){o=t[c];let u;if(i=o,!DV(o)&&(i=Rb[(u=String(o)).toLowerCase()],i===void 0))throw new Pe(`Unknown adapter '${u}'`);if(i)break;a[u||"#"+c]=i}if(!i){const c=Object.entries(a).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=s?c.length>1?`since :
`+c.map(xR).join(`
`):" "+xR(c[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i},adapters:Rb};function sT(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ra(null,t)}function OR(t){return sT(t),t.headers=qn.from(t.headers),t.data=nT.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),yN.getAdapter(t.adapter||qu.adapter)(t).then(function(i){return sT(t),i.data=nT.call(t,t.transformResponse,i),i.headers=qn.from(i.headers),i},function(i){return mN(i)||(sT(t),i&&i.response&&(i.response.data=nT.call(t,t.transformResponse,i.response),i.response.headers=qn.from(i.response.headers))),Promise.reject(i)})}const EN="1.9.0",Hf={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Hf[t]=function(i){return typeof i===t||"a"+(s<1?"n ":" ")+t}});const AR={};Hf.transitional=function(s,o,i){function a(c,u){return"[Axios v"+EN+"] Transitional option '"+c+"'"+u+(i?". "+i:"")}return(c,u,h)=>{if(s===!1)throw new Pe(a(u," has been removed"+(o?" in "+o:"")),Pe.ERR_DEPRECATED);return o&&!AR[u]&&(AR[u]=!0,console.warn(a(u," has been deprecated since v"+o+" and will be removed in the near future"))),s?s(c,u,h):!0}};Hf.spelling=function(s){return(o,i)=>(console.warn(`${i} is likely a misspelling of ${s}`),!0)};function PV(t,s,o){if(typeof t!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let a=i.length;for(;a-- >0;){const c=i[a],u=s[c];if(u){const h=t[c],p=h===void 0||u(h,c,t);if(p!==!0)throw new Pe("option "+c+" must be "+p,Pe.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new Pe("Unknown option "+c,Pe.ERR_BAD_OPTION)}}const Sp={assertOptions:PV,validators:Hf},bo=Sp.validators;let Gr=class{constructor(s){this.defaults=s||{},this.interceptors={request:new vR,response:new vR}}async request(s,o){try{return await this._request(s,o)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const c=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?c&&!String(i.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+c):i.stack=c}catch{}}throw i}}_request(s,o){typeof s=="string"?(o=o||{},o.url=s):o=s||{},o=qr(this.defaults,o);const{transitional:i,paramsSerializer:a,headers:c}=o;i!==void 0&&Sp.assertOptions(i,{silentJSONParsing:bo.transitional(bo.boolean),forcedJSONParsing:bo.transitional(bo.boolean),clarifyTimeoutError:bo.transitional(bo.boolean)},!1),a!=null&&(J.isFunction(a)?o.paramsSerializer={serialize:a}:Sp.assertOptions(a,{encode:bo.function,serialize:bo.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),Sp.assertOptions(o,{baseUrl:bo.spelling("baseURL"),withXsrfToken:bo.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let u=c&&J.merge(c.common,c[o.method]);c&&J.forEach(["delete","get","head","post","put","patch","common"],C=>{delete c[C]}),o.headers=qn.concat(u,c);const h=[];let p=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(o)===!1||(p=p&&w.synchronous,h.unshift(w.fulfilled,w.rejected))});const f=[];this.interceptors.response.forEach(function(w){f.push(w.fulfilled,w.rejected)});let g,m=0,T;if(!p){const C=[OR.bind(this),void 0];for(C.unshift.apply(C,h),C.push.apply(C,f),T=C.length,g=Promise.resolve(o);m<T;)g=g.then(C[m++],C[m++]);return g}T=h.length;let I=o;for(m=0;m<T;){const C=h[m++],w=h[m++];try{I=C(I)}catch(A){w.call(this,A);break}}try{g=OR.call(this,I)}catch(C){return Promise.reject(C)}for(m=0,T=f.length;m<T;)g=g.then(f[m++],f[m++]);return g}getUri(s){s=qr(this.defaults,s);const o=$N(s.baseURL,s.url,s.allowAbsoluteUrls);return hN(o,s.params,s.paramsSerializer)}};J.forEach(["delete","get","head","options"],function(s){Gr.prototype[s]=function(o,i){return this.request(qr(i||{},{method:s,url:o,data:(i||{}).data}))}});J.forEach(["post","put","patch"],function(s){function o(i){return function(c,u,h){return this.request(qr(h||{},{method:s,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:u}))}}Gr.prototype[s]=o(),Gr.prototype[s+"Form"]=o(!0)});let BV=class vN{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(c){o=c});const i=this;this.promise.then(a=>{if(!i._listeners)return;let c=i._listeners.length;for(;c-- >0;)i._listeners[c](a);i._listeners=null}),this.promise.then=a=>{let c;const u=new Promise(h=>{i.subscribe(h),c=h}).then(a);return u.cancel=function(){i.unsubscribe(c)},u},s(function(c,u,h){i.reason||(i.reason=new Ra(c,u,h),o(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const o=this._listeners.indexOf(s);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const s=new AbortController,o=i=>{s.abort(i)};return this.subscribe(o),s.signal.unsubscribe=()=>this.unsubscribe(o),s.signal}static source(){let s;return{token:new vN(function(a){s=a}),cancel:s}}};function FV(t){return function(o){return t.apply(null,o)}}function UV(t){return J.isObject(t)&&t.isAxiosError===!0}const xb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xb).forEach(([t,s])=>{xb[s]=t});function CN(t){const s=new Gr(t),o=eN(Gr.prototype.request,s);return J.extend(o,Gr.prototype,s,{allOwnKeys:!0}),J.extend(o,s,null,{allOwnKeys:!0}),o.create=function(a){return CN(qr(t,a))},o}const It=CN(qu);It.Axios=Gr;It.CanceledError=Ra;It.CancelToken=BV;It.isCancel=mN;It.VERSION=EN;It.toFormData=Uf;It.AxiosError=Pe;It.Cancel=It.CanceledError;It.all=function(s){return Promise.all(s)};It.spread=FV;It.isAxiosError=UV;It.mergeConfig=qr;It.AxiosHeaders=qn;It.formToJSON=t=>fN(J.isHTMLForm(t)?new FormData(t):t);It.getAdapter=yN.getAdapter;It.HttpStatusCode=xb;It.default=It;const{Axios:O3,AxiosError:A3,CanceledError:N3,isCancel:M3,CancelToken:L3,VERSION:D3,all:P3,Cancel:B3,isAxiosError:F3,spread:U3,toFormData:V3,AxiosHeaders:H3,HttpStatusCode:G3,formToJSON:j3,getAdapter:W3,mergeConfig:z3}=It,oT="https://miniblocks-core-234407537699.europe-west1.run.app",Ls={async login(t){const s=await It.post(`${oT}/api/login`,t);return s.data.token&&localStorage.setItem("auth",JSON.stringify(s.data)),s.data},async register(t){return(await It.post(`${oT}/api/register`,t)).data},async getProfile(){const t=localStorage.getItem("auth");if(!t)throw new Error("No user found");return JSON.parse(t).user},async updateProfile(t){const s=this.getToken(),o=await It.put(`${oT}/api/profile/update`,t,{headers:{Authorization:`Bearer ${s}`}});return localStorage.setItem("auth",JSON.stringify(o.data)),o.data.user},logout(){localStorage.removeItem("auth")},getToken(){const t=localStorage.getItem("auth");return t?JSON.parse(t).token:null},isAuthenticated(){return!!this.getToken()},getAuthData(){const t=localStorage.getItem("auth");return t?JSON.parse(t):null}};function SN(t){var s,o,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(o=SN(t[s]))&&(i&&(i+=" "),i+=o)}else for(o in t)t[o]&&(i&&(i+=" "),i+=o);return i}function Bt(){for(var t,s,o=0,i="",a=arguments.length;o<a;o++)(t=arguments[o])&&(s=SN(t))&&(i&&(i+=" "),i+=s);return i}const iT="https://miniblocks-core-234407537699.europe-west1.run.app";function VV(){const[t,s]=O.useState(null),[o,i]=O.useState(null),[a,c]=O.useState(!1),u=O.useRef(null),h=O.useRef(null);return O.useEffect(()=>{console.log("Connecting to SSE at:",`${iT}/api/events`);const p=()=>{u.current&&u.current.close();const f=new EventSource(`${iT}/api/events`);u.current=f,f.onopen=()=>{console.log("SSE connection opened successfully"),i(null),c(!0)},f.onmessage=g=>{try{const m=JSON.parse(g.data);if(console.log("Received SSE message:",m),m.type==="connected")console.log("Received connection confirmation"),c(!0);else if(m.type==="workflow_run"){console.log("Received workflow run event:",{action:m.action,status:m.workflow_run.status,conclusion:m.workflow_run.conclusion});const T={type:"workflow_run",action:m.action,workflow_run:{id:m.workflow_run.id,name:m.workflow_run.name,status:m.workflow_run.status,conclusion:m.workflow_run.conclusion,html_url:m.workflow_run.html_url}};s(T)}}catch(m){console.error("Failed to parse event data:",m),i("Failed to parse event data")}},f.onerror=g=>{console.error("EventSource error:",g),console.error("EventSource readyState:",f.readyState),i("Failed to connect to event stream"),c(!1),f.close(),setTimeout(()=>{p()},2e3)}};return p(),h.current=window.setInterval(()=>{var f;((f=u.current)==null?void 0:f.readyState)===EventSource.OPEN&&(console.log("Sending heartbeat..."),fetch(`${iT}/api/heartbeat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:Date.now()})}).catch(g=>{console.error("Heartbeat failed:",g)}))},5e3),()=>{console.log("Cleaning up SSE connection"),u.current&&u.current.close(),h.current&&clearInterval(h.current)}},[]),{event:t,error:o,isConnected:a}}const HV=()=>{const{activeTab:t,setActiveTab:s,currentProject:o,renameProject:i,debugMode:a,setDebugMode:c,advanceMode:u,setAdvanceMode:h,selectedScreen:p,dartCode:f}=ds(),g="https://miniblocks-core-234407537699.europe-west1.run.app",[m,T]=O.useState(!1),[I,C]=O.useState((o==null?void 0:o.name)||"My First Project"),[w,A]=O.useState("idle"),[S,y]=O.useState(!1),[v,M]=O.useState(!1),L=O.useRef(null),[P,B]=O.useState(!1),[N,ee]=O.useState(!1),ie=ai(),{event:Te}=VV();O.useEffect(()=>{m&&L.current&&(L.current.focus(),L.current.select())},[m]);const Ue=async()=>{A("zipping"),y(!1),(await fetch(`${g}/api/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:f})})).ok?(console.log("Build request sent successfully"),A("finished")):(console.error("Failed to send build request"),A("error"))},je=()=>{T(!1),i(I)},we=fe=>{fe.key==="Enter"?je():fe.key==="Escape"&&(T(!1),C((o==null?void 0:o.name)||"My First Project"))},Fe=()=>{je()},de=()=>{p&&window.open(`/preview/${p}`,"_blank")},ce=async()=>{if(p){B(!0),ee(!1);try{if(!(await fetch(`${g}/api/compile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:f})})).ok)throw new Error("Compilation request failed")}catch(fe){console.error("Error requesting compilation:",fe),B(!1),ee(!1)}}},F=()=>{p&&N&&M(!0)};O.useEffect(()=>{(Te==null?void 0:Te.type)==="workflow_run"&&Te.action==="completed"&&(console.log("Workflow completed:",Te.workflow_run.name),B(!1),Te.workflow_run.name==="Flutter Web Build"?(console.log("Web build completed, enabling Web View button"),ee(!0)):Te.workflow_run.name==="Build and Release"&&(console.log("Mobile build completed, showing QR code"),A("finished"),y(!0)))},[Te]);const ue=()=>{ie("/")},ae=()=>{Ls.isAuthenticated()?ie("/profile"):ie("/login")};return _.jsxs(_.Fragment,{children:[_.jsxs("header",{className:"flex items-center justify-between px-4 py-2 border-b bg-white",children:[_.jsxs("div",{className:"flex items-center space-x-8",children:[_.jsx("img",{src:"/miniblocks-colored.png",alt:"Miniblocks Logo",className:"h-8 cursor-pointer hover:opacity-80 transition-opacity",onClick:ue}),_.jsxs("div",{className:"flex space-x-2",children:[_.jsx("button",{className:`px-4 py-1 rounded-md ${t==="DESIGN"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"}`,onClick:()=>s("DESIGN"),children:"DESIGN"}),_.jsx("button",{className:`px-4 py-1 rounded-md ${t==="BLOCKS"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"}`,onClick:()=>s("BLOCKS"),children:"BLOCKS"})]})]}),_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsxs("div",{className:"flex items-center space-x-2",children:[m?_.jsx("input",{ref:L,type:"text",value:I,onChange:fe=>C(fe.target.value),onKeyDown:we,onBlur:Fe,className:"px-2 py-1 border rounded-md text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):_.jsx("button",{onClick:()=>T(!0),className:"text-gray-700 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-50",children:(o==null?void 0:o.name)||"My First Project"}),_.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",children:_.jsx(iU,{className:"w-5 h-5 text-gray-600"})})]}),_.jsxs("div",{className:"flex items-center space-x-2",children:[t==="BLOCKS"&&_.jsxs(_.Fragment,{children:[_.jsxs("button",{className:`p-2 ${u?"bg-blue-500 text-white":"bg-white text-blue-500"} rounded-md flex items-center space-x-2`,onClick:()=>h(fe=>!fe),children:[_.jsx(GF,{className:"w-4 h-4"}),_.jsx("span",{children:"Advance Mode"})]}),_.jsxs("button",{className:`p-2 ${a?"bg-blue-500 text-white":"bg-white text-blue-500"} rounded-md flex items-center space-x-2`,onClick:()=>c(fe=>!fe),children:[_.jsx(jF,{className:"w-4 h-4"}),_.jsx("span",{children:"Debug"})]})]}),_.jsxs("button",{className:"p-2 bg-blue-500 text-white rounded-md flex items-center space-x-2",onClick:Ue,children:[_.jsx(YF,{className:"w-4 h-4"}),_.jsx("span",{children:"Build"})]}),_.jsxs("button",{className:`p-2 ${p?"bg-blue-500 hover:bg-blue-600":"bg-gray-300 cursor-not-allowed"} text-white rounded-md flex items-center space-x-2 transition-colors`,onClick:de,disabled:!p,title:p?"Open preview in new tab":"Select a screen to preview",children:[_.jsx(eU,{className:"w-4 h-4"}),_.jsx("span",{children:"Preview"})]}),_.jsxs("button",{className:Bt("p-2 text-white rounded-md flex items-center space-x-2 transition-colors",{"bg-blue-500 hover:bg-blue-600":p&&!P,"bg-gray-300 cursor-not-allowed":!p,"bg-blue-400 cursor-wait":P}),onClick:ce,disabled:!p||P,title:p?P?"Compiling":"Request Web View":"Select a screen to compile",children:[P?_.jsx(qF,{className:"w-4 h-4 animate-spin"}):_.jsx(J0,{className:"w-4 h-4"}),_.jsx("span",{children:P?"Compiling":"Request Web View"})]}),_.jsxs("button",{className:Bt("p-2 text-white rounded-md flex items-center space-x-2 transition-colors",{"bg-blue-500 hover:bg-blue-600":p&&N,"bg-gray-300 cursor-not-allowed":!p||!N}),onClick:F,disabled:!p||!N,title:p?N?"View compiled version":"Wait for compilation to complete":"Select a screen to view",children:[_.jsx(Au,{className:"w-4 h-4"}),_.jsx("span",{children:"View Web"})]}),_.jsx("button",{onClick:ae,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:Ls.isAuthenticated()?"View Profile":"Sign In",children:_.jsx(nE,{className:"w-5 h-5 text-gray-600"})})]})]})]}),v&&_.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:_.jsxs("div",{className:"relative",children:[_.jsx("button",{onClick:()=>M(!1),className:"absolute -top-12 right-0 p-2 text-white hover:text-gray-300",children:_.jsx(eT,{className:"w-6 h-6"})}),_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"absolute inset-0 bg-black rounded-[60px] -m-4 shadow-xl"}),_.jsxs("div",{className:"bg-white rounded-[50px] overflow-hidden relative p-8",style:{width:"390px",height:"844px"},children:[_.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[150px] h-[35px] bg-black rounded-b-[20px]"}),_.jsx("div",{className:"h-full pt-[35px] relative",children:_.jsx("iframe",{src:"https://miniblocks-app.github.io/compiler/",className:"w-full h-full border-0",title:"Web View"})})]})]})]})}),w!=="idle"&&_.jsxs("div",{className:"p-4 text-center bg-gray-50 border-t",children:[w==="zipping"&&_.jsx("p",{children:"Zipping your code!"}),w==="finished"&&!S&&_.jsxs("div",{className:"relative",children:[_.jsx("button",{onClick:()=>A("idle"),className:"absolute -top-2 -right-2 p-1 hover:bg-gray-200 rounded-full transition-colors",children:_.jsx(eT,{className:"w-4 h-4 text-gray-600"})}),_.jsx("p",{children:"Build finished. Preparing your download..."})]}),S&&_.jsxs("div",{className:"flex flex-col items-center relative",children:[_.jsx("button",{onClick:()=>y(!1),className:"absolute -top-2 -right-2 p-1 hover:bg-gray-200 rounded-full transition-colors",children:_.jsx(eT,{className:"w-4 h-4 text-gray-600"})}),_.jsx("p",{children:"Download is available!"}),_.jsx("img",{src:"/qr-code.png",alt:"Download QR",className:"w-32 h-32 mt-2"})]}),w==="error"&&_.jsx("p",{children:"Error sending build request."})]})]})},Gf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xa(t){const s=Object.prototype.toString.call(t);return s==="[object Window]"||s==="[object global]"}function rE(t){return"nodeType"in t}function Pn(t){var s,o;return t?xa(t)?t:rE(t)&&(s=(o=t.ownerDocument)==null?void 0:o.defaultView)!=null?s:window:window}function lE(t){const{Document:s}=Pn(t);return t instanceof s}function Zu(t){return xa(t)?!1:t instanceof Pn(t).HTMLElement}function IN(t){return t instanceof Pn(t).SVGElement}function Oa(t){return t?xa(t)?t.document:rE(t)?lE(t)?t:Zu(t)||IN(t)?t.ownerDocument:document:document:document}const si=Gf?O.useLayoutEffect:O.useEffect;function jf(t){const s=O.useRef(t);return si(()=>{s.current=t}),O.useCallback(function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return s.current==null?void 0:s.current(...i)},[])}function GV(){const t=O.useRef(null),s=O.useCallback((i,a)=>{t.current=setInterval(i,a)},[]),o=O.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[s,o]}function Mu(t,s){s===void 0&&(s=[t]);const o=O.useRef(t);return si(()=>{o.current!==t&&(o.current=t)},s),o}function Qu(t,s){const o=O.useRef();return O.useMemo(()=>{const i=t(o.current);return o.current=i,i},[...s])}function of(t){const s=jf(t),o=O.useRef(null),i=O.useCallback(a=>{a!==o.current&&(s==null||s(a,o.current)),o.current=a},[]);return[o,i]}function rf(t){const s=O.useRef();return O.useEffect(()=>{s.current=t},[t]),s.current}let rT={};function Wf(t,s){return O.useMemo(()=>{if(s)return s;const o=rT[t]==null?0:rT[t]+1;return rT[t]=o,t+"-"+o},[t,s])}function wN(t){return function(s){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return i.reduce((c,u)=>{const h=Object.entries(u);for(const[p,f]of h){const g=c[p];g!=null&&(c[p]=g+t*f)}return c},{...s})}}const ha=wN(1),lf=wN(-1);function jV(t){return"clientX"in t&&"clientY"in t}function aE(t){if(!t)return!1;const{KeyboardEvent:s}=Pn(t.target);return s&&t instanceof s}function WV(t){if(!t)return!1;const{TouchEvent:s}=Pn(t.target);return s&&t instanceof s}function af(t){if(WV(t)){if(t.touches&&t.touches.length){const{clientX:s,clientY:o}=t.touches[0];return{x:s,y:o}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:s,clientY:o}=t.changedTouches[0];return{x:s,y:o}}}return jV(t)?{x:t.clientX,y:t.clientY}:null}const Lu=Object.freeze({Translate:{toString(t){if(!t)return;const{x:s,y:o}=t;return"translate3d("+(s?Math.round(s):0)+"px, "+(o?Math.round(o):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:s,scaleY:o}=t;return"scaleX("+s+") scaleY("+o+")"}},Transform:{toString(t){if(t)return[Lu.Translate.toString(t),Lu.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:s,duration:o,easing:i}=t;return s+" "+o+"ms "+i}}}),NR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function zV(t){return t.matches(NR)?t:t.querySelector(NR)}const XV={display:"none"};function YV(t){let{id:s,value:o}=t;return ye.createElement("div",{id:s,style:XV},o)}function KV(t){let{id:s,announcement:o,ariaLiveType:i="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ye.createElement("div",{id:s,style:a,role:"status","aria-live":i,"aria-atomic":!0},o)}function JV(){const[t,s]=O.useState("");return{announce:O.useCallback(i=>{i!=null&&s(i)},[]),announcement:t}}const kN=O.createContext(null);function qV(t){const s=O.useContext(kN);O.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(t)},[t,s])}function ZV(){const[t]=O.useState(()=>new Set),s=O.useCallback(i=>(t.add(i),()=>t.delete(i)),[t]);return[O.useCallback(i=>{let{type:a,event:c}=i;t.forEach(u=>{var h;return(h=u[a])==null?void 0:h.call(u,c)})},[t]),s]}const QV={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},e2={onDragStart(t){let{active:s}=t;return"Picked up draggable item "+s.id+"."},onDragOver(t){let{active:s,over:o}=t;return o?"Draggable item "+s.id+" was moved over droppable area "+o.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(t){let{active:s,over:o}=t;return o?"Draggable item "+s.id+" was dropped over droppable area "+o.id:"Draggable item "+s.id+" was dropped."},onDragCancel(t){let{active:s}=t;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function t2(t){let{announcements:s=e2,container:o,hiddenTextDescribedById:i,screenReaderInstructions:a=QV}=t;const{announce:c,announcement:u}=JV(),h=Wf("DndLiveRegion"),[p,f]=O.useState(!1);if(O.useEffect(()=>{f(!0)},[]),qV(O.useMemo(()=>({onDragStart(m){let{active:T}=m;c(s.onDragStart({active:T}))},onDragMove(m){let{active:T,over:I}=m;s.onDragMove&&c(s.onDragMove({active:T,over:I}))},onDragOver(m){let{active:T,over:I}=m;c(s.onDragOver({active:T,over:I}))},onDragEnd(m){let{active:T,over:I}=m;c(s.onDragEnd({active:T,over:I}))},onDragCancel(m){let{active:T,over:I}=m;c(s.onDragCancel({active:T,over:I}))}}),[c,s])),!p)return null;const g=ye.createElement(ye.Fragment,null,ye.createElement(YV,{id:i,value:a.draggable}),ye.createElement(KV,{id:h,announcement:u}));return o?ea.createPortal(g,o):g}var en;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(en||(en={}));function cf(){}const so=Object.freeze({x:0,y:0});function n2(t,s){const o=af(t);if(!o)return"0 0";const i={x:(o.x-s.left)/s.width*100,y:(o.y-s.top)/s.height*100};return i.x+"% "+i.y+"%"}function s2(t,s){let{data:{value:o}}=t,{data:{value:i}}=s;return i-o}function o2(t,s){if(!t||t.length===0)return null;const[o]=t;return o[s]}function i2(t,s){const o=Math.max(s.top,t.top),i=Math.max(s.left,t.left),a=Math.min(s.left+s.width,t.left+t.width),c=Math.min(s.top+s.height,t.top+t.height),u=a-i,h=c-o;if(i<a&&o<c){const p=s.width*s.height,f=t.width*t.height,g=u*h,m=g/(p+f-g);return Number(m.toFixed(4))}return 0}const r2=t=>{let{collisionRect:s,droppableRects:o,droppableContainers:i}=t;const a=[];for(const c of i){const{id:u}=c,h=o.get(u);if(h){const p=i2(h,s);p>0&&a.push({id:u,data:{droppableContainer:c,value:p}})}}return a.sort(s2)};function l2(t,s,o){return{...t,scaleX:s&&o?s.width/o.width:1,scaleY:s&&o?s.height/o.height:1}}function RN(t,s){return t&&s?{x:t.left-s.left,y:t.top-s.top}:so}function a2(t){return function(o){for(var i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];return a.reduce((u,h)=>({...u,top:u.top+t*h.y,bottom:u.bottom+t*h.y,left:u.left+t*h.x,right:u.right+t*h.x}),{...o})}}const c2=a2(1);function xN(t){if(t.startsWith("matrix3d(")){const s=t.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(t.startsWith("matrix(")){const s=t.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function u2(t,s,o){const i=xN(s);if(!i)return t;const{scaleX:a,scaleY:c,x:u,y:h}=i,p=t.left-u-(1-a)*parseFloat(o),f=t.top-h-(1-c)*parseFloat(o.slice(o.indexOf(" ")+1)),g=a?t.width/a:t.width,m=c?t.height/c:t.height;return{width:g,height:m,top:f,right:p+g,bottom:f+m,left:p}}const d2={ignoreTransform:!1};function ed(t,s){s===void 0&&(s=d2);let o=t.getBoundingClientRect();if(s.ignoreTransform){const{transform:f,transformOrigin:g}=Pn(t).getComputedStyle(t);f&&(o=u2(o,f,g))}const{top:i,left:a,width:c,height:u,bottom:h,right:p}=o;return{top:i,left:a,width:c,height:u,bottom:h,right:p}}function MR(t){return ed(t,{ignoreTransform:!0})}function h2(t){const s=t.innerWidth,o=t.innerHeight;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}function p2(t,s){return s===void 0&&(s=Pn(t).getComputedStyle(t)),s.position==="fixed"}function f2(t,s){s===void 0&&(s=Pn(t).getComputedStyle(t));const o=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const c=s[a];return typeof c=="string"?o.test(c):!1})}function cE(t,s){const o=[];function i(a){if(s!=null&&o.length>=s||!a)return o;if(lE(a)&&a.scrollingElement!=null&&!o.includes(a.scrollingElement))return o.push(a.scrollingElement),o;if(!Zu(a)||IN(a)||o.includes(a))return o;const c=Pn(t).getComputedStyle(a);return a!==t&&f2(a,c)&&o.push(a),p2(a,c)?o:i(a.parentNode)}return t?i(t):o}function ON(t){const[s]=cE(t,1);return s??null}function lT(t){return!Gf||!t?null:xa(t)?t:rE(t)?lE(t)||t===Oa(t).scrollingElement?window:Zu(t)?t:null:null}function AN(t){return xa(t)?t.scrollX:t.scrollLeft}function NN(t){return xa(t)?t.scrollY:t.scrollTop}function Ob(t){return{x:AN(t),y:NN(t)}}var an;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(an||(an={}));function MN(t){return!Gf||!t?!1:t===document.scrollingElement}function LN(t){const s={x:0,y:0},o=MN(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={x:t.scrollWidth-o.width,y:t.scrollHeight-o.height},a=t.scrollTop<=s.y,c=t.scrollLeft<=s.x,u=t.scrollTop>=i.y,h=t.scrollLeft>=i.x;return{isTop:a,isLeft:c,isBottom:u,isRight:h,maxScroll:i,minScroll:s}}const m2={x:.2,y:.2};function g2(t,s,o,i,a){let{top:c,left:u,right:h,bottom:p}=o;i===void 0&&(i=10),a===void 0&&(a=m2);const{isTop:f,isBottom:g,isLeft:m,isRight:T}=LN(t),I={x:0,y:0},C={x:0,y:0},w={height:s.height*a.y,width:s.width*a.x};return!f&&c<=s.top+w.height?(I.y=an.Backward,C.y=i*Math.abs((s.top+w.height-c)/w.height)):!g&&p>=s.bottom-w.height&&(I.y=an.Forward,C.y=i*Math.abs((s.bottom-w.height-p)/w.height)),!T&&h>=s.right-w.width?(I.x=an.Forward,C.x=i*Math.abs((s.right-w.width-h)/w.width)):!m&&u<=s.left+w.width&&(I.x=an.Backward,C.x=i*Math.abs((s.left+w.width-u)/w.width)),{direction:I,speed:C}}function $2(t){if(t===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:s,left:o,right:i,bottom:a}=t.getBoundingClientRect();return{top:s,left:o,right:i,bottom:a,width:t.clientWidth,height:t.clientHeight}}function DN(t){return t.reduce((s,o)=>ha(s,Ob(o)),so)}function _2(t){return t.reduce((s,o)=>s+AN(o),0)}function T2(t){return t.reduce((s,o)=>s+NN(o),0)}function PN(t,s){if(s===void 0&&(s=ed),!t)return;const{top:o,left:i,bottom:a,right:c}=s(t);ON(t)&&(a<=0||c<=0||o>=window.innerHeight||i>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const b2=[["x",["left","right"],_2],["y",["top","bottom"],T2]];class uE{constructor(s,o){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=cE(o),a=DN(i);this.rect={...s},this.width=s.width,this.height=s.height;for(const[c,u,h]of b2)for(const p of u)Object.defineProperty(this,p,{get:()=>{const f=h(i),g=a[c]-f;return this.rect[p]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class iu{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(o=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...o)})},this.target=s}add(s,o,i){var a;(a=this.target)==null||a.addEventListener(s,o,i),this.listeners.push([s,o,i])}}function y2(t){const{EventTarget:s}=Pn(t);return t instanceof s?t:Oa(t)}function aT(t,s){const o=Math.abs(t.x),i=Math.abs(t.y);return typeof s=="number"?Math.sqrt(o**2+i**2)>s:"x"in s&&"y"in s?o>s.x&&i>s.y:"x"in s?o>s.x:"y"in s?i>s.y:!1}var xs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(xs||(xs={}));function LR(t){t.preventDefault()}function E2(t){t.stopPropagation()}var pt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(pt||(pt={}));const BN={start:[pt.Space,pt.Enter],cancel:[pt.Esc],end:[pt.Space,pt.Enter,pt.Tab]},v2=(t,s)=>{let{currentCoordinates:o}=s;switch(t.code){case pt.Right:return{...o,x:o.x+25};case pt.Left:return{...o,x:o.x-25};case pt.Down:return{...o,y:o.y+25};case pt.Up:return{...o,y:o.y-25}}};class FN{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:o}}=s;this.props=s,this.listeners=new iu(Oa(o)),this.windowListeners=new iu(Pn(o)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xs.Resize,this.handleCancel),this.windowListeners.add(xs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(xs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:o}=this.props,i=s.node.current;i&&PN(i),o(so)}handleKeyDown(s){if(aE(s)){const{active:o,context:i,options:a}=this.props,{keyboardCodes:c=BN,coordinateGetter:u=v2,scrollBehavior:h="smooth"}=a,{code:p}=s;if(c.end.includes(p)){this.handleEnd(s);return}if(c.cancel.includes(p)){this.handleCancel(s);return}const{collisionRect:f}=i.current,g=f?{x:f.left,y:f.top}:so;this.referenceCoordinates||(this.referenceCoordinates=g);const m=u(s,{active:o,context:i.current,currentCoordinates:g});if(m){const T=lf(m,g),I={x:0,y:0},{scrollableAncestors:C}=i.current;for(const w of C){const A=s.code,{isTop:S,isRight:y,isLeft:v,isBottom:M,maxScroll:L,minScroll:P}=LN(w),B=$2(w),N={x:Math.min(A===pt.Right?B.right-B.width/2:B.right,Math.max(A===pt.Right?B.left:B.left+B.width/2,m.x)),y:Math.min(A===pt.Down?B.bottom-B.height/2:B.bottom,Math.max(A===pt.Down?B.top:B.top+B.height/2,m.y))},ee=A===pt.Right&&!y||A===pt.Left&&!v,ie=A===pt.Down&&!M||A===pt.Up&&!S;if(ee&&N.x!==m.x){const Te=w.scrollLeft+T.x,Ue=A===pt.Right&&Te<=L.x||A===pt.Left&&Te>=P.x;if(Ue&&!T.y){w.scrollTo({left:Te,behavior:h});return}Ue?I.x=w.scrollLeft-Te:I.x=A===pt.Right?w.scrollLeft-L.x:w.scrollLeft-P.x,I.x&&w.scrollBy({left:-I.x,behavior:h});break}else if(ie&&N.y!==m.y){const Te=w.scrollTop+T.y,Ue=A===pt.Down&&Te<=L.y||A===pt.Up&&Te>=P.y;if(Ue&&!T.x){w.scrollTo({top:Te,behavior:h});return}Ue?I.y=w.scrollTop-Te:I.y=A===pt.Down?w.scrollTop-L.y:w.scrollTop-P.y,I.y&&w.scrollBy({top:-I.y,behavior:h});break}}this.handleMove(s,ha(lf(m,this.referenceCoordinates),I))}}}handleMove(s,o){const{onMove:i}=this.props;s.preventDefault(),i(o)}handleEnd(s){const{onEnd:o}=this.props;s.preventDefault(),this.detach(),o()}handleCancel(s){const{onCancel:o}=this.props;s.preventDefault(),this.detach(),o()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}FN.activators=[{eventName:"onKeyDown",handler:(t,s,o)=>{let{keyboardCodes:i=BN,onActivation:a}=s,{active:c}=o;const{code:u}=t.nativeEvent;if(i.start.includes(u)){const h=c.activatorNode.current;return h&&t.target!==h?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function DR(t){return!!(t&&"distance"in t)}function PR(t){return!!(t&&"delay"in t)}class dE{constructor(s,o,i){var a;i===void 0&&(i=y2(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=o;const{event:c}=s,{target:u}=c;this.props=s,this.events=o,this.document=Oa(u),this.documentListeners=new iu(this.document),this.listeners=new iu(i),this.windowListeners=new iu(Pn(u)),this.initialCoordinates=(a=af(c))!=null?a:so,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:o,bypassActivationConstraint:i}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(xs.Resize,this.handleCancel),this.windowListeners.add(xs.DragStart,LR),this.windowListeners.add(xs.VisibilityChange,this.handleCancel),this.windowListeners.add(xs.ContextMenu,LR),this.documentListeners.add(xs.Keydown,this.handleKeydown),o){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(PR(o)){this.timeoutId=setTimeout(this.handleStart,o.delay),this.handlePending(o);return}if(DR(o)){this.handlePending(o);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,o){const{active:i,onPending:a}=this.props;a(i,s,this.initialCoordinates,o)}handleStart(){const{initialCoordinates:s}=this,{onStart:o}=this.props;s&&(this.activated=!0,this.documentListeners.add(xs.Click,E2,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xs.SelectionChange,this.removeTextSelection),o(s))}handleMove(s){var o;const{activated:i,initialCoordinates:a,props:c}=this,{onMove:u,options:{activationConstraint:h}}=c;if(!a)return;const p=(o=af(s))!=null?o:so,f=lf(a,p);if(!i&&h){if(DR(h)){if(h.tolerance!=null&&aT(f,h.tolerance))return this.handleCancel();if(aT(f,h.distance))return this.handleStart()}if(PR(h)&&aT(f,h.tolerance))return this.handleCancel();this.handlePending(h,f);return}s.cancelable&&s.preventDefault(),u(p)}handleEnd(){const{onAbort:s,onEnd:o}=this.props;this.detach(),this.activated||s(this.props.active),o()}handleCancel(){const{onAbort:s,onCancel:o}=this.props;this.detach(),this.activated||s(this.props.active),o()}handleKeydown(s){s.code===pt.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const C2={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class UN extends dE{constructor(s){const{event:o}=s,i=Oa(o.target);super(s,C2,i)}}UN.activators=[{eventName:"onPointerDown",handler:(t,s)=>{let{nativeEvent:o}=t,{onActivation:i}=s;return!o.isPrimary||o.button!==0?!1:(i==null||i({event:o}),!0)}}];const S2={move:{name:"mousemove"},end:{name:"mouseup"}};var Ab;(function(t){t[t.RightClick=2]="RightClick"})(Ab||(Ab={}));class I2 extends dE{constructor(s){super(s,S2,Oa(s.event.target))}}I2.activators=[{eventName:"onMouseDown",handler:(t,s)=>{let{nativeEvent:o}=t,{onActivation:i}=s;return o.button===Ab.RightClick?!1:(i==null||i({event:o}),!0)}}];const cT={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class w2 extends dE{constructor(s){super(s,cT)}static setup(){return window.addEventListener(cT.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(cT.move.name,s)};function s(){}}}w2.activators=[{eventName:"onTouchStart",handler:(t,s)=>{let{nativeEvent:o}=t,{onActivation:i}=s;const{touches:a}=o;return a.length>1?!1:(i==null||i({event:o}),!0)}}];var ru;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(ru||(ru={}));var uf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(uf||(uf={}));function k2(t){let{acceleration:s,activator:o=ru.Pointer,canScroll:i,draggingRect:a,enabled:c,interval:u=5,order:h=uf.TreeOrder,pointerCoordinates:p,scrollableAncestors:f,scrollableAncestorRects:g,delta:m,threshold:T}=t;const I=x2({delta:m,disabled:!c}),[C,w]=GV(),A=O.useRef({x:0,y:0}),S=O.useRef({x:0,y:0}),y=O.useMemo(()=>{switch(o){case ru.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case ru.DraggableRect:return a}},[o,a,p]),v=O.useRef(null),M=O.useCallback(()=>{const P=v.current;if(!P)return;const B=A.current.x*S.current.x,N=A.current.y*S.current.y;P.scrollBy(B,N)},[]),L=O.useMemo(()=>h===uf.TreeOrder?[...f].reverse():f,[h,f]);O.useEffect(()=>{if(!c||!f.length||!y){w();return}for(const P of L){if((i==null?void 0:i(P))===!1)continue;const B=f.indexOf(P),N=g[B];if(!N)continue;const{direction:ee,speed:ie}=g2(P,N,y,s,T);for(const Te of["x","y"])I[Te][ee[Te]]||(ie[Te]=0,ee[Te]=0);if(ie.x>0||ie.y>0){w(),v.current=P,C(M,u),A.current=ie,S.current=ee;return}}A.current={x:0,y:0},S.current={x:0,y:0},w()},[s,M,i,w,c,u,JSON.stringify(y),JSON.stringify(I),C,f,L,g,JSON.stringify(T)])}const R2={x:{[an.Backward]:!1,[an.Forward]:!1},y:{[an.Backward]:!1,[an.Forward]:!1}};function x2(t){let{delta:s,disabled:o}=t;const i=rf(s);return Qu(a=>{if(o||!i||!a)return R2;const c={x:Math.sign(s.x-i.x),y:Math.sign(s.y-i.y)};return{x:{[an.Backward]:a.x[an.Backward]||c.x===-1,[an.Forward]:a.x[an.Forward]||c.x===1},y:{[an.Backward]:a.y[an.Backward]||c.y===-1,[an.Forward]:a.y[an.Forward]||c.y===1}}},[o,s,i])}function O2(t,s){const o=s!=null?t.get(s):void 0,i=o?o.node.current:null;return Qu(a=>{var c;return s==null?null:(c=i??a)!=null?c:null},[i,s])}function A2(t,s){return O.useMemo(()=>t.reduce((o,i)=>{const{sensor:a}=i,c=a.activators.map(u=>({eventName:u.eventName,handler:s(u.handler,i)}));return[...o,...c]},[]),[t,s])}var Du;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Du||(Du={}));var Nb;(function(t){t.Optimized="optimized"})(Nb||(Nb={}));const BR=new Map;function N2(t,s){let{dragging:o,dependencies:i,config:a}=s;const[c,u]=O.useState(null),{frequency:h,measure:p,strategy:f}=a,g=O.useRef(t),m=A(),T=Mu(m),I=O.useCallback(function(S){S===void 0&&(S=[]),!T.current&&u(y=>y===null?S:y.concat(S.filter(v=>!y.includes(v))))},[T]),C=O.useRef(null),w=Qu(S=>{if(m&&!o)return BR;if(!S||S===BR||g.current!==t||c!=null){const y=new Map;for(let v of t){if(!v)continue;if(c&&c.length>0&&!c.includes(v.id)&&v.rect.current){y.set(v.id,v.rect.current);continue}const M=v.node.current,L=M?new uE(p(M),M):null;v.rect.current=L,L&&y.set(v.id,L)}return y}return S},[t,c,o,m,p]);return O.useEffect(()=>{g.current=t},[t]),O.useEffect(()=>{m||I()},[o,m]),O.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),O.useEffect(()=>{m||typeof h!="number"||C.current!==null||(C.current=setTimeout(()=>{I(),C.current=null},h))},[h,m,I,...i]),{droppableRects:w,measureDroppableContainers:I,measuringScheduled:c!=null};function A(){switch(f){case Du.Always:return!1;case Du.BeforeDragging:return o;default:return!o}}}function hE(t,s){return Qu(o=>t?o||(typeof s=="function"?s(t):t):null,[s,t])}function M2(t,s){return hE(t,s)}function L2(t){let{callback:s,disabled:o}=t;const i=jf(s),a=O.useMemo(()=>{if(o||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(i)},[i,o]);return O.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function zf(t){let{callback:s,disabled:o}=t;const i=jf(s),a=O.useMemo(()=>{if(o||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(i)},[o]);return O.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function D2(t){return new uE(ed(t),t)}function FR(t,s,o){s===void 0&&(s=D2);const[i,a]=O.useState(null);function c(){a(p=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=p??o)!=null?f:null}const g=s(t);return JSON.stringify(p)===JSON.stringify(g)?p:g})}const u=L2({callback(p){if(t)for(const f of p){const{type:g,target:m}=f;if(g==="childList"&&m instanceof HTMLElement&&m.contains(t)){c();break}}}}),h=zf({callback:c});return si(()=>{c(),t?(h==null||h.observe(t),u==null||u.observe(document.body,{childList:!0,subtree:!0})):(h==null||h.disconnect(),u==null||u.disconnect())},[t]),i}function P2(t){const s=hE(t);return RN(t,s)}const UR=[];function B2(t){const s=O.useRef(t),o=Qu(i=>t?i&&i!==UR&&t&&s.current&&t.parentNode===s.current.parentNode?i:cE(t):UR,[t]);return O.useEffect(()=>{s.current=t},[t]),o}function F2(t){const[s,o]=O.useState(null),i=O.useRef(t),a=O.useCallback(c=>{const u=lT(c.target);u&&o(h=>h?(h.set(u,Ob(u)),new Map(h)):null)},[]);return O.useEffect(()=>{const c=i.current;if(t!==c){u(c);const h=t.map(p=>{const f=lT(p);return f?(f.addEventListener("scroll",a,{passive:!0}),[f,Ob(f)]):null}).filter(p=>p!=null);o(h.length?new Map(h):null),i.current=t}return()=>{u(t),u(c)};function u(h){h.forEach(p=>{const f=lT(p);f==null||f.removeEventListener("scroll",a)})}},[a,t]),O.useMemo(()=>t.length?s?Array.from(s.values()).reduce((c,u)=>ha(c,u),so):DN(t):so,[t,s])}function VR(t,s){s===void 0&&(s=[]);const o=O.useRef(null);return O.useEffect(()=>{o.current=null},s),O.useEffect(()=>{const i=t!==so;i&&!o.current&&(o.current=t),!i&&o.current&&(o.current=null)},[t]),o.current?lf(t,o.current):so}function U2(t){O.useEffect(()=>{if(!Gf)return;const s=t.map(o=>{let{sensor:i}=o;return i.setup==null?void 0:i.setup()});return()=>{for(const o of s)o==null||o()}},t.map(s=>{let{sensor:o}=s;return o}))}function V2(t,s){return O.useMemo(()=>t.reduce((o,i)=>{let{eventName:a,handler:c}=i;return o[a]=u=>{c(u,s)},o},{}),[t,s])}function VN(t){return O.useMemo(()=>t?h2(t):null,[t])}const HR=[];function H2(t,s){s===void 0&&(s=ed);const[o]=t,i=VN(o?Pn(o):null),[a,c]=O.useState(HR);function u(){c(()=>t.length?t.map(p=>MN(p)?i:new uE(s(p),p)):HR)}const h=zf({callback:u});return si(()=>{h==null||h.disconnect(),u(),t.forEach(p=>h==null?void 0:h.observe(p))},[t]),a}function HN(t){if(!t)return null;if(t.children.length>1)return t;const s=t.children[0];return Zu(s)?s:t}function G2(t){let{measure:s}=t;const[o,i]=O.useState(null),a=O.useCallback(f=>{for(const{target:g}of f)if(Zu(g)){i(m=>{const T=s(g);return m?{...m,width:T.width,height:T.height}:T});break}},[s]),c=zf({callback:a}),u=O.useCallback(f=>{const g=HN(f);c==null||c.disconnect(),g&&(c==null||c.observe(g)),i(g?s(g):null)},[s,c]),[h,p]=of(u);return O.useMemo(()=>({nodeRef:h,rect:o,setRef:p}),[o,h,p])}const j2=[{sensor:UN,options:{}},{sensor:FN,options:{}}],W2={current:{}},Ip={draggable:{measure:MR},droppable:{measure:MR,strategy:Du.WhileDragging,frequency:Nb.Optimized},dragOverlay:{measure:ed}};class lu extends Map{get(s){var o;return s!=null&&(o=super.get(s))!=null?o:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:o}=s;return!o})}getNodeFor(s){var o,i;return(o=(i=this.get(s))==null?void 0:i.node.current)!=null?o:void 0}}const z2={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new lu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:cf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ip,measureDroppableContainers:cf,windowRect:null,measuringScheduled:!1},GN={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:cf,draggableNodes:new Map,over:null,measureDroppableContainers:cf},td=O.createContext(GN),jN=O.createContext(z2);function X2(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new lu}}}function Y2(t,s){switch(s.type){case en.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case en.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:s.coordinates.x-t.draggable.initialCoordinates.x,y:s.coordinates.y-t.draggable.initialCoordinates.y}}};case en.DragEnd:case en.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case en.RegisterDroppable:{const{element:o}=s,{id:i}=o,a=new lu(t.droppable.containers);return a.set(i,o),{...t,droppable:{...t.droppable,containers:a}}}case en.SetDroppableDisabled:{const{id:o,key:i,disabled:a}=s,c=t.droppable.containers.get(o);if(!c||i!==c.key)return t;const u=new lu(t.droppable.containers);return u.set(o,{...c,disabled:a}),{...t,droppable:{...t.droppable,containers:u}}}case en.UnregisterDroppable:{const{id:o,key:i}=s,a=t.droppable.containers.get(o);if(!a||i!==a.key)return t;const c=new lu(t.droppable.containers);return c.delete(o),{...t,droppable:{...t.droppable,containers:c}}}default:return t}}function K2(t){let{disabled:s}=t;const{active:o,activatorEvent:i,draggableNodes:a}=O.useContext(td),c=rf(i),u=rf(o==null?void 0:o.id);return O.useEffect(()=>{if(!s&&!i&&c&&u!=null){if(!aE(c)||document.activeElement===c.target)return;const h=a.get(u);if(!h)return;const{activatorNode:p,node:f}=h;if(!p.current&&!f.current)return;requestAnimationFrame(()=>{for(const g of[p.current,f.current]){if(!g)continue;const m=zV(g);if(m){m.focus();break}}})}},[i,s,a,u,c]),null}function WN(t,s){let{transform:o,...i}=s;return t!=null&&t.length?t.reduce((a,c)=>c({transform:a,...i}),o):o}function J2(t){return O.useMemo(()=>({draggable:{...Ip.draggable,...t==null?void 0:t.draggable},droppable:{...Ip.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Ip.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function q2(t){let{activeNode:s,measure:o,initialRect:i,config:a=!0}=t;const c=O.useRef(!1),{x:u,y:h}=typeof a=="boolean"?{x:a,y:a}:a;si(()=>{if(!u&&!h||!s){c.current=!1;return}if(c.current||!i)return;const f=s==null?void 0:s.node.current;if(!f||f.isConnected===!1)return;const g=o(f),m=RN(g,i);if(u||(m.x=0),h||(m.y=0),c.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const T=ON(f);T&&T.scrollBy({top:m.y,left:m.x})}},[s,u,h,i,o])}const Xf=O.createContext({...so,scaleX:1,scaleY:1});var Ai;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ai||(Ai={}));const Z2=O.memo(function(s){var o,i,a,c;let{id:u,accessibility:h,autoScroll:p=!0,children:f,sensors:g=j2,collisionDetection:m=r2,measuring:T,modifiers:I,...C}=s;const w=O.useReducer(Y2,void 0,X2),[A,S]=w,[y,v]=ZV(),[M,L]=O.useState(Ai.Uninitialized),P=M===Ai.Initialized,{draggable:{active:B,nodes:N,translate:ee},droppable:{containers:ie}}=A,Te=B!=null?N.get(B):null,Ue=O.useRef({initial:null,translated:null}),je=O.useMemo(()=>{var te;return B!=null?{id:B,data:(te=Te==null?void 0:Te.data)!=null?te:W2,rect:Ue}:null},[B,Te]),we=O.useRef(null),[Fe,de]=O.useState(null),[ce,F]=O.useState(null),ue=Mu(C,Object.values(C)),ae=Wf("DndDescribedBy",u),fe=O.useMemo(()=>ie.getEnabled(),[ie]),Ee=J2(T),{droppableRects:xe,measureDroppableContainers:ke,measuringScheduled:qe}=N2(fe,{dragging:P,dependencies:[ee.x,ee.y],config:Ee.droppable}),Re=O2(N,B),Oe=O.useMemo(()=>ce?af(ce):null,[ce]),Tt=j(),He=M2(Re,Ee.draggable.measure);q2({activeNode:B!=null?N.get(B):null,config:Tt.layoutShiftCompensation,initialRect:He,measure:Ee.draggable.measure});const We=FR(Re,Ee.draggable.measure,He),Ft=FR(Re?Re.parentElement:null),Rt=O.useRef({activatorEvent:null,active:null,activeNode:Re,collisionRect:null,collisions:null,droppableRects:xe,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:ie,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Zn=ie.getNodeFor((o=Rt.current.over)==null?void 0:o.id),nn=G2({measure:Ee.dragOverlay.measure}),xt=(i=nn.nodeRef.current)!=null?i:Re,rt=P?(a=nn.rect)!=null?a:We:null,ms=!!(nn.nodeRef.current&&nn.rect),Qn=P2(ms?null:We),gs=VN(xt?Pn(xt):null),_e=B2(P?Zn??Re:null),Ze=H2(_e),Ye=WN(I,{transform:{x:ee.x-Qn.x,y:ee.y-Qn.y,scaleX:1,scaleY:1},activatorEvent:ce,active:je,activeNodeRect:We,containerNodeRect:Ft,draggingNodeRect:rt,over:Rt.current.over,overlayNodeRect:nn.rect,scrollableAncestors:_e,scrollableAncestorRects:Ze,windowRect:gs}),Bn=Oe?ha(Oe,ee):null,sn=F2(_e),W=VR(sn),$s=VR(sn,[We]),ze=ha(Ye,W),ct=rt?c2(rt,Ye):null,Yt=je&&ct?m({active:je,collisionRect:ct,droppableRects:xe,droppableContainers:fe,pointerCoordinates:Bn}):null,Y=o2(Yt,"id"),[he,b]=O.useState(null),x=ms?Ye:ha(Ye,$s),H=l2(x,(c=he==null?void 0:he.rect)!=null?c:null,We),V=O.useRef(null),le=O.useCallback((te,se)=>{let{sensor:Ie,options:bt}=se;if(we.current==null)return;const jt=N.get(we.current);if(!jt)return;const dt=te.nativeEvent,Ot=new Ie({active:we.current,activeNode:jt,event:dt,options:bt,context:Rt,onAbort(Ut){if(!N.get(Ut))return;const{onDragAbort:Fn}=ue.current,wn={id:Ut};Fn==null||Fn(wn),y({type:"onDragAbort",event:wn})},onPending(Ut,es,Fn,wn){if(!N.get(Ut))return;const{onDragPending:Ro}=ue.current,_s={id:Ut,constraint:es,initialCoordinates:Fn,offset:wn};Ro==null||Ro(_s),y({type:"onDragPending",event:_s})},onStart(Ut){const es=we.current;if(es==null)return;const Fn=N.get(es);if(!Fn)return;const{onDragStart:wn}=ue.current,io={activatorEvent:dt,active:{id:es,data:Fn.data,rect:Ue}};ea.unstable_batchedUpdates(()=>{wn==null||wn(io),L(Ai.Initializing),S({type:en.DragStart,initialCoordinates:Ut,active:es}),y({type:"onDragStart",event:io}),de(V.current),F(dt)})},onMove(Ut){S({type:en.DragMove,coordinates:Ut})},onEnd:In(en.DragEnd),onCancel:In(en.DragCancel)});V.current=Ot;function In(Ut){return async function(){const{active:Fn,collisions:wn,over:io,scrollAdjustedTranslate:Ro}=Rt.current;let _s=null;if(Fn&&Ro){const{cancelDrop:ui}=ue.current;_s={activatorEvent:dt,active:Fn,collisions:wn,delta:Ro,over:io},Ut===en.DragEnd&&typeof ui=="function"&&await Promise.resolve(ui(_s))&&(Ut=en.DragCancel)}we.current=null,ea.unstable_batchedUpdates(()=>{S({type:Ut}),L(Ai.Uninitialized),b(null),de(null),F(null),V.current=null;const ui=Ut===en.DragEnd?"onDragEnd":"onDragCancel";if(_s){const tl=ue.current[ui];tl==null||tl(_s),y({type:ui,event:_s})}})}}},[N]),Qe=O.useCallback((te,se)=>(Ie,bt)=>{const jt=Ie.nativeEvent,dt=N.get(bt);if(we.current!==null||!dt||jt.dndKit||jt.defaultPrevented)return;const Ot={active:dt};te(Ie,se.options,Ot)===!0&&(jt.dndKit={capturedBy:se.sensor},we.current=bt,le(Ie,se))},[N,le]),E=A2(g,Qe);U2(g),si(()=>{We&&M===Ai.Initializing&&L(Ai.Initialized)},[We,M]),O.useEffect(()=>{const{onDragMove:te}=ue.current,{active:se,activatorEvent:Ie,collisions:bt,over:jt}=Rt.current;if(!se||!Ie)return;const dt={active:se,activatorEvent:Ie,collisions:bt,delta:{x:ze.x,y:ze.y},over:jt};ea.unstable_batchedUpdates(()=>{te==null||te(dt),y({type:"onDragMove",event:dt})})},[ze.x,ze.y]),O.useEffect(()=>{const{active:te,activatorEvent:se,collisions:Ie,droppableContainers:bt,scrollAdjustedTranslate:jt}=Rt.current;if(!te||we.current==null||!se||!jt)return;const{onDragOver:dt}=ue.current,Ot=bt.get(Y),In=Ot&&Ot.rect.current?{id:Ot.id,rect:Ot.rect.current,data:Ot.data,disabled:Ot.disabled}:null,Ut={active:te,activatorEvent:se,collisions:Ie,delta:{x:jt.x,y:jt.y},over:In};ea.unstable_batchedUpdates(()=>{b(In),dt==null||dt(Ut),y({type:"onDragOver",event:Ut})})},[Y]),si(()=>{Rt.current={activatorEvent:ce,active:je,activeNode:Re,collisionRect:ct,collisions:Yt,droppableRects:xe,draggableNodes:N,draggingNode:xt,draggingNodeRect:rt,droppableContainers:ie,over:he,scrollableAncestors:_e,scrollAdjustedTranslate:ze},Ue.current={initial:rt,translated:ct}},[je,Re,Yt,ct,N,xt,rt,xe,ie,he,_e,ze]),k2({...Tt,delta:ee,draggingRect:ct,pointerCoordinates:Bn,scrollableAncestors:_e,scrollableAncestorRects:Ze});const R=O.useMemo(()=>({active:je,activeNode:Re,activeNodeRect:We,activatorEvent:ce,collisions:Yt,containerNodeRect:Ft,dragOverlay:nn,draggableNodes:N,droppableContainers:ie,droppableRects:xe,over:he,measureDroppableContainers:ke,scrollableAncestors:_e,scrollableAncestorRects:Ze,measuringConfiguration:Ee,measuringScheduled:qe,windowRect:gs}),[je,Re,We,ce,Yt,Ft,nn,N,ie,xe,he,ke,_e,Ze,Ee,qe,gs]),G=O.useMemo(()=>({activatorEvent:ce,activators:E,active:je,activeNodeRect:We,ariaDescribedById:{draggable:ae},dispatch:S,draggableNodes:N,over:he,measureDroppableContainers:ke}),[ce,E,je,We,S,ae,N,he,ke]);return ye.createElement(kN.Provider,{value:v},ye.createElement(td.Provider,{value:G},ye.createElement(jN.Provider,{value:R},ye.createElement(Xf.Provider,{value:H},f)),ye.createElement(K2,{disabled:(h==null?void 0:h.restoreFocus)===!1})),ye.createElement(t2,{...h,hiddenTextDescribedById:ae}));function j(){const te=(Fe==null?void 0:Fe.autoScrollEnabled)===!1,se=typeof p=="object"?p.enabled===!1:p===!1,Ie=P&&!te&&!se;return typeof p=="object"?{...p,enabled:Ie}:{enabled:Ie}}}),Q2=O.createContext(null),GR="button",eH="Draggable";function tH(t){let{id:s,data:o,disabled:i=!1,attributes:a}=t;const c=Wf(eH),{activators:u,activatorEvent:h,active:p,activeNodeRect:f,ariaDescribedById:g,draggableNodes:m,over:T}=O.useContext(td),{role:I=GR,roleDescription:C="draggable",tabIndex:w=0}=a??{},A=(p==null?void 0:p.id)===s,S=O.useContext(A?Xf:Q2),[y,v]=of(),[M,L]=of(),P=V2(u,s),B=Mu(o);si(()=>(m.set(s,{id:s,key:c,node:y,activatorNode:M,data:B}),()=>{const ee=m.get(s);ee&&ee.key===c&&m.delete(s)}),[m,s]);const N=O.useMemo(()=>({role:I,tabIndex:w,"aria-disabled":i,"aria-pressed":A&&I===GR?!0:void 0,"aria-roledescription":C,"aria-describedby":g.draggable}),[i,I,w,A,C,g.draggable]);return{active:p,activatorEvent:h,activeNodeRect:f,attributes:N,isDragging:A,listeners:i?void 0:P,node:y,over:T,setNodeRef:v,setActivatorNodeRef:L,transform:S}}function nH(){return O.useContext(jN)}const sH="Droppable",oH={timeout:25};function iH(t){let{data:s,disabled:o=!1,id:i,resizeObserverConfig:a}=t;const c=Wf(sH),{active:u,dispatch:h,over:p,measureDroppableContainers:f}=O.useContext(td),g=O.useRef({disabled:o}),m=O.useRef(!1),T=O.useRef(null),I=O.useRef(null),{disabled:C,updateMeasurementsFor:w,timeout:A}={...oH,...a},S=Mu(w??i),y=O.useCallback(()=>{if(!m.current){m.current=!0;return}I.current!=null&&clearTimeout(I.current),I.current=setTimeout(()=>{f(Array.isArray(S.current)?S.current:[S.current]),I.current=null},A)},[A]),v=zf({callback:y,disabled:C||!u}),M=O.useCallback((N,ee)=>{v&&(ee&&(v.unobserve(ee),m.current=!1),N&&v.observe(N))},[v]),[L,P]=of(M),B=Mu(s);return O.useEffect(()=>{!v||!L.current||(v.disconnect(),m.current=!1,v.observe(L.current))},[L,v]),O.useEffect(()=>(h({type:en.RegisterDroppable,element:{id:i,key:c,disabled:o,node:L,rect:T,data:B}}),()=>h({type:en.UnregisterDroppable,key:c,id:i})),[i]),O.useEffect(()=>{o!==g.current.disabled&&(h({type:en.SetDroppableDisabled,id:i,key:c,disabled:o}),g.current.disabled=o)},[i,c,o,h]),{active:u,rect:T,isOver:(p==null?void 0:p.id)===i,node:L,over:p,setNodeRef:P}}function rH(t){let{animation:s,children:o}=t;const[i,a]=O.useState(null),[c,u]=O.useState(null),h=rf(o);return!o&&!i&&h&&a(h),si(()=>{if(!c)return;const p=i==null?void 0:i.key,f=i==null?void 0:i.props.id;if(p==null||f==null){a(null);return}Promise.resolve(s(f,c)).then(()=>{a(null)})},[s,i,c]),ye.createElement(ye.Fragment,null,o,i?O.cloneElement(i,{ref:u}):null)}const lH={x:0,y:0,scaleX:1,scaleY:1};function aH(t){let{children:s}=t;return ye.createElement(td.Provider,{value:GN},ye.createElement(Xf.Provider,{value:lH},s))}const cH={position:"fixed",touchAction:"none"},uH=t=>aE(t)?"transform 250ms ease":void 0,dH=O.forwardRef((t,s)=>{let{as:o,activatorEvent:i,adjustScale:a,children:c,className:u,rect:h,style:p,transform:f,transition:g=uH}=t;if(!h)return null;const m=a?f:{...f,scaleX:1,scaleY:1},T={...cH,width:h.width,height:h.height,top:h.top,left:h.left,transform:Lu.Transform.toString(m),transformOrigin:a&&i?n2(i,h):void 0,transition:typeof g=="function"?g(i):g,...p};return ye.createElement(o,{className:u,style:T,ref:s},c)}),hH=t=>s=>{let{active:o,dragOverlay:i}=s;const a={},{styles:c,className:u}=t;if(c!=null&&c.active)for(const[h,p]of Object.entries(c.active))p!==void 0&&(a[h]=o.node.style.getPropertyValue(h),o.node.style.setProperty(h,p));if(c!=null&&c.dragOverlay)for(const[h,p]of Object.entries(c.dragOverlay))p!==void 0&&i.node.style.setProperty(h,p);return u!=null&&u.active&&o.node.classList.add(u.active),u!=null&&u.dragOverlay&&i.node.classList.add(u.dragOverlay),function(){for(const[p,f]of Object.entries(a))o.node.style.setProperty(p,f);u!=null&&u.active&&o.node.classList.remove(u.active)}},pH=t=>{let{transform:{initial:s,final:o}}=t;return[{transform:Lu.Transform.toString(s)},{transform:Lu.Transform.toString(o)}]},fH={duration:250,easing:"ease",keyframes:pH,sideEffects:hH({styles:{active:{opacity:"0"}}})};function mH(t){let{config:s,draggableNodes:o,droppableContainers:i,measuringConfiguration:a}=t;return jf((c,u)=>{if(s===null)return;const h=o.get(c);if(!h)return;const p=h.node.current;if(!p)return;const f=HN(u);if(!f)return;const{transform:g}=Pn(u).getComputedStyle(u),m=xN(g);if(!m)return;const T=typeof s=="function"?s:gH(s);return PN(p,a.draggable.measure),T({active:{id:c,data:h.data,node:p,rect:a.draggable.measure(p)},draggableNodes:o,dragOverlay:{node:u,rect:a.dragOverlay.measure(f)},droppableContainers:i,measuringConfiguration:a,transform:m})})}function gH(t){const{duration:s,easing:o,sideEffects:i,keyframes:a}={...fH,...t};return c=>{let{active:u,dragOverlay:h,transform:p,...f}=c;if(!s)return;const g={x:h.rect.left-u.rect.left,y:h.rect.top-u.rect.top},m={scaleX:p.scaleX!==1?u.rect.width*p.scaleX/h.rect.width:1,scaleY:p.scaleY!==1?u.rect.height*p.scaleY/h.rect.height:1},T={x:p.x-g.x,y:p.y-g.y,...m},I=a({...f,active:u,dragOverlay:h,transform:{initial:p,final:T}}),[C]=I,w=I[I.length-1];if(JSON.stringify(C)===JSON.stringify(w))return;const A=i==null?void 0:i({active:u,dragOverlay:h,...f}),S=h.node.animate(I,{duration:s,easing:o,fill:"forwards"});return new Promise(y=>{S.onfinish=()=>{A==null||A(),y()}})}}let jR=0;function $H(t){return O.useMemo(()=>{if(t!=null)return jR++,jR},[t])}const _H=ye.memo(t=>{let{adjustScale:s=!1,children:o,dropAnimation:i,style:a,transition:c,modifiers:u,wrapperElement:h="div",className:p,zIndex:f=999}=t;const{activatorEvent:g,active:m,activeNodeRect:T,containerNodeRect:I,draggableNodes:C,droppableContainers:w,dragOverlay:A,over:S,measuringConfiguration:y,scrollableAncestors:v,scrollableAncestorRects:M,windowRect:L}=nH(),P=O.useContext(Xf),B=$H(m==null?void 0:m.id),N=WN(u,{activatorEvent:g,active:m,activeNodeRect:T,containerNodeRect:I,draggingNodeRect:A.rect,over:S,overlayNodeRect:A.rect,scrollableAncestors:v,scrollableAncestorRects:M,transform:P,windowRect:L}),ee=hE(T),ie=mH({config:i,draggableNodes:C,droppableContainers:w,measuringConfiguration:y}),Te=ee?A.setRef:void 0;return ye.createElement(aH,null,ye.createElement(rH,{animation:ie},m&&B?ye.createElement(dH,{key:B,id:m.id,ref:Te,as:h,activatorEvent:g,adjustScale:s,className:p,transition:c,rect:ee,style:{zIndex:f,...a},transform:N},o):null))}),TH=({type:t})=>{switch(t){case"button":return _.jsx(W0,{className:"w-4 h-4 text-gray-600"});case"text":return _.jsx(Q0,{className:"w-4 h-4 text-gray-600"});case"image":return _.jsx(z0,{className:"w-4 h-4 text-gray-600"});case"circle":return _.jsx(j0,{className:"w-4 h-4 text-gray-600"});case"line":return _.jsx(Y0,{className:"w-4 h-4 text-gray-600"});case"rectangle":return _.jsx(G0,{className:"w-4 h-4 text-gray-600"});case"square":return _.jsx(Cb,{className:"w-4 h-4 text-gray-600"});case"star":return _.jsx(q0,{className:"w-4 h-4 text-gray-600"});default:return null}},zN=({workspace:t,currentProject:s})=>{const{selectedScreen:o,selectedComponent:i,setSelectedScreen:a,setSelectedComponent:c,addScreen:u,setShowDeleteDialog:h,setScreenToDelete:p}=ds(),[f,g]=ye.useState(new Set),m=()=>{const I=(s==null?void 0:s.screens.length)??0,C={id:crypto.randomUUID(),name:`Screen ${I+1}`,components:[],settings:{scrollable:!1,backgroundColor:"#ffffff",orientation:"portrait",statusBar:{visible:!0,style:"default",color:"#000000"}}};if(u(C),a(C.id),t){const w=t.newBlock("flutter_stateless_widget");w.setFieldValue(`screen${I+1}`,"classname");const A=t.newBlock("flutter_create_instance");A.setFieldValue("MyWidget","className");const S=w.getInput("content");S&&S.connection&&A.outputConnection&&S.connection.connect(A.outputConnection),w.initSvg(),w.render(),A.initSvg(),A.render()}},T=I=>{g(C=>{const w=new Set(C);return w.has(I)?w.delete(I):w.add(I),w})};return _.jsxs("div",{className:"h-full flex flex-col",children:[_.jsx("div",{className:"p-4 border-b",children:_.jsxs("h2",{className:"font-semibold text-gray-700 mb-2 flex items-center justify-between",children:["Component Tree",_.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:m,title:"Add new screen",children:_.jsx(K0,{className:"w-4 h-4 text-gray-600"})})]})}),_.jsxs("div",{className:"flex-1 overflow-y-auto",children:[s==null?void 0:s.screens.map(I=>_.jsxs("div",{children:[_.jsxs("div",{className:Bt("flex items-center px-4 py-2 cursor-pointer hover:bg-gray-50",o===I.id&&"bg-blue-50"),children:[_.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",onClick:()=>T(I.id),children:_.jsx(FF,{className:Bt("w-4 h-4 text-gray-400 transition-transform",f.has(I.id)&&"rotate-90")})}),_.jsxs("button",{className:"flex items-center flex-1",onClick:()=>a(I.id),children:[_.jsx(Au,{className:"w-4 h-4 text-gray-600 mr-2"}),_.jsx("span",{className:"text-sm text-gray-700",children:I.name})]}),_.jsx("button",{className:"p-1 hover:bg-red-50 rounded text-red-500",onClick:()=>{p(I.id),h(!0)},title:"Delete screen",children:_.jsx(Z0,{className:"w-4 h-4"})})]}),f.has(I.id)&&I.components.map(C=>_.jsxs("div",{className:Bt("flex items-center px-8 py-1 text-sm text-gray-600 hover:bg-gray-50 cursor-pointer",i===C.id&&"bg-blue-50"),onClick:()=>c(C.id),children:[_.jsx(TH,{type:C.type}),_.jsx("span",{className:"ml-2 capitalize",children:C.type})]},C.id))]},I.id)),(!(s!=null&&s.screens)||s.screens.length===0)&&_.jsx("div",{className:"p-4 text-sm text-gray-500 text-center",children:"No screens yet. Click the + button to create one."})]})]})},bH=[{title:"General",components:[{type:"button",label:"Button",icon:_.jsx(W0,{className:"w-6 h-6 text-gray-600"})},{type:"text",label:"Text",icon:_.jsx(Q0,{className:"w-6 h-6 text-gray-600"})},{type:"image",label:"Image",icon:_.jsx(z0,{className:"w-6 h-6 text-gray-600"})},{type:"spacer",label:"Spacer",icon:_.jsx(Cb,{className:"w-6 h-6 text-gray-600"})}]},{title:"Form Elements",components:[{type:"input",label:"Input Field",icon:_.jsx(zF,{className:"w-6 h-6 text-gray-600"})},{type:"counter",label:"Counter",icon:_.jsx(K0,{className:"w-6 h-6 text-gray-600"})},{type:"dropdown",label:"Dropdown",icon:_.jsx(JF,{className:"w-6 h-6 text-gray-600"})},{type:"radio",label:"Radio Button",icon:_.jsx(UF,{className:"w-6 h-6 text-gray-600"})},{type:"checkbox",label:"Checkbox",icon:_.jsx(PF,{className:"w-6 h-6 text-gray-600"})},{type:"slider",label:"Slider",icon:_.jsx(rU,{className:"w-6 h-6 text-gray-600"})}]},{title:"Shapes",components:[{type:"circle",label:"Circle",icon:_.jsx(j0,{className:"w-6 h-6 text-gray-600"})},{type:"line",label:"Line",icon:_.jsx(Y0,{className:"w-6 h-6 text-gray-600"})},{type:"rectangle",label:"Rectangle",icon:_.jsx(G0,{className:"w-6 h-6 text-gray-600"})},{type:"square",label:"Square",icon:_.jsx(Cb,{className:"w-6 h-6 text-gray-600"})},{type:"star",label:"Star",icon:_.jsx(q0,{className:"w-6 h-6 text-gray-600"})}]}],yH=({type:t,label:s,icon:o})=>{const{attributes:i,listeners:a,setNodeRef:c,isDragging:u}=tH({id:`component-${t}`,data:{type:t}});return _.jsxs("div",{ref:c,...a,...i,className:Bt("flex flex-col items-center justify-center p-3 rounded-lg cursor-move hover:bg-gray-50 border border-gray-200",u&&"opacity-50"),children:[_.jsx("div",{className:"p-2 rounded-md mb-2 bg-gray-50",children:o}),_.jsx("span",{className:"text-sm text-gray-700 text-center",children:s})]})},EH=()=>{const[t,s]=O.useState(""),o=bH.map(i=>({...i,components:i.components.filter(a=>a.label.toLowerCase().includes(t.toLowerCase()))})).filter(i=>i.components.length>0);return _.jsxs("div",{className:"border-t",children:[_.jsx("div",{className:"p-4 border-b",children:_.jsxs("div",{className:"relative",children:[_.jsx("input",{type:"text",placeholder:"Search components...",value:t,onChange:i=>s(i.target.value),className:"w-full pl-9 pr-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),_.jsx(oU,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400"})]})}),_.jsxs("div",{children:[o.map((i,a)=>_.jsxs("div",{className:Bt(a>0&&"border-t"),children:[_.jsx("div",{className:"px-4 py-2 bg-gray-50",children:_.jsx("h3",{className:"text-sm font-medium text-gray-700",children:i.title})}),_.jsx("div",{className:"p-4 grid grid-cols-3 gap-2",children:i.components.map(c=>_.jsx(yH,{type:c.type,label:c.label,icon:c.icon},c.type))})]},i.title)),o.length===0&&_.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No components found"})]})]})},vH={button:"A clickable button to perform actions.",text:"Displays static or dynamic text.",image:"Shows an image or icon.",spacer:"Adds empty space between components.",input:"A field for user text input.",counter:"A numeric input with increment/decrement.",dropdown:"A menu to select one option from a list.",radio:"A single selectable option in a group.",checkbox:"A box that can be checked or unchecked.",slider:"A draggable bar for selecting a value.",circle:"A circular shape.",line:"A straight line shape.",rectangle:"A rectangular shape.",square:"A square shape.",star:"A star shape."};function CH({description:t}){const[s,o]=O.useState(!1);return _.jsxs("span",{style:{position:"relative",display:"inline-block",marginLeft:4,cursor:"pointer"},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),tabIndex:0,onFocus:()=>o(!0),onBlur:()=>o(!1),children:[_.jsx(X0,{size:16,style:{color:"#2563eb",verticalAlign:"middle"}}),s&&_.jsx("span",{style:{position:"absolute",left:"120%",top:"50%",transform:"translateY(-50%)",background:"#333",color:"#fff",padding:"6px 10px",borderRadius:4,fontSize:13,whiteSpace:"nowrap",zIndex:10,boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:t})]})}const pE=({type:t,props:s={},tooltipsEnabled:o})=>{const[i,a]=O.useState(0),c=s.style||{},u=o?_.jsx(CH,{description:vH[t]}):null;switch(t){case"button":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("button",{className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors",style:{backgroundColor:c.backgroundColor||"#3B82F6",color:c.color||"#FFFFFF",opacity:c.opacity,padding:c.padding,fontSize:c.fontSize},children:s.text||"Button"}),u]});case"text":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("p",{style:{color:c.color,backgroundColor:c.backgroundColor,opacity:c.opacity,padding:c.padding,fontSize:c.fontSize},children:s.text||"Text"}),u]});case"image":const[h,p]=O.useState(s.src||null),f=g=>{var T;const m=(T=g.target.files)==null?void 0:T[0];if(m){const I=new FileReader;I.onload=C=>{var w,A;p((w=C.target)==null?void 0:w.result),s&&typeof s=="object"&&(s.src=(A=C.target)==null?void 0:A.result)},I.readAsDataURL(m)}};return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsxs("div",{className:"w-24 h-24 bg-gray-200 rounded-md flex items-center justify-center hover:bg-gray-300 transition-colors relative overflow-hidden",style:{backgroundColor:c.backgroundColor,opacity:c.opacity,padding:c.padding},children:[h?_.jsx("img",{src:h,alt:"Uploaded",className:"object-cover w-full h-full"}):_.jsx("span",{style:{color:c.color,fontSize:c.fontSize},children:"Image"}),_.jsxs("label",{className:"absolute bottom-1 right-1 bg-white bg-opacity-80 rounded-full p-1 cursor-pointer shadow hover:bg-opacity-100 transition-all border border-gray-300",children:[_.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:f}),_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 text-gray-700",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5v-9m4.5 4.5h-9"})})]})]}),u]});case"spacer":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("div",{className:"bg-gray-100 border border-dashed border-gray-300 rounded",style:{width:"100px",height:"20px",backgroundColor:c.backgroundColor,opacity:c.opacity,padding:c.padding}}),u]});case"input":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("input",{type:"text",placeholder:s.placeholder||"Enter text...",className:"px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:c.color,backgroundColor:c.backgroundColor,opacity:c.opacity,padding:c.padding,fontSize:c.fontSize},value:s.value||"",readOnly:!0}),u]});case"counter":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsxs("div",{className:"flex items-center space-x-2",style:{opacity:c.opacity,padding:c.padding},children:[_.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded-md",style:{color:c.color,backgroundColor:c.backgroundColor,fontSize:c.fontSize},onClick:()=>a(g=>g-1),children:"-"}),_.jsx("span",{style:{color:c.color,fontSize:c.fontSize},children:i}),_.jsx("button",{className:"px-3 py-1 bg-gray-200 rounded-md",style:{color:c.color,backgroundColor:c.backgroundColor,fontSize:c.fontSize},onClick:()=>a(g=>g+1),children:"+"})]}),u]});case"dropdown":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("select",{className:"px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",style:{color:c.color,backgroundColor:c.backgroundColor,opacity:c.opacity,padding:c.padding,fontSize:c.fontSize},children:(s.options||["Option 1","Option 2","Option 3"]).map((g,m)=>_.jsx("option",{children:g},m))}),u]});case"radio":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsxs("label",{className:"flex items-center space-x-2",style:{opacity:c.opacity,padding:c.padding},children:[_.jsx("input",{type:"radio",checked:s.checked||!1,readOnly:!0}),_.jsx("span",{style:{color:c.color,fontSize:c.fontSize},children:s.text||"Radio Option"})]}),u]});case"checkbox":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsxs("label",{className:"flex items-center space-x-2",style:{opacity:c.opacity,padding:c.padding},children:[_.jsx("input",{type:"checkbox",checked:s.checked||!1,readOnly:!0}),_.jsx("span",{style:{color:c.color,fontSize:c.fontSize},children:s.text||"Checkbox"})]}),u]});case"slider":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsxs("div",{className:"flex flex-col space-y-2",style:{opacity:c.opacity,padding:c.padding},children:[_.jsx("input",{type:"range",min:s.min||0,max:s.max||100,value:s.value||50,className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",style:{accentColor:c.color||"#3B82F6"},readOnly:!0}),_.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[_.jsx("span",{children:s.min||0}),_.jsx("span",{children:s.max||100})]})]}),u]});case"circle":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("div",{className:"rounded-full",style:{width:"50px",height:"50px",backgroundColor:c.backgroundColor||"#3B82F6",border:`2px solid ${c.color||"#000000"}`,opacity:c.opacity}}),u]});case"line":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("div",{style:{width:"100px",height:"2px",backgroundColor:c.color||"#000000",opacity:c.opacity}}),u]});case"rectangle":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("div",{style:{width:"100px",height:"50px",backgroundColor:c.backgroundColor||"#3B82F6",border:`2px solid ${c.color||"#000000"}`,opacity:c.opacity}}),u]});case"square":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("div",{style:{width:"50px",height:"50px",backgroundColor:c.backgroundColor||"#3B82F6",border:`2px solid ${c.color||"#000000"}`,opacity:c.opacity}}),u]});case"star":return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("div",{style:{width:"50px",height:"50px",position:"relative",opacity:c.opacity},children:_.jsx("svg",{viewBox:"0 0 24 24",fill:c.backgroundColor||"#3B82F6",stroke:c.color||"#000000",strokeWidth:"2",style:{width:"100%",height:"100%"},children:_.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),u]});default:return _.jsxs("span",{style:{display:"inline-flex",alignItems:"center"},children:[_.jsx("span",{children:t}),u]})}},SH=({isOpen:t,onClose:s,onConfirm:o})=>t?_.jsx("div",{className:"fixed inset-0 bg-white/30 backdrop-blur-sm flex items-center justify-center z-50",children:_.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Clear Canvas"}),_.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to remove all components from the canvas? This action cannot be undone."}),_.jsxs("div",{className:"flex justify-end space-x-3",children:[_.jsx("button",{className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md transition-colors",onClick:s,children:"Cancel"}),_.jsx("button",{className:"px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded-md transition-colors",onClick:()=>{o(),s()},children:"Clear Canvas"})]})]})}):null,IH=()=>{const{selectedScreen:t,selectedComponent:s,currentProject:o,updateComponent:i,deleteComponent:a,undo:c,redo:u,addComponent:h,clearComponents:p}=ds(),f=o==null?void 0:o.screens.find(de=>de.id===t),[g,m]=O.useState(1),[T,I]=O.useState(!1),[C,w]=O.useState(null),[A,S]=O.useState([]),[y,v]=O.useState(!1),[M,L]=O.useState(!1),{setNodeRef:P,isOver:B}=iH({id:"canvas",data:{accepts:["component"]}});O.useEffect(()=>{const de=ce=>{var ue,ae;if(!t)return;if(ce.ctrlKey||ce.metaKey)switch(ce.key.toLowerCase()){case"z":ce.preventDefault(),ce.shiftKey?u():c();break;case"y":ce.preventDefault(),u();break;case"c":{if(ce.preventDefault(),!s||!f)return;const fe=f.components.find(Ee=>Ee.id===s);if(fe){const Ee=JSON.parse(JSON.stringify(fe));w(Ee)}break}case"v":{if(ce.preventDefault(),!C||!t)return;const fe={...C,id:crypto.randomUUID(),props:{...C.props,style:{...C.props.style||{},left:`${parseInt(((ue=C.props.style)==null?void 0:ue.left)||"0")+20}px`,top:`${parseInt(((ae=C.props.style)==null?void 0:ae.top)||"0")+20}px`}}};h(t,fe);break}}else if(ce.key==="Delete"||ce.key==="Backspace"){const fe=document.activeElement;if(fe&&(fe.tagName==="INPUT"||fe.tagName==="TEXTAREA"||fe.isContentEditable))return;s&&(ce.preventDefault(),a(t,s))}};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[t,s,C,f,c,u,a,h]);const N=()=>m(de=>Math.min(de+.1,2)),ee=()=>m(de=>Math.max(de-.1,.5)),ie=(de,ce,F)=>{if(!f)return[];if(!f.components.find(He=>He.id===de))return[];const ae=[],fe=100,Ee=40,xe=390,ke=844,qe=xe/2,Re=ke/2,Oe=ce+fe/2,Tt=F+Ee/2;return Math.abs(Oe-qe)<10&&ae.push({type:"vertical",position:qe,start:0,end:ke}),Math.abs(Tt-Re)<10&&ae.push({type:"horizontal",position:Re,start:0,end:xe}),Math.abs(ce-16)<10&&ae.push({type:"vertical",position:16,start:0,end:ke}),Math.abs(ce+fe-(xe-16))<10&&ae.push({type:"vertical",position:xe-16,start:0,end:ke}),f.components.forEach(He=>{var nn,xt;if(He.id===de)return;const We=parseInt(((nn=He.props.style)==null?void 0:nn.left)||"0"),Ft=parseInt(((xt=He.props.style)==null?void 0:xt.top)||"0"),Rt=We+fe/2,Zn=Ft+Ee/2;if(Math.abs(Oe-Rt)<10){const rt=Math.abs(F-Ft);rt>0&&(ae.push({type:"vertical",position:Oe,start:Math.min(F,Ft),end:Math.max(F+Ee,Ft+Ee)}),ae.push({type:"vertical",position:Oe,start:Math.min(F+Ee,Ft+Ee),end:Math.max(F,Ft),spacing:rt}))}if(Math.abs(Tt-Zn)<10){const rt=Math.abs(ce-We);rt>0&&(ae.push({type:"horizontal",position:Tt,start:Math.min(ce,We),end:Math.max(ce+fe,We+fe)}),ae.push({type:"horizontal",position:Tt,start:Math.min(ce+fe,We+fe),end:Math.max(ce,We),spacing:rt}))}}),ae},Te=(de,ce,F)=>{var Oe,Tt;if(!f)return;const ue=f.components.find(He=>He.id===de);if(!ue)return;const ae=parseInt(((Oe=ue.props.style)==null?void 0:Oe.left)||"0"),fe=parseInt(((Tt=ue.props.style)==null?void 0:Tt.top)||"0"),Ee=Math.max(0,Math.min(ae+ce,290)),xe=Math.max(0,Math.min(fe+F,744)),ke=ie(de,Ee,xe);S(ke);let qe=Ee,Re=xe;ke.forEach(He=>{if(He.type==="vertical"){const We=Ee+50;Math.abs(We-He.position)<10&&(qe=He.position-50)}if(He.type==="horizontal"){const We=xe+20;Math.abs(We-He.position)<10&&(Re=He.position-20)}}),i(f.id,de,{props:{...ue.props,style:{...ue.props.style||{},left:`${qe}px`,top:`${Re}px`}}})},Ue=()=>A.map((de,ce)=>_.jsx("div",{className:"absolute pointer-events-none",style:{[de.type==="vertical"?"left":"top"]:`${de.position}px`,[de.type==="vertical"?"top":"left"]:`${de.start}px`,[de.type==="vertical"?"width":"height"]:"1px",[de.type==="vertical"?"height":"width"]:`${de.end-de.start}px`,backgroundColor:"rgb(59, 130, 246)",borderStyle:de.isDashed?"dashed":"solid",borderWidth:"1px",borderColor:"rgb(59, 130, 246)"},children:de.spacing&&_.jsx("div",{className:"absolute bg-blue-500 text-white text-xs px-2 py-1 rounded-full transform -translate-x-1/2",style:{[de.type==="vertical"?"top":"left"]:"50%",[de.type==="vertical"?"left":"top"]:"50%",transform:de.type==="vertical"?"translate(-50%, -50%)":"translate(-50%, -50%) rotate(-90deg)"},children:de.spacing})},ce)),je=de=>_.jsx("div",{style:de.props.style,className:Bt("absolute cursor-move",s===de.id&&"ring-2 ring-blue-500"),onMouseDown:ce=>{const F=ce.clientX,ue=ce.clientY,ae=Ee=>{const xe=Ee.clientX-F,ke=Ee.clientY-ue;Te(de.id,xe,ke)},fe=()=>{window.removeEventListener("mousemove",ae),window.removeEventListener("mouseup",fe),S([])};window.addEventListener("mousemove",ae),window.addEventListener("mouseup",fe)},onClick:ce=>{ce.stopPropagation(),ds.getState().setSelectedComponent(de.id)},children:_.jsx(pE,{type:de.type,props:de.props,tooltipsEnabled:y})},de.id),we=()=>_.jsxs("div",{style:{transform:`scale(${g})`,transition:"transform 0.2s ease-in-out"},className:"relative",children:[_.jsx("div",{className:"absolute inset-0 bg-black rounded-[60px] -m-4 shadow-xl"}),_.jsx("div",{ref:P,className:Bt("mobile-canvas w-[390px] h-[844px] bg-white rounded-[50px] overflow-hidden relative p-8",B&&"ring-2 ring-blue-500",(f==null?void 0:f.settings.orientation)==="landscape"&&"rotate-90",T&&"bg-grid-pattern",!f&&"border-2 border-dashed border-gray-300 bg-gray-50"),style:{backgroundColor:f==null?void 0:f.settings.backgroundColor},onClick:()=>ds.getState().setSelectedComponent(null),children:f?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[150px] h-[35px] bg-black rounded-b-[20px]"}),_.jsxs("div",{className:Bt("h-full pt-[35px] relative",f.settings.scrollable&&"overflow-y-auto"),children:[Ue(),f.components.map(je)]})]}):_.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Create a new screen to start designing"})})]}),Fe=()=>{if(!f)return;const de=[...f.components];de.sort((Ee,xe)=>{var Re,Oe,Tt,He;const ke=parseInt(((Re=Ee.props.style)==null?void 0:Re.top)||"0"),qe=parseInt(((Oe=xe.props.style)==null?void 0:Oe.top)||"0");return ke!==qe?ke-qe:parseInt(((Tt=Ee.props.style)==null?void 0:Tt.left)||"0")-parseInt(((He=xe.props.style)==null?void 0:He.left)||"0")});const ce=16,F=16,ue=100,ae=40,fe=Math.floor((390-2*ce)/(ue+F));de.forEach((Ee,xe)=>{const ke=Math.floor(xe/fe),qe=xe%fe,Re=ce+qe*(ue+F),Oe=ce+ke*(ae+F);i(f.id,Ee.id,{props:{...Ee.props,style:{...Ee.props.style||{},left:`${Re}px`,top:`${Oe}px`}}})})};return _.jsxs("div",{className:"flex-1 flex flex-col",children:[_.jsxs("div",{className:"p-4 flex items-center justify-between border-b",children:[_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-md",title:"Undo (Ctrl/ + Z)",onClick:c,children:_.jsx(aU,{className:"w-5 h-5 text-gray-600"})}),_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-md",title:"Redo (Ctrl/ + Y or Shift +  + Z)",onClick:u,children:_.jsx(tU,{className:"w-5 h-5 text-gray-600"})}),_.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-md",onClick:ee,title:"Zoom Out",children:_.jsx(uU,{className:"w-5 h-5 text-gray-600"})}),_.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(g*100),"%"]}),_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-md",onClick:N,title:"Zoom In",children:_.jsx(cU,{className:"w-5 h-5 text-gray-600"})}),_.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),_.jsx("button",{className:Bt("p-2 rounded-md",T?"bg-blue-50 text-blue-600":"hover:bg-gray-100 text-gray-600"),onClick:()=>I(!T),title:"Toggle Grid",children:_.jsx(XF,{className:"w-5 h-5"})}),_.jsxs("button",{className:Bt("ml-2 px-3 py-1 rounded transition-colors flex items-center gap-1",y?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),onClick:()=>v(de=>!de),title:"Enable Tooltips",type:"button",children:[_.jsx(X0,{className:"w-4 h-4"}),_.jsx("span",{className:"text-xs font-medium",children:"Enable Tooltips"})]}),_.jsxs("button",{className:Bt("ml-2 px-3 py-1 rounded transition-colors flex items-center gap-1","bg-gray-100 text-gray-600 hover:bg-gray-200"),onClick:Fe,title:"Rearrange Components",type:"button",disabled:!t||!(f!=null&&f.components.length),children:[_.jsx(KF,{className:"w-4 h-4"}),_.jsx("span",{className:"text-xs font-medium",children:"Rearrange"})]}),_.jsxs("button",{className:Bt("ml-2 px-3 py-1 rounded transition-colors flex items-center gap-1","bg-gray-100 text-gray-600 hover:bg-gray-200"),onClick:()=>L(!0),title:"Clear Canvas",type:"button",disabled:!t||!(f!=null&&f.components.length),children:[_.jsx(WF,{className:"w-4 h-4"}),_.jsx("span",{className:"text-xs font-medium",children:"Clear Canvas"})]})]}),_.jsx("button",{className:Bt("p-2 rounded-md",s?"text-red-600 hover:bg-red-50":"text-gray-400 cursor-not-allowed"),title:"Delete (Delete or Backspace)",onClick:()=>{s&&t&&a(t,s)},disabled:!s,children:_.jsx(Z0,{className:"w-5 h-5"})})]}),_.jsx("div",{className:"flex-1 relative overflow-auto bg-gray-100 p-8",children:_.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:we()})}),_.jsx(SH,{isOpen:M,onClose:()=>L(!1),onConfirm:()=>{t&&p(t)}})]})},wH=({style:t,text:s,onStyleChange:o,onTextChange:i})=>_.jsxs("div",{className:"space-y-4",children:[i&&_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Text"}),_.jsx("input",{type:"text",value:s||"",onChange:a=>i(a.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),_.jsx("input",{type:"color",value:t.color||"#000000",onChange:a=>o({color:a.target.value}),className:"h-8 w-full rounded border"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Background Color"}),_.jsx("input",{type:"color",value:t.backgroundColor||"#ffffff",onChange:a=>o({backgroundColor:a.target.value}),className:"h-8 w-full rounded border"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opacity"}),_.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.opacity||1,onChange:a=>o({opacity:a.target.value}),className:"w-full"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Padding"}),_.jsx("input",{type:"text",value:t.padding||"0px",onChange:a=>o({padding:a.target.value}),placeholder:"e.g., 8px or 8px 16px",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Font Size"}),_.jsx("input",{type:"text",value:t.fontSize||"16px",onChange:a=>o({fontSize:a.target.value}),placeholder:"e.g., 16px or 1rem",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),kH=({type:t,props:s,onChange:o})=>{switch(t){case"button":return _.jsx("div",{className:"space-y-4",children:_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Button Style"}),_.jsxs("select",{value:s.variant||"filled",onChange:i=>o({variant:i.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[_.jsx("option",{value:"filled",children:"Filled"}),_.jsx("option",{value:"outlined",children:"Outlined"}),_.jsx("option",{value:"text",children:"Text"})]})]})});case"input":return _.jsx("div",{className:"space-y-4",children:_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Placeholder"}),_.jsx("input",{type:"text",value:s.placeholder||"",onChange:i=>o({placeholder:i.target.value}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})});case"dropdown":return _.jsx("div",{className:"space-y-4",children:_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Options (one per line)"}),_.jsx("textarea",{value:(s.options||[]).join(`
`),onChange:i=>o({options:i.target.value.split(`
`)}),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4})]})});case"image":return _.jsx("div",{className:"space-y-4",children:_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Image"}),_.jsx("input",{type:"file",accept:"image/*",onChange:i=>{var c;const a=(c=i.target.files)==null?void 0:c[0];if(a){const u=new FileReader;u.onload=h=>{var p;o({src:(p=h.target)==null?void 0:p.result})},u.readAsDataURL(a)}},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.src&&_.jsxs("div",{className:"mt-2 relative",children:[_.jsx("img",{src:s.src,alt:"Preview",className:"w-full h-32 object-cover rounded"}),_.jsx("button",{type:"button",className:"absolute top-1 right-1 bg-white bg-opacity-80 rounded-full p-1 border border-gray-300 hover:bg-red-100",onClick:()=>o({src:void 0}),title:"Remove image",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 text-red-500",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]})});default:return null}},RH=()=>{const{selectedScreen:t,selectedComponent:s,currentProject:o,updateScreen:i,updateComponent:a}=ds(),c=o==null?void 0:o.screens.find(g=>g.id===t),u=c==null?void 0:c.components.find(g=>g.id===s),h=(g,m)=>{c&&i(c.id,{settings:{...c.settings,[g]:m}})},p=g=>{!c||!u||a(c.id,u.id,{props:{...u.props,style:{...u.props.style,...g}}})},f=g=>{!c||!u||a(c.id,u.id,{props:{...u.props,...g}})};return c?_.jsxs("div",{className:"h-full w-72 bg-white border-l flex flex-col",children:[_.jsx("div",{className:"p-4 border-b",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h3",{className:"font-semibold text-gray-700",children:u?"Component Properties":"Screen Properties"}),_.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:_.jsx(BF,{className:"w-4 h-4"})})]})}),_.jsx("div",{className:"flex-1 overflow-y-auto",children:_.jsx("div",{className:"p-4",children:u?_.jsxs(_.Fragment,{children:[_.jsx(wH,{style:u.props.style||{},text:u.props.text,onStyleChange:p,onTextChange:g=>f({text:g})}),_.jsx("div",{className:"mt-6",children:_.jsx(kH,{type:u.type,props:u.props,onChange:f})})]}):_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scrollable"}),_.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[_.jsx("input",{type:"checkbox",checked:c.settings.scrollable,onChange:g=>h("scrollable",g.target.checked),className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"}),_.jsx("label",{className:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Background Color"}),_.jsx("input",{type:"color",value:c.settings.backgroundColor,onChange:g=>h("backgroundColor",g.target.value),className:"h-8 w-full rounded border"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orientation"}),_.jsxs("select",{value:c.settings.orientation,onChange:g=>h("orientation",g.target.value),className:"w-full rounded-md border border-gray-300 p-2 text-sm",children:[_.jsx("option",{value:"portrait",children:"Portrait"}),_.jsx("option",{value:"landscape",children:"Landscape"})]})]})]})})})]}):null},xH=()=>{const{selectedScreen:t,addComponent:s}=ds(),[o,i]=ye.useState(null),[a,c]=ye.useState(null),{currentProject:u,workspace:h}=ds(),p=g=>{var m;i(g.active.id),c((m=g.active.data.current)==null?void 0:m.type)};ye.useEffect(()=>{console.log("Workspace changed:",h)},[h]);const f=g=>{var I,C;const{over:m,active:T}=g;if(i(null),c(null),m&&m.id==="canvas"&&t){const w=(C=(I=T.data)==null?void 0:I.current)==null?void 0:C.type;if(w){const A=document.querySelector(".mobile-canvas");if(!A)return;const S=A.getBoundingClientRect(),y=g.activatorEvent.clientX,v=g.activatorEvent.clientY,M=Math.max(0,Math.min(y-S.left-8,290)),L=Math.max(0,Math.min(v-S.top-8,744));if(s(t,{id:crypto.randomUUID(),type:w,props:{style:{position:"absolute",left:`${M}px`,top:`${L}px`},text:w==="text"?"Text":void 0}}),h){if(w==="button"){const P=h.newBlock("flutter_raised_button");P.initSvg(),P.render()}else if(w==="text"){const P=h.newBlock("flutter_text");P.initSvg(),P.render()}}else console.warn("Blockly workspace is not available in DesignWindow.")}}};return _.jsxs(Z2,{onDragStart:p,onDragEnd:f,children:[_.jsxs("div",{className:"flex-1 flex",children:[_.jsxs("div",{className:"w-64 bg-white border-r flex flex-col",children:[_.jsx("div",{className:"flex-shrink-0",children:_.jsx(zN,{workspace:h,currentProject:u})}),_.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto left-panel-scroll",children:_.jsx(EH,{})})]}),_.jsx(IH,{}),_.jsx(RH,{})]}),_.jsx(_H,{children:o&&a&&_.jsx(pE,{type:a})})]})};var uT={exports:{}},WR;function nr(){return WR||(WR=1,function(t,s){(function(o,i){t.exports=i()})(Qs,function(){var o={},i,a,c,u,h,p,f,g,m,T,I,C,w,A,S,y,v,M,L,P,B,N,ee,ie,Te,Ue,je,we,Fe,de,ce,F,ue,ae,fe,Ee,xe,ke,qe,Re,Oe,Tt,He,We,Ft,Rt,Zn,nn,xt,rt,ms,Qn,gs,_e,Ze,Ye,Bn,sn,W,$s,ze,ct,Yt,Y,he,b,x,H,V,le,Qe,E,R,G,j,te,se,Ie,bt,jt,dt,Ot,In,Ut,es,Fn,wn,io,Ro,_s,ui,tl,ZE,nl,QE,ld,ev,Pa,ad,tv,cd,nv,ud,Zf,Qf,dd,hd,pd,Ba,sv,sl,Fa,fd,ov,iv,rv,di,on,Ua,em,Fs,xo,lv,tm,md,nm,av,sm,Va,cv,gd,uv,dv,$d,hv,ol,pv,om,_d,im,rm,fv,Td,il,bd,mv,lm,am,gv,$v,or,_v,Ha,ts,Tv,bv,yv,Ev,vv,Cv,Sv,cm,Oo,rl,um,Iv,wv,kv,Rv,xv,Ov,Av,Nv,Mv,dm,Lv,ll,yd,Dv,al,hm,pm,fm,Ga,Ed,mm,Pv,gm,$m,_m,Tm,bm,ym,Em,Bv,ja,vm,vd,Cd,ro,Cm,Sm,Wa,Im,wm,Fv,Sd,km,Uv,Vv,Hv,Gv,jv,cl,Rm,xm,ul,Id,Wv,zv,Om,Am,Ao,Nm,Mm,Xv,Yv,Kv,Jv,Lm,qv,Dm,Zv,ir,za,wd,kd,rr,Pm,Rd,Bm,At,Qv,dl,lr,eC,Fm,xd,hl,Um,ar,Xa,Vm,Hm,tC,nC,sC,Gm,oC,jm,Ya,iC,rC,lC,aC,Ka,Wm,zm,Od,Ad,cC,Ja,Xm,qa,uC,dC,hi,Ym,lo,hC,pC,Km,fC,cr,Jm,mC,gC,$C,_C,TC,qm,bC,yC,Nd,EC,vC,Zm,Md,Qm,Ld,eg,tg,pl,ur,No,ao,CC,SC,IC,ng,Dd,wC,kC,RC,sg,Pd,og,Bd,xC,OC,AC,NC,Se,Un,Kt,ft,co,fl,$e,Nt,ig,MC,pi,Fd,Ud,rg,LC,lg,Vd,ag,cg,DC,ug,PC,Hd,BC,FC,UC,VC,HC,dg,GC,Za,Qa,jC,hg,pg,fg,mg,Gd,gg,WC,zC,XC,ml,$g,YC,jd,Ts,KC,fi,_g,JC,ec,Tg,bg,yg,Eg,vg,Cg,Sg,Ig,wg,kg,qC,ZC,QC,eS,tS,nS,Wd,sS,oS,Rg,xg,Og,Ag,Ng,Mg,Lg,zd,tc,Dg,iS,Pg,Bg,Fg,Ug,Vg,Hg,Gg,jg,Wg,zg,rS,lS,aS,Xg,cS,uS,dS,hS,pS,Q;i=function(e,n,r,l){if(!(e instanceof ne)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof n!="string"||n.trim()==="")throw Error('Invalid name "'+n+'". The name must be a non-empty string.');const d=n.toLowerCase();if(!r)throw Error("Can not register a null value");let $=mi[e],k=Xd[e];if($||($=mi[e]=Object.create(null),k=Xd[e]=Object.create(null)),a(e,r),!l&&$[d]&&$[d]!==r)throw Error('Name "'+d+'" with type "'+e+'" already registered.');$[d]=r,k[d]=n},a=function(e,n){switch(e){case String(ne.FIELD):if(typeof n.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},c=function(e,n){e=`${e}`.toLowerCase(),n=n.toLowerCase();const r=mi[e];r&&r[n]?(delete mi[e][n],delete Xd[e][n]):console.warn("Unable to unregister ["+n+"]["+e+"] from the registry.")},u=function(e,n,r){e=`${e}`.toLowerCase(),n=n.toLowerCase();const l=mi[e];if(!l||!l[n]){if(n="Unable to find ["+n+"]["+e+"] in the registry.",r)throw Error(n+" You must require or register a "+e+" plugin.");return console.warn(n),null}return l[n]},h=function(e,n){return e=`${e}`.toLowerCase(),n=n.toLowerCase(),(e=mi[e])?!!e[n]:!1},p=function(e,n,r){return u(e,n,r)},f=function(e,n,r){return u(e,n,r)},g=function(e,n,r){e=`${e}`.toLowerCase();var l=mi[e];if(!l){if(l=`Unable to find [${e}] in the registry.`,r)throw Error(`${l} You must require or register a ${e} plugin.`);return console.warn(l),null}if(!n)return l;e=Xd[e],r=Object.create(null);for(const d of Object.keys(l))r[e[d]]=l[d];return r},m=function(e,n,r){return n=n.plugins[String(e)]||uo,typeof n=="function"?n:p(e,n,r)},T=function(e,n,r,l){e=e+" was deprecated in "+n+" and will be deleted in "+r+".",l&&(e+=`
Use `+l+" instead."),mS.has(e)||(mS.add(e),console.warn(e))},I=function(){return"blockly-"+(tD++).toString(36)},C=function(){return _S.genUid()},w=function(e){return e.type===X.BLOCK_CREATE},A=function(e){return e.type===X.BLOCK_DELETE},S=function(e){return e.type===X.BLOCK_CHANGE},y=function(e){return e.type===X.BLOCK_FIELD_INTERMEDIATE_CHANGE},v=function(e){return e.type===X.BLOCK_MOVE},M=function(e){return e.type===X.CLICK},L=function(e){return e.type===X.BUBBLE_OPEN},P=function(e){return e.type===X.VIEWPORT_CHANGE},o.setRecordUndo$$module$build$src$core$events$utils=function(e){nc=e},B=function(){return nc},N=function(e){bS.fireInternal(e)},ee=function(e){if(we()){if(!Lo.length)try{requestAnimationFrame(()=>{setTimeout(ie,0)})}catch{setTimeout(ie,0)}Te(e)}},ie=function(){const e=Ue(Lo,!0);Lo.length=0;for(const n of e){if(!n.workspaceId)continue;let r;(r=ae(n.workspaceId))==null||r.fireChangeListener(n)}},Te=function(e){if(S(e)&&e.element==="mutation"){let n;for(n=Lo.length;0<n;n--){const r=Lo[n-1];if(r.group!==e.group||r.workspaceId!==e.workspaceId||!v(r)||r.newParentId!==e.blockId)break}Lo.splice(n,0,e)}else Lo.push(e)},Ue=function(e,n=!0){n||(T("filter(queue, /*forward=*/false)","v11.2","v12"),e=e.slice().reverse());const r=[];for(const l of e)if(e=r[r.length-1],!l.isNull())if(e&&e.workspaceId===l.workspaceId&&e.group===l.group)if(v(l)&&v(e)&&l.blockId===e.blockId){if(e.newParentId=l.newParentId,e.newInputName=l.newInputName,e.newCoordinate=l.newCoordinate,e.reason||l.reason){let d,$;e.reason=Array.from(new Set(((d=e.reason)!=null?d:[]).concat(($=l.reason)!=null?$:[])))}}else S(l)&&S(e)&&l.blockId===e.blockId&&l.element===e.element&&l.name===e.name?e.newValue=l.newValue:P(l)&&P(e)?(e.viewTop=l.viewTop,e.viewLeft=l.viewLeft,e.scale=l.scale,e.oldScale=l.oldScale):M(l)&&L(e)||r.push(l);else r.push(l);return e=r.filter(l=>!l.isNull()),n||e.reverse(),e},je=function(){for(let e=0,n;n=Lo[e];e++)n.recordUndo=!1},o.disable$$module$build$src$core$events$utils=function(){Kg++},o.enable$$module$build$src$core$events$utils=function(){Kg--},we=function(){return Kg===0},o.getGroup$$module$build$src$core$events$utils=function(){return TS},o.setGroup$$module$build$src$core$events$utils=function(e){bS.setGroupInternal(e)},Fe=function(e){TS=typeof e=="boolean"?e?C():"":e},de=function(e){const n=[];e=e.getDescendants(!1);for(let r=0,l;l=e[r];r++)n[r]=l.id;return n},ce=function(e,n){const r=F(e.type);if(!r)throw Error("Unknown event type.");return r.fromJson(e,n)},F=function(e){const n=p(ne.EVENT,e);if(!n)throw Error(`Event type ${e} not found in registry.`);return n},ue=function(e){if((v(e)||w(e))&&e.workspaceId){var n=ae(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=n.getBlockById(e.blockId)){const r=nc;try{nc=!1;const l=e.getParent();if(l&&!l.hasDisabledReason(Jg)){const d=e.getDescendants(!1);for(let $=0,k;k=d[$];$++)k.setDisabledReason(!1,Jg)}else if((e.outputConnection||e.previousConnection)&&!n.isDragging())do e.setDisabledReason(!0,Jg),e=e.getNextBlock();while(e)}finally{nc=r}}}},ae=function(e){return sc[e]||null},fe=function(){const e=[];for(const n in sc)e.push(sc[n]);return e},Ee=function(e){sc[e.id]=e},xe=function(e){delete sc[e.id]},ke=function(){return yS},qe=function(e){yS=e},Re=function(){return dr},o.setSelected$$module$build$src$core$common=function(e){if(dr!==e){var n,r,l,d,$,k,D=new(F(X.SELECTED))((l=(n=dr)==null?void 0:n.id)!=null?l:null,(d=e==null?void 0:e.id)!=null?d:null,(k=($=e==null?void 0:e.workspace.id)!=null?$:(r=dr)==null?void 0:r.workspace.id)!=null?k:"");N(D);var q;(q=dr)==null||q.unselect(),dr=e;var me;(me=dr)==null||me.select()}},Oe=function(){return ES},Tt=function(e){ES=e},He=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const n=e.getParentSvg(),r=e.getCachedParentSvgSize();var l=n.parentElement;if(l instanceof HTMLElement){var d=l.offsetWidth;l=l.offsetHeight,r.width!==d&&(n.setAttribute("width",d+"px"),e.setCachedParentSvgSize(d,null)),r.height!==l&&(n.setAttribute("height",l+"px"),e.setCachedParentSvgSize(null,l)),e.resize()}},We=function(e,n){const r=Object.create(null),l=e.getDescendants(!0);n&&(e=e.getNextBlock())&&(e=l.indexOf(e),l.splice(e,l.length-e));for(let d=0,$;$=l[d];d++)r[$.type]?r[$.type]++:r[$.type]=1;return r},Ft=function(e){return function(){this.jsonInit(e)}},Rt=function(e){vS.defineBlocksWithJsonArrayInternal(e)},Zn=function(e){o.defineBlocks$$module$build$src$core$common(o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const n={};for(let r=0;r<e.length;r++){const l=e[r];if(!l){console.warn(`Block definition #${r} in JSON array is ${l}. Skipping`);continue}const d=l.type;d?n[d]={init:Ft(l)}:console.warn(`Block definition #${r} in JSON array is missing a type attribute. Skipping.`)}return n},o.defineBlocks$$module$build$src$core$common=function(e){for(const n of Object.keys(e)){const r=e[n];n in Vn&&console.warn(`Block definition "${n}" overwrites previous definition.`),Vn[n]=r}},nn=function(e,n){xt(),Kd=setTimeout(function(){n&&n.handleRightClick(e)},nD)},xt=function(){Kd&&(clearTimeout(Kd),Kd=0)},rt=function(){Yd=null},ms=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&gs(e)},Qn=function(e){return`${e.pointerId}`},gs=function(e){const n=Qn(e);return Yd?Yd===n:e.type==="pointerdown"?(Yd=n,!0):!1},_e=function(e,n,r,l,d){function $(D){(d||ms(D))&&(r?l.call(r,D):l(D))}const k=[];if(n in hr)for(let D=0;D<hr[n].length;D++){const q=hr[n][D];e.addEventListener(q,$,!1),k.push([e,q,$])}else e.addEventListener(n,$,!1),k.push([e,n,$]);return k},Ze=function(e,n,r,l){function d(k){r?l.call(r,k):l(k)}const $=[];if(n in hr)for(let k=0;k<hr[n].length;k++){const D=hr[n][k];e.addEventListener(D,d,!1),$.push([e,D,d])}else e.addEventListener(n,d,!1),$.push([e,n,d]);return $},Ye=function(e){const n=e[e.length-1][2];for(;e.length;){const[r,l,d]=e.pop();r.removeEventListener(l,d,!1)}return n},Bn=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},sn=function(e){return e.ctrlKey&&n$?!0:e.button===2},W=function(e,n,r){const l=n.createSVGPoint();return l.x=e.clientX,l.y=e.clientY,r||(r=n.getScreenCTM().inverse()),l.matrixTransform(r)},$s=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*LS,y:e.deltaY*LS};case 2:return{x:e.deltaX*DS,y:e.deltaY*DS}}},ze=function(e,n){return n=e.indexOf(n),n===-1?!1:(e.splice(n,1),!0)},ct=function(e){if(s$)throw Error("CSS already injected");o$+=`
`+e},Yt=function(e,n){s$||(s$=!0,e&&(e=n.replace(/[\\/]$/,""),n=o$.replace(/<<<PATH>>>/g,e),o$="",e=document.createElement("style"),e.id="blockly-common-style",n=document.createTextNode(n),e.appendChild(n),document.head.insertBefore(e,document.head.firstChild)))},Y=function(e,n,r){e=document.createElementNS(ic,`${e}`);for(const l in n)e.setAttribute(l,`${n[l]}`);return r&&r.appendChild(e),e},he=function(e,n){return n=n.split(" "),n.every(r=>e.classList.contains(r))?!1:(e.classList.add(...n),!0)},b=function(e,n){e.classList.remove(...n.split(" "))},x=function(e,n){return n=n.split(" "),n.every(r=>!e.classList.contains(r))?!1:(e.classList.remove(...n),!0)},H=function(e,n){return e.classList.contains(n)},V=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},le=function(e,n){const r=n.nextSibling;if(n=n.parentNode,!n)throw Error("Reference node has no parent.");r?n.insertBefore(e,r):n.appendChild(e)},Qe=function(e,n){e.style.transform=n,e.style["-webkit-transform"]=n},E=function(){r$++,Vs||(Vs=Object.create(null))},R=function(){r$--,r$||(Vs=null)},G=function(e){const n=e.textContent+`
`+e.className.baseVal;let r;if(Vs&&(r=Vs[n]))return r;try{r=e.getComputedTextLength()}catch{return 8*e.textContent.length}return Vs&&(Vs[n]=r),r},j=function(e,n,r,l){return te(e,n+"pt",r,l)},te=function(e,n,r,l){const d=e.textContent;e=d+`
`+e.className.baseVal;var $;return Vs&&($=Vs[e])||(Qd||($=document.createElement("canvas"),$.className="blocklyComputeCanvas",document.body.appendChild($),Qd=$.getContext("2d")),Qd.font=r+" "+n+" "+l,$=d?Qd.measureText(d).width:0,Vs&&(Vs[e]=$)),$},se=function(e,n,r,l){const d=document.createElement("span");d.style.font=r+" "+n+" "+l,d.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",n=document.createElement("div"),n.style.display="flex",n.style.position="fixed",n.style.top="0",n.style.left="0",n.appendChild(d),n.appendChild(e),document.body.appendChild(n),r={height:0,baseline:0};try{n.style.alignItems="baseline",r.baseline=e.offsetTop-d.offsetTop,n.style.alignItems="flex-end",r.height=e.offsetTop-d.offsetTop}finally{document.body.removeChild(n)}return r},Ie=function(e){return BS.getSizeInternal(e)},bt=function(e){if(dt(e,"display")!=="none")return jt(e);const n=e.style,r=n.display,l=n.visibility,d=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";const $=e.offsetWidth;return e=e.offsetHeight,n.display=r,n.position=d,n.visibility=l,new Ge($,e)},jt=function(e){return new Ge(e.offsetWidth,e.offsetHeight)},dt=function(e,n){return e=window.getComputedStyle(e),e[n]||e.getPropertyValue(n)},Ot=function(e){const n=new oe(0,0);e=e.getBoundingClientRect();var r=document.documentElement;return r=new oe(window.pageXOffset||r.scrollLeft,window.pageYOffset||r.scrollTop),n.x=e.left+r.x,n.y=e.top+r.y,n},In=function(){const e=document.body,n=document.documentElement;return new oe(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},Ut=function(e){const n=parseFloat(dt(e,"borderLeftWidth")),r=parseFloat(dt(e,"borderRightWidth")),l=parseFloat(dt(e,"borderTopWidth"));return e=parseFloat(dt(e,"borderBottomWidth")),new it(l,e,n,r)},es=function(e,n,r){e=Fn(e,n,r),n.scrollLeft=e.x,n.scrollTop=e.y},Fn=function(e,n,r){var l=Ot(e),d=Ot(n),$=Ut(n);const k=l.x-d.x-$.left;return l=l.y-d.y-$.top,d=jt(e),e=n.clientWidth-d.width,d=n.clientHeight-d.height,$=n.scrollLeft,n=n.scrollTop,r?($+=k-e/2,n+=l-d/2):($+=Math.min(k,Math.max(k-e,0)),n+=Math.min(l,Math.max(l-d,0))),new oe($,n)},wn=function(e){const n=new oe(0,0);var r=e.x&&e.getAttribute("x");const l=e.y&&e.getAttribute("y");return r&&(n.x=parseInt(r)),l&&(n.y=parseInt(l)),(r=(r=e.getAttribute("transform"))&&r.match(FS))&&(n.x+=Number(r[1]),r[3]&&(n.y+=Number(r[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(US))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},io=function(e){let n=0,r=0;for(;e;){const l=wn(e);if(n+=l.x,r+=l.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new oe(n,r)},Ro=function(){const e=In();return new it(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},_s=function(){const e=document.documentElement,n=window;return new oe(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},ui=function(e,n){var r=n.x;n=n.y;const l=e.getInjectionDiv().getBoundingClientRect();return r=new oe(r-l.left,n-l.top),n=e.getOriginOffsetInPixels(),oe.difference(r,n).scale(1/e.scale)},tl=function(e,n){var r=n.scale(e.scale);n=r.x,r=r.y;const l=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new oe(n+l.left+e.x,r+l.top+e.y)},ZE=function(e){({document:th=th,DOMParser:rc=rc,XMLSerializer:lc=lc}=e),eh=new rc,l$=new lc},o.createElement$$module$build$src$core$utils$xml=function(e){return th.createElementNS(VS,e)},o.createTextNode$$module$build$src$core$utils$xml=function(e){return th.createTextNode(e)},o.textToDom$$module$build$src$core$utils$xml=function(e){let n=eh.parseFromString(e,"text/xml");if(n&&n.documentElement&&!n.getElementsByTagName("parsererror").length)return n.documentElement;if((n=eh.parseFromString(e,"text/html"))&&n.body.firstChild&&n.body.firstChild.nodeName.toLowerCase()==="xml")return n.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},nl=function(e){return QE(l$.serializeToString(e))},QE=function(e){return e.replace(rD,n=>`&#${n.charCodeAt(0)};`)},ld=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=Qf(e),e=nv(e)),ev(e),e):null},ev=function(e){const n=e.kind;if(e=e.contents,n&&n!==HS&&n!==a$)throw Error("Invalid toolbox kind "+n+". Please supply either "+HS+" or "+a$);if(!e)throw Error("Toolbox must have a contents attribute.")},Pa=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:ud(e):[]},ad=function(e){return GS.hasCategoriesInternal(e)},tv=function(e){if(!e)return!1;const n=e.kind;return n?n===a$:!!e.contents.filter(r=>r.kind.toUpperCase()==="CATEGORY").length},cd=function(e){return e&&e.contents?!!e.contents.filter(function(n){return n.kind.toUpperCase()==="CATEGORY"}).length:!1},nv=function(e){const n={contents:ud(e)};return e instanceof Node&&Zf(e,n),n},ud=function(e){const n=[];let r=e.childNodes;r||(r=e);for(let l=0,d;d=r[l];l++){if(!d.tagName)continue;e={};const $=d.tagName.toUpperCase();e.kind=$,$==="BLOCK"?e.blockxml=d:d.childNodes&&0<d.childNodes.length&&(e.contents=ud(d)),Zf(d,e),n.push(e)}return n},Zf=function(e,n){for(let r=0;r<e.attributes.length;r++){const l=e.attributes[r];l.nodeName.includes("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[l.nodeName.replace("css-","")]=l.value):n[l.nodeName]=l.value}},Qf=function(e){let n=null;if(e)if(typeof e=="string"){if(n=o.textToDom$$module$build$src$core$utils$xml(e),n.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(n=e);return n},dd=function(e,n,r,l,d,$){const k=$.scrollbar&&$.scrollbar.canScrollVertically();return e.horizontal===_l.LEFT?(r=d.absoluteMetrics.left+r,k&&$.RTL&&(r+=Mt.scrollbarThickness)):(r=d.absoluteMetrics.left+d.viewMetrics.width-n.width-r,k&&!$.RTL&&(r-=Mt.scrollbarThickness)),e.vertical===Fo.TOP?e=d.absoluteMetrics.top+l:(e=d.absoluteMetrics.top+d.viewMetrics.height-n.height-l,$.scrollbar&&$.scrollbar.canScrollHorizontally()&&(e-=Mt.scrollbarThickness)),new it(e,e+n.height,r,r+n.width)},hd=function(e,n){return{horizontal:n.toolboxMetrics.position===Me.LEFT||e.horizontalLayout&&!e.RTL?_l.RIGHT:_l.LEFT,vertical:n.toolboxMetrics.position===Me.BOTTOM?Fo.TOP:Fo.BOTTOM}},pd=function(e,n,r,l){const d=e.left,$=e.right-e.left,k=e.bottom-e.top;for(let D=0;D<l.length;D++){const q=l[D];e.intersects(q)&&(e=r===_i.UP?q.top-k-n:q.bottom+n,e=new it(e,e+k,d,d+$),D=-1)}return e},Ba=function(e,n){i(ne.SERIALIZER,e,n)},sv=function(e){c(ne.SERIALIZER,e)},sl=function(e,{addCoordinates:n=!1,saveIds:r=!0}={}){const l=e.workspace,d=Object.create(null);return d.height=e.getSize().height,d.width=e.getSize().width,r&&(d.id=e.id),n&&(n=e.getRelativeToSurfaceXY(),d.x=l.RTL?l.getWidth()-n.x:n.x,d.y=n.y),e.getText()&&(d.text=e.getText()),e.isCollapsed()&&(d.collapsed=!0),e.isOwnEditable()||(d.editable=!1),e.isOwnMovable()||(d.movable=!1),e.isOwnDeletable()||(d.deletable=!1),d},Fa=function(e,n,{recordUndo:r=!1}={}){const l=B();if(o.setRecordUndo$$module$build$src$core$events$utils(r),r=n.newComment(e.id),e.text!==void 0&&r.setText(e.text),e.x!==void 0||e.y!==void 0){const $=r.getRelativeToSurfaceXY();let k,D=(k=e.x)!=null?k:$.x;D=n.RTL?n.getWidth()-D:D;var d;n=(d=e.y)!=null?d:$.y,r.moveTo(new oe(D,n))}if(e.width!==void 0||e.height){d=r.getSize();let $,k;r.setSize(new Ge(($=e.width)!=null?$:d.width,(k=e.height)!=null?k:d.height))}return e.collapsed!==void 0&&r.setCollapsed(e.collapsed),e.editable!==void 0&&r.setEditable(e.editable),e.movable!==void 0&&r.setMovable(e.movable),e.deletable!==void 0&&r.setDeletable(e.deletable),o.setRecordUndo$$module$build$src$core$events$utils(l),r},fd=function(e,n){i(ne.PASTER,e,n)},ov=function(e){c(ne.PASTER,e)},iv=function(e){const n=e.workspace,r=e.getRelativeToSurfaceXY(),l=new oe(0,0),d=n.getTopComments(!1).filter($=>$.id!==e.id).map($=>$.getRelativeToSurfaceXY());for(;rv(oe.sum(r,l),d);)l.translate(n.RTL?-30:30,30);e.moveTo(oe.sum(r,l))},rv=function(e,n){return n.some(r=>1>=Math.abs(r.x-e.x)&&1>=Math.abs(r.y-e.y))},di=function(e,n){e.setAttribute(cD,n)},on=function(e,n,r){Array.isArray(r)&&(r=r.join(" ")),e.setAttribute(aD+n,`${r}`)},Ua=function(e){return e.saveState!==void 0&&e.loadState!==void 0},em=function(e){return tm(e),lv()?(md(),Promise.resolve()):(Tl||(Tl=new Promise(n=>{g$=n,JS=window.requestAnimationFrame(()=>{md(),n()})})),Tl)},Fs=function(){return Tl||Promise.resolve()},xo=function(e){e||window.cancelAnimationFrame(JS),md(e),!e&&g$&&g$()},lv=function(){return OS},tm=function(e){f$.add(e),m$.set(e,o.getGroup$$module$build$src$core$events$utils());const n=e.getParent();n?tm(n):ih.add(e)},md=function(e){const n=e?new Set([e]):new Set([...ih].map($=>$.workspace)),r=[...ih].filter(av).filter($=>n.has($.workspace));for(var l of r)sm(l);for(const $ of n)$.resizeContents();for(var d of r)l=d.getRelativeToSurfaceXY(),d.updateComponentLocations(l);for(const $ of r)d=o.getGroup$$module$build$src$core$events$utils(),(l=m$.get($))&&o.setGroup$$module$build$src$core$events$utils(l),$.bumpNeighbours(),o.setGroup$$module$build$src$core$events$utils(d);for(const $ of r)nm($);e||(Tl=null)},nm=function(e){ih.delete(e),f$.delete(e),m$.delete(e);for(const n of e.getChildren(!1))nm(n)},av=function(e){return!e.isDisposed()&&!e.getParent()},sm=function(e){if(f$.has(e)&&e.initialized){for(const n of e.getChildren(!1))sm(n);e.renderEfficiently()}},Va=function(e,n){qS(e,n)},cv=function(e){qS=e},gd=function(e,n){eI.confirmInternal(e,n)},uv=function(e,n){ZS(e,n)},dv=function(e){ZS=e},$d=function(e,n,r){QS(e,n,r)},hv=function(e){QS=e},ol=function(e){return e.getProcedureDef!==void 0},pv=function(e){return e.getProcedureCall!==void 0&&e.renameProcedure!==void 0},om=function(e){return e.getVariableModel!==void 0},o.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const n=new Set;for(let r=0;r<e.length;r++){const l=e[r].getVarModels();if(l)for(let d=0;d<l.length;d++){const $=l[d];$.getId()&&n.add($)}}return Array.from(n.values())},o.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const n=new Set;for(let l=0,d;d=e[l];l++){var r=d.getDeveloperVariables;if(r){r=r();for(let $=0;$<r.length;$++)n.add(r[$])}}return Array.from(n.values())},_d=function(e){let n=[];const r=document.createElement("button");return r.setAttribute("text","%{BKY_NEW_VARIABLE}"),r.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(l){il(l.getTargetWorkspace())}),n.push(r),e=im(e),n=n.concat(e)},im=function(e){e=e.getVariablesOfType("");const n=[];if(0<e.length){var r=e[e.length-1];if(Vn.variables_set){var l=o.createElement$$module$build$src$core$utils$xml("block");l.setAttribute("type","variables_set"),l.setAttribute("gap",Vn.math_change?"8":"24"),l.appendChild(or(r)),n.push(l)}if(Vn.math_change&&(l=o.createElement$$module$build$src$core$utils$xml("block"),l.setAttribute("type","math_change"),l.setAttribute("gap",Vn.variables_get?"20":"8"),l.appendChild(or(r)),r=o.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),l.appendChild(r),n.push(l)),Vn.variables_get){e.sort(dc.compareByName);for(let d=0,$;$=e[d];d++)r=o.createElement$$module$build$src$core$utils$xml("block"),r.setAttribute("type","variables_get"),r.setAttribute("gap","8"),r.appendChild(or($)),n.push(r)}}return n},rm=function(e){return nI.generateUniqueNameInternal(e)},fv=function(e){return Td(b$.charAt(0),e.getAllVariableNames())},Td=function(e,n){if(!n.length)return e;const r=b$;let l="",d=r.indexOf(e);for(;;){let $=!1;for(let k=0;k<n.length;k++)if(n[k].toLowerCase()===e){$=!0;break}if(!$)break;d++,d===r.length&&(d=0,l=`${Number(l)+1}`),e=r.charAt(d)+l}return e},il=function(e,n,r){function l($){bd(o.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,$,function(k){if(k){var D=lm(k,e);if(D){if(D.type===d)var q=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",D.name);else q=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,q=q.replace("%1",D.name).replace("%2",D.type);Va(q,function(){l(k)})}else e.createVariable(k,d),n&&n(k)}else n&&n(null)})}const d=r||"";l("")},o.renameVariable$$module$build$src$core$variables=function(e,n,r){function l(d){const $=o.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);bd($,d,function(k){if(k){var D=mv(k,n.type,e),q=am(n.name,k,e);if(D||q){var me="";D?me=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",D.name).replace("%2",D.type):q&&(me=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",k).replace("%2",q)),Va(me,function(){l(k)})}else e.renameVariableById(n.getId(),k),r&&r(k)}else r&&r(null)})}l("")},bd=function(e,n,r){$d(e,n,function(l){l&&(l=l.replace(/[\s\xa0]+/g," ").trim(),l===o.Msg$$module$build$src$core$msg.RENAME_VARIABLE||l===o.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(l=null),r(l)})},mv=function(e,n,r){r=r.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let l=0,d;d=r[l];l++)if(d.name.toLowerCase()===e&&d.type!==n)return d;return null},lm=function(e,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let r=0,l;l=n[r];r++)if(l.name.toLowerCase()===e)return l;return null},am=function(e,n,r){return r.getProcedureMap().getProcedures().length?gv(e,n,r):$v(e,n,r)},gv=function(e,n,r){e=e.toLowerCase(),n=n.toLowerCase(),r=r.getProcedureMap().getProcedures();for(const d of r){var l=d.getParameters().filter(om).map($=>$.getVariableModel().name);if(l&&(r=l.some($=>$.toLowerCase()===e),l=l.some($=>$.toLowerCase()===n),r&&l))return d.getName()}return null},$v=function(e,n,r){e=e.toLowerCase(),n=n.toLowerCase(),r=r.getAllBlocks(!1);for(const d of r){if(!ol(d))continue;r=d.getProcedureDef();var l=r[1];const $=l.some(k=>k.toLowerCase()===e);if(l=l.some(k=>k.toLowerCase()===n),$&&l)return r[0]}return null},or=function(e){const n=o.createElement$$module$build$src$core$utils$xml("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.type),e=o.createTextNode$$module$build$src$core$utils$xml(e.name),n.appendChild(e),n},o.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,n,r,l){let d=o.getVariable$$module$build$src$core$variables(e,n,r,l);return d||(d=_v(e,n,r,l)),d},o.getVariable$$module$build$src$core$variables=function(e,n,r,l){const d=e.getPotentialVariableMap();let $=null;if(n&&($=e.getVariableById(n),!$&&d&&($=d.getVariableById(n)),$))return $;if(r){if(l===void 0)throw Error("Tried to look up a variable by name without a type");$=e.getVariable(r,l),!$&&d&&($=d.getVariable(r,l))}return $},_v=function(e,n,r,l){const d=e.getPotentialVariableMap();return r||(r=rm(e.isFlyout?e.targetWorkspace:e)),d?d.createVariable(r,l,n):e.createVariable(r,l,n)},Ha=function(e,n){e=e.getAllVariables();const r=[];if(n.length!==e.length)for(let l=0;l<e.length;l++){const d=e[l];n.includes(d)||r.push(d)}return r},ts=function(e,{addCoordinates:n=!1,addInputBlocks:r=!0,addNextBlocks:l=!0,doFullSerialization:d=!0,saveIds:$=!0}={}){if(e.isInsertionMarker())return null;const k={type:e.type,id:$?e.id:void 0};return n&&bv(e,k),Tv(e,k),yv(e,k,d),Ev(e,k,d),vv(e,k,d),r&&Cv(e,k,d,$),l&&Sv(e,k,d,$),k},Tv=function(e,n){e.isCollapsed()&&(n.collapsed=!0),e.isEnabled()||(n.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(n.deletable=!1),e.isOwnMovable()||(n.movable=!1),e.isOwnEditable()||(n.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(n.inline=e.inputsInline),e.data&&(n.data=e.data)},bv=function(e,n){const r=e.workspace;e=e.getRelativeToSurfaceXY(),n.x=Math.round(r.RTL?r.getWidth()-e.x:e.x),n.y=Math.round(e.y)},yv=function(e,n,r){e.saveExtraState?(e=e.saveExtraState(r),e!==null&&(n.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(n.extraState=lo(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Ev=function(e,n,r){const l=Object.create(null);for(const d of e.getIcons())Ua(d)&&(e=d.saveState(r))&&(l[d.getType().toString()]=e);Object.keys(l).length&&(n.icons=l)},vv=function(e,n,r){const l=Object.create(null);for(let d=0;d<e.inputList.length;d++){const $=e.inputList[d];for(let k=0;k<$.fieldRow.length;k++){const D=$.fieldRow[k];D.isSerializable()&&(l[D.name]=D.saveState(r))}}Object.keys(l).length&&(n.fields=l)},Cv=function(e,n,r,l){const d=Object.create(null);for(let $=0;$<e.inputList.length;$++){const k=e.inputList[$];if(!k.connection)continue;const D=cm(k.connection,r,l);D&&(d[k.name]=D)}Object.keys(d).length&&(n.inputs=d)},Sv=function(e,n,r,l){e.nextConnection&&(e=cm(e.nextConnection,r,l))&&(n.next=e)},cm=function(e,n,r){const l=e.getShadowState(!0);if(e=e.targetBlock(),!l&&!e)return null;const d=Object.create(null);return l&&(d.shadow=l),e&&!e.isShadow()&&(d.block=ts(e,{doFullSerialization:n,saveIds:r})),d},Oo=function(e,n,{recordUndo:r=!1}={}){return e=rl(e,n,{recordUndo:r}),n.rendered&&xo(),e},rl=function(e,n,{parentConnection:r,isShadow:l=!1,recordUndo:d=!1}={}){const $=B();o.setRecordUndo$$module$build$src$core$events$utils(d),(d=o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0),o.disable$$module$build$src$core$events$utils();const k=n.getAllVariables();let D;try{D=um(e,n,{parentConnection:r,isShadow:l})}finally{o.enable$$module$build$src$core$events$utils()}if(Iv(n,k),we()&&N(new(F(X.BLOCK_CREATE))(D)),o.setGroup$$module$build$src$core$events$utils(d),o.setRecordUndo$$module$build$src$core$events$utils($),n.rendered){const q=D;setTimeout(()=>{q.disposed||q.setConnectionTracking(!0)},1)}return D},um=function(e,n,{parentConnection:r,isShadow:l=!1}={}){if(!e.type)throw new sI(e);const d=n.newBlock(e.type,e.id);return d.setShadow(l),wv(d,e),kv(d,e),Rv(d,e),xv(r,d,e),Ov(d,e),Av(d,e),Nv(d,e),Mv(d,e),Lv(d,n.rendered),d},Iv=function(e,n){if(we())for(e=Ha(e,n),n=0;n<e.length;n++){const r=e[n];N(new(F(X.VAR_CREATE))(r))}},wv=function(e,n){let r=n.x===void 0?0:n.x;n=n.y===void 0?0:n.y;const l=e.workspace;r=l.RTL?l.getWidth()-r:r,e.moveBy(r,n)},kv=function(e,n){if(n.collapsed&&e.setCollapsed(!0),n.deletable===!1&&e.setDeletable(!1),n.movable===!1&&e.setMovable(!1),n.editable===!1&&e.setEditable(!1),n.enabled===!1&&e.setDisabledReason(!0,Rn),Array.isArray(n.disabledReasons))for(const r of n.disabledReasons)e.setDisabledReason(!0,r);n.inline!==void 0&&e.setInputsInline(n.inline),n.data!==void 0&&(e.data=n.data)},Rv=function(e,n){n.extraState&&(e.loadExtraState?e.loadExtraState(n.extraState):e.domToMutation&&e.domToMutation(o.textToDom$$module$build$src$core$utils$xml(n.extraState)))},xv=function(e,n,r){if(e){if(e.getSourceBlock().isShadow()&&!n.isShadow())throw new iI(r);if(e.type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var l=n.outputConnection;if(!l)throw new hc("output",n,r)}else if(l=n.previousConnection,!l)throw new hc("previous",n,r);if(!e.connect(l)){const d=n.workspace.connectionChecker;throw new oI(d.getErrorMessage(d.canConnectWithReason(l,e,!1),l,e),e.type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",n,r)}}},Ov=function(e,n){if(n.icons){var r=Object.keys(n.icons);for(const d of r){r=n.icons[d];var l=e.getIcon(d);if(!l){if(l=p(ne.ICON,d,!1),!l)throw new rI(d,e,n);l=new l(e),e.addIcon(l)}Ua(l)&&l.loadState(r)}}},Av=function(e,n){if(n.fields){var r=Object.keys(n.fields);for(let l=0;l<r.length;l++){const d=r[l],$=n.fields[d],k=e.getField(d);k?k.loadState($):console.warn(`Ignoring non-existant field ${d} in block ${e.type}`)}}},Nv=function(e,n){if(n.inputs){var r=Object.keys(n.inputs);for(let l=0;l<r.length;l++){const d=r[l],$=e.getInput(d);if(!$||!$.connection)throw new hc(d,e,n);dm($.connection,n.inputs[d])}}},Mv=function(e,n){if(n.next){if(!e.nextConnection)throw new hc("next",e,n);dm(e.nextConnection,n.next)}},dm=function(e,n){n.shadow&&e.setShadowState(n.shadow),n.block&&um(n.block,e.getSourceBlock().workspace,{parentConnection:e})},Lv=function(e,n){if(n){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const r of e.getIcons())r.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},ll=function(e){return e.bubbleIsVisible!==void 0&&e.setBubbleVisible!==void 0},yd=function(e){return e*Math.PI/180},Dv=function(e){return 180*e/Math.PI},al=function(e,n,r){if(r<e){const l=r;r=e,e=l}return Math.max(e,Math.min(n,r))},hm=function(){document.querySelector(".blocklyDropDownDiv")||(et=document.createElement("div"),et.className="blocklyDropDownDiv",(Oe()||document.body).appendChild(et),vl=document.createElement("div"),vl.className="blocklyDropDownContent",et.appendChild(vl),yr=document.createElement("div"),yr.className="blocklyDropDownArrow",et.appendChild(yr),et.style.opacity="0",et.style.transition="transform "+ch+"s, opacity "+ch+"s",et.addEventListener("focusin",function(){he(et,"blocklyFocused")}),et.addEventListener("focusout",function(){x(et,"blocklyFocused")}))},pm=function(e){v$=e},fm=function(){return Ti},Ga=function(){return vl},Ed=function(){vl.textContent="",vl.style.width=""},mm=function(e,n){et.style.backgroundColor=e,et.style.borderColor=n},Pv=function(e,n,r,l){return Tm($m(n),e,r,l)},gm=function(e,n,r){return uI=!0,Tm(_m(e),e,n,r)},$m=function(e){var n=e.getSvgRoot();const r=e.workspace.scale,l=e.height*r;return e=e.width*r,n=Ot(n),new it(n.y,n.y+l,n.x,n.x+e)},_m=function(e){return e=e.getScaledBBox(),new it(e.top,e.bottom,e.left,e.right)},Tm=function(e,n,r,l){const d=e.left+(e.right-e.left)/2,$=e.bottom;e=e.top,l&&(e+=l),l=n.getSourceBlock();let k=l.workspace;for(;k.options.parentWorkspace;)k=k.options.parentWorkspace;return pm(k.getParentSvg().parentNode),bm(n,l.RTL,d,$,d,e,r)},bm=function(e,n,r,l,d,$,k){return Ti=e,br=k||null,et.style.direction=n?"rtl":"ltr",e=ke(),yl=e.getRenderer().getClassName(),El=e.getTheme().getClassName(),yl&&he(et,yl),El&&he(et,El),Cm(r,l,d,$)},ym=function(e,n,r,l){return e=ja(e,r.left,r.right,l.width),{initialX:e.divX,initialY:n,finalX:e.divX,finalY:n+y$,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},Em=function(e,n,r,l){return e=ja(e,r.left,r.right,l.width),{initialX:e.divX,initialY:n-l.height,finalX:e.divX,finalY:n-l.height-y$,arrowX:e.arrowX,arrowY:l.height-2*aI-ah/2,arrowAtTop:!1,arrowVisible:!0}},Bv=function(e,n,r){return e=ja(e,n.left,n.right,r.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},ja=function(e,n,r,l){return n=al(n,e-l/2,r-l),e=e-ah/2-n,r=cI,e=al(r,e,l-r-ah),{arrowX:e,divX:n}},vm=function(){return!!Ti},vd=function(e,n){return Ti===e?(n?ro():Cd(),!0):!1},Cd=function(){et.style.transform="translate(0, 0)",et.style.opacity="0",E$=setTimeout(function(){ro()},1e3*ch),br&&(br(),br=null)},ro=function(){vm()&&(E$&&clearTimeout(E$),et.style.transform="",et.style.left="",et.style.top="",et.style.opacity="0",et.style.display="none",et.style.backgroundColor="",et.style.borderColor="",br&&(br(),br=null),Ed(),Ti=null,yl&&(x(et,yl),yl=""),El&&(x(et,El),El=""),ke().markFocused())},Cm=function(e,n,r,l){e=C$.getPositionMetrics(e,n,r,l),e.arrowVisible?(yr.style.display="",yr.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",yr.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):yr.style.display="none",n=Math.floor(e.initialX),r=Math.floor(e.initialY),l=Math.floor(e.finalX);const d=Math.floor(e.finalY);return et.style.left=n+"px",et.style.top=r+"px",et.style.display="block",et.style.opacity="1",et.style.transform="translate("+(l-n)+"px,"+(d-r)+"px)",!!e.arrowAtTop},Sm=function(){if(Ti){var e=Ti.getSourceBlock();e=uI?_m(Ti):$m(e);const n=e.left+(e.right-e.left)/2;Cm(n,e.bottom,n,e.top)}else Cd()},Wa=function(e){return e.length?e.reduce(function(n,r){return n.length<r.length?n:r}).length:0},Im=function(e,n){if(!e.length)return 0;if(e.length===1)return e[0].length;let r=0;n=n||Wa(e);let l;for(l=0;l<n;l++){for(var d=e[0][l],$=1;$<e.length;$++)if(d!==e[$][l])return r;d===" "&&(r=l+1)}for(d=1;d<e.length;d++)if(($=e[d][l])&&$!==" ")return r;return n},wm=function(e,n){if(!e.length)return 0;if(e.length===1)return e[0].length;let r=0;n=n||Wa(e);let l;for(l=0;l<n;l++){for(var d=e[0].substr(-l-1,1),$=1;$<e.length;$++)if(d!==e[$].substr(-l-1,1))return r;d===" "&&(r=l+1)}for(d=1;d<e.length;d++)if(($=e[d].charAt(e[d].length-l-1))&&$!==" ")return r;return n},o.wrap$$module$build$src$core$utils$string=function(e,n){e=e.split(`
`);for(let r=0;r<e.length;r++)e[r]=Fv(e[r],n);return e.join(`
`)},Fv=function(e,n){if(e.length<=n)return e;const r=e.trim().split(/\s+/);for(var l=0;l<r.length;l++)r[l].length>n&&(n=r[l].length);var d=-1/0;let $,k=1;do{l=d,$=e,e=[],d=r.length/k;let D=1;for(let q=0;q<r.length-1;q++)D<(q+1.5)/d?(D++,e[q]=!0):e[q]=!1;e=km(r,e,n),d=Sd(r,e,n),e=Uv(r,e),k++}while(d>l);return $},Sd=function(e,n,r){const l=[0],d=[];for(var $=0;$<e.length;$++)l[l.length-1]+=e[$].length,n[$]===!0?(l.push(0),d.push(e[$].charAt(e[$].length-1))):n[$]===!1&&l[l.length-1]++;for(e=Math.max(...l),n=0,$=0;$<l.length;$++)n-=2*Math.pow(Math.abs(r-l[$]),1.5),n-=Math.pow(e-l[$],1.5),".?!".includes(d[$])?n+=r/3:",;)]}".includes(d[$])&&(n+=r/4);return 1<l.length&&l[l.length-1]<=l[l.length-2]&&(n+=.5),n},km=function(e,n,r){let l=Sd(e,n,r),d;for(let $=0;$<n.length-1;$++){if(n[$]===n[$+1])continue;const k=[].concat(n);k[$]=!k[$],k[$+1]=!k[$+1];const D=Sd(e,k,r);D>l&&(l=D,d=k)}return d?km(e,d,r):n},Uv=function(e,n){const r=[];for(let l=0;l<e.length;l++)r.push(e[l]),n[l]!==void 0&&r.push(n[l]?`
`:" ");return r.join("")},o.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Vv=function(e){uh=e},Hv=function(){return uh},Gv=function(){return mc},jv=function(){return zt},cl=function(e){if(e=Rm(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},Rm=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},xm=function(){document.querySelector(".blocklyTooltipDiv")||(zt=document.createElement("div"),zt.className="blocklyTooltipDiv",(Oe()||document.body).appendChild(zt))},ul=function(e){e.mouseOverWrapper_=Ze(e,"pointerover",null,Wv),e.mouseOutWrapper_=Ze(e,"pointerout",null,zv),e.addEventListener("pointermove",Om,!1)},Id=function(e){e&&(Ye(e.mouseOverWrapper_),Ye(e.mouseOutWrapper_),e.removeEventListener("pointermove",Om))},Wv=function(e){Sl||(e=Rm(e.currentTarget),bs!==e&&(Ao(),gc=null,bs=e),clearTimeout(hI))},zv=function(e){Sl||(hI=setTimeout(function(){gc=bs=null,Ao()},1),clearTimeout(Er),Er=0)},Om=function(e){if(bs&&bs.tooltip&&!Sl)if(mc){const n=S$-e.pageX;e=I$-e.pageY,Math.sqrt(n*n+e*e)>pI&&Ao()}else gc!==bs&&(clearTimeout(Er),S$=e.pageX,I$=e.pageY,Er=setTimeout(Jv,fI))},Am=function(){gc=bs=null,Ao()},Ao=function(){mc&&(mc=!1,zt&&(zt.style.display="none")),Er&&(clearTimeout(Er),Er=0)},Nm=function(){Ao(),Sl=!0},Mm=function(){Sl=!1},Xv=function(){zt&&bs&&(typeof uh=="function"?uh(zt,bs):Yv())},Yv=function(){var e=cl(bs);e=o.wrap$$module$build$src$core$utils$string(e,dI),e=e.split(`
`);for(let n=0;n<e.length;n++){const r=document.createElement("div");r.appendChild(document.createTextNode(e[n])),zt.appendChild(r)}},Kv=function(e){const n=document.documentElement.clientWidth,r=document.documentElement.clientHeight;let l=S$;l=e?l-(w$+zt.offsetWidth):l+w$;let d=I$+k$;return d+zt.offsetHeight>r+window.scrollY&&(d-=zt.offsetHeight+2*k$),e?l=Math.max(dh-window.scrollX,l):l+zt.offsetWidth>n+window.scrollX-2*dh&&(l=n-zt.offsetWidth-2*dh),{x:l,y:d}},Jv=function(){if(!Sl&&(gc=bs,zt)){zt.textContent="",Xv();var e=bs.RTL;zt.style.direction=e?"rtl":"ltr",zt.style.display="block",mc=!0;var{x:n,y:r}=Kv(e);zt.style.left=n+"px",zt.style.top=r+"px"}},Lm=function(){return R$},qv=function(e){R$=e},Dm=function(){return x$},Zv=function(e){x$=e},ir=function(e){e=`${e}`.toLowerCase().trim();var n=mI[e];if(n||(n=e.substring(0,2)==="0x"?"#"+e.substring(2):e,n=n[0]==="#"?n:"#"+n,/^#[0-9a-f]{6}$/.test(n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var r=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return r&&(e=Number(r[1]),n=Number(r[2]),r=Number(r[3]),0<=e&&256>e&&0<=n&&256>n&&0<=r&&256>r)?za(e,n,r):null},za=function(e,n,r){return n=e<<16|n<<8|r,16>e?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},wd=function(e){return e=ir(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},kd=function(e,n,r){let l=0,d=0,$=0;if(n===0)$=d=l=r;else{const k=Math.floor(e/60),D=e/60-k;e=r*(1-n);const q=r*(1-n*D);switch(n=r*(1-n*(1-D)),k){case 1:l=q,d=r,$=e;break;case 2:l=e,d=r,$=n;break;case 3:l=e,d=q,$=r;break;case 4:l=n,d=e,$=r;break;case 5:l=r,d=e,$=q;break;case 6:case 0:l=r,d=n,$=e}}return za(Math.floor(l),Math.floor(d),Math.floor($))},rr=function(e,n,r){return e=ir(e),!e||(n=ir(n),!n)?null:(e=wd(e),n=wd(n),za(Math.round(n[0]+r*(e[0]-n[0])),Math.round(n[1]+r*(e[1]-n[1])),Math.round(n[2]+r*(e[2]-n[2]))))},Pm=function(e){return kd(e,R$,255*x$)},Rd=function(e,n,r){const l=[];var d=e.split("");d.push("");var $=0;e=[];let k=null;for(let me=0;me<d.length;me++){var D=d[me];if($===0)if(D==="%")($=e.join(""))&&l.push($),e.length=0,$=1;else if(r&&D===`
`){const ht=e.join("");ht&&l.push(ht),e.length=0,l.push(D)}else e.push(D);else if($===1)D==="%"?(e.push(D),$=0):n&&"0"<=D&&"9">=D?($=2,k=D,(D=e.join(""))&&l.push(D),e.length=0):D==="{"?$=3:(e.push("%",D),$=0);else if($===2)if("0"<=D&&"9">=D)k+=D;else{var q=void 0;l.push(parseInt((q=k)!=null?q:"",10)),me--,$=0}else $===3&&(D===""?(e.splice(0,0,"%{"),me--,$=0):D!=="}"?e.push(D):($=e.join(""),/[A-Z]\w*/i.test($)?(D=$.toUpperCase(),(D=D.startsWith("BKY_")?D.substring(4):null)&&D in o.Msg$$module$build$src$core$msg?($=o.Msg$$module$build$src$core$msg[D],typeof $=="string"?Array.prototype.push.apply(l,Rd($,n,r)):n?l.push(`${$}`):l.push($)):l.push("%{"+$+"}")):l.push("%{"+$+"}"),$=e.length=0))}for((n=e.join(""))&&l.push(n),q=[],e.length=0,d=0;d<l.length;d++)typeof l[d]!="string"||r&&l[d]===`
`?((n=e.join(""))&&q.push(n),e.length=0,q.push(l[d])):e.push(l[d]);return(n=e.join(""))&&q.push(n),e.length=0,q},Bm=function(e){return Rd(e,!0,!0)},At=function(e){return typeof e!="string"?e:(e=Rd(e,!1,!1),e.length?String(e[0]):"")},Qv=function(e){let n=!0;const r=o.Msg$$module$build$src$core$msg,l=e.match(/%{BKY_[A-Z]\w*}/gi);if(l)for(let d=0;d<l.length;d++){const $=l[d].toUpperCase();r[$.slice(6,-1)]===void 0&&(console.warn("No message string for "+l[d]+" in "+e),n=!1)}return n},dl=function(e){const n=typeof e=="string"?At(e):e;var r=Number(n);if(!isNaN(r)&&0<=r&&360>=r)return{hue:r,hex:kd(r,Lm(),255*Dm())};if(r=ir(n))return{hue:null,hex:r};throw r='Invalid colour: "'+n+'"',e!==n&&(r+=' (from "'+e+'")'),Error(r)},lr=function(){return Gs},eC=function(e){if(Gs=e,e===null){let n;(n=document.querySelector("."+ph))==null||n.remove()}},Fm=function(){const e=Oe()||document.body;document.querySelector("."+ph)?Gs=document.querySelector("."+ph):(Gs=document.createElement("div"),Gs.className=ph),e.appendChild(Gs)},xd=function(e,n,r,l){if(hl(),Il=e,hh=r,r=Gs){if(r.style.direction=n?"rtl":"ltr",r.style.display="block",!l&&e instanceof lt){let k;l=(k=e.getSourceBlock())==null?void 0:k.workspace}var d;O$=(d=l)!=null?d:null;var $;e=($=l)!=null?$:ke(),wl=e.getRenderer().getClassName(),kl=e.getTheme().getClassName(),wl&&he(r,wl),kl&&he(r,kl)}},hl=function(){if(Um()){Il=null;var e=Gs;e&&(e.style.display="none",e.style.left="",e.style.top="",hh&&hh(),hh=null,e.textContent="",wl&&(x(e,wl),wl=""),kl&&(x(e,kl),kl=""),ke().markFocused())}},Um=function(){return!!Il},ar=function(e){Il===e&&hl()},Xa=function(e){O$!==null&&O$!==e||hl()},Vm=function(e,n,r){Gs.style.left=e+"px",Gs.style.top=n+"px",Gs.style.height=r+"px"},Hm=function(e,n,r,l){const d=nC(e,n,r);e=tC(e,n,r,l),0>d?Vm(e,0,r.height+d):Vm(e,d,r.height)},tC=function(e,n,r,l){return l?Math.min(Math.max(n.right-r.width,e.left),e.right-r.width):Math.max(Math.min(n.left,e.right-r.width),e.left)},nC=function(e,n,r){return n.bottom+r.height>=e.bottom?n.top-r.height:n.bottom},sC=function(e){return!(e==null||!e.repositionForWindowResize)},Gm=function(){sC(Il)&&Il.repositionForWindowResize()||hl()},oC=function(){return fh},jm=function(e){fh=e},Ya=function(e,n,r,l){if(xd(gI,r,Wm,l),n.length){var d=iC(n,r,e);mh=d,rC(d,e,r),setTimeout(function(){d.focus()},1),fh=null}else Ka()},iC=function(e,n,r){const l=new h$;l.setRole(Hs.MENU);for(let d=0;d<e.length;d++){const $=e[d],k=new p$($.text);k.setRightToLeft(n),k.setRole(Hs.MENUITEM),l.addChild(k),k.setEnabled($.enabled),$.enabled&&k.onAction(function(){Ka(),requestAnimationFrame(()=>{setTimeout(()=>{$.callback($.scope,r)},0)})},{})}return l},rC=function(e,n,r){const l=Ro();n=new it(n.clientY+l.top,n.clientY+l.top,n.clientX+l.left,n.clientX+l.left),lC(e);const d=e.getSize();r&&(n.left+=d.width,n.right+=d.width,l.left+=d.width,l.right+=d.width),Hm(l,n,d,r),e.focus()},lC=function(e){var n=lr();if(!n)throw Error("Attempting to create a context menu when widget div is null");n=e.render(n),he(n,"blocklyContextMenu"),_e(n,"contextmenu",null,aC),e.focus()},aC=function(e){e.preventDefault(),e.stopPropagation()},Ka=function(){ar(gI),fh=null},Wm=function(){mh&&(mh.dispose(),mh=null)},o.callbackFactory$$module$build$src$core$contextmenu=function(e,n){return()=>{o.disable$$module$build$src$core$events$utils();let r;try{r=n instanceof Element?cr(n,e.workspace):rl(n,e.workspace);const l=e.getRelativeToSurfaceXY();l.x=e.RTL?l.x-o.config$$module$build$src$core$config.snapRadius:l.x+o.config$$module$build$src$core$config.snapRadius,l.y+=2*o.config$$module$build$src$core$config.snapRadius,r.moveBy(l.x,l.y)}finally{o.enable$$module$build$src$core$events$utils()}return we()&&!r.isShadow()&&N(new(F(X.BLOCK_CREATE))(r)),o.setSelected$$module$build$src$core$common(r),r}},zm=function(e,n){return n=W(n,e.getParentSvg(),e.getInverseScreenCTM()),n.x/=e.scale,n.y/=e.scale,n},Od=function(e,n,r){n=zm(e,n),_I.set(e,oe.difference(r,n))},Ad=function(e,n){if(n=zm(e,n),e=_I.get(e),!e)throw Error("Drag not initialized");return oe.sum(e,n)},cC=function(e,n=!1){const r=o.createElement$$module$build$src$core$utils$xml("xml");var l=Xm(o.allUsedVarModels$$module$build$src$core$variables(e));l.hasChildNodes()&&r.appendChild(l);for(const d of e.getTopComments())r.appendChild(Ja(d,n));for(e=e.getTopBlocks(!0),l=0;l<e.length;l++)r.appendChild(qa(e[l],n));return r},Ja=function(e,n=!1){const r=o.createElement$$module$build$src$core$utils$xml("comment");n||r.setAttribute("id",e.id),n=e.workspace;const l=e.getRelativeToSurfaceXY();return l.x=n.RTL?n.getWidth()-l.x:l.x,r.setAttribute("x",`${l.x}`),r.setAttribute("y",`${l.y}`),r.setAttribute("w",`${e.getSize().width}`),r.setAttribute("h",`${e.getSize().height}`),e.getText()&&(r.textContent=e.getText()),e.isCollapsed()&&r.setAttribute("collapsed","true"),e.isOwnEditable()||r.setAttribute("editable","false"),e.isOwnMovable()||r.setAttribute("movable","false"),e.isOwnDeletable()||r.setAttribute("deletable","false"),r},Xm=function(e){const n=o.createElement$$module$build$src$core$utils$xml("variables");for(let r=0;r<e.length;r++){const l=e[r],d=o.createElement$$module$build$src$core$utils$xml("variable");d.appendChild(o.createTextNode$$module$build$src$core$utils$xml(l.name)),l.type&&d.setAttribute("type",l.type),d.id=l.getId(),n.appendChild(d)}return n},qa=function(e,n){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let r=0;if(e.workspace.RTL&&(r=e.workspace.getWidth()),n=hi(e,n),Zm(n)){const l=e.getRelativeToSurfaceXY();n.setAttribute("x",String(Math.round(e.workspace.RTL?r-l.x:l.x))),n.setAttribute("y",String(Math.round(l.y)))}return n},uC=function(e){if(e.isSerializable()){const n=o.createElement$$module$build$src$core$utils$xml("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},dC=function(e,n){for(let r=0;r<e.inputList.length;r++){const l=e.inputList[r];for(let d=0;d<l.fieldRow.length;d++){const $=uC(l.fieldRow[d]);$&&n.appendChild($)}}},hi=function(e,n){if(e.isInsertionMarker())return(n=e.getChildren(!1)[0])?hi(n):new DocumentFragment;const r=o.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(r.setAttribute("type",e.type),n||(r.id=e.id),e.mutationToDom){var l=e.mutationToDom();l&&(l.hasChildNodes()||l.hasAttributes())&&r.appendChild(l)}if(dC(e,r),l=e.getCommentText()){var d=e.getIcon(Wt.COMMENT),$=d.getBubbleSize();d=d.bubbleIsVisible();var k=o.createElement$$module$build$src$core$utils$xml("comment");k.appendChild(o.createTextNode$$module$build$src$core$utils$xml(l)),k.setAttribute("pinned",`${d}`),k.setAttribute("h",String($.height)),k.setAttribute("w",String($.width)),r.appendChild(k)}for(e.data&&(l=o.createElement$$module$build$src$core$utils$xml("data"),l.appendChild(o.createTextNode$$module$build$src$core$utils$xml(e.data)),r.appendChild(l)),l=0;l<e.inputList.length;l++){$=e.inputList[l];var D=void 0;if(d=!0,$.type!==o.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&$.type!==o.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){k=$.connection.targetBlock(),$.type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE?D=o.createElement$$module$build$src$core$utils$xml("value"):$.type===o.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(D=o.createElement$$module$build$src$core$utils$xml("statement"));const me=$.connection.getShadowDom();!me||k&&k.isShadow()||D.appendChild(Ym(me,n)),k&&(k=hi(k,n),k.nodeType===Bo.ELEMENT_NODE&&(D.appendChild(k),d=!1)),D.setAttribute("name",$.name),d||r.appendChild(D)}}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&r.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&r.setAttribute("collapsed","true"),e.isEnabled()||r.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||r.setAttribute("deletable","false"),e.isOwnMovable()||r.setAttribute("movable","false"),e.isOwnEditable()||r.setAttribute("editable","false"),D=e.getNextBlock();let q;return D&&(l=hi(D,n),l.nodeType===Bo.ELEMENT_NODE&&(q=o.createElement$$module$build$src$core$utils$xml("next"),q.appendChild(l),r.appendChild(q))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||D&&D.isShadow()||q.appendChild(Ym(e,n)),r},Ym=function(e,n){let r=e=e.cloneNode(!0),l;for(;r;)if(n&&r.nodeName==="shadow"&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;){l=r,r=r.parentNode;let d;l.nodeType===Bo.TEXT_NODE&&l.data.trim()===""&&((d=r)==null?void 0:d.firstChild)!==l&&V(l)}r&&(l=r,r=r.nextSibling,l.nodeType===Bo.TEXT_NODE&&l.data.trim()===""&&V(l))}return e},lo=function(e){return nl(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},hC=function(e){e=lo(e).split("<");let n="";for(let r=1;r<e.length;r++){const l=e[r];l[0]==="/"&&(n=n.substring(2)),e[r]=n+"<"+l,l[0]!=="/"&&l.slice(-2)!=="/>"&&(n+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},pC=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=o.domToWorkspace$$module$build$src$core$xml(e,n),n.setResizesEnabled(!0),e},o.domToWorkspace$$module$build$src$core$xml=function(e,n){let r=0;n.RTL&&(r=n.getWidth());const l=[];E();const d=o.getGroup$$module$build$src$core$events$utils();d||o.setGroup$$module$build$src$core$events$utils(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);let $=!0;try{for(let k=0,D;D=e.childNodes[k];k++){const q=D.nodeName.toLowerCase(),me=D;if(q==="block"||q==="shadow"&&!B()){const ht=cr(me,n);l.push(ht.id);let ut;const Gn=parseInt((ut=me.getAttribute("x"))!=null?ut:"10",10);let Fl;const Ac=parseInt((Fl=me.getAttribute("y"))!=null?Fl:"10",10);isNaN(Gn)||isNaN(Ac)||ht.moveBy(n.RTL?r-Gn:Gn,Ac,["create"]),$=!1}else{if(q==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(q==="comment")Km(me,n);else if(q==="variables"){if($)Jm(me,n);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");$=!1}}}}finally{o.setGroup$$module$build$src$core$events$utils(d),n.setResizesEnabled&&n.setResizesEnabled(!0),n.rendered&&xo(),R()}return N(new(F(X.FINISHED_LOADING))(n)),l},Km=function(e,n){var r;const l=(r=e.getAttribute("id"))!=null?r:void 0;r=n.rendered?new _h(n,l):new $h(n,l);var d;r.setText((d=e.textContent)!=null?d:"");var $;d=parseInt(($=e.getAttribute("x"))!=null?$:"",10);let k;$=parseInt((k=e.getAttribute("y"))!=null?k:"",10),isNaN(d)||isNaN($)||(d=n.RTL?n.getWidth()-d:d,r.moveTo(new oe(d,$)));var D;n=parseInt((D=e.getAttribute("w"))!=null?D:"",10);let q;return D=parseInt((q=e.getAttribute("h"))!=null?q:"",10),isNaN(n)||isNaN(D)||r.setSize(new Ge(n,D)),e.getAttribute("collapsed")==="true"&&r.setCollapsed(!0),e.getAttribute("editable")==="false"&&r.setEditable(!1),e.getAttribute("movable")==="false"&&r.setMovable(!1),e.getAttribute("deletable")==="false"&&r.setDeletable(!1),r},fC=function(e,n){if(!n.getBlocksBoundingBox)return o.domToWorkspace$$module$build$src$core$xml(e,n);var r=n.getBlocksBoundingBox();if(e=o.domToWorkspace$$module$build$src$core$xml(e,n),r&&r.top!==r.bottom){var l=r.bottom;r=n.RTL?r.right:r.left;var d=1/0;let $=-1/0,k=1/0;for(let D=0;D<e.length;D++){const q=n.getBlockById(e[D]).getRelativeToSurfaceXY();q.y<k&&(k=q.y),q.x<d&&(d=q.x),q.x>$&&($=q.x)}for(l=l-k+10,r=n.RTL?r-$:r-d,d=0;d<e.length;d++)n.getBlockById(e[d]).moveBy(r,l,["create"])}return e},o.domToBlock$$module$build$src$core$xml=function(e,n){return e=cr(e,n),n.rendered&&xo(),e},cr=function(e,n){o.disable$$module$build$src$core$events$utils();var r=n.getAllVariables();let l;try{if(l=Nd(e,n),n.rendered){const d=l,$=l.getDescendants(!1);d.setConnectionTracking(!1);for(let k=$.length-1;0<=k;k--)$[k].initSvg();for(let k=$.length-1;0<=k;k--)$[k].queueRender();setTimeout(function(){d.disposed||d.setConnectionTracking(!0)},1),n.resizeContents()}else{const d=l.getDescendants(!1);for(let $=d.length-1;0<=$;$--)d[$].initModel()}}finally{o.enable$$module$build$src$core$events$utils()}if(we()){for(e=Ha(n,r),n=0;n<e.length;n++)r=e[n],N(new(F(X.VAR_CREATE))(r));N(new(F(X.BLOCK_CREATE))(l))}return l},Jm=function(e,n){for(let l=0;l<e.children.length;l++){var r=e.children[l];const d=r.getAttribute("type"),$=r.getAttribute("id");if(r=r.textContent,!r)break;n.createVariable(r,d,$)}},mC=function(e){const n={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let r=0;r<e.children.length;r++){const l=e.children[r];if(l.nodeType!==Bo.TEXT_NODE)switch(l.nodeName.toLowerCase()){case"mutation":n.mutation.push(l);break;case"comment":n.comment.push(l);break;case"data":n.data.push(l);break;case"title":case"field":n.field.push(l);break;case"value":case"statement":n.input.push(l);break;case"next":n.next.push(l);break;default:console.warn("Ignoring unknown tag: "+l.nodeName)}}return n},gC=function(e,n){let r=!1;for(let l=0;l<e.length;l++){const d=e[l];n.domToMutation&&(n.domToMutation(d),n.initSvg&&(r=!0))}return r},$C=function(e,n){for(let l=0;l<e.length;l++){var r=e[l];const d=r.textContent,$=r.getAttribute("pinned")==="true";let k;const D=parseInt((k=r.getAttribute("w"))!=null?k:"50",10);let q;r=parseInt((q=r.getAttribute("h"))!=null?q:"50",10),n.setCommentText(d);const me=n.getIcon(Wt.COMMENT);isNaN(D)||isNaN(r)||me.setBubbleSize(new Ge(D,r)),me.setBubbleVisible($),setTimeout(()=>me.setBubbleVisible($),1)}},_C=function(e,n){for(let r=0;r<e.length;r++)n.data=e[r].textContent},TC=function(e,n){for(let r=0;r<e.length;r++){const l=e[r],d=l.getAttribute("name");d?EC(n,d,l):console.warn(`Ignoring unnamed field in block ${n.type}`)}},qm=function(e){let n=null,r=null;for(let l=0;l<e.childNodes.length;l++){const d=e.childNodes[l];Zm(d)&&(d.nodeName.toLowerCase()==="block"?n=d:d.nodeName.toLowerCase()==="shadow"&&(r=d))}return{childBlockElement:n,childShadowElement:r}},bC=function(e,n,r,l){for(let $=0;$<e.length;$++){var d=e[$];const k=d.getAttribute("name"),D=k?r.getInput(k):null;if(!D){console.warn("Ignoring non-existent input "+k+" in block "+l);break}if(d=qm(d),d.childBlockElement){if(!D.connection)throw TypeError("Input connection does not exist.");Nd(d.childBlockElement,n,D.connection,!1)}if(d.childShadowElement){let q;(q=D.connection)==null||q.setShadowDom(d.childShadowElement)}}},yC=function(e,n,r){for(let l=0;l<e.length;l++){const d=qm(e[l]);if(d.childBlockElement){if(!r.nextConnection)throw TypeError("Next statement does not exist.");if(r.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Nd(d.childBlockElement,n,r.nextConnection,!0)}d.childShadowElement&&r.nextConnection&&r.nextConnection.setShadowDom(d.childShadowElement)}},Nd=function(e,n,r,l){var d;const $=e.getAttribute("type");if(!$)throw TypeError("Block type unspecified: "+e.outerHTML);var k=(d=e.getAttribute("id"))!=null?d:void 0;d=n.newBlock($,k),k=mC(e);const D=gC(k.mutation,d);if($C(k.comment,d),_C(k.data,d),r)if(l)if(d.previousConnection)r.connect(d.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(d.outputConnection)r.connect(d.outputConnection);else if(d.previousConnection)r.connect(d.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(TC(k.field,d),bC(k.input,n,d,$),yC(k.next,n,d),D&&d.initSvg(),(n=e.getAttribute("inline"))&&d.setInputsInline(n==="true"),(n=e.getAttribute("disabled"))&&d.setDisabledReason(n==="true"||n==="disabled",Rn),n=e.getAttribute("disabled-reasons"),n!==null)for(var q of n.split(","))d.setDisabledReason(!0,decodeURIComponent(q));if((q=e.getAttribute("deletable"))&&d.setDeletable(q==="true"),(q=e.getAttribute("movable"))&&d.setMovable(q==="true"),(q=e.getAttribute("editable"))&&d.setEditable(q==="true"),(q=e.getAttribute("collapsed"))&&d.setCollapsed(q==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=d.getChildren(!1),q=0;q<e.length;q++)if(!e[q].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");d.setShadow(!0)}return d},EC=function(e,n,r){const l=e.getField(n);l?l.fromXml(r):console.warn("Ignoring non-existent field "+n+" in block "+e.type)},vC=function(e){for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(r.nodeName.toLowerCase()==="next"){e.removeChild(r);break}}},Zm=function(e){return e.nodeType===Bo.ELEMENT_NODE},Md=function(e){if(!(100<e.getDescendants(!1).length)){var n=e.workspace,r=e.getSvgRoot();n.getAudioManager().play("delete");var l=e.getRelativeToSurfaceXY(),d=r.cloneNode(!0);d.setAttribute("transform","translate("+l.x+","+l.y+")");var $;($=n.getLayerManager())==null||$.appendToAnimationLayer({getSvgRoot:()=>d}),Qm(d,{x:l.x,y:l.y,width:e.width,height:e.height},n.RTL,new Date)}},Qm=function(e,n,r,l){const d=(new Date().getTime()-l.getTime())/150;1<d?V(e):(e.setAttribute("transform","translate("+(n.x+(r?-1:1)*n.width/2*d)+","+(n.y+n.height/2*d)+") scale("+(1-d)+")"),setTimeout(Qm,10,e,n,r,l))},Ld=function(e){var n=e.workspace;const r=n.scale;if(n.getAudioManager().play("click"),!(1>r)){var l=n.getSvgXY(e.getSvgRoot());e.outputConnection?(l.x+=(e.RTL?3:-3)*r,l.y+=13*r):e.previousConnection&&(l.x+=(e.RTL?-23:23)*r,l.y+=3*r);var d=Y(z.CIRCLE,{cx:l.x,cy:l.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg());e=Y(z.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*r},d),n=Y(z.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},d),e.beginElement(),n.beginElement(),setTimeout(()=>void V(d),150)}},eg=function(e){if(pl(),e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),_c=e,tg(e,n,new Date,0)}},tg=function(e,n,r,l){const d=[.66,1,.66,0,-.66,-1,-.66,0];let $="";r.getTime()+200>new Date().getTime()&&($=`skewX(${Math.round(d[l%d.length]*n)})`,Th=setTimeout(tg,15,e,n,r,l+1)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${$}`)},pl=function(){_c&&(Th&&(clearTimeout(Th),Th=null),_c.getSvgRoot().setAttribute("transform",_c.getTranslation()),_c=null)},ur=function(e){return e.getRelativeToSurfaceXY!==void 0&&e.isMovable!==void 0&&e.startDrag!==void 0&&e.drag!==void 0&&e.endDrag!==void 0&&e.revertDrag!==void 0},No=function(e,n){for(const r in n)e[r]=n[r]!==null&&typeof n[r]=="object"?No(e[r]||Object.create(null),n[r]):n[r];return e},ao=function(e,n){i(ne.FIELD,e,n)},CC=function(e){c(ne.FIELD,e)},o.fromJson$$module$build$src$core$field_registry=function(e){return EI.fromJsonInternal(e)},SC=function(e){const n=f(ne.FIELD,e.type);return n?n.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},o.register$$module$build$src$core$extensions=function(e,n){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(xl[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof n!="function")throw Error('Error: Extension "'+e+'" must be a function');xl[e]=n},o.registerMixin$$module$build$src$core$extensions=function(e,n){if(!n||typeof n!="object")throw Error('Error: Mixin "'+e+'" must be a object');o.register$$module$build$src$core$extensions(e,function(){this.mixin(n)})},o.registerMutator$$module$build$src$core$extensions=function(e,n,r,l){const d='Error when registering mutator "'+e+'": ';og(d,n);const $=sg(n,d);if(r&&typeof r!="function")throw Error(d+'Extension "'+e+'" is not a function');o.register$$module$build$src$core$extensions(e,function(){$&&this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(l||[],this)),this.mixin(n),r&&r.apply(this)})},IC=function(e){ng(e)?delete xl[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},ng=function(e){return!!xl[e]},Dd=function(e,n,r){const l=xl[e];if(typeof l!="function")throw Error('Error: Extension "'+e+'" not found.');let d;if(r?wC(e,n):d=Bd(n),l.apply(n),r)og('Error after applying mutator "'+e+'": ',n);else if(!xC(d,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},wC=function(e,n){if(Bd(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},kC=function(e,n){return Pd(e.mutationToDom,e.domToMutation,n+" mutationToDom/domToMutation")},RC=function(e,n){return Pd(e.saveExtraState,e.loadExtraState,n+" saveExtraState/loadExtraState")},sg=function(e,n){return Pd(e.compose,e.decompose,n+" compose/decompose")},Pd=function(e,n,r){if(e&&n){if(typeof e!="function"||typeof n!="function")throw Error(r+" must be a function");return!0}if(!e&&!n)return!1;throw Error(r+"Must have both or neither functions")},og=function(e,n){const r=kC(n,e),l=RC(n,e);if(!r&&!l)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");sg(n,e)},Bd=function(e){const n=[];return e.domToMutation!==void 0&&n.push(e.domToMutation),e.mutationToDom!==void 0&&n.push(e.mutationToDom),e.saveExtraState!==void 0&&n.push(e.saveExtraState),e.loadExtraState!==void 0&&n.push(e.loadExtraState),e.compose!==void 0&&n.push(e.compose),e.decompose!==void 0&&n.push(e.decompose),n},xC=function(e,n){if(n=Bd(n),n.length!==e.length)return!1;for(let r=0;r<n.length;r++)if(e[r]!==n[r])return!1;return!0},OC=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const n=setInterval(function(){document.readyState==="complete"&&(clearInterval(n),e())},10)}},o.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,n){const r=[];return function(){r.includes(this.type)||(AC(this,e,n),r.push(this.type)),this.setTooltip((function(){const l=String(this.getFieldValue(e));return At(n[l])}).bind(this))}},AC=function(e,n,r){var l=e.getField(n);if(l instanceof Hn&&!l.isOptionListDynamic()){l=l.getOptions();for(const[,d]of l)r[d]===void 0&&console.warn(`No tooltip mapping for value ${d} of field ${n} of block type ${e.type}.`)}},o.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,n){return function(){this.setTooltip((function(){const r=this.getField(n);return At(e).replace("%1",r?r.getText():"")}).bind(this))}},NC=function(){const e=this.tooltip;this.setTooltip((function(){const n=this.getParent();return n&&n.getInputsInline()&&n.tooltip||e}).bind(this))},Se=function(e,n){return" "+e+","+n+" "},Un=function(e,n){return" "+e+n.join("")},Kt=function(e,n){return" M "+e+","+n+" "},ft=function(e,n){return" m "+e+","+n+" "},co=function(e,n){return" l "+e+","+n+" "},fl=function(e){return" l"+e.join("")},$e=function(e,n){return" "+e+" "+n+" "},Nt=function(e,n,r,l){return e+" "+r+" "+r+" "+n+l},ig=function(e,n){i(ne.ICON,e.toString(),n)},MC=function(e){c(ne.ICON,e)},pi=function(e){return e.getProcedureModel!==void 0&&e.doProcedureUpdate!==void 0&&e.isProcedureDef!==void 0},Fd=function(e){return e.startPublishing!==void 0&&e.stopPublishing!==void 0},Ud=function(e){const n=e.getProcedureMap().getProcedures().filter(l=>!l.getReturnTypes()).map(l=>[l.getName(),l.getParameters().map(d=>d.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(l=>{!pi(l)&&ol(l)&&n.push(l.getProcedureDef())});const r=e.getProcedureMap().getProcedures().filter(l=>!!l.getReturnTypes()).map(l=>[l.getName(),l.getParameters().map(d=>d.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(l=>{!pi(l)&&ol(l)&&r.push(l.getProcedureDef())}),n.sort(rg),r.sort(rg),[n,r]},rg=function(e,n){return e[0].localeCompare(n[0],void 0,{sensitivity:"base"})},o.findLegalName$$module$build$src$core$procedures=function(e,n){if(n.isInFlyout)return e;for(e=e||o.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!LC(e,n.workspace,n);){const r=e.match(/^(.*?)(\d+)$/);e=r?r[1]+(parseInt(r[2])+1):e+"2"}return e},LC=function(e,n,r){return!lg(e,n,r)},lg=function(e,n,r){for(const l of n.getAllBlocks(!1))if(l!==r&&ol(l)&&o.Names$$module$build$src$core$names.equals(l.getProcedureDef()[0],e))return!0;r=r&&pi(r)?r==null?void 0:r.getProcedureModel():void 0;for(const l of n.getProcedureMap().getProcedures())if(l!==r&&o.Names$$module$build$src$core$names.equals(l.getName(),e))return!0;return!1},o.rename$$module$build$src$core$procedures=function(e){var n=this.getSourceBlock();if(!n)throw new Lt;e=e.trim();const r=o.findLegalName$$module$build$src$core$procedures(e,n);pi(n)&&!n.isInsertionMarker()&&n.getProcedureModel().setName(r);const l=this.getValue();if(l!==e&&l!==r)for(e=n.workspace.getAllBlocks(!1),n=0;n<e.length;n++){const d=e[n];d.renameProcedure&&d.renameProcedure(l,r)}return r},Vd=function(e){function n($,k){for(let q=0;q<$.length;q++){var D=$[q][0];const me=$[q][1],ht=o.createElement$$module$build$src$core$utils$xml("block");ht.setAttribute("type",k),ht.setAttribute("gap","16");const ut=o.createElement$$module$build$src$core$utils$xml("mutation");for(ut.setAttribute("name",D),ht.appendChild(ut),D=0;D<me.length;D++){const Gn=o.createElement$$module$build$src$core$utils$xml("arg");Gn.setAttribute("name",me[D]),ut.appendChild(Gn)}r.push(ht)}}const r=[];if(Vn.procedures_defnoreturn){var l=o.createElement$$module$build$src$core$utils$xml("block");l.setAttribute("type","procedures_defnoreturn"),l.setAttribute("gap","16");var d=o.createElement$$module$build$src$core$utils$xml("field");d.setAttribute("name","NAME"),d.appendChild(o.createTextNode$$module$build$src$core$utils$xml(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),l.appendChild(d),r.push(l)}return Vn.procedures_defreturn&&(l=o.createElement$$module$build$src$core$utils$xml("block"),l.setAttribute("type","procedures_defreturn"),l.setAttribute("gap","16"),d=o.createElement$$module$build$src$core$utils$xml("field"),d.setAttribute("name","NAME"),d.appendChild(o.createTextNode$$module$build$src$core$utils$xml(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),l.appendChild(d),r.push(l)),Vn.procedures_ifreturn&&(l=o.createElement$$module$build$src$core$utils$xml("block"),l.setAttribute("type","procedures_ifreturn"),l.setAttribute("gap","16"),r.push(l)),r.length&&r[r.length-1].setAttribute("gap","24"),e=Ud(e),n(e[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),r},ag=function(e){var n=[],r=e.getBlocksByType("procedures_mutatorarg",!1);for(let $=0,k;k=r[$];$++)n.push(k.getFieldValue("NAME"));r=o.createElement$$module$build$src$core$utils$xml("xml");const l=o.createElement$$module$build$src$core$utils$xml("block");l.setAttribute("type","procedures_mutatorarg");const d=o.createElement$$module$build$src$core$utils$xml("field");d.setAttribute("name","NAME"),n=Td(o.DEFAULT_ARG$$module$build$src$core$procedures,n),n=o.createTextNode$$module$build$src$core$utils$xml(n),d.appendChild(n),l.appendChild(d),r.appendChild(l),e.updateToolbox(r)},cg=function(e){if(L(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=ae(e.workspaceId).getBlockById(e.blockId);var n=e.type;(n==="procedures_defnoreturn"||n==="procedures_defreturn")&&(e=e.getIcon(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),ag(e),e.addChangeListener(DC))}},DC=function(e){(w(e)||A(e)||S(e)||y(e))&&(e=ae(e.workspaceId),ag(e))},ug=function(e,n){return n.getAllBlocks(!1).filter(r=>PC(r,e)||pv(r)&&o.Names$$module$build$src$core$names.equals(r.getProcedureCall(),e))},PC=function(e,n){return pi(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&o.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),n)},o.mutateCallers$$module$build$src$core$procedures=function(e){const n=B();var r=e.getProcedureDef()[0];const l=e.mutationToDom(!0);e=ug(r,e.workspace);for(let $=0,k;k=e[$];$++){r=(r=k.mutationToDom())&&nl(r),k.domToMutation&&k.domToMutation(l);var d=k.mutationToDom();d=d&&nl(d),r!==d&&(o.setRecordUndo$$module$build$src$core$events$utils(!1),N(new(F(X.BLOCK_CHANGE))(k,"mutation",null,r,d)),o.setRecordUndo$$module$build$src$core$events$utils(n))}},o.getDefinition$$module$build$src$core$procedures=function(e,n){for(const r of n.getAllBlocks(!1))if(pi(r)&&r.isProcedureDef()&&o.Names$$module$build$src$core$names.equals(r.getProcedureModel().getName(),e)||ol(r)&&o.Names$$module$build$src$core$names.equals(r.getProcedureDef()[0],e))return r;return null},Hd=function(e){return e.isDynamic},BC=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},FC=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},UC=function(e,n){if(!e||!n)throw Error("Cannot connect null connections.");e.targetConnection=n,n.targetConnection=e},VC=function(e,n){let r=null;n=n.outputConnection;const l=n==null?void 0:n.getConnectionChecker();for(let d=0,$;$=e.inputList[d];d++){const k=$.connection;let D;if(k&&((D=l)!=null&&D.canConnect(n,k,!1))){if(r)return null;r=k}}return r},HC=function(e,n){let r;for(;r=VC(e,n);)if(e=r.targetBlock(),!e||e.isShadow())return r;return null},dg=function(e){return e.getType!==void 0&&e.initView!==void 0&&e.dispose!==void 0&&e.getWeight!==void 0&&e.getSize!==void 0&&e.applyColour!==void 0&&e.hideForInsertionMarker!==void 0&&e.updateEditable!==void 0&&e.updateCollapsed!==void 0&&e.isShownWhenCollapsed!==void 0&&e.setOffsetInBlock!==void 0&&e.onLocationChange!==void 0&&e.onClick!==void 0},GC=function(e){return dg(e)&&ll(e)&&Ua(e)&&e.setText!==void 0&&e.getText!==void 0&&e.setBubbleSize!==void 0&&e.getBubbleSize!==void 0&&e.getType()===Wt.COMMENT},Za=function(e){let n=e.outputConnection;return(!n||e.previousConnection&&e.previousConnection.isConnected())&&(n=e.previousConnection),n},Qa=function(e,n){i(ne.RENDERER,e,n)},jC=function(e){c(ne.RENDERER,e)},hg=function(e,n,r){return e=new(p(ne.RENDERER,e))(e),e.init(n,r),e},pg=function(e){il(e.getTargetWorkspace(),void 0,"String")},fg=function(e){il(e.getTargetWorkspace(),void 0,"Number")},mg=function(e){il(e.getTargetWorkspace(),void 0,"Colour")},Gd=function(e){let n=[],r=document.createElement("button");return r.setAttribute("text",o.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(r),r=document.createElement("button"),r.setAttribute("text",o.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(r),r=document.createElement("button"),r.setAttribute("text",o.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(r),e.registerButtonCallback("CREATE_VARIABLE_STRING",pg),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",fg),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",mg),e=gg(e),n=n.concat(e)},gg=function(e){e=e.getAllVariables();const n=[];if(0<e.length){if(Vn.variables_set_dynamic){var r=e[e.length-1];const l=o.createElement$$module$build$src$core$utils$xml("block");l.setAttribute("type","variables_set_dynamic"),l.setAttribute("gap","24"),l.appendChild(or(r)),n.push(l)}if(Vn.variables_get_dynamic){e.sort(dc.compareByName);for(let l=0,d;d=e[l];l++)r=o.createElement$$module$build$src$core$utils$xml("block"),r.setAttribute("type","variables_get_dynamic"),r.setAttribute("gap","8"),r.appendChild(or(d)),n.push(r)}}return n},WC=function(e,n){const r=e.workspace,l=o.config$$module$build$src$core$config.snapRadius,d=oe.difference(n,e.getRelativeToSurfaceXY()),$=new oe(0,0),k=r.getAllBlocks(!1).filter(D=>D.id!=e.id).map(D=>D.getRelativeToSurfaceXY());for(;zC(oe.sum(n,$),k)||XC(e,oe.sum(d,$),l);)r.RTL?$.translate(-l,2*l):$.translate(l,2*l);e.moveTo(oe.sum(n,$))},zC=function(e,n){return n.some(r=>1>=Math.abs(r.x-e.x)&&1>=Math.abs(r.y-e.y))},XC=function(e,n,r){return e.getConnections_(!1).some(l=>!!l.closest(r,n).connection)},ml=function(e,n,r){const l=r.getBoundingRectangle(),d=l.right-l.left,$=al(n.top,l.top,n.top+n.height-(l.bottom-l.top))-l.top;let k=n.left;return n=n.left+n.width-d,e.RTL?k=Math.min(n,k):n=Math.max(k,n),(e=al(k,l.left,n)-l.left)||$?(r.moveBy(e,$,["inbounds"]),!0):!1},$g=function(e){return n=>{var r=e.getMetricsManager();if(r.hasFixedEdges()&&!e.isDragging()){var l;if(fS.includes((l=n.type)!=null?l:"")){l=r.getScrollMetrics(!0);const d=YC(e,n);d&&(r=o.getGroup$$module$build$src$core$events$utils()||!1,o.setGroup$$module$build$src$core$events$utils(n.group),ml(e,l,d)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),o.setGroup$$module$build$src$core$events$utils(r))}else P(n)&&n.scale&&n.oldScale&&n.scale>n.oldScale&&jd(e)}}},YC=function(e,n){let r=null;switch(n.type){case X.BLOCK_CREATE:case X.BLOCK_MOVE:(r=e.getBlockById(n.blockId))&&(r=r.getRootBlock());break;case X.COMMENT_CREATE:case X.COMMENT_MOVE:case X.COMMENT_RESIZE:r=e.getCommentById(n.commentId)}return r},jd=function(e){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){n=n.getScrollMetrics(!0);var r=e.getTopBoundedElements();for(let l=0,d;d=r[l];l++)ml(e,n,d)}},Ts=function(e){return e.isDeletable!==void 0&&e.dispose!==void 0&&e.setDeleteStyle!==void 0},KC=function(e){const n=e.toCopyData();s_=n;let r;return o_=(r=e.workspace)!=null?r:null,n},fi=function(e,n,r){return e&&n?_g(e,n,r):s_&&o_?_g(s_,o_):null},_g=function(e,n,r){let l;n=n.isMutator?n:(l=n.getRootWorkspace())!=null?l:n;let d,$;return($=(d=f(ne.PASTER,e.paster,!1))==null?void 0:d.paste(e,n,r))!=null?$:null},JC=function(e){const n=e.toCopyData();return n?fi(n,e.workspace):null},ec=function(e){return e.toCopyData!==void 0},Tg=function(){tt.registry.register({name:mo.ESCAPE,preconditionFn(e){return!e.options.readOnly},callback(e){return e.hideChaff(),!0},keyCodes:[Be.ESC]})},bg=function(){tt.registry.register({name:mo.DELETE,preconditionFn(e){const n=Re();return!e.options.readOnly&&n!=null&&Ts(n)&&n.isDeletable()&&!Uo.inProgress()},callback(e,n){return n.preventDefault(),e=Re(),e instanceof Ss?e.checkAndDelete():Ts(e)&&e.isDeletable()&&(o.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),o.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[Be.DELETE,Be.BACKSPACE]})},yg=function(){const e=tt.registry.createSerializedKey(Be.C,[Be.CTRL]),n=tt.registry.createSerializedKey(Be.C,[Be.ALT]),r=tt.registry.createSerializedKey(Be.C,[Be.META]);tt.registry.register({name:mo.COPY,preconditionFn(l){const d=Re();return!l.options.readOnly&&!Uo.inProgress()&&d!=null&&Ts(d)&&d.isDeletable()&&ur(d)&&d.isMovable()&&ec(d)},callback(l,d){return d.preventDefault(),l.hideChaff(),d=Re(),!d||!ec(d)?!1:(Ci=d.toCopyData(),Si=d.workspace instanceof ls?d.workspace:l,Dl=ur(d)?d.getRelativeToSurfaceXY():null,!!Ci)},keyCodes:[e,n,r]})},Eg=function(){const e=tt.registry.createSerializedKey(Be.X,[Be.CTRL]),n=tt.registry.createSerializedKey(Be.X,[Be.ALT]),r=tt.registry.createSerializedKey(Be.X,[Be.META]);tt.registry.register({name:mo.CUT,preconditionFn(l){const d=Re();return!l.options.readOnly&&!Uo.inProgress()&&d!=null&&Ts(d)&&d.isDeletable()&&ur(d)&&d.isMovable()&&!d.workspace.isFlyout},callback(l){const d=Re();return d instanceof Ss?(Ci=d.toCopyData(),Si=l,Dl=d.getRelativeToSurfaceXY(),d.checkAndDelete(),!0):Ts(d)&&d.isDeletable()&&ec(d)?(Ci=d.toCopyData(),Si=l,Dl=ur(d)?d.getRelativeToSurfaceXY():null,d.dispose(),!0):!1},keyCodes:[e,n,r]})},vg=function(){const e=tt.registry.createSerializedKey(Be.V,[Be.CTRL]),n=tt.registry.createSerializedKey(Be.V,[Be.ALT]),r=tt.registry.createSerializedKey(Be.V,[Be.META]);tt.registry.register({name:mo.PASTE,preconditionFn(l){return!l.options.readOnly&&!Uo.inProgress()},callback(){if(!Ci||!Si)return!1;if(!Dl)return!!fi(Ci,Si);const{left:l,top:d,width:$,height:k}=Si.getMetricsManager().getViewMetrics(!0);if(new it(d,d+k,l,l+$).contains(Dl.x,Dl.y))return!!fi(Ci,Si);const D=new oe(l+$/2,d+k/2);return!!fi(Ci,Si,D)},keyCodes:[e,n,r]})},Cg=function(){const e=tt.registry.createSerializedKey(Be.Z,[Be.CTRL]),n=tt.registry.createSerializedKey(Be.Z,[Be.ALT]),r=tt.registry.createSerializedKey(Be.Z,[Be.META]);tt.registry.register({name:mo.UNDO,preconditionFn(l){return!l.options.readOnly&&!Uo.inProgress()},callback(l,d){return l.hideChaff(),l.undo(!1),d.preventDefault(),!0},keyCodes:[e,n,r]})},Sg=function(){const e=tt.registry.createSerializedKey(Be.Z,[Be.SHIFT,Be.CTRL]),n=tt.registry.createSerializedKey(Be.Z,[Be.SHIFT,Be.ALT]),r=tt.registry.createSerializedKey(Be.Z,[Be.SHIFT,Be.META]),l=tt.registry.createSerializedKey(Be.Y,[Be.CTRL]);tt.registry.register({name:mo.REDO,preconditionFn(d){return!Uo.inProgress()&&!d.options.readOnly},callback(d,$){return d.hideChaff(),d.undo(!0),$.preventDefault(),!0},keyCodes:[e,n,r,l]})},Ig=function(){Tg(),bg(),yg(),Eg(),vg(),Cg(),Sg()},wg=function(e){const n=e.saveState();return e.getParameters().length&&(n.parameters=e.getParameters().map(r=>r.saveState())),n},kg=function(e,n,r,l){if(e=e.loadState(r,l),!r.parameters)return e;for(const[d,$]of r.parameters.entries())e.insertParameter(n.loadState($,l),d);return e},qC=function(e){const n=Object.create(null),r=g(ne.SERIALIZER,!0);for(const l in r){let d;const $=(d=r[l])==null?void 0:d.save(e);$&&(n[l]=$)}return n},ZC=function(e,n,{recordUndo:r=!1}={}){var l=g(ne.SERIALIZER,!0);if(l){l=Object.entries(l).sort(($,k)=>k[1].priority-$[1].priority);var d=B();o.setRecordUndo$$module$build$src$core$events$utils(r),(r=o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0),E(),n instanceof ls&&n.setResizesEnabled(!1);for(const[,$]of l.reverse()){let k;(k=$)==null||k.clear(n)}for(const[$,k]of l.reverse())if(e[$]){let D;(D=k)==null||D.load(e[$],n)}n instanceof ls&&n.setResizesEnabled(!0),R(),N(new(F(X.FINISHED_LOADING))(n)),o.setGroup$$module$build$src$core$events$utils(r),o.setRecordUndo$$module$build$src$core$events$utils(d)}},QC=function(e,n){let r=null;r=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var l;if(!document.contains(r)&&document!==((l=r)==null?void 0:l.ownerDocument))throw Error("Error: container is not in current document");e=new Es(n||{}),l=document.createElement("div"),he(l,"injectionDiv"),n!=null&&n.rtl&&he(l,"blocklyRTL"),l.tabIndex=0,on(l,Jt.LABEL,o.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),r.appendChild(l),n=eS(l,e);const d=tS(l,n,e);return nS(d),qe(d),He(d),l.addEventListener("focusin",function(){qe(d)}),_e(l,"keydown",null,Wd),_e(Ga(),"keydown",null,Wd),(n=lr())&&_e(n,"keydown",null,Wd),d},eS=function(e,n){e.setAttribute("dir","LTR"),Yt(n.hasCss,n.pathToMedia),e=Y(z.SVG,{xmlns:ic,"xmlns:html":ho,"xmlns:xlink":ns,version:"1.1",class:"blocklySvg",tabindex:"0"},e);const r=Y(z.DEFS,{},e),l=String(Math.random()).substring(2);return n.gridPattern=L$.createDom(l,n.gridOptions,r),e},tS=function(e,n,r){r.parentWorkspace=null,r=new ls(r);const l=r.options;r.scale=l.zoomOptions.startScale,n.appendChild(r.createDom("blocklyMainBackground",e));var d=r.getRenderer().getClassName();return d&&he(e,d),(d=r.getTheme().getClassName())&&he(e,d),!l.hasCategories&&l.languageTree&&(e=r.addFlyout(z.SVG),le(e,n)),l.hasTrashcan&&r.addTrashcan(),l.zoomOptions&&l.zoomOptions.controls&&r.addZoomControls(),r.getThemeManager().subscribe(n,"workspaceBackgroundColour","background-color"),r.translate(0,0),r.addChangeListener($g(r)),He(r),Fm(),hm(),xm(),r},nS=function(e){const n=e.options;var r=e.getParentSvg();if(_e(r.parentNode,"contextmenu",null,function(l){Bn(l)||l.preventDefault()}),r=_e(window,"resize",null,function(){Ao(),e.hideComponents(!0),Sm(),Gm(),He(e),jd(e)}),e.setResizeHandlerWrapper(r),sS(),n.languageTree){r=e.getToolbox();const l=e.getFlyout(!0);r?r.init():l&&(l.init(e),l.show(n.languageTree),typeof l.scrollToStart=="function"&&l.scrollToStart())}n.hasTrashcan&&e.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new r_(e,n.moveOptions.scrollbars===!0||!!n.moveOptions.scrollbars.horizontal,n.moveOptions.scrollbars===!0||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&oS(n.pathToMedia,e)},Wd=function(e){const n=ke();n&&!(Bn(e)||n.rendered&&!n.isVisible())&&tt.registry.onKeyDown(n,e)},sS=function(){lw||(_e(document,"scroll",null,function(){const e=fe();for(let n=0,r;r=e[n];n++)r instanceof ls&&r.updateInverseScreenCTM()}),Ze(document,"touchend",null,xt),Ze(document,"touchcancel",null,xt)),lw=!0},oS=function(e,n){function r(){for(;d.length;){const $=d.pop();$&&Ye($)}l.preload()}const l=n.getAudioManager();l.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),l.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),l.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const d=[];d.push(_e(document,"pointermove",null,r,!0)),d.push(_e(document,"touchstart",null,r,!0))},Rg=function(){De.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:De.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},xg=function(){De.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:De.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Og=function(){De.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:De.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Ag=function(e,n){function r($){d--,$.setCollapsed(e),d===0&&o.setGroup$$module$build$src$core$events$utils(!1)}let l=0,d=0;o.setGroup$$module$build$src$core$events$utils(!0);for(let $=0;$<n.length;$++){let k=n[$];for(;k;)d++,setTimeout(r.bind(null,k),l),k=k.getNextBlock(),l+=10}},Ng=function(){De.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let n=0;n<e.length;n++){let r=e[n];for(;r;){if(!r.isCollapsed())return"enabled";r=r.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Ag(!0,e.workspace.getTopBlocks(!0))},scopeType:De.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Mg=function(){De.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let n=0;n<e.length;n++){let r=e[n];for(;r;){if(r.isCollapsed())return"enabled";r=r.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Ag(!1,e.workspace.getTopBlocks(!0))},scopeType:De.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Lg=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(let r=0;r<e.length;r++)Lg(e[r],n)}},zd=function(e){const n=[];e=e.getTopBlocks(!0);for(let r=0;r<e.length;r++)Lg(e[r],n);return n},tc=function(e,n){n?o.setGroup$$module$build$src$core$events$utils(n):(o.setGroup$$module$build$src$core$events$utils(!0),n=o.getGroup$$module$build$src$core$events$utils());const r=e.shift();r&&(r.isDeadOrDying()?tc(e,n):(r.dispose(!1,!0),setTimeout(tc,10,e,n))),o.setGroup$$module$build$src$core$events$utils(!1)},Dg=function(){De.registry.register({displayText(e){return e.workspace?(e=zd(e.workspace).length,e===1?o.Msg$$module$build$src$core$msg.DELETE_BLOCK:o.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&0<zd(e.workspace).length?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=zd(e.workspace);2>n.length?tc(n):gd(o.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(n.length)),function(r){r&&tc(n)})}},scopeType:De.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},iS=function(){Rg(),xg(),Og(),Ng(),Mg(),Dg()},Pg=function(){De.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var n=e.block.toCopyData();n&&fi(n,e.block.workspace)}},scopeType:De.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Bg=function(){De.registry.register({displayText(e){return e.block.hasIcon(Go.TYPE)?o.Msg$$module$build$src$core$msg.REMOVE_COMMENT:o.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.hasIcon(Go.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:De.ScopeType.BLOCK,id:"blockComment",weight:2})},Fg=function(){De.registry.register({displayText(e){return e.block.getInputsInline()?o.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:o.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let n=1;n<e.inputList.length;n++)if(!(e.inputList[n-1]instanceof Bh||e.inputList[n]instanceof Bh))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:De.ScopeType.BLOCK,id:"blockInline",weight:3})},Ug=function(){De.registry.register({displayText(e){return e.block.isCollapsed()?o.Msg$$module$build$src$core$msg.EXPAND_BLOCK:o.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:De.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Vg=function(){De.registry.register({displayText(e){return e.block.hasDisabledReason(Rn)?o.Msg$$module$build$src$core$msg.ENABLE_BLOCK:o.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var n=e.getDisabledReasons();return n=n.size>(n.has(Rn)?1:0),e.getInheritedDisabled()||n?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const n=o.getGroup$$module$build$src$core$events$utils();n||o.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(Rn),Rn),o.setGroup$$module$build$src$core$events$utils(n)},scopeType:De.ScopeType.BLOCK,id:"blockDisable",weight:5})},Hg=function(){De.registry.register({displayText(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),e===1?o.Msg$$module$build$src$core$msg.DELETE_BLOCK:o.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:De.ScopeType.BLOCK,id:"blockDelete",weight:6})},Gg=function(){De.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:De.ScopeType.BLOCK,id:"blockHelp",weight:7})},jg=function(){De.registry.register({displayText:()=>o.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let n;return(n=e.comment)!=null&&n.isDeletable()?"enabled":"hidden"},callback(e){o.setGroup$$module$build$src$core$events$utils(!0);let n;(n=e.comment)==null||n.dispose(),o.setGroup$$module$build$src$core$events$utils(!1)},scopeType:De.ScopeType.COMMENT,id:"commentDelete",weight:6})},Wg=function(){De.registry.register({displayText:()=>o.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let n;return(n=e.comment)!=null&&n.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var n=e.comment.toCopyData();n&&fi(n,e.comment.workspace)}},scopeType:De.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},zg=function(){De.registry.register({displayText:()=>o.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:e=>{let n;return(n=e.workspace)!=null&&n.isMutator?"hidden":"enabled"},callback:(e,n)=>{if(e=e.workspace){o.setGroup$$module$build$src$core$events$utils(!0);var r=new _h(e);r.setText(o.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),r.moveTo(rS(new oe(n.clientX,n.clientY),e)),o.setSelected$$module$build$src$core$common(r),o.setGroup$$module$build$src$core$events$utils(!1)}},scopeType:De.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},rS=function(e,n){var r=n.getInjectionDiv().getBoundingClientRect();return e=new oe(e.x-r.left,e.y-r.top),r=n.getOriginOffsetInPixels(),e=oe.difference(e,r),e.scale(1/n.scale),e},lS=function(){Pg(),Bg(),Fg(),Ug(),Vg(),Hg(),Gg()},aS=function(){Wg(),jg(),zg()},Xg=function(){iS(),lS()},cS=function(e){return e.paste!==void 0},uS=function(e){return e.getSvgRoot!==void 0},dS=function(e){return typeof e.id=="string"&&e.workspace!==void 0&&e.select!==void 0&&e.unselect!==void 0},hS=function(e){return e.isSelectable()},pS=function(e){ke().hideChaff(e)},Q=Q||{},Q.scope={},Q.ASSUME_ES5=!1,Q.ASSUME_NO_NATIVE_MAP=!1,Q.ASSUME_NO_NATIVE_SET=!1,Q.SIMPLE_FROUND_POLYFILL=!1,Q.ISOLATE_POLYFILLS=!1,Q.FORCE_POLYFILL_PROMISE=!1,Q.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Q.defineProperty=Q.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,n,r){return e==Array.prototype||e==Object.prototype||(e[n]=r.value),e},Q.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qs=="object"&&Qs];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")},Q.global=Q.getGlobal(this),Q.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",Q.TRUST_ES6_POLYFILLS=!Q.ISOLATE_POLYFILLS||Q.IS_SYMBOL_NATIVE,Q.polyfills={},Q.propertyToPolyfillSymbol={},Q.POLYFILL_PREFIX="$jscp$",Q.polyfill=function(e,n,r,l){n&&(Q.ISOLATE_POLYFILLS?Q.polyfillIsolated(e,n,r,l):Q.polyfillUnisolated(e,n,r,l))},Q.polyfillUnisolated=function(e,n,r,l){for(r=Q.global,e=e.split("."),l=0;l<e.length-1;l++){var d=e[l];if(!(d in r))return;r=r[d]}e=e[e.length-1],l=r[e],n=n(l),n!=l&&n!=null&&Q.defineProperty(r,e,{configurable:!0,writable:!0,value:n})},Q.polyfillIsolated=function(e,n,r,l){var d=e.split(".");e=d.length===1,l=d[0],l=!e&&l in Q.polyfills?Q.polyfills:Q.global;for(var $=0;$<d.length-1;$++){var k=d[$];if(!(k in l))return;l=l[k]}d=d[d.length-1],r=Q.IS_SYMBOL_NATIVE&&r==="es6"?l[d]:null,n=n(r),n!=null&&(e?Q.defineProperty(Q.polyfills,d,{configurable:!0,writable:!0,value:n}):n!==r&&(Q.propertyToPolyfillSymbol[d]===void 0&&(r=1e9*Math.random()>>>0,Q.propertyToPolyfillSymbol[d]=Q.IS_SYMBOL_NATIVE?Q.global.Symbol(d):Q.POLYFILL_PREFIX+r+"$"+d),Q.defineProperty(l,Q.propertyToPolyfillSymbol[d],{configurable:!0,writable:!0,value:n})))},Q.underscoreProtoCanBeSet=function(){var e={a:!0},n={};try{return n.__proto__=e,n.a}catch{}return!1},Q.setPrototypeOf=Q.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:Q.underscoreProtoCanBeSet()?function(e,n){if(e.__proto__=n,e.__proto__!==n)throw new TypeError(e+" is not extensible");return e}:null,Q.arrayIteratorImpl=function(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}},Q.arrayIterator=function(e){return{next:Q.arrayIteratorImpl(e)}},Q.makeIterator=function(e){var n=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(n)return n.call(e);if(typeof e.length=="number")return Q.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},Q.generator={},Q.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},Q.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},Q.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},Q.generator.Context.prototype.stop_=function(){this.isRunning_=!1},Q.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},Q.generator.Context.prototype.next_=function(e){this.yieldResult=e},Q.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},Q.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},Q.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},Q.generator.Context.prototype.yield=function(e,n){return this.nextAddress=n,{value:e}},Q.generator.Context.prototype.yieldAll=function(e,n){e=Q.makeIterator(e);var r=e.next();if(Q.generator.ensureIteratorResultIsObject_(r),r.done)this.yieldResult=r.value,this.nextAddress=n;else return this.yieldAllIterator_=e,this.yield(r.value,n)},Q.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},Q.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},Q.generator.Context.prototype.setCatchFinallyBlocks=function(e,n){this.catchAddress_=e,n!=null&&(this.finallyAddress_=n)},Q.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},Q.generator.Context.prototype.leaveTryBlock=function(e,n){this.nextAddress=e,this.catchAddress_=n||0},Q.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},Q.generator.Context.prototype.enterFinallyBlock=function(e,n,r){r?this.finallyContexts_[r]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=n||0},Q.generator.Context.prototype.leaveFinallyBlock=function(e,n){if(n=this.finallyContexts_.splice(n||0)[0],n=this.abruptCompletion_=this.abruptCompletion_||n){if(n.isException)return this.jumpToErrorHandler_();n.jumpTo!=null&&this.finallyAddress_<n.jumpTo?(this.nextAddress=n.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},Q.generator.Context.prototype.forIn=function(e){return new Q.generator.Context.PropertyIterator(e)},Q.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var n in e)this.properties_.push(n);this.properties_.reverse()},Q.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null},Q.generator.Engine_=function(e){this.context_=new Q.generator.Context,this.program_=e},Q.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},Q.generator.Engine_.prototype.return_=function(e){this.context_.start_();var n=this.context_.yieldAllIterator_;return n?this.yieldAllStep_("return"in n?n.return:function(r){return{value:r,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},Q.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},Q.generator.Engine_.prototype.yieldAllStep_=function(e,n,r){try{var l=e.call(this.context_.yieldAllIterator_,n);if(Q.generator.ensureIteratorResultIsObject_(l),!l.done)return this.context_.stop_(),l;var d=l.value}catch($){return this.context_.yieldAllIterator_=null,this.context_.throw_($),this.nextStep_()}return this.context_.yieldAllIterator_=null,r.call(this.context_,d),this.nextStep_()},Q.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(n){this.context_.yieldResult=void 0,this.context_.throw_(n)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},Q.generator.Generator_=function(e){this.next=function(n){return e.next_(n)},this.throw=function(n){return e.throw_(n)},this.return=function(n){return e.return_(n)},this[Symbol.iterator]=function(){return this}},Q.generator.createGenerator=function(e,n){return n=new Q.generator.Generator_(new Q.generator.Engine_(n)),Q.setPrototypeOf&&e.prototype&&Q.setPrototypeOf(n,e.prototype),n},Q.asyncExecutePromiseGenerator=function(e){function n(l){return e.next(l)}function r(l){return e.throw(l)}return new Promise(function(l,d){function $(k){k.done?l(k.value):Promise.resolve(k.value).then(n,r).then($,d)}$(e.next())})},Q.asyncExecutePromiseGeneratorFunction=function(e){return Q.asyncExecutePromiseGenerator(e())},Q.asyncExecutePromiseGeneratorProgram=function(e){return Q.asyncExecutePromiseGenerator(new Q.generator.Generator_(new Q.generator.Engine_(e)))},Q.polyfill("globalThis",function(e){return e||Q.global},"es_2020","es3"),Q.polyfill("Array.prototype.includes",function(e){return e||function(n,r){var l=this;l instanceof String&&(l=String(l));var d=l.length;for(r=r||0,0>r&&(r=Math.max(r+d,0));r<d;r++){var $=l[r];if($===n||Object.is($,n))return!0}return!1}},"es7","es3"),Q.initSymbol=function(){},Q.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},Q.iteratorFromArray=function(e,n){e instanceof String&&(e+="");var r=0,l=!1,d={next:function(){if(!l&&r<e.length){var $=r++;return{value:n($,e[$]),done:!1}}return l=!0,{done:!0,value:void 0}}};return d[Symbol.iterator]=function(){return d},d},Q.polyfill("Array.prototype.values",function(e){return e||function(){return Q.iteratorFromArray(this,function(n,r){return r})}},"es8","es3"),Q.polyfill("Array.prototype.flat",function(e){return e||function(n){n=n===void 0?1:n;var r=[];return Array.prototype.forEach.call(this,function(l){Array.isArray(l)&&0<n?(l=Array.prototype.flat.call(l,n-1),r.push.apply(r,l)):r.push(l)}),r}},"es9","es5"),Q.polyfill("Array.prototype.flatMap",function(e){return e||function(n,r){var l=[];return Array.prototype.forEach.call(this,function(d,$){d=n.call(r,d,$,this),Array.isArray(d)?l.push.apply(l,d):l.push(d)}),l}},"es9","es5"),Q.owns=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},Q.polyfill("Object.entries",function(e){return e||function(n){var r=[],l;for(l in n)Q.owns(n,l)&&r.push([l,n[l]]);return r}},"es8","es3"),Q.polyfill("Object.values",function(e){return e||function(n){var r=[],l;for(l in n)Q.owns(n,l)&&r.push(n[l]);return r}},"es8","es3");var mi=Object.create(null),eD={typeMap:mi},Xd=Object.create(null),uo="default",ne=class{constructor(e){this.name=e}toString(){return this.name}};ne.CONNECTION_CHECKER=new ne("connectionChecker"),ne.CONNECTION_PREVIEWER=new ne("connectionPreviewer"),ne.CURSOR=new ne("cursor"),ne.EVENT=new ne("event"),ne.FIELD=new ne("field"),ne.INPUT=new ne("input"),ne.RENDERER=new ne("renderer"),ne.TOOLBOX=new ne("toolbox"),ne.THEME=new ne("theme"),ne.TOOLBOX_ITEM=new ne("toolboxItem"),ne.FLYOUTS_VERTICAL_TOOLBOX=new ne("flyoutsVerticalToolbox"),ne.FLYOUTS_HORIZONTAL_TOOLBOX=new ne("flyoutsHorizontalToolbox"),ne.METRICS_MANAGER=new ne("metricsManager"),ne.BLOCK_DRAGGER=new ne("blockDragger"),ne.SERIALIZER=new ne("serializer"),ne.ICON=new ne("icon"),ne.PASTER=new ne("paster");var Mo={DEFAULT:uo,TEST_ONLY:eD};Mo.Type=ne,Mo.getAllItems=g,Mo.getClass=p,Mo.getClassFromOptions=m,Mo.getObject=f,Mo.hasItem=h,Mo.register=i,Mo.unregister=c;var Vn=Object.create(null),X;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(X||(X={}));var fS=[X.BLOCK_CREATE,X.BLOCK_MOVE,X.COMMENT_CREATE,X.COMMENT_MOVE],mS=new Set,gS={};gS.warn=T;var $S="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",_S={genUid:()=>{const e=$S.length,n=[];for(let r=0;20>r;r++)n[r]=$S.charAt(Math.random()*e);return n.join("")}},tD=0,Yg={TEST_ONLY:_S};Yg.genUid=C,Yg.getNextUniqueId=I;var TS="",nc=!0,Kg=0,Jg="ORPHANED_BLOCK",Lo=[],bS={FIRE_QUEUE:Lo,enqueueEvent:Te,fireNow:ie,fireInternal:ee,setGroupInternal:Fe};o.disable$$module$build$src$core$events$utils,o.enable$$module$build$src$core$events$utils,o.getGroup$$module$build$src$core$events$utils,o.setGroup$$module$build$src$core$events$utils,o.setRecordUndo$$module$build$src$core$events$utils;var sc=Object.create(null),yS,dr=null,ES,oc=[],vS={defineBlocksWithJsonArrayInternal:Zn},dn={TEST_ONLY:vS};dn.createBlockDefinitionsFromJsonArray=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,dn.defineBlocks=o.defineBlocks$$module$build$src$core$common,dn.defineBlocksWithJsonArray=Rt,dn.draggingConnections=oc,dn.getAllWorkspaces=fe,dn.getBlockTypeCounts=We,dn.getMainWorkspace=ke,dn.getParentContainer=Oe,dn.getSelected=Re,dn.getWorkspaceById=ae,dn.registerWorkspace=Ee,dn.setMainWorkspace=qe,dn.setParentContainer=Tt,dn.setSelected=o.setSelected$$module$build$src$core$common,dn.svgResize=He,dn.unregisterWorkpace=xe;var gl=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=o.getGroup$$module$build$src$core$events$utils(),this.recordUndo=B()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,n,r){return r.isBlank=!1,r.group=e.group||"",r.workspaceId=n.id,r}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=ae(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},Us=class extends gl{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},qg=class extends Us{constructor(e,n,r){n=e?e.workspace.id:n,n===null&&(n=void 0),super(n),this.type=X.CLICK,this.blockId=e?e.id:void 0,this.targetType=r}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new qg),n.targetType=e.targetType,n.blockId=e.blockId,n}},Zg;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(Zg||(Zg={})),i(ne.EVENT,X.CLICK,qg);var nD=750,CS="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Yd=null,hr={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Kd=0,pr={TOUCH_ENABLED:CS,TOUCH_MAP:hr};pr.checkTouchIdentifier=gs,pr.clearTouchIdentifier=rt,pr.getTouchIdentifierFromEvent=Qn,pr.longStart=nn,pr.longStop=xt,pr.shouldHandleEvent=ms;var Qg,SS,IS,wS,Jd,qd,e$,kS,RS,xS;(function(e){function n(l){return r.includes(l.toUpperCase())}Qg=e;const r=Qg.toUpperCase();SS=n("JavaFX"),IS=n("WebKit"),wS=n("Gecko")&&!IS,Jd=n("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,qd=n("iPad")||n("Macintosh")&&0<e,e$=n("iPhone")&&!qd,kS=n("Macintosh"),RS=qd||Jd&&!n("Mobile")||n("Silk"),xS=!RS&&(e$||Jd)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var sD=Qg,OS=SS,AS=wS,t$=Jd,Zd=qd,NS=e$,n$=kS,MS=xS,oD={ANDROID:t$,GECKO:AS,IPAD:Zd,IPHONE:NS,JavaFx:OS,MAC:n$,MOBILE:MS,raw:sD},LS=40,DS=125,Do={};Do.bind=Ze,Do.conditionalBind=_e,Do.getScrollDeltaPixels=$s,Do.isRightButton=sn,Do.isTargetInput=Bn,Do.mouseToSvg=W,Do.unbind=Ye;var PS={};PS.removeElem=ze;var Po=class{constructor(e){this.name=e}toString(){return this.name}};Po.POSITIONABLE=new Po("positionable"),Po.DRAG_TARGET=new Po("drag_target"),Po.DELETE_AREA=new Po("delete_area"),Po.AUTOHIDEABLE=new Po("autohideable");var mt=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,n){const r=e.component.id;if(!n&&this.componentData.has(r)){var l;throw Error('Plugin "'+r+'" with capabilities "'+((l=this.componentData.get(r))==null?void 0:l.capabilities)+'" already added.')}for(this.componentData.set(r,e),n=[],l=0;l<e.capabilities.length;l++){const d=String(e.capabilities[l]).toLowerCase();if(n.push(d),this.capabilityToComponentIds.has(d)){let $;($=this.capabilityToComponentIds.get(d))==null||$.push(r)}else this.capabilityToComponentIds.set(d,[r])}this.componentData.get(r).capabilities=n}removeComponent(e){const n=this.componentData.get(e);if(n){for(let r=0;r<n.capabilities.length;r++){const l=String(n.capabilities[r]).toLowerCase();ze(this.capabilityToComponentIds.get(l),e)}this.componentData.delete(e)}}addCapability(e,n){if(!this.getComponent(e))throw Error('Cannot add capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,n))console.warn('Plugin "'+e+'already has capability "'+n+'"');else{n=`${n}`.toLowerCase();var r;(r=this.componentData.get(e))==null||r.capabilities.push(n);var l;(l=this.capabilityToComponentIds.get(n))==null||l.push(e)}}removeCapability(e,n){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?(n=`${n}`.toLowerCase(),ze(this.componentData.get(e).capabilities,n),ze(this.capabilityToComponentIds.get(n),e)):console.warn('Plugin "'+e+`doesn't have capability "`+n+'" to remove')}hasCapability(e,n){return n=`${n}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(n)}getComponent(e){let n;return(n=this.componentData.get(e))==null?void 0:n.component}getComponents(e,n){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const r=[];if(n){const l=[];e.forEach(d=>{l.push(this.componentData.get(d))}),l.sort(function(d,$){return d.weight-$.weight}),l.forEach(function(d){r.push(d.component)})}else e.forEach(l=>{r.push(this.componentData.get(l).component)});return r}};mt.Capability=Po,function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"}(mt||(mt={})),mt.ComponentWeight;var s$=!1,o$=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
  pointer-events: none;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,i$={};i$.inject=Yt,i$.register=ct;var oe=class{constructor(e,n){this.x=e,this.y=n}clone(){return new oe(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,n){return this.x+=e,this.y+=n,this}static equals(e,n){return e===n?!0:e&&n?e.x===n.x&&e.y===n.y:!1}static distance(e,n){const r=e.x-n.x;return e=e.y-n.y,Math.sqrt(r*r+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,n){return new oe(e.x-n.x,e.y-n.y)}static sum(e,n){return new oe(e.x+n.x,e.y+n.y)}},ic="http://www.w3.org/2000/svg",ho="http://www.w3.org/1999/xhtml",ns="http://www.w3.org/1999/xlink",Bo;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(Bo||(Bo={}));var Vs=null,r$=0,Qd=null,rn={HTML_NS:ho};rn.NodeType=Bo,rn.SVG_NS=ic,rn.XLINK_NS=ns,rn.addClass=he,rn.createSvgElement=Y,rn.getFastTextWidth=j,rn.getFastTextWidthWithSizeString=te,rn.getTextWidth=G,rn.hasClass=H,rn.insertAfter=le,rn.measureFontMetrics=se,rn.removeClass=x,rn.removeClasses=b,rn.removeNode=V,rn.setCssTransform=Qe,rn.startTextWidthCache=E,rn.stopTextWidthCache=R;var z=class{constructor(e){this.tagName=e}toString(){return this.tagName}};z.ANIMATE=new z("animate"),z.CIRCLE=new z("circle"),z.CLIPPATH=new z("clipPath"),z.DEFS=new z("defs"),z.FECOMPOSITE=new z("feComposite"),z.FECOMPONENTTRANSFER=new z("feComponentTransfer"),z.FEFLOOD=new z("feFlood"),z.FEFUNCA=new z("feFuncA"),z.FEGAUSSIANBLUR=new z("feGaussianBlur"),z.FEPOINTLIGHT=new z("fePointLight"),z.FESPECULARLIGHTING=new z("feSpecularLighting"),z.FILTER=new z("filter"),z.FOREIGNOBJECT=new z("foreignObject"),z.G=new z("g"),z.IMAGE=new z("image"),z.LINE=new z("line"),z.PATH=new z("path"),z.PATTERN=new z("pattern"),z.POLYGON=new z("polygon"),z.RECT=new z("rect"),z.SVG=new z("svg"),z.TEXT=new z("text"),z.TSPAN=new z("tspan");var it=class{constructor(e,n,r,l){this.top=e,this.bottom=n,this.left=r,this.right=l}clone(){return new it(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,n){return e===n?!0:e&&n?e.top===n.top&&e.bottom===n.bottom&&e.left===n.left&&e.right===n.right:!1}static createFromPoint(e,n,r){const l=e.x;return e=e.y,new it(e,e+r,l,l+n)}},Ge=class{constructor(e,n){this.width=e,this.height=n}static equals(e,n){return e===n?!0:e&&n?e.width===n.width&&e.height===n.height:!1}static max(e,n){return new Ge(Math.max(e.width,n.width),Math.max(e.height,n.height))}static min(e,n){return new Ge(Math.min(e.width,n.width),Math.min(e.height,n.height))}},BS={getSizeInternal:bt},gi={TEST_ONLY:BS};gi.getBorderBox=Ut,gi.getComputedStyle=dt,gi.getContainerOffsetToScrollInto=Fn,gi.getPageOffset=Ot,gi.getSize=Ie,gi.getViewportPageOffset=In,gi.scrollIntoContainerView=es;var FS=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,US=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,iD={XY_REGEX:FS,XY_STYLE_REGEX:US},fr={TEST_ONLY:iD};fr.getDocumentScroll=_s,fr.getInjectionDivXY=io,fr.getRelativeXY=wn,fr.getViewportBBox=Ro,fr.screenToWsCoordinates=ui,fr.wsToScreenCoordinates=tl;var Mt=class{constructor(e,n,r,l,d){this.workspace=e,this.horizontal=n,this.oldHostMetrics=null,this.ratio=1,this.origin=new oe(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new oe(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=r||!1,this.margin=d!==void 0?d:Mt.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),l&&(e+=" "+l),this.outerSvg=Y(z.SVG,{class:e}),l=Y(z.G,{},this.outerSvg),this.svgBackground=Y(z.RECT,{class:"blocklyScrollbarBackground"},l),e=Math.floor((Mt.scrollbarThickness-5)/2),this.svgHandle=Y(z.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},l),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),le(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),n?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=_e(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=_e(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=Mt.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),Ye(this.onMouseDownBarWrapper_),Ye(this.onMouseDownHandleWrapper_),V(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,n){this.position.x=e,this.position.y=n,Qe(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&Mt.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var n=e.viewWidth-2*this.margin;this.pair&&(n-=Mt.scrollbarThickness),this.setScrollbarLength(Math.max(0,n)),n=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(n+=Mt.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-Mt.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var n=this.scrollbarLength*e.viewWidth/e.scrollWidth;n=this.constrainHandleLength(n),this.setHandleLength(n),n=e.scrollWidth-e.viewWidth;var r=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/n*r,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=r/n}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let n=e.viewHeight-2*this.margin;this.pair&&(n-=Mt.scrollbarThickness),this.setScrollbarLength(Math.max(0,n)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-Mt.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var n=this.scrollbarLength*e.viewHeight/e.scrollHeight;n=this.constrainHandleLength(n),this.setHandleLength(n),n=e.scrollHeight-e.viewHeight;var r=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/n*r,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=r/n}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const n=e!==this.containerVisible;this.containerVisible=e,n&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const n=e!==this.isVisible();this.isHandleVisible=e,n&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),rt(),this.cleanUp(),sn(e))e.stopPropagation();else{var n=W(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());n=this.horizontal?n.x:n.y;var r=io(this.svgHandle);r=this.horizontal?r.x:r.y;var l=this.handlePosition,d=.95*this.handleLength;n<=r?l-=d:n>=r+this.handleLength&&(l+=d),this.setHandlePosition(this.constrainHandlePosition(l)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),sn(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=_e(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=_e(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){rt(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(Ye(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(Ye(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,n){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(n||n===void 0)&&this.updateMetrics()}setOrigin(e,n){this.origin=new oe(e,n)}static metricsAreEquivalent(e,n){return e.viewWidth===n.viewWidth&&e.viewHeight===n.viewHeight&&e.viewLeft===n.viewLeft&&e.viewTop===n.viewTop&&e.absoluteTop===n.absoluteTop&&e.absoluteLeft===n.absoluteLeft&&e.scrollWidth===n.scrollWidth&&e.scrollHeight===n.scrollHeight&&e.scrollLeft===n.scrollLeft&&e.scrollTop===n.scrollTop}};Mt.scrollbarThickness=CS?25:15,Mt.DEFAULT_SCROLLBAR_MARGIN=.5;var eh={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},l$={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:th,DOMParser:rc,XMLSerializer:lc}=globalThis;rc&&(eh=new rc),lc&&(l$=new lc);var VS="https://developers.google.com/blockly/xml",rD=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,$l={NAME_SPACE:VS};$l.createElement=o.createElement$$module$build$src$core$utils$xml,$l.createTextNode=o.createTextNode$$module$build$src$core$utils$xml,$l.domToText=nl,$l.injectDependencies=ZE,$l.textToDom=o.textToDom$$module$build$src$core$utils$xml;var a$="categoryToolbox",HS="flyoutToolbox",Me;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(Me||(Me={}));var GS={hasCategoriesInternal:tv},$i={};$i.Position=Me,$i.TEST_ONLY=GS,$i.convertFlyoutDefToJsonArray=Pa,$i.convertToolboxDefToJson=ld,$i.hasCategories=ad,$i.isCategoryCollapsible=cd,$i.parseToolboxTree=Qf;var Fo;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(Fo||(Fo={}));var _l;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(_l||(_l={}));var _i;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(_i||(_i={}));var mr={};mr.bumpDirection=_i,mr.bumpPositionRect=pd,mr.getCornerOppositeToolbox=hd,mr.getStartPositionRect=dd,mr.horizontalPosition=_l,mr.verticalPosition=Fo;var kn={width:96,height:124,url:"sprites.png"},jS=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=Y(z.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:mt.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[mt.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&V(this.svgGroup);for(const e of this.boundEvents)Ye(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new it(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,n){if(this.initialized){var r=hd(this.workspace,e),l=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(l+=this.LARGE_SPACING+this.HEIGHT),e=dd(r,new Ge(this.WIDTH,l),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),r=r.vertical,n=pd(e,this.MARGIN_VERTICAL,r===Fo.TOP?_i.DOWN:_i.UP,n),r===Fo.TOP){var d=this.SMALL_SPACING+this.HEIGHT,$;($=this.zoomInGroup)==null||$.setAttribute("transform","translate(0, "+d+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(d+this.LARGE_SPACING+this.HEIGHT)+")")}else{$=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let D;(D=this.zoomInGroup)==null||D.setAttribute("transform","translate(0, "+$+")"),$=$+this.SMALL_SPACING+this.HEIGHT,(d=this.zoomOutGroup)==null||d.setAttribute("transform","translate(0, "+$+")")}this.top=n.top,this.left=n.left;var k;(k=this.svgGroup)==null||k.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=Y(z.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const n=Y(z.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);Y(z.RECT,{width:32,height:32},n),Y(z.IMAGE,{width:kn.width,height:kn.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(ns,"xlink:href",this.workspace.options.pathToMedia+kn.url),this.boundEvents.push(_e(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=Y(z.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const n=Y(z.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);Y(z.RECT,{width:32,height:32},n),Y(z.IMAGE,{width:kn.width,height:kn.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(ns,"xlink:href",this.workspace.options.pathToMedia+kn.url),this.boundEvents.push(_e(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,n){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),rt(),n.stopPropagation(),n.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=Y(z.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const n=Y(z.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);Y(z.RECT,{width:32,height:32},n),Y(z.IMAGE,{width:kn.width,height:kn.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(ns,"xlink:href",this.workspace.options.pathToMedia+kn.url),this.boundEvents.push(_e(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const n=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(n),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),rt(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(F(X.CLICK))(null,this.workspace.id,"zoom_controls");N(e)}};ct(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var WS=100,zS=75,XS=50,YS=25,lD={BLOCKS:XS,PROCEDURES:zS,VARIABLES:WS,WORKSPACE_COMMENTS:YS},c$={};c$.register=Ba,c$.unregister=sv;var KS=class{constructor(){this.priority=YS}save(e){const n=[];for(const r of e.getTopComments())(e=sl(r,{addCoordinates:!0,saveIds:!0}))&&n.push(e);return n.length?n:null}load(e,n){for(const r of e)Fa(r,n,{recordUndo:B()})}clear(e){for(const n of e.getTopComments())n.dispose()}};Ba("workspaceComments",new KS);var nh={};nh.WorkspaceCommentSerializer=KS,nh.append=Fa,nh.save=sl;var u$={};u$.register=fd,u$.unregister=ov;var sh=class{paste(e,n,r){e=e.commentState,r&&(e.x=r.x,e.y=r.y),o.disable$$module$build$src$core$events$utils();let l;try{l=Fa(e,n),iv(l)}finally{o.enable$$module$build$src$core$events$utils()}return l?(we()&&N(new(F(X.COMMENT_CREATE))(l)),o.setSelected$$module$build$src$core$common(l),l):null}};sh.TYPE="workspace-comment",fd(sh.TYPE,new sh);var d$;d$=28,o.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:d$,connectingSnapRadius:d$,currentConnectionPreference:8,bumpDelay:250},o.config$$module$build$src$core$config;var aD="aria-",cD="role",Hs;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem"})(Hs||(Hs={}));var Jt;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin"})(Jt||(Jt={}));var ac={};ac.Role=Hs,ac.State=Jt,ac.setRole=di,ac.setState=on;var h$=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.pointerLeaveHandler=this.pointerEnterHandler=this.clickHandler=this.pointerMoveHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName&&di(n,this.roleName),this.element=n;for(let r=0,l;l=this.menuItems[r];r++)n.appendChild(l.createDom());return this.pointerMoveHandler=_e(n,"pointermove",this,this.handlePointerMove,!0),this.clickHandler=_e(n,"pointerup",this,this.handleClick,!0),this.pointerEnterHandler=_e(n,"pointerenter",this,this.handlePointerEnter,!0),this.pointerLeaveHandler=_e(n,"pointerleave",this,this.handlePointerLeave,!0),this.onKeyDownHandler=_e(n,"keydown",this,this.handleKeyEvent),e.appendChild(n),n}getElement(){return this.element}focus(){const e=this.getElement();e&&(e.focus({preventScroll:!0}),he(e,"blocklyFocused"))}blur(){const e=this.getElement();e&&(e.blur(),x(e,"blocklyFocused"))}setRole(e){this.roleName=e}dispose(){this.pointerMoveHandler&&(Ye(this.pointerMoveHandler),this.pointerMoveHandler=null),this.clickHandler&&(Ye(this.clickHandler),this.clickHandler=null),this.pointerEnterHandler&&(Ye(this.pointerEnterHandler),this.pointerEnterHandler=null),this.pointerLeaveHandler&&(Ye(this.pointerLeaveHandler),this.pointerLeaveHandler=null),this.onKeyDownHandler&&(Ye(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,n;n=this.menuItems[e];e++)n.dispose();this.element=null}getMenuItem(e){const n=this.getElement();for(;e&&e!==n;){if(e.classList.contains("blocklyMenuItem")){for(let r=0,l;l=this.menuItems[r];r++)if(l.getElement()===e)return l}e=e.parentElement}return null}setHighlighted(e){var n=this.highlightedItem;if(n&&(n.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,n=this.getElement();const r=n==null?void 0:n.parentElement,l=e.getElement();r&&l&&(es(l,r),on(n,Jt.ACTIVEDESCENDANT,e.getId()))}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>e?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,n){e+=n;let r;for(;r=this.menuItems[e];){if(r.isEnabled()){this.setHighlighted(r);break}e+=n}}handlePointerMove(e){Math.max(Math.abs(e.movementX),Math.abs(e.movementY))!==0&&(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){const n=this.openingCoords;if(this.openingCoords=null,n&&typeof e.clientX=="number"){const r=new oe(e.clientX,e.clientY);if(1>oe.distance(n,r))return}(e=this.getMenuItem(e.target))&&e.performAction()}handlePointerEnter(e){this.focus()}handlePointerLeave(e){this.getElement()&&this.setHighlighted(null)}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem;switch(e.key){case"Enter":case" ":n&&n.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),n=Ie(e);return n.height=e.scrollHeight,n}},p$=class{constructor(e,n){this.content=e,this.opt_value=n,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=I(),this.element=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var r=document.createElement("div");r.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(r)}return r=this.content,typeof this.content=="string"&&(r=document.createTextNode(this.content)),n.appendChild(r),e.appendChild(n),this.roleName&&di(e,this.roleName),on(e,Jt.SELECTED,this.checkable&&this.checked||!1),on(e,Jt.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const n=this.getElement();n&&this.isEnabled()&&(e?(he(n,"blocklyMenuItemHighlight"),he(n,"goog-menuitem-highlight")):(x(n,"blocklyMenuItemHighlight"),x(n,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(e,n){this.actionHandler=e.bind(n)}},cc="_TEMP_COLLAPSED_INPUT",oh="_TEMP_COLLAPSED_FIELD",Rn="MANUALLY_DISABLED",uD={COLLAPSED_FIELD_NAME:oh,COLLAPSED_INPUT_NAME:cc,MANUALLY_DISABLED:Rn};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(o.inputTypes$$module$build$src$core$inputs$input_types||(o.inputTypes$$module$build$src$core$inputs$input_types={})),o.inputTypes$$module$build$src$core$inputs$input_types;var ih=new Set,f$=new WeakSet,m$=new WeakMap,Tl=null,g$=null,JS=0,rh={};rh.finishQueuedRenders=Fs,rh.queueRender=em,rh.triggerQueuedRenders=xo;var qS=function(e,n){window.alert(e),n&&n()},ZS=function(e,n){n(window.confirm(e))},QS=function(e,n,r){r(window.prompt(e,n))},eI={confirmInternal:uv},gr={TEST_ONLY:eI};gr.alert=Va,gr.confirm=gd,gr.prompt=$d,gr.setAlert=cv,gr.setConfirm=dv,gr.setPrompt=hv;var $$,tI;o.Msg$$module$build$src$core$msg=Object.create(null),$$=function(e){Object.keys(e).forEach(function(n){o.Msg$$module$build$src$core$msg[n]=e[n]})},tI={Msg:o.Msg$$module$build$src$core$msg,setLocale:$$};var uc=class extends gl{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new uc),n.varId=e.varId,n}},_$=class extends uc{constructor(e){super(e),this.type=X.VAR_CREATE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new _$),n.varType=e.varType,n.varName=e.varName,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)}};i(ne.EVENT,X.VAR_CREATE,_$);var dc=class{constructor(e,n,r,l){this.workspace=e,this.name=n,this.type=r||"",this.id=l||C()}getId(){return this.id}static compareByName(e,n){return e.name.localeCompare(n.name,void 0,{sensitivity:"base"})}},T$="VARIABLE",b$="ijkmnopqrstuvwxyzabcdefgh",nI={generateUniqueNameInternal:fv},hn={CATEGORY_NAME:T$,TEST_ONLY:nI,VAR_LETTER_OPTIONS:b$};hn.allDeveloperVariables=o.allDeveloperVariables$$module$build$src$core$variables,hn.allUsedVarModels=o.allUsedVarModels$$module$build$src$core$variables,hn.createVariableButtonHandler=il,hn.flyoutCategory=_d,hn.flyoutCategoryBlocks=im,hn.generateUniqueName=rm,hn.generateUniqueNameFromOptions=Td,hn.generateVariableFieldDom=or,hn.getAddedVariables=Ha,hn.getOrCreateVariablePackage=o.getOrCreateVariablePackage$$module$build$src$core$variables,hn.getVariable=o.getVariable$$module$build$src$core$variables,hn.nameUsedWithAnyType=lm,hn.nameUsedWithConflictingParam=am,hn.promptName=bd,hn.renameVariable=o.renameVariable$$module$build$src$core$variables;var bl=class extends Error{},sI=class extends bl{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},hc=class extends bl{constructor(e,n,r){super(`The block ${n.toDevString()} is missing a(n) ${e}
connection`),this.block=n,this.state=r}},oI=class extends bl{constructor(e,n,r,l){super(`The block ${r.toDevString()} could not connect its
${n} to its parent, because: ${e}`),this.childBlock=r,this.childState=l}},iI=class extends bl{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},rI=class extends bl{constructor(e,n,r){super(`Cannot add an icon of type '${e}' to the block ${n.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=n,this.state=r}},$r={};$r.BadConnectionCheck=oI,$r.DeserializationError=bl,$r.MissingBlockType=sI,$r.MissingConnection=hc,$r.RealChildOfShadow=iI,$r.UnregisteredIcon=rI;var lI=class{constructor(){this.priority=XS}save(e){const n=[];for(const r of e.getTopBlocks(!1))(e=ts(r,{addCoordinates:!0,doFullSerialization:!1}))&&n.push(e);return n.length?{languageVersion:0,blocks:n}:null}load(e,n){e=e.blocks;for(const r of e)Oo(r,n,{recordUndo:B()})}clear(e){for(const n of e.getTopBlocks(!1))n.dispose(!1)}};Ba("blocks",new lI);var pc={};pc.BlockSerializer=lI,pc.append=Oo,pc.appendInternal=rl,pc.save=ts;var Wt=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};Wt.MUTATOR=new Wt("mutator"),Wt.WARNING=new Wt("warning"),Wt.COMMENT=new Wt("comment");var _r=class extends gl{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new _r),n.blockId=e.blockId,n}},Tr=class extends _r{constructor(e,n,r,l,d){super(e),this.type=X.BLOCK_CHANGE,e&&(this.element=n,this.name=r||void 0,this.oldValue=l,this.newValue=d)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new Tr),n.element=e.element,n.name=e.name,n.oldValue=e.oldValue,n.newValue=e.newValue,e.disabledReason!==void 0&&(n.disabledReason=e.disabledReason),n}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(n=n.getBlockById(this.blockId),!n)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const r=n.getIcon(Wt.MUTATOR);switch(r&&ll(r)&&r.bubbleIsVisible()&&r.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":var l;n.setDisabledReason(!!e,(l=this.disabledReason)!=null?l:Rn);break;case"inline":n.setInputsInline(!!e);break;case"mutation":l=Tr.getExtraBlockState_(n),n.loadExtraState?n.loadExtraState(JSON.parse(e||"{}")):n.domToMutation&&n.domToMutation(o.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),N(new Tr(n,"mutation",null,l,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?lo(e):""}};i(ne.EVENT,X.BLOCK_CHANGE,Tr);var lh={};lh.clamp=al,lh.toDegrees=Dv,lh.toRadians=yd;var ah=16,aI=1,cI=12,y$=16,ch=.25,E$=null,br=null,yl="",El="",et,vl,yr,v$=null,Ti=null,uI=null,C$={getBoundsInfo:function(){const e=Ot(v$),n=Ie(v$);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},getPositionMetrics:function(e,n,r,l){const d=C$.getBoundsInfo(),$=Ie(et);return n+$.height<d.bottom?ym(e,n,d,$):l-$.height>d.top?Em(r,l,d,$):n+$.height<document.documentElement.clientHeight?ym(e,n,d,$):l-$.height>document.documentElement.clientTop?Em(r,l,d,$):Bv(e,d,$)}},$n={ANIMATION_TIME:ch,ARROW_HORIZONTAL_PADDING:cI,ARROW_SIZE:ah,BORDER_SIZE:aI,PADDING_Y:y$,TEST_ONLY:C$};$n.clearContent=Ed,$n.createDom=hm,$n.getContentDiv=Ga,$n.getOwner=fm,$n.getPositionX=ja,$n.hide=Cd,$n.hideIfOwner=vd,$n.hideWithoutAnimation=ro,$n.isVisible=vm,$n.repositionForWindowResize=Sm,$n.setBoundsElement=pm,$n.setColour=mm,$n.show=bm,$n.showPositionedByBlock=Pv,$n.showPositionedByField=gm;var fc=class{constructor(e){this.workspace=e,this.cursorSvg=this.cursor=null,this.markers=new Map,this.markerSvg=null}registerMarker(e,n){this.markers.has(e)&&this.unregisterMarker(e),n.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers.set(e,n)}unregisterMarker(e){const n=this.markers.get(e);if(n)n.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor&&this.cursor.getDrawer()&&this.cursor.getDrawer().dispose(),(this.cursor=e)&&(e=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor),this.cursor.setDrawer(e),this.setCursorSvg(this.cursor.getDrawer().createDom()))}setCursorSvg(e){e?(this.workspace.getBlockCanvas().appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?this.workspace.getBlockCanvas()&&(this.cursorSvg?this.workspace.getBlockCanvas().insertBefore(e,this.cursorSvg):this.workspace.getBlockCanvas().appendChild(e)):this.markerSvg=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg&&this.workspace.getCursor().draw()}dispose(){const e=Object.keys(this.markers);for(let n=0,r;r=e[n];n++)this.unregisterMarker(r);this.markers.clear(),this.cursor&&(this.cursor.dispose(),this.cursor=null)}};fc.LOCAL_MARKER="local_marker_1";var Cl={};Cl.commonWordPrefix=Im,Cl.commonWordSuffix=wm,Cl.isNumber=o.isNumber$$module$build$src$core$utils$string,Cl.shortestStringLength=Wa,Cl.wrap=o.wrap$$module$build$src$core$utils$string;var uh=void 0,mc=!1,Sl=!1,dI=50,hI=0,Er=0,S$=0,I$=0,bs=null,gc=null,w$=0,k$=10,pI=10,fI=750,dh=5,zt=null,ss={HOVER_MS:fI,LIMIT:dI,MARGINS:dh,OFFSET_X:w$,OFFSET_Y:k$,RADIUS_OK:pI};ss.bindMouseEvents=ul,ss.block=Nm,ss.createDom=xm,ss.dispose=Am,ss.getCustomTooltip=Hv,ss.getDiv=jv,ss.getTooltipOfObject=cl,ss.hide=Ao,ss.isVisible=Gv,ss.setCustomTooltip=Vv,ss.unbindMouseEvents=Id,ss.unblock=Mm;var R$=.45,x$=.65,mI={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},ys={};ys.blend=rr,ys.getHsvSaturation=Lm,ys.getHsvValue=Dm,ys.hexToRgb=wd,ys.hsvToHex=kd,ys.hueToHex=Pm,ys.names=mI,ys.parse=ir,ys.rgbToHex=za,ys.setHsvSaturation=qv,ys.setHsvValue=Zv;var $c={};$c.checkMessageReferences=Qv,$c.parseBlockColour=dl,$c.replaceMessageReferences=At,$c.tokenizeInterpolation=Bm;var lt=class{constructor(e,n,r){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg=this.cursorSvg=this.tooltip=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Ge(0,0),e!==lt.SKIP_SETUP&&(r&&this.configure_(r),this.setValue(e),n&&this.setValidator(n))}configure_(e){e.tooltip&&this.setTooltip(At(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=e}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=Y(z.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=Y(z.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=Y(z.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");ul(e),this.mouseDownWrapper=_e(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(lt),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(lt,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=o.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),nl(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,n){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(o.textToDom$$module$build$src$core$utils$xml(n)),!0):!1}dispose(){vd(this),ar(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||V(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,n=this.getSourceBlock();this.EDITABLE&&e&&n&&(this.enabled_&&n.isEditable()?(he(e,"blocklyEditableText"),x(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(he(e,"blocklyNonEditableText"),x(e,"blocklyEditableText"),e.style.cursor=""))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==lt.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var n=this.fieldGroup_;n&&(n.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const n=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let r=2*e,l=n.FIELD_TEXT_HEIGHT,d=0;this.textElement_&&(d=j(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY),r+=d),this.isFullBlockField()||(l=Math.max(l,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=l,this.size_.width=r,this.positionTextElement_(e,d),this.positionBorderRect_()}positionTextElement_(e,n){if(this.textElement_){var r=this.getConstants(),l=this.size_.height/2,d;this.textElement_.setAttribute("x",String((d=this.getSourceBlock())!=null&&d.RTL?this.size_.width-n-e:e)),this.textElement_.setAttribute("y",String(r.FIELD_TEXT_BASELINE_CENTER?l:l-r.FIELD_TEXT_HEIGHT/2+r.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Ge(0,0)}getScaledBBox(){let e;var n=this.getSourceBlock();if(!n)throw new Lt;if(this.isFullBlockField()){var r=this.sourceBlock_.getHeightWidth();const l=n.workspace.scale;e=this.getAbsoluteXY_(),n=(r.width+1)*l,r=(r.height+1)*l,AS?(e.x+=1.5*l,e.y+=1.5*l):(e.x-=.5*l,e.y-=.5*l)}else r=this.borderRect_.getBoundingClientRect(),e=Ot(this.borderRect_),n=r.width,r=r.height;return new it(e.y,e.y+r,e.x,e.x+n)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+""),e=e.replace(/\s/g,lt.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+=""),e):lt.NBSP}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,n=!0){if(e!==null){var r=o.getGroup$$module$build$src$core$events$utils();r||o.setGroup$$module$build$src$core$events$utils(!0);try{const q=this.doClassValidation_(e),me=this.processValidation(e,q,n);if(!(me instanceof Error)){var l,d=(l=this.getValidator())==null?void 0:l.call(this,me),$=this.processValidation(me,d,n);if(!($ instanceof Error)){var k=this.sourceBlock_;if(!k||!k.disposed){var D=this.getValue();D===$?this.doValueUpdate_($):(this.doValueUpdate_($),n&&k&&we()&&N(new(F(X.BLOCK_CHANGE))(k,"field",this.name||null,D,$)),this.isDirty_&&this.forceRerender())}}}}finally{o.setGroup$$module$build$src$core$events$utils(r)}}}processValidation(e,n,r){return n===null?(this.doValueInvalid_(e,r),this.isDirty_&&this.forceRerender(),Error()):n===void 0?e:n}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,n){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const n=this.getClickTarget_();n?n.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return cl(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Ot(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const n=this.getSourceBlock();if(!n)throw new Lt;const r=n.inputList;for(let l=0;l<n.inputList.length;l++){const d=r[l],$=d.fieldRow;for(let k=0;k<$.length;k++)if($[k]===this){e=d;break}}return e}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(e){return!1}setCursorSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.cursorSvg=e}else this.cursorSvg=null}setMarkerSvg(e){if(e){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(e),this.markerSvg=e}else this.markerSvg=null}updateMarkers_(){var e=this.getSourceBlock();if(!e)throw new Lt;e=e.workspace,e.keyboardAccessibilityMode&&this.cursorSvg&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg&&e.getMarker(fc.LOCAL_MARKER).draw()}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};lt.NBSP="",lt.SKIP_SETUP=Symbol("SKIP_SETUP");var Lt=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},Il=null,O$=null,hh=null,ph="blocklyWidgetDiv",wl="",kl="",Gs,js={};js.createDom=Fm,js.getDiv=lr,js.hide=hl,js.hideIfOwner=ar,js.hideIfOwnerIsInWorkspace=Xa,js.isVisible=Um,js.positionWithAnchor=Hm,js.repositionForWindowResize=Gm,js.show=xd,js.testOnly_setDiv=eC;var fh=null,gI={},mh=null,vr={};vr.callbackFactory=o.callbackFactory$$module$build$src$core$contextmenu,vr.dispose=Wm,vr.getCurrentBlock=oC,vr.hide=Ka,vr.setCurrentBlock=jm,vr.show=Ya;var De=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let n;return(n=this.registeredItems.get(e))!=null?n:null}getContextMenuOptions(e,n){const r=[];for(const d of this.registeredItems.values())if(e===d.scopeType){var l=d.preconditionFn(n);l!=="hidden"&&(l={text:typeof d.displayText=="function"?d.displayText(n):d.displayText,enabled:l==="enabled",callback:d.callback,scope:n,weight:d.weight},r.push(l))}return r.sort(function(d,$){return d.weight-$.weight}),r}};(function(e){var n=e.ScopeType||(e.ScopeType={});n.BLOCK="block",n.WORKSPACE="workspace",n.COMMENT="comment",e.registry=new e})(De||(De={})),De.ScopeType;var bi=50,gh=100,dD={BLOCK:bi,BUBBLE:gh},$I=class{constructor(e){this.comment=e,this.startLoc=null,this.inGroup=!1,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.options.readOnly}startDrag(){(this.inGroup=!!o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,bi),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0),this.inGroup||o.setGroup$$module$build$src$core$events$utils(!1)}fireDragStartEvent(){const e=new(F(X.COMMENT_DRAG))(this.comment,!0);N(e)}fireDragEndEvent(){const e=new(F(X.COMMENT_DRAG))(this.comment,!1);N(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(F(X.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),N(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},_I=new WeakMap,TI=class{constructor(e){this.workspace=e,this.size=new Ge(120,100),this.collapsed=!1,this.editable=!0,this.location=new oe(0,0),this.text="",this.textChangeListeners=[],this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=Y(z.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteIcon:this.deleteIcon,foldoutIcon:this.foldoutIcon,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot,e),{foreignObject:this.foreignObject,textArea:this.textArea}=this.createTextArea(this.svgRoot),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let n;(n=e.getLayerManager())==null||n.append(this,bi),this.setSizeWithoutFiringEvents(this.size),this.moveTo(new oe(0,0))}createHighlightRect(e){return Y(z.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e,n){e=Y(z.G,{class:"blocklyCommentTopbar"},e);const r=Y(z.RECT,{class:"blocklyCommentTopbarBackground"},e),l=Y(z.IMAGE,{class:"blocklyDeleteIcon",href:`${n.options.pathToMedia}delete-icon.svg`},e);n=Y(z.IMAGE,{class:"blocklyFoldoutIcon",href:`${n.options.pathToMedia}foldout-icon.svg`},e);const d=Y(z.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),$=document.createTextNode("");return d.appendChild($),_e(n,"pointerdown",this,this.onFoldoutDown),_e(l,"pointerdown",this,this.onDeleteDown),{topBarGroup:e,topBarBackground:r,deleteIcon:l,foldoutIcon:n,textPreview:d,textPreviewNode:$}}createTextArea(e){e=Y(z.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"},e);const n=document.createElementNS(ho,"body");n.setAttribute("xmlns",ho),n.className="blocklyMinimalBody";const r=document.createElementNS(ho,"textarea");return he(r,"blocklyCommentText"),he(r,"blocklyTextarea"),he(r,"blocklyText"),n.appendChild(r),e.appendChild(n),_e(r,"change",this,this.onTextChange),{foreignObject:e,textArea:r}}createResizeHandle(e,n){return e=Y(z.IMAGE,{class:"blocklyResizeHandle",href:`${n.options.pathToMedia}resize-handle.svg`},e),_e(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const n=this.topBarBackground.getBBox(),r=this.deleteIcon.getBBox(),l=this.foldoutIcon.getBBox(),d=this.textPreview.getBBox(),$=this.resizeHandle.getBBox();this.size=e=Ge.max(e,this.calcMinSize(n,l,r)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.updateTextAreaSize(e,n),this.updateDeleteIconPosition(e,n,r),this.updateFoldoutIconPosition(n,l),this.updateTextPreviewSize(e,n,d,r,$),this.updateResizeHandlePosition(e,$)}setSize(e){const n=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(n,this.size)}calcMinSize(e,n,r){var l;this.updateTextPreview((l=this.textArea.value)!=null?l:""),l=G(this.textPreview);const d=this.calcFoldoutMargin(e,n),$=this.calcDeleteMargin(e,r);let k=l;return this.foldoutIcon.checkVisibility()?k+=n.width+2*d:l&&(k+=4),this.deleteIcon.checkVisibility()?k+=r.width+2*$:l&&(k+=4),new Ge(k,e.height+20)}calcDeleteMargin(e,n){return(e.height-n.height)/2}calcFoldoutMargin(e,n){return(e.height-n.height)/2}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextAreaSize(e,n){this.foreignObject.setAttribute("height",`${e.height-n.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${n.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}updateDeleteIconPosition(e,n,r){n=this.calcDeleteMargin(n,r),this.deleteIcon.setAttribute("y",`${n}`),this.deleteIcon.setAttribute("x",`${e.width-r.width-n}`)}updateFoldoutIconPosition(e,n){e=this.calcFoldoutMargin(e,n),this.foldoutIcon.setAttribute("y",`${e}`),this.foldoutIcon.setAttribute("x",`${e}`)}updateTextPreviewSize(e,n,r,l,d){const $=(n.height-r.height)/2,k=this.calcDeleteMargin(n,l);n=this.calcFoldoutMargin(n,d),e=e.width-d.width-2*n-l.width-2*k,this.textPreview.setAttribute("x",`${d.width+2*n*(this.workspace.RTL?-1:1)}`),this.textPreview.setAttribute("y",`${$+r.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,n){this.resizeHandle.setAttribute("y",`${e.height-n.height}`),this.resizeHandle.setAttribute("x",`${e.width-n.width}`)}onSizeChange(e,n){for(let r=this.sizeChangeListeners.length-1;0<=r;r--)this.sizeChangeListeners[r](e,n)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),sn(e)||(this.preResizeSize=this.getSize(),Od(this.workspace,e,new oe(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=_e(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=_e(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){rt(),this.resizePointerUpListener&&(Ye(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(Ye(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=Ad(this.workspace,e),this.setSizeWithoutFiringEvents(new Ge(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?he(this.svgRoot,"blocklyCollapsed"):x(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;0<=e;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}onFoldoutDown(e){rt(),this.bringToFront(),sn(e)||(this.setCollapsed(!this.collapsed),this.workspace.hideChaff()),e.stopPropagation()}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(he(this.svgRoot,"blocklyEditable"),x(this.svgRoot,"blocklyReadonly"),this.textArea.removeAttribute("readonly")):(x(this.svgRoot,"blocklyEditable"),he(this.svgRoot,"blocklyReadonly"),this.textArea.setAttribute("readonly","true"))}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}onTextChange(){const e=this.text;this.text=this.textArea.value,this.updateTextPreview(this.text),this.setSize(this.size);for(let n=this.textChangeListeners.length-1;0<=n;n--)this.textChangeListeners[n](e,this.text)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return 12<=e.length?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,n=e.childNodes;n[n.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){rt(),sn(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,V(this.svgRoot);for(let e=this.disposeListeners.length-1;0<=e;e--)this.disposeListeners[e]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}};ct(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var $h=class{constructor(e,n){this.workspace=e,this.text="",this.size=new Ge(120,100),this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new oe(0,0),this.disposing=this.disposed=!1,this.id=n&&!e.getCommentById(n)?n:C(),e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){we()&&N(new(F(X.COMMENT_CREATE))(this))}fireDeleteEvent(){we()&&N(new(F(X.COMMENT_DELETE))(this))}fireChangeEvent(e,n){we()&&N(new(F(X.COMMENT_CHANGE))(this,e,n))}fireCollapseEvent(e){we()&&N(new(F(X.COMMENT_COLLAPSE))(this,e))}setText(e){const n=this.text;this.text=e,this.fireChangeEvent(n,e)}getText(){return this.text}setSize(e){const n=new(F(X.COMMENT_RESIZE))(this);this.size=e,n.recordCurrentSizeAsNewSize(),N(n)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}moveTo(e,n){const r=new(F(X.COMMENT_MOVE))(this);n&&r.setReason(n),this.location=e,r.recordNew(),N(r)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},_h=class extends $h{constructor(e,n){super(e,n),this.dragStrategy=new $I(this),this.workspace=e,this.view=new TI(e),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.addModelUpdateBindings(),_e(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),_e(this.view.getSvgRoot(),"wheel",this,r=>{r.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((e,n)=>void super.setText(n)),this.view.addSizeChangeListener((e,n)=>void super.setSize(n)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var n,r;const l=(r=(n=this.view)==null?void 0:n.getSize())!=null?r:this.getSize();return this.workspace.RTL?(n=e.x-l.width,r=e.x):(n=e.x,r=e.x+l.width),new it(e.y,e.y+l.height,n,r)}moveBy(e,n,r){const l=this.getRelativeToSurfaceXY();e=new oe(l.x+e,l.y+n),this.moveTo(e,r)}moveTo(e,n){super.moveTo(e,n),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?he(this.getSvgRoot(),"blocklyDragging"):x(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0,this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const n=this.workspace.getGesture(e);if(n){if(Bn(e))e.stopPropagation();else{n.handleCommentStart(e,this);let r;(r=this.workspace.getLayerManager())==null||r.append(this,bi)}o.setSelected$$module$build$src$core$common(this)}}setDeleteStyle(e){e?he(this.getSvgRoot(),"blocklyDraggingDelete"):x(this.getSvgRoot(),"blocklyDraggingDelete")}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){he(this.getSvgRoot(),"blocklySelected")}unselect(){x(this.getSvgRoot(),"blocklySelected")}toCopyData(){return{paster:sh.TYPE,commentState:sl(this,{addCoordinates:!0})}}showContextMenu(e){const n=De.registry.getContextMenuOptions(De.ScopeType.COMMENT,{comment:this});Ya(e,n,this.workspace.RTL,this.workspace)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var n=this.getRelativeToSurfaceXY();e=e.alignXY(n),e!==n&&this.moveTo(e,["snap"])}}}},_n={};_n.appendDomToWorkspace=fC,_n.blockToDom=hi,_n.blockToDomWithXY=qa,_n.clearWorkspaceAndLoadFromXml=pC,_n.deleteNext=vC,_n.domToBlock=o.domToBlock$$module$build$src$core$xml,_n.domToBlockInternal=cr,_n.domToPrettyText=hC,_n.domToText=lo,_n.domToVariables=Jm,_n.domToWorkspace=o.domToWorkspace$$module$build$src$core$xml,_n.loadWorkspaceComment=Km,_n.saveWorkspaceComment=Ja,_n.variablesToDom=Xm,_n.workspaceToDom=cC;var A$=class extends _r{constructor(e){super(e),this.type=X.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=qa(e),this.ids=de(e),this.json=ts(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=lo(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new A$),n.xml=o.textToDom$$module$build$src$core$utils$xml(e.xml),n.ids=e.ids,n.json=e.json,e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}run(e){const n=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!hD(n,this.ids))if(e)Oo(this.json,n);else for(e=0;e<this.ids.length;e++){const r=this.ids[e],l=n.getBlockById(r);l?l.dispose(!1):r===this.blockId&&console.warn("Can't uncreate non-existent block: "+r)}}},hD=function(e,n){return n.map(r=>e.getBlockById(r)).filter(r=>r&&r.isShadow()).length===n.length};i(ne.EVENT,X.BLOCK_CREATE,A$);var N$=class extends Us{constructor(e,n){super(n),this.type=X.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new N$),n.themeName=e.themeName,n}};i(ne.EVENT,X.THEME_CHANGE,N$);var M$=class extends Us{constructor(e,n,r,l,d){super(l),this.type=X.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=n,this.scale=r,this.oldScale=d}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new M$),n.viewTop=e.viewTop,n.viewLeft=e.viewLeft,n.scale=e.scale,n.oldScale=e.oldScale,n}};i(ne.EVENT,X.VIEWPORT_CHANGE,M$);var ge;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(ge||(ge={}));var Rl=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,n){n=this.calculateIndexForYPos(n),this.connections.splice(n,0,e)}findIndexOfConnection(e,n){if(!this.connections.length)return-1;const r=this.calculateIndexForYPos(n);if(r>=this.connections.length)return-1;n=e.y;let l=r;for(;0<=l&&this.connections[l].y===n;){if(this.connections[l]===e)return l;l--}for(l=r;l<this.connections.length&&this.connections[l].y===n;){if(this.connections[l]===e)return l;l++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let n=0,r=this.connections.length;for(;n<r;){const l=Math.floor((n+r)/2);if(this.connections[l].y<e)n=l+1;else if(this.connections[l].y>e)r=l;else{n=l;break}}return n}removeConnection(e,n){if(e=this.findIndexOfConnection(e,n),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,n){function r(me){const ht=d-l[me].x,ut=$-l[me].y;return Math.sqrt(ht*ht+ut*ut)<=n&&q.push(l[me]),ut<n}const l=this.connections,d=e.x,$=e.y;e=0;let k=l.length-2,D=k;for(;e<D;)l[D].y<$?e=D:k=D,D=Math.floor((e+k)/2);const q=[];if(k=e=D,l.length){for(;0<=e&&r(e);)e--;do k++;while(k<l.length&&r(k))}return q}isInYRange(e,n,r){return Math.abs(this.connections[e].y-n)<=r}searchForClosest(e,n,r){if(!this.connections.length)return{connection:null,radius:n};const l=e.y,d=e.x;e.x=d+r.x,e.y=l+r.y;var $=this.calculateIndexForYPos(e.y);r=null;let k=n,D,q=$-1;for(;0<=q&&this.isInYRange(q,e.y,n);)D=this.connections[q],this.connectionChecker.canConnect(e,D,!0,k)&&(r=D,k=D.distanceFrom(e)),q--;for(;$<this.connections.length&&this.isInYRange($,e.y,n);)D=this.connections[$],this.connectionChecker.canConnect(e,D,!0,k)&&(r=D,k=D.distanceFrom(e)),$++;return e.x=d,e.y=l,{connection:r,radius:k}}static init(e){const n=[];return n[ge.INPUT_VALUE]=new Rl(e),n[ge.OUTPUT_VALUE]=new Rl(e),n[ge.NEXT_STATEMENT]=new Rl(e),n[ge.PREVIOUS_STATEMENT]=new Rl(e),n}},Th=null,_c=null,Tc={};Tc.connectionUiEffect=Ld,Tc.disconnectUiEffect=eg,Tc.disconnectUiStop=pl,Tc.disposeUiEffect=Md;var bI=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new oe(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){Re()&&Re().unselect()}endDrag(e){this.drag(e)}drag(e){if(e=oe.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},pD=5,fD=6,Uo=class{constructor(e,n){this.creatorWorkspace=n,this.mouseDownXY=new oe(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new oe(0,0)}dispose(){rt(),Mm(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)Ye(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const n=new oe(e.clientX,e.clientY);this.updateDragDelta(n)&&(this.updateIsDragging(e),xt()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=oe.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=oe.magnitude(this.currentDragDeltaXY)>(this.flyout?o.config$$module$build$src$core$config.flyoutDragRadius:o.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),o.getGroup$$module$build$src$core$events$utils()||o.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),o.setSelected$$module$build$src$core$common(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new bI(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const n=Re();n&&ur(n)&&n.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(n,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,n){return new(m(ne.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,n)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,Bn(e)?this.cancel():(this.gestureHasStarted=!0,pl(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=fm(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,Nm(),sn(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&nn(e,this),this.mouseDownXY=new oe(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(_e(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(_e(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(_e(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&xt())}handleMove(e){this.isDragging()&&ms(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),xt())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!ms(e))return;if(this.updateFromEvent(e),xt(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?this.dragger.onDragEnd(e,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var n=Qn(e);this.cachedPoints.set(n,this.getTouchPoint(e));var r=Array.from(this.cachedPoints.keys());r.length===2&&(n=this.cachedPoints.get(r[0]),r=this.cachedPoints.get(r[1]),this.startDistance=oe.distance(n,r),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const n=Qn(e);this.cachedPoints.set(n,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var n=Array.from(this.cachedPoints.keys()),r=this.cachedPoints.get(n[0]);if(n=this.cachedPoints.get(n[1]),r=oe.distance(r,n)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(n=r-this.previousScale,n=0<n?n*pD:n*fD,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const l=this.startWorkspace_,d=W(e,l.getParentSvg(),l.getInverseScreenCTM());l.zoom(d.x,d.y,n)}this.previousScale=r,e.preventDefault()}handleTouchEnd(e){e=Qn(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new oe(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(xt(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()}handleWsStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(n),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment||o.setSelected$$module$build$src$core$common(null),this.doStart(e)}fireWorkspaceClick(e){N(new(F(X.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(n),this.handleWsStart(e,n.getWorkspace())}handleBlockStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent=e}handleBubbleStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent=e}handleCommentStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(n),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.targetBlock.isEnabled()){o.getGroup$$module$build$src$core$events$utils()||o.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours()}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(F(X.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),N(e)}this.bringBlockToFront(),o.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){e=this.creatorWorkspace,Re()&&Re().unselect(),this.fireWorkspaceClick(this.startWorkspace_||e)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,o.setSelected$$module$build$src$core$common(this.startBlock),e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):this.targetBlock=e}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,n;return(n=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?n:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=fe();for(let n=0,r;r=e[n];n++)if(r.currentGesture_)return!0;return!1}},L$=class{constructor(e,n){this.pattern=e,this.scale=1;let r;this.spacing=(r=n.spacing)!=null?r:0;let l;this.length=(l=n.length)!=null?l:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let d;this.snapToGrid=(d=n.snap)!=null?d:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var n=this.spacing*e;this.pattern.setAttribute("width",`${n}`),this.pattern.setAttribute("height",`${n}`),n=Math.floor(this.spacing/2)+.5;let r=n-this.length/2,l=n+this.length/2;n*=e,r*=e,l*=e,this.setLineAttributes(this.line1,e,r,l,n,n),this.setLineAttributes(this.line2,e,n,n,r,l)}setLineAttributes(e,n,r,l,d,$){e&&(e.setAttribute("stroke-width",`${n}`),e.setAttribute("x1",`${r}`),e.setAttribute("y1",`${d}`),e.setAttribute("x2",`${l}`),e.setAttribute("y2",`${$}`))}moveTo(e,n){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${n}`)}alignXY(e){var n=this.getSpacing();const r=n/2,l=Math.round(Math.round((e.x-r)/n)*n+r);return n=Math.round(Math.round((e.y-r)/n)*n+r),l===e.x&&n===e.y?e:new oe(l,n)}static createDom(e,n,r){e=Y(z.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},r);let l,d;if(0<((l=n.length)!=null?l:1)&&0<((d=n.spacing)!=null?d:0)){Y(z.LINE,{stroke:n.colour},e);let $;($=n.length)!=null&&$&&Y(z.LINE,{stroke:n.colour},e)}else Y(z.LINE,{},e);return e}},mD=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(bi),he(e,"blocklyBlockCanvas"),e=this.createLayer(gh),he(e,"blocklyBubbleCanvas")}createDragLayer(e){const n=Y(z.SVG,{class:"blocklyBlockDragSurface",xmlns:ic,"xmlns:html":ho,"xmlns:xlink":ns,version:"1.1"});return e.append(n),Y(z.G,{},n)}createAnimationLayer(e){const n=Y(z.SVG,{class:"blocklyAnimationLayer",xmlns:ic,"xmlns:html":ho,"xmlns:xlink":ns,version:"1.1"});return e.append(n),Y(z.G,{},n)}appendToAnimationLayer(e){let n;const r=(n=this.dragLayer)==null?void 0:n.getAttribute("transform");if(r){let d;(d=this.animationLayer)==null||d.setAttribute("transform",r)}let l;(l=this.animationLayer)==null||l.appendChild(e.getSvgRoot())}translateLayers(e,n){e=`translate(${e.x}, ${e.y}) scale(${n})`;let r;(r=this.dragLayer)==null||r.setAttribute("transform",e);for(const[,l]of this.layers)l.setAttribute("transform",e)}moveToDragLayer(e){let n;(n=this.dragLayer)==null||n.appendChild(e.getSvgRoot())}moveOffDragLayer(e,n){this.append(e,n)}append(e,n){this.layers.has(n)||this.createLayer(n);let r;(r=this.layers.get(n))==null||r.appendChild(e.getSvgRoot())}createLayer(e){const n=this.workspace.getSvgGroup(),r=Y(z.G,{});let l=!1;const d=[...this.layers].sort(($,k)=>$[0]-k[0]);for(const[$,k]of d)if(e<$){n.insertBefore(r,k),l=!0;break}return l||n.appendChild(r),this.layers.set(e,r),r}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(bi)}getBubbleLayer(){return this.layers.get(gh)}},yI={};yI.deepMerge=No;var Cr=class{constructor(e,n,r,l){this.name=e,this.startHats=!1,this.blockStyles=n||Object.create(null),this.categoryStyles=r||Object.create(null),this.componentStyles=l||Object.create(null),this.fontStyle=Object.create(null),i(ne.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,n){this.blockStyles[e]=n}setCategoryStyle(e,n){this.categoryStyles[e]=n}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const n=this.getComponentStyle(e);if(n)return n}return`${e}`}setComponentStyle(e,n){this.componentStyles[e]=n}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,n){e=e.toLowerCase();const r=new Cr(e);let l=n.base;if(l){if(typeof l=="string"){let d;l=(d=f(ne.THEME,l))!=null?d:void 0}l instanceof Cr&&(No(r,l),r.name=e)}return No(r.blockStyles,n.blockStyles),No(r.categoryStyles,n.categoryStyles),No(r.componentStyles,n.componentStyles),No(r.fontStyle,n.fontStyle),n.startHats!==null&&(r.startHats=n.startHats),r}},gD={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},$D={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},bh=new Cr("classic",gD,$D),Es=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let n=null,r=!1;var l=!1,d=!1,$=!1,k=!1,D=!1;const q=!!e.readOnly;if(!q){var me;n=ld((me=e.toolbox)!=null?me:null),r=ad(n),l=e.trashcan,l=l===void 0?r:l,d=e.collapse,d=d===void 0?r:d,$=e.comments,$=$===void 0?r:$,k=e.disable,k=k===void 0?r:k,D=e.sounds,D=D===void 0?!0:D}me=e.maxTrashcanContents,l?me===void 0&&(me=32):me=0;const ht=!!e.rtl;let ut=e.horizontalLayout;ut===void 0&&(ut=!1);var Gn=e.toolboxPosition!=="end";Gn=ut?Gn?Me.TOP:Me.BOTTOM:Gn===ht?Me.RIGHT:Me.LEFT;let Fl=e.css;Fl===void 0&&(Fl=!0);let Ac="https://blockly-demo.appspot.com/static/media/";e.media&&(Ac=e.media.endsWith("/")?e.media:e.media+"/");const qw=e.oneBasedIndex,KD=e.renderer||"geras",JD=e.plugins||{};let I_=e.modalInputs;I_===void 0&&(I_=!0),this.RTL=ht,this.oneBasedIndex=qw===void 0?!0:qw,this.collapse=d,this.comments=$,this.disable=k,this.readOnly=q,this.maxBlocks=e.maxBlocks||1/0;let Zw;this.maxInstances=(Zw=e.maxInstances)!=null?Zw:null,this.modalInputs=I_,this.pathToMedia=Ac,this.hasCategories=r,this.moveOptions=Es.parseMoveOptions(e,r),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=l,this.maxTrashcanContents=me,this.hasSounds=D,this.hasCss=Fl,this.horizontalLayout=ut,this.languageTree=n,this.gridOptions=Es.parseGridOptions(e),this.zoomOptions=Es.parseZoomOptions(e),this.toolboxPosition=Gn,this.theme=Es.parseThemeOptions(e),this.renderer=KD;let Qw;this.rendererOverrides=(Qw=e.rendererOverrides)!=null?Qw:null;let ek;this.parentWorkspace=(ek=e.parentWorkspace)!=null?ek:null,this.plugins=JD}static parseMoveOptions(e,n){const r=e.move||{},l={};return r.scrollbars===void 0&&e.scrollbars===void 0?l.scrollbars=n:typeof r.scrollbars=="object"?(l.scrollbars={horizontal:!!r.scrollbars.horizontal,vertical:!!r.scrollbars.vertical},l.scrollbars.horizontal&&l.scrollbars.vertical?l.scrollbars=!0:l.scrollbars.horizontal||l.scrollbars.vertical||(l.scrollbars=!1)):l.scrollbars=!!r.scrollbars||!!e.scrollbars,l.wheel=l.scrollbars&&r.wheel!==void 0?!!r.wheel:typeof l.scrollbars=="object",l.drag=l.scrollbars?r.drag===void 0?!0:!!r.drag:!1,l}static parseZoomOptions(e){e=e.zoom||{};const n={};return n.controls=e.controls===void 0?!1:!!e.controls,n.wheel=e.wheel===void 0?!1:!!e.wheel,n.startScale=e.startScale===void 0?1:Number(e.startScale),n.maxScale=e.maxScale===void 0?3:Number(e.maxScale),n.minScale=e.minScale===void 0?.3:Number(e.minScale),n.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),n.pinch=e.pinch===void 0?n.wheel||n.controls:!!e.pinch,n}static parseGridOptions(e){e=e.grid||{};const n={};return n.spacing=Number(e.spacing)||0,n.colour=e.colour||"#888",n.length=e.length===void 0?1:Number(e.length),n.snap=0<n.spacing&&!!e.snap,n}static parseThemeOptions(e){return e=e.theme||bh,typeof e=="string"?f(ne.THEME,e):e instanceof Cr?e:Cr.defineTheme(e.name||"builtin"+I(),e)}},EI={fromJsonInternal:SC},yh={TEST_ONLY:EI};yh.fromJson=o.fromJson$$module$build$src$core$field_registry,yh.register=ao,yh.unregister=CC;var Hn=class extends lt{constructor(e,n,r){super(lt.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==lt.SKIP_SETUP&&(Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],r&&this.configure_(r),this.setValue(this.selectedOption[1]),n&&this.setValidator(n))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(Hn,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=Y(z.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&he(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=Y(z.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?Hn.ARROW_CHAR+" ":" "+Hn.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let n;(n=this.getSourceBlock())!=null&&n.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=Y(z.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(ns,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var n=this.getSourceBlock();if(!n)throw new Lt;this.dropdownCreate(),this.menu_.openingCoords=e&&typeof e.clientX=="number"?new oe(e.clientX,e.clientY):null,Ed(),e=this.menu_.render(Ga()),he(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(n=n.getColour(),e=this.sourceBlock_.getColourTertiary(),mm(n,e)),gm(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),es(this.selectedMenuItem.getElement(),Ga(),!0)),this.applyColour()}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new Lt;const n=new h$;n.setRole(Hs.LISTBOX),this.menu_=n;const r=this.getOptions(!1);this.selectedMenuItem=null;for(let d=0;d<r.length;d++){const[$,k]=r[d];if(typeof $=="object"){var l=new Image($.width,$.height);l.src=$.src,l.alt=$.alt||""}else l=$;l=new p$(l,k),l.setRole(Hs.OPTION),l.setRightToLeft(e.RTL),l.setCheckable(!0),n.addChild(l),l.setChecked(k===this.value_),k===this.value_&&(this.selectedMenuItem=l),l.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){vd(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,n){this.setValue(n.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}doClassValidation_(e){return this.getOptions(!0).some(n=>n[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let n=0,r;r=e[n];n++)r[1]===this.value_&&(this.selectedOption=r)}applyColour(){const e=this.sourceBlock_;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.getColourTertiary()),this.menu_?this.borderRect_.setAttribute("fill",e.getColourTertiary()):this.borderRect_.setAttribute("fill","transparent")),e&&this.arrow&&(e.isShadow()?this.arrow.style.fill=e.getColourSecondary():this.arrow.style.fill=e.getColour())}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];e&&typeof e=="object"?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const n=this.getSourceBlock();if(!n)throw new Lt;this.imageElement.style.display="",this.imageElement.setAttributeNS(ns,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const r=Number(e.height);e=Number(e.width);var l=!!this.borderRect_;const d=Math.max(l?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,r+Hn.IMAGE_Y_PADDING);l=l?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let $;$=this.svgArrow?this.positionSVGArrow(e+l,d/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):j(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=e+$+2*l,this.size_.height=d;let k=0;n.RTL?this.imageElement.setAttribute("x",`${l+$}`):(k=e+$,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${l}`)),this.imageElement.setAttribute("y",String(d/2-r/2)),this.positionTextElement_(k+l,e+$)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();he(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var n=!!this.borderRect_;e=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const r=j(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let l=0;this.svgArrow&&(l=this.positionSVGArrow(r+n,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=r+l+2*n,this.size_.height=e,this.positionTextElement_(n,r)}positionSVGArrow(e,n){if(!this.svgArrow)return 0;const r=this.getSourceBlock();if(!r)throw new Lt;const l=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,d=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,$=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(r.RTL?l:e+d)+","+n+")"),$+d}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];return typeof e=="object"?e.alt:e}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let n=!1;const r=e.map(([k,D])=>typeof k=="string"?[At(k),D]:(n=!0,[k.alt!==null?Object.assign({},k,{alt:At(k.alt)}):Object.assign({},k),D]));if(n||2>e.length)return{options:r};var l=r.map(([k])=>k),d=Wa(l);e=Im(l,d);const $=wm(l,d);return!e&&!$||d<=e+$?{options:r}:(d=e?l[0].substring(0,e-1):void 0,l=$?l[0].substr(1-$):void 0,{options:this.applyTrim(r,e,$),prefix:d,suffix:l})}applyTrim(e,n,r){return e.map(([l,d])=>[l.substring(n,l.length-r),d])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let n=!1;for(let r=0;r<e.length;r++){const l=e[r];Array.isArray(l)?typeof l[1]!="string"?(n=!0,console.error(`Invalid option[${r}]: Each FieldDropdown option id must be a string. 
          Found ${l[1]} in: ${l}`)):l[0]&&typeof l[0]!="string"&&typeof l[0].src!="string"&&(n=!0,console.error(`Invalid option[${r}]: Each FieldDropdown option must have a string 
          label or image description. Found ${l[0]} in: ${l}`)):(n=!0,console.error(`Invalid option[${r}]: Each FieldDropdown option must be an array.
          Found: ${l}`))}if(n)throw TypeError("Found invalid FieldDropdown options.")}};Hn.CHECKMARK_OVERHANG=25,Hn.MAX_MENU_HEIGHT_VH=.45,Hn.ARROW_CHAR="",Hn.IMAGE_Y_OFFSET=5,Hn.IMAGE_Y_PADDING=2*Hn.IMAGE_Y_OFFSET,ao("field_dropdown",Hn);var vI=class{constructor(e,n){this.bubble=e,this.workspace=n,this.startLoc=null,this.inGroup=!1}isMovable(){return!0}startDrag(){(this.inGroup=!!o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0),this.inGroup||o.setGroup$$module$build$src$core$events$utils(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,gh),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},os,ot=class{constructor(e,n,r){this.workspace=e,this.anchor=n,this.ownerRect=r,this.size=new Ge(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new vI(this,this.workspace),this.id=I(),this.svgRoot=Y(z.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=Y(z.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=Y(z.PATH,{class:"blocklyBubbleTail"},e),this.background=Y(z.RECT,{class:"blocklyDraggable",x:0,y:0,rx:os.BORDER_WIDTH,ry:os.BORDER_WIDTH},e),this.contentContainer=Y(z.G,{},this.svgRoot),_e(this.background,"pointerdown",this,this.onMouseDown)}dispose(){V(this.svgRoot),this.disposed=!0}setAnchorLocation(e,n=!1){this.anchor=e,n?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,n){this.relativeLeft=e,this.relativeTop=n,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,n=!1){e.width=Math.max(e.width,os.MIN_SIZE),e.height=Math.max(e.height,os.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),n?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let n;(n=this.workspace.getGesture(e))==null||n.handleBubbleStart(e,this),this.bringToFront(),o.setSelected$$module$build$src$core$common(this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,n){this.svgRoot.setAttribute("transform",`translate(${e}, ${n})`)}positionByRect(e=new it(0,0,0,0)){var n=this.workspace.getMetricsManager().getViewMetrics(!0),r=this.getOptimalRelativeLeft(n),l=this.getOptimalRelativeTop(n);const d={x:r,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},$={x:-this.size.width-30,y:l};l={x:e.getWidth(),y:l};var k={x:r,y:e.getHeight()};r=e.getWidth()<e.getHeight()?l:k,e=e.getWidth()<e.getHeight()?k:l,l=this.getOverlap(d,n),k=this.getOverlap($,n);const D=this.getOverlap(r,n);n=this.getOverlap(e,n),n=Math.max(l,k,D,n),l===n?(this.relativeLeft=d.x,this.relativeTop=d.y):k===n?(this.relativeLeft=$.x,this.relativeTop=$.y):D===n?(this.relativeLeft=r.x,this.relativeTop=r.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,n){var r=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(r+this.size.width,n.left+n.width)-Math.max(r,n.left))*(Math.min(e+this.size.height,n.top+n.height)-Math.max(e,n.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let n=-this.size.width/4;if(this.size.width>e.width)return n;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var r=this.anchor.x-n;r-this.size.width<e.left?n=-(e.left-this.anchor.x+this.size.width):r>e.right&&(n=-(e.right-this.anchor.x))}else{r=n+this.anchor.x;const l=r+this.size.width;r<e.left?n=e.left-this.anchor.x:l>e.right&&(n=e.right-this.anchor.x-this.size.width)}return n}getOptimalRelativeTop(e){let n=-this.size.height/4;if(this.size.height>e.height)return n;const r=this.anchor.y+n,l=r+this.size.height;return e=this.getWorkspaceViewRect(e),r<e.top?n=e.top-this.anchor.y:l>e.bottom&&(n=e.bottom-this.anchor.y-this.size.height),n}getWorkspaceViewRect(e){const n=e.top;let r=e.top+e.height,l=e.left;return e=e.left+e.width,r-=this.getScrollbarThickness(),this.workspace.RTL?l-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new it(n,r,l,e)}getScrollbarThickness(){return Mt.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var n=this.size.width/2,r=this.size.height/2,l=-this.relativeLeft,d=-this.relativeTop;if(n===l&&r===d)e.push("M "+n+","+r);else{d-=r,l-=n,this.workspace.RTL&&(l*=-1);var $=Math.sqrt(d*d+l*l),k=Math.acos(l/$);0>d&&(k=2*Math.PI-k);var D=k+Math.PI/2;D>2*Math.PI&&(D-=2*Math.PI);var q=Math.sin(D);const ht=Math.cos(D);let ut=(this.size.width+this.size.height)/os.TAIL_THICKNESS;ut=Math.min(ut,this.size.width,this.size.height)/4,D=1-os.ANCHOR_RADIUS/$,l=n+D*l,d=r+D*d,D=n+ut*ht;const Gn=r+ut*q;n-=ut*ht,r-=ut*q,q=yd(this.workspace.RTL?-os.TAIL_ANGLE:os.TAIL_ANGLE),q=k+q,q>2*Math.PI&&(q-=2*Math.PI),k=Math.sin(q)*$/os.TAIL_BEND,$=Math.cos(q)*$/os.TAIL_BEND,e.push("M"+D+","+Gn),e.push("C"+(D+$)+","+(Gn+k)+" "+l+","+d+" "+l+","+d),e.push("C"+l+","+d+" "+(n+$)+","+(r+k)+" "+n+","+r)}e.push("z");let me;(me=this.tail)==null||me.setAttribute("d",e.join(" "))}bringToFront(){let e;const n=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&(n==null?void 0:n.lastChild)!==this.svgRoot?(n==null||n.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new oe(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){}unselect(){}};os=ot,ot.BORDER_WIDTH=6,ot.DOUBLE_BORDER=2*os.BORDER_WIDTH,ot.MIN_SIZE=os.DOUBLE_BORDER,ot.TAIL_THICKNESS=1,ot.TAIL_ANGLE=20,ot.TAIL_BEND=4,ot.ANCHOR_RADIUS=8;var Vo=class extends ot{constructor(e,n,r,l){super(n,r,l),this.workspace=n,this.anchor=r,this.ownerRect=l,this.autoLayout=!0,n=new Es(e),this.validateWorkspaceOptions(n),this.svgDialog=Y(z.SVG,{x:ot.BORDER_WIDTH,y:ot.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Es(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),n.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(z.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e==null||e.init(this.miniWorkspace),e==null||e.show(n.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let d,$;(d=this.miniWorkspace.getFlyout())==null||($=d.getWorkspace())==null||$.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const e of this.miniWorkspace.getTopBlocks(!1)){const n=e.getRelativeToSurfaceXY();if(20>n.y&&e.moveBy(0,20-n.y),e.RTL){let r=-20;const l=this.miniWorkspace.getFlyout();l&&(r-=l.getWidth()),n.x>r&&e.moveBy(r-n.x,0)}else 20>n.x&&e.moveBy(20-n.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var e=this.getSize(),n=this.calculateWorkspaceSize();Math.abs(e.width-n.width)<Vo.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-n.height)<Vo.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${n.width}px`),this.svgDialog.setAttribute("height",`${n.height}px`),this.miniWorkspace.setCachedParentSvgSize(n.width,n.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${n.width}, 0)`),this.setSize(new Ge(n.width+ot.DOUBLE_BORDER,n.height+ot.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let n=e.width+Vo.MARGIN;e=e.height+Vo.MARGIN;const r=this.miniWorkspace.getFlyout();if(r){const l=r.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,l.height+20),n+=r.getWidth()}return new Ge(n,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let n;if(e=(n=this.miniWorkspace.getFlyout())==null?void 0:n.getWorkspace())for(const r of e.getAllBlocks(!1))r.setStyle(r.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,n){super.moveTo(e,n),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Vo.MINIMUM_VIEW_CHANGE=10,Vo.MARGIN=3*ot.DOUBLE_BORDER;var Eh=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new oe(0,0),this.workspaceLocation=new oe(0,0),this.svgRoot=null,this.tooltip=e}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var n=this.sourceBlock;this.svgRoot=Y(z.G,{class:"blocklyIconGroup"}),n.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),_e(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,ul(this.svgRoot)}}dispose(){Id(this.svgRoot),V(this.svgRoot)}getWeight(){return-1}getSize(){return new Ge(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",ll(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=oe.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}},vh,Ch;vh=17,Ch=16,o.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends Eh{constructor(e,n){super(n),this.flyoutBlockTypes=e,this.sourceBlock=n,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),Y(z.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),Y(z.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),Y(z.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),he(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return o.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Ge(vh,vh)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.getColour());let n;(n=this.miniWorkspaceBubble)==null||n.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let n;(n=this.miniWorkspaceBubble)==null||n.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const n=this;return Q.asyncExecutePromiseGeneratorFunction(function*(){if(n.bubbleIsVisible()!==e){if(yield Fs(),e){n.miniWorkspaceBubble=new Vo(n.getMiniWorkspaceConfig(),n.sourceBlock.workspace,n.getAnchorLocation(),n.getBubbleOwnerRect()),n.applyColour(),n.createRootBlock(),n.addSaveConnectionsListener();let r;(r=n.miniWorkspaceBubble)==null||r.addWorkspaceChangeListener(n.createMiniWorkspaceChangeListener())}else{let r;(r=n.miniWorkspaceBubble)==null||r.dispose(),n.miniWorkspaceBubble=null,n.saveConnectionsListener&&n.sourceBlock.workspace.removeChangeListener(n.saveConnectionsListener),n.saveConnectionsListener=null}N(new(F(X.BUBBLE_OPEN))(n.sourceBlock,e,"mutator"))}})}getMiniWorkspaceConfig(){let e;const n={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(n.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(r=>({kind:"block",type:r}))}),n}getAnchorLocation(){const e=vh/2;return oe.sum(this.workspaceLocation,new oe(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new it(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let n,r,l,d;e=(d=(n=this.miniWorkspaceBubble)==null||(r=n.getWorkspace())==null||(l=r.getFlyout())==null?void 0:l.getWidth())!=null?d:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+Ch):Ch,Ch)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{o.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||w(e)||S(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=o.getGroup$$module$build$src$core$events$utils();e||o.setGroup$$module$build$src$core$events$utils(!0);var n=Tr.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var r=Tr.getExtraBlockState_(this.sourceBlock);n!==r&&N(new(F(X.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,n,r)),o.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=Wt.MUTATOR,o.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,o.MutatorIcon$$module$build$src$core$icons$mutator_icon;var xl=Object.create(null),_D={allExtensions:xl};o.register$$module$build$src$core$extensions("parent_tooltip_when_inline",NC);var Ws={TEST_ONLY:_D};Ws.apply=Dd,Ws.buildTooltipForDropdown=o.buildTooltipForDropdown$$module$build$src$core$extensions,Ws.buildTooltipWithFieldText=o.buildTooltipWithFieldText$$module$build$src$core$extensions,Ws.isRegistered=ng,Ws.register=o.register$$module$build$src$core$extensions,Ws.registerMixin=o.registerMixin$$module$build$src$core$extensions,Ws.registerMutator=o.registerMutator$$module$build$src$core$extensions,Ws.runAfterPageLoad=OC,Ws.unregister=IC;var Be;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(Be||(Be={}));var Ho={};Ho.arc=Nt,Ho.curve=Un,Ho.line=fl,Ho.lineOnAxis=$e,Ho.lineTo=co,Ho.moveBy=ft,Ho.moveTo=Kt,Ho.point=Se;var yt={};yt.Coordinate=oe,yt.KeyCodes=Be,yt.Rect=it,yt.Size=Ge,yt.Svg=z,yt.aria=ac,yt.array=PS,yt.browserEvents=Do,yt.colour=ys,yt.deprecation=gS,yt.dom=rn,yt.extensions=Ws,yt.idGenerator=Yg,yt.math=lh,yt.object=yI,yt.parsing=$c,yt.string=Cl,yt.style=gi,yt.svgMath=fr,yt.svgPaths=Ho,yt.toolbox=$i,yt.userAgent=oD,yt.xml=$l;var CI=class extends ot{constructor(e,n,r){super(e,n,r),this.workspace=e,this.anchor=n,this.ownerRect=r,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Ge(160+ot.DOUBLE_BORDER,80+ot.DOUBLE_BORDER),this.MIN_SIZE=new Ge(45+ot.DOUBLE_BORDER,20+ot.DOUBLE_BORDER),this.editable=!0,he(this.svgRoot,"blocklyTextInputBubble"),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}setEditable(e){(this.editable=e)?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","")}isEditable(){return this.editable}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}createEditor(e){e=Y(z.FOREIGNOBJECT,{x:ot.BORDER_WIDTH,y:ot.BORDER_WIDTH},e);const n=document.createElementNS(ho,"body");n.setAttribute("xmlns",ho),n.className="blocklyMinimalBody";const r=document.createElementNS(ho,"textarea");return r.className="blocklyTextarea blocklyText",r.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),n.appendChild(r),e.appendChild(n),this.bindTextAreaEvents(r),setTimeout(()=>{r.focus()},0),{inputRoot:e,textArea:r}}bindTextAreaEvents(e){_e(e,"wheel",this,n=>{n.stopPropagation()}),_e(e,"focus",this,this.onStartEdit,!0),_e(e,"change",this,this.onTextChange)}createResizeHandle(e,n){return e=Y(z.IMAGE,{class:"blocklyResizeHandle",href:`${n.options.pathToMedia}resize-handle.svg`},e),_e(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,n=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const r=e.width-ot.DOUBLE_BORDER,l=e.height-ot.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${r}`),this.inputRoot.setAttribute("height",`${l}`),this.resizeGroup.setAttribute("y",`${l}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-ot.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${r}`),super.setSize(e,n),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(e){this.bringToFront(),sn(e)||(Od(this.workspace,e,new oe(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=_e(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=_e(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){rt(),this.resizePointerUpListener&&(Ye(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(Ye(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=Ad(this.workspace,e),this.setSize(new Ge(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}};ct(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var D$={};D$.register=ig,D$.unregister=MC;var P$=17,SI=160,II=80,Go=class extends Eh{constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new Ge(SI,II),this.bubbleVisiblity=!1}getType(){return Go.TYPE}initView(e){this.svgRoot||(super.initView(e),Y(z.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),Y(z.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),Y(z.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),he(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return Go.WEIGHT}getSize(){return new Ge(P$,P$)}applyColour(){super.applyColour();const e=this.sourceBlock.getColour();let n;(n=this.textInputBubble)==null||n.setColour(e)}updateEditable(){const e=this,n=()=>super.updateEditable;return Q.asyncExecutePromiseGeneratorFunction(function*(){n().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){super.onLocationChange(e),e=this.getAnchorLocation();let n;(n=this.textInputBubble)==null||n.setAnchorLocation(e)}setText(e){const n=this.text;N(new(F(X.BLOCK_CHANGE))(this.sourceBlock,"comment",null,n,e)),this.text=e;let r;(r=this.textInputBubble)==null||r.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let n;(n=this.textInputBubble)==null||n.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(e){let n;this.text=(n=e.text)!=null?n:"";let r,l;this.bubbleSize=new Ge((r=e.width)!=null?r:SI,(l=e.height)!=null?l:II);let d;this.bubbleVisiblity=(d=e.pinned)!=null?d:!1,this.setBubbleVisible(this.bubbleVisiblity)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(N(new(F(X.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const n=this;return Q.asyncExecutePromiseGeneratorFunction(function*(){n.bubbleVisiblity!==e&&(n.bubbleVisiblity=e,yield Fs(),!n.sourceBlock.rendered||n.sourceBlock.isInFlyout||n.sourceBlock.isInsertionMarker()||(e?(n.sourceBlock.isEditable()?n.showEditableBubble():n.showNonEditableBubble(),n.applyColour()):n.hideBubble(),N(new(F(X.BUBBLE_OPEN))(n.sourceBlock,e,"comment"))))})}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let n;(n=this.textInputBubble)==null||n.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new CI(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0)}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=P$/2;return oe.sum(this.workspaceLocation,new oe(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};Go.TYPE=Wt.COMMENT,Go.WEIGHT=3,ig(Go.TYPE,Go);var wI=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},kI={};kI.DuplicateIconType=wI;var RI=class extends ot{constructor(e,n,r,l){super(n,r,l),this.text=e,this.workspace=n,this.anchor=r,this.ownerRect=l,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(e){this.text=e,V(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,n){return n=this.createParagraph(n),e=this.createTextFragments(n,e),this.workspace.RTL&&this.rightAlignTextFragments(n.getBBox().width,e),n}createParagraph(e){return Y(z.G,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",transform:`translate(0,${ot.BORDER_WIDTH})`,style:`direction: ${this.workspace.RTL?"rtl":"ltr"}`},e)}createTextFragments(e,n){let r=1;return n.split(`
`).map(l=>{const d=Y(z.TEXT,{y:`${r}em`,x:ot.BORDER_WIDTH},e);return l=document.createTextNode(l),d.appendChild(l),r+=1,d})}rightAlignTextFragments(e,n){for(const r of n)r.setAttribute("text-anchor","start"),r.setAttribute("x",`${e+ot.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new Ge(e.width+2*ot.BORDER_WIDTH,e.height+2*ot.BORDER_WIDTH),!0)}},B$=17,jo=class extends Eh{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return jo.TYPE}initView(e){this.svgRoot||(super.initView(e),Y(z.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),Y(z.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),Y(z.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),he(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return jo.WEIGHT}getSize(){return new Ge(B$,B$)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.getColour())}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let n;(n=this.textBubble)==null||n.setAnchorLocation(this.getAnchorLocation())}addMessage(e,n){if(this.textMap.get(n)===e)return this;e?this.textMap.set(n,e):this.textMap.delete(n);let r;return(r=this.textBubble)==null||r.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const n=this;return Q.asyncExecutePromiseGeneratorFunction(function*(){if(n.bubbleIsVisible()!==e){if(yield Fs(),e)n.textBubble=new RI(n.getText(),n.sourceBlock.workspace,n.getAnchorLocation(),n.getBubbleOwnerRect()),n.applyColour();else{let r;(r=n.textBubble)==null||r.dispose(),n.textBubble=null}N(new(F(X.BUBBLE_OPEN))(n.sourceBlock,e,"warning"))}})}getAnchorLocation(){const e=B$/2;return oe.sum(this.workspaceLocation,new oe(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new it(e.y,e.y+e.height,e.x,e.x+e.width)}};jo.TYPE=Wt.WARNING,jo.WEIGHT=2;var yi={};yi.CommentIcon=Go,yi.Icon=Eh,yi.IconType=Wt,yi.MutatorIcon=o.MutatorIcon$$module$build$src$core$icons$mutator_icon,yi.WarningIcon=jo,yi.exceptions=kI,yi.registry=D$,o.Names$$module$build$src$core$names=class{constructor(e,n){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=n||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=o.allUsedVarModels$$module$build$src$core$variables(e);for(let n=0;n<e.length;n++)this.getName(e[n].getId(),o.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,n){let r=e;n===o.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(r=e),e=r.toLowerCase();const l=n===o.NameType$$module$build$src$core$names.VARIABLE||n===o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(n)||this.db.set(n,new Map);const d=this.db.get(n);return d.has(e)?l+d.get(e):(n=this.getDistinctName(r,n),d.set(e,n.substr(l.length)),n)}getUserNames(e){let n;return(e=(n=this.db.get(e))==null?void 0:n.keys())?Array.from(e):[]}getDistinctName(e,n){e=this.safeName(e);let r=null,l,d;for(;this.dbReverse.has(e+((l=r)!=null?l:""))||this.reservedWords.has(e+((d=r)!=null?d:""));)r=r?r+1:2;let $;return e+=($=r)!=null?$:"",this.dbReverse.add(e),(n===o.NameType$$module$build$src$core$names.VARIABLE||n===o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=o.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,n){return e.toLowerCase()===n.toLowerCase()}},function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(o.Names$$module$build$src$core$names||(o.Names$$module$build$src$core$names={})),o.NameType$$module$build$src$core$names=o.Names$$module$build$src$core$names.NameType,o.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,o.NameType$$module$build$src$core$names,o.Names$$module$build$src$core$names;var xI=class extends Map{constructor(){super()}set(e,n){return this.get(e)===n?this:(super.set(e,n),Fd(n)&&n.startPublishing(),this)}delete(e){const n=this.get(e);return e=super.delete(e),e&&(Fd(n)&&n.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},Sh,xn;Sh="PROCEDURE",o.DEFAULT_ARG$$module$build$src$core$procedures="x",xn={CATEGORY_NAME:Sh,DEFAULT_ARG:o.DEFAULT_ARG$$module$build$src$core$procedures},xn.ObservableProcedureMap=xI,xn.allProcedures=Ud,xn.findLegalName=o.findLegalName$$module$build$src$core$procedures,xn.flyoutCategory=Vd,xn.getCallers=ug,xn.getDefinition=o.getDefinition$$module$build$src$core$procedures,xn.isNameUsed=lg,xn.isProcedureBlock=pi,xn.mutateCallers=o.mutateCallers$$module$build$src$core$procedures,xn.mutatorOpenListener=cg,xn.rename=o.rename$$module$build$src$core$procedures;var TD=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return e.type&this.FIELD}isHat(e){return e.type&this.HAT}isIcon(e){return e.type&this.ICON}isSpacer(e){return e.type&this.SPACER}isInRowSpacer(e){return e.type&this.IN_ROW_SPACER}isInput(e){return e.type&this.INPUT}isExternalInput(e){return e.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(e){return e.type&this.INLINE_INPUT}isStatementInput(e){return e.type&this.STATEMENT_INPUT}isPreviousConnection(e){return e.type&this.PREVIOUS_CONNECTION}isNextConnection(e){return e.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(e){return e.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(e){return e.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(e){return e.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(e){return e.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(e){return e.type&this.RIGHT_SQUARE_CORNER}isCorner(e){return e.type&this.CORNER}isJaggedEdge(e){return e.type&this.JAGGED_EDGE}isRow(e){return e.type&this.ROW}isBetweenRowSpacer(e){return e.type&this.BETWEEN_ROW_SPACER}isTopRow(e){return e.type&this.TOP_ROW}isBottomRow(e){return e.type&this.BOTTOM_ROW}isTopOrBottomRow(e){return e.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(e){return e.type&this.INPUT_ROW}},U=new TD,po=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=U.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},bc=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=U.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;0<=e;e--){const n=this.elements[e];if(U.isInput(n))return n}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const n=this.elements[e];if(U.isSpacer(n))return n}return null}getLastSpacer(){for(let e=this.elements.length-1;0<=e;e--){const n=this.elements[e];if(U.isSpacer(n))return n}return null}},F$=class extends bc{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=U.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,n=0,r=0;for(let l=0;l<this.elements.length;l++){const d=this.elements[l];n+=d.width,U.isSpacer(d)||(U.isNextConnection(d)?r=Math.max(r,d.height):e=Math.max(e,d.height))}this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+r,this.descenderHeight=r,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Wo=class extends po{constructor(e,n){super(e),this.connectionModel=n,this.type|=U.CONNECTION,this.shape=this.constants_.shapeFor(n),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=n.isHighlighted()}},Ei=class extends Wo{constructor(e,n){super(e,n.connection),this.input=n,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=U.INPUT,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Ih=class extends Ei{constructor(e,n){super(e,n),this.height=0,this.type|=U.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Ol=class extends po{constructor(e,n,r){super(e),this.field=n,this.parentInput=r,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=U.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},U$=class extends po{constructor(e){super(e),this.type|=U.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},OI=class extends po{constructor(e,n){super(e),this.icon=n,this.flipRtl=!1,this.type|=U.ICON,e=n.getSize(),this.height=e.height,this.width=e.width}},is=class extends po{constructor(e,n){super(e),this.type=this.type|U.SPACER|U.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},V$=class extends Ei{constructor(e,n){super(e,n),this.type|=U.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},yc=class extends Ei{constructor(e,n){super(e,n),this.type|=U.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},H$=class extends bc{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=U.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let n=0;n<this.elements.length;n++){const r=this.elements[n];this.width+=r.width,U.isInput(r)&&r instanceof Ei&&(U.isStatementInput(r)&&r instanceof yc?e+=r.connectedBlockWidth:U.isExternalInput(r)&&r instanceof Ih&&r.connectedBlockWidth!==0&&(e+=r.connectedBlockWidth-r.connectionWidth)),U.isSpacer(r)||(this.height=Math.max(this.height,r.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},AI=class extends po{constructor(e){super(e),this.type|=U.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},NI=class extends Wo{constructor(e,n){super(e,n),this.type|=U.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},MI=class extends Wo{constructor(e,n){super(e,n),this.connectionOffsetX=0,this.type|=U.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},LI=class extends Wo{constructor(e,n){super(e,n),this.type|=U.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Ec=class extends po{constructor(e,n){super(e),this.type=(n&&n!=="left"?U.RIGHT_ROUND_CORNER:U.LEFT_ROUND_CORNER)|U.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},G$=class extends bc{constructor(e,n,r){super(e),this.height=n,this.width=r,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|U.SPACER|U.BETWEEN_ROW_SPACER,this.elements=[new is(this.constants_,r)]}measure(){}},vc=class extends po{constructor(e,n){super(e),this.type=(n&&n!=="left"?U.RIGHT_SQUARE_CORNER:U.LEFT_SQUARE_CORNER)|U.CORNER,this.width=this.height=this.constants_.NO_PADDING}},j$=class extends bc{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=U.TOP_ROW}hasLeftSquareCorner(e){const n=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,r=e.getPreviousBlock();return!!e.outputConnection||n||(r?r.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,n=0,r=0;for(let l=0;l<this.elements.length;l++){const d=this.elements[l];n+=d.width,U.isSpacer(d)||(U.isHat(d)&&d instanceof U$?r=Math.max(r,d.ascenderHeight):e=Math.max(e,d.height))}this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+r,this.capline=this.ascenderHeight=r,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},wh=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=ft(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const n=e.blockStyles;for(const r in n)this.blockStyles[r]=this.validatedBlockStyle_(n[r]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=se("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const n="auto_"+e;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(e)),{style:this.blockStyles[n],name:n}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const n={};return e&&Object.assign(n,e),e=dl(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?dl(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?dl(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n}generateSecondaryColour_(e){return rr("#fff",e,.6)||e}generateTertiaryColour_(e){return rr("#fff",e,.3)||e}dispose(){this.embossFilter&&V(this.embossFilter),this.disabledPattern&&V(this.disabledPattern),this.debugFilter&&V(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH,r=fl([Se(n,e/4),Se(2*-n,e/2),Se(n,e/4)]);return{height:e,width:n,path:r}}makeStartHat(){const e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH,r=Un("c",[Se(30,-e),Se(70,-e),Se(n,0)]);return{height:e,width:n,path:r}}makePuzzleTab(){function e($){$=$?-1:1;const k=-$;var D=r/2;const q=D+2.5,me=D+.5,ht=Se(-n,$*D);return D=Se(n,$*D),Un("c",[Se(0,$*q),Se(-n,k*me),ht])+Un("s",[Se(n,2.5*k),D])}const n=this.TAB_WIDTH,r=this.TAB_HEIGHT,l=e(!0),d=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:r,pathDown:d,pathUp:l}}makeNotch(){function e(k){return fl([Se(k*l,r),Se(3*k,0),Se(k*l,-r)])}const n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,l=(n-3)/2,d=e(1),$=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:d,pathRight:$}}makeInsideCorners(){const e=this.CORNER_RADIUS,n=Nt("a","0 0,0",e,Se(-e,e)),r=Nt("a","0 0,0",e,Se(e,e));return{width:e,height:e,pathTop:n,pathBottom:r}}makeOutsideCorners(){const e=this.CORNER_RADIUS,n=ft(0,e)+Nt("a","0 0,1",e,Se(e,-e)),r=Nt("a","0 0,1",e,Se(e,e)),l=Nt("a","0 0,1",e,Se(-e,-e)),d=Nt("a","0 0,1",e,Se(-e,e));return{topLeft:n,topRight:r,bottomRight:d,bottomLeft:l,rightHeight:e}}shapeFor(e){switch(e.type){case ge.INPUT_VALUE:case ge.OUTPUT_VALUE:return this.PUZZLE_TAB;case ge.PREVIOUS_STATEMENT:case ge.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,n,r){this.injectCSS_(n,r),this.defs=Y(z.DEFS,{},e),e=Y(z.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),Y(z.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),n=Y(z.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),Y(z.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},n),Y(z.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),Y(z.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=Y(z.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),Y(z.RECT,{width:10,height:10,fill:"#aaa"},e),Y(z.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const e=Y(z.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),n=Y(z.FECOMPONENTTRANSFER,{result:"outBlur"},e);Y(z.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),Y(z.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),Y(z.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,n){n=this.getCSS_(n),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const r=n.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=r:(n=document.createElement("style"),n.id=e,e=document.createTextNode(r),n.appendChild(e),document.head.insertBefore(n,document.head.firstChild),this.cssNode=n)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect,`,`${e} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},kh=class{constructor(e,n){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=n,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=n.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const n=this.info_.rows[e];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=ft(e.xPos,this.info_.startY);for(let r=0,l;l=n[r];r++)U.isLeftRoundedCorner(l)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:U.isRightRoundedCorner(l)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:U.isPreviousConnection(l)&&l instanceof Wo?this.outlinePath_+=l.shape.pathLeft:U.isHat(l)?this.outlinePath_+=this.constants_.START_HAT.path:U.isSpacer(l)&&(this.outlinePath_+=$e("h",l.width));this.outlinePath_+=$e("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+$e("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const n=e.getLastInput();this.positionExternalValueConnection_(e);const r=Hd(n.shape)?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=$e("H",n.xPos+n.width)+r+$e("v",e.height-n.connectionHeight)}drawStatementInput_(e){var n=e.getLastInput();if(n){var r=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+$e("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var l=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=$e("H",r)+n+$e("v",l)+this.constants_.INSIDE_CORNERS.pathBottom+$e("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=$e("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();let r=0,l="";for(let d=n.length-1,$;$=n[d];d--)U.isNextConnection($)&&$ instanceof Wo?l+=$.shape.pathRight:U.isLeftSquareCorner($)?l+=$e("H",e.xPos):U.isLeftRoundedCorner($)?l+=this.constants_.OUTSIDE_CORNERS.bottomLeft:U.isRightRoundedCorner($)?(l+=this.constants_.OUTSIDE_CORNERS.bottomRight,r=this.constants_.OUTSIDE_CORNERS.rightHeight):U.isSpacer($)&&(l+=$e("h",-1*$.width));this.outlinePath_+=$e("V",e.baseline-r),this.outlinePath_+=l}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const n=e.connectionOffsetY+e.height;e=Hd(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=$e("V",n)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,n;n=this.info_.rows[e];e++)for(let r=0,l;l=n.elements[r];r++)U.isInlineInput(l)?this.drawInlineInput_(l):(U.isIcon(l)||U.isField(l))&&this.layoutField_(l)}layoutField_(e){const n=e.centerline-e.height/2;let r=e.xPos;var l="";this.info_.RTL&&(r=-(r+e.width),e.flipRtl&&(r+=e.width,l="scale(-1 1)")),U.isIcon(e)?(l=e.icon,l.setOffsetInBlock(new oe(r,n)),this.info_.isInsertionMarker&&l.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+r+","+n+")"+l),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const n=e.width,r=e.height,l=e.connectionOffsetY,d=e.connectionHeight+l;this.inlinePath_+=Kt(e.xPos+e.connectionWidth,e.centerline-r/2)+$e("v",l)+e.shape.pathDown+$e("v",r-d)+$e("h",n-e.connectionWidth)+$e("v",-r)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const n=e.centerline-e.height/2;if(e.connectionModel){let r=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(r*=-1),e.connectionModel.setOffsetInBlock(r,n+e.connectionOffsetY)}}positionStatementInputConnection_(e){const n=e.getLastInput();if(n!=null&&n.connectionModel){let r=e.xPos+e.statementEdge+n.notchOffset;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,e.yPos)}}positionExternalValueConnection_(e){const n=e.getLastInput();if(n&&n.connectionModel){let r=e.xPos+e.width;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const n=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const n=e.connection,r=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const n of e.elements)if(n instanceof Wo)if(n.highlighted)this.drawConnectionHighlightPath(n);else{let r,l;(l=(r=this.block_.pathObject).removeConnectionHighlight)==null||l.call(r,n.connectionModel)}}drawConnectionHighlightPath(e){const n=e.connectionModel;e=n.type===ge.INPUT_VALUE||n.type===ge.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const r=n.getSourceBlock();let l,d;(d=(l=r.pathObject).addConnectionHighlight)==null||d.call(l,n,e,n.getOffsetInBlock(),r.RTL)}getExpressionConnectionHighlightPath(e){let n="";return Hd(e.shape)?n=e.shape.pathDown(e.height):BC(e.shape)&&(n=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,ft(0,-e)+$e("v",e)+n+$e("v",e)}getStatementConnectionHighlightPath(e){if(!FC(e.shape))throw Error("Statement connections should have notch shapes");const n=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return ft(-n,0)+$e("h",n)+e.shape.pathLeft+$e("h",n)}};(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(o.Align$$module$build$src$core$inputs$align||(o.Align$$module$build$src$core$inputs$align={})),o.Align$$module$build$src$core$inputs$align;var Sr=class extends lt{constructor(e,n,r){super(lt.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==lt.SKIP_SETUP&&(r?this.configure_(r):this.class=n||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&he(this.getTextElement(),this.class)}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&x(this.textElement_,this.class),e&&he(this.textElement_,e)),this.class=e}static fromJson(e){return new this(At(e.text),void 0,e)}};ao("field_label",Sr),Sr.prototype.DEFAULT_VALUE="";var Al=class{constructor(e,n){this.name=e,this.sourceBlock=n,this.fieldRow=[],this.align=o.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,n){return this.insertFieldAt(this.fieldRow.length,e,n),this}insertFieldAt(e,n,r){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(n||n===""&&r)&&(typeof n=="string"&&(n=o.fromJson$$module$build$src$core$field_registry({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(n),n.name=r,n.setVisible(this.isVisible()),n.prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,n),e++,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,n){for(let r=0,l;l=this.fieldRow[r];r++)if(l.name===e)return l.dispose(),this.fieldRow.splice(r,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(n)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let n=[];if(this.visible===e)return n;this.visible=e;for(let l=0,d;d=this.fieldRow[l];l++)d.setVisible(e);if(this.connection){var r=this.connection;e?n=r.startTrackingAll():r.stopTrackingAll(),(r=r.targetBlock())&&(r.getSvgRoot().style.display=e?"block":"none")}return n}markDirty(){for(let e=0,n;n=this.fieldRow[e];e++)n.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,n;n=this.fieldRow[e];e++)n.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},fo=class extends Al{constructor(e,n){super(e,n),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},zo=class extends Al{constructor(e,n){super(e,n),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},rs=class extends Al{constructor(e,n){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,n),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(ge.NEXT_STATEMENT)}},DI;o.ValueInput$$module$build$src$core$inputs$value_input=class extends Al{constructor(e,n){if(!e)throw Error("Value inputs must have a non-empty name");super(e,n),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(ge.INPUT_VALUE)}},DI={},DI.ValueInput=o.ValueInput$$module$build$src$core$inputs$value_input;var Cc=class{constructor(e,n){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=n,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new MI(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.topRow=new j$(this.constants_),this.bottomRow=new F$(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new H$(this.constants_);this.inputRows.push(e);var n=this.block_.getIcons();for(let r=0,l;l=n[r];r++){const d=new OI(this.constants_,l);this.isCollapsed&&!l.isShownWhenCollapsed()||e.elements.push(d)}n=void 0;for(let r=0,l;l=this.block_.inputList[r];r++)if(l.isVisible()){this.shouldStartNewRow_(l,n)&&(this.rows.push(e),e=new H$(this.constants_),this.inputRows.push(e));for(let d=0,$;$=l.fieldRow[d];d++)e.elements.push(new Ol(this.constants_,$,l));this.addInput_(l,e),n=l}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new AI(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const n=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let r=this.topRow.hasLeftSquareCorner(this.block_)?vc:Ec;this.topRow.elements.push(new r(this.constants_)),n?(e=new U$(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new LI(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof rs&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,r=this.topRow.hasRightSquareCorner(this.block_)?vc:Ec,this.topRow.elements.push(new r(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof rs?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new vc(this.constants_)):this.bottomRow.elements.push(new Ec(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new NI(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new vc(this.constants_,"right")):this.bottomRow.elements.push(new Ec(this.constants_,"right"))}addInput_(e,n){this.isInline&&e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new V$(this.constants_,e)),n.hasInlineInput=!0):e instanceof rs?(n.elements.push(new yc(this.constants_,e)),n.hasStatement=!0):e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new Ih(this.constants_,e)),n.hasExternalInput=!0):(e instanceof fo||e instanceof zo)&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),n.align===null&&(n.align=e.align)}shouldStartNewRow_(e,n){return n?n instanceof zo||e instanceof rs||n instanceof rs?!0:e instanceof o.ValueInput$$module$build$src$core$inputs$value_input||e instanceof fo||n instanceof o.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,n;n=this.rows[e];e++){const r=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new is(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(let l=0;l<r.length-1;l++){n.elements.push(r[l]);const d=this.getInRowSpacing_(r[l],r[l+1]);n.elements.push(new is(this.constants_,d))}n.elements.push(r[r.length-1]),n.endsWithElemSpacer()&&n.elements.push(new is(this.constants_,this.getInRowSpacing_(r[r.length-1],null)))}}}getInRowSpacing_(e,n){if(!e&&n&&U.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&U.isInput(e)&&!n){if(U.isExternalInput(e))return this.constants_.NO_PADDING;if(U.isInlineInput(e))return this.constants_.LARGE_PADDING;if(U.isStatementInput(e))return this.constants_.NO_PADDING}return e&&U.isLeftSquareCorner(e)&&n&&(U.isPreviousConnection(n)||U.isNextConnection(n))?n.notchOffset:e&&U.isLeftRoundedCorner(e)&&n&&(U.isPreviousConnection(n)||U.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,n=0,r=0;for(let d=0,$;$=this.rows[d];d++){if($.measure(),n=Math.max(n,$.width),$.hasStatement){var l=$.getLastInput();let k,D;l=$.width-((D=(k=l)==null?void 0:k.width)!=null?D:0),e=Math.max(e,l)}r=Math.max(r,$.widthWithConnectedBlocks)}this.statementEdge=e,this.width=n;for(let d=0,$;$=this.rows[d];d++)$.hasStatement&&($.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,r),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let n=0,r;r=this.rows[n];n++)if(r.hasStatement)this.alignStatementRow_(r);else{var e=r.width;e=this.getDesiredRowWidth_(r)-e,0<e&&this.addAlignmentPadding_(r,e),U.isTopOrBottomRow(r)&&(r.widthWithConnectedBlocks=r.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,n){const r=e.getFirstSpacer(),l=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align===o.Align$$module$build$src$core$inputs$align.LEFT&&l)l.width+=n;else if(e.align===o.Align$$module$build$src$core$inputs$align.CENTRE&&r&&l)r.width+=n/2,l.width+=n/2;else if(e.align===o.Align$$module$build$src$core$inputs$align.RIGHT&&r)r.width+=n;else if(l)l.width+=n;else return;e.width+=n}alignStatementRow_(e){const n=e.getLastInput();if(n){var r=e.width-n.width,l=this.statementEdge;r=l-r,0<r&&this.addAlignmentPadding_(e,r),r=e.width,l=this.getDesiredRowWidth_(e),n.width+=l-r,n.height=Math.max(n.height,e.height),e.width+=l-r,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let n=0;n<e.length;n++)this.rows.push(e[n]),n!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[n],e[n+1]))}makeSpacerRow_(e,n){var r=this.getSpacerRowHeight_(e,n);const l=this.getSpacerRowWidth_(e,n);return r=new G$(this.constants_,r,l),e.hasStatement&&(r.followsStatement=!0),n.hasStatement&&(r.precedesStatement=!0),r}getSpacerRowWidth_(e,n){return this.width-this.startX}getSpacerRowHeight_(e,n){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){return U.isSpacer(n)?e.yPos+n.height/2:U.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,U.isNextConnection(n)?e+n.height/2:e-n.height/2):U.isTopRow(e)?U.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2}recordElemPositions_(e){let n=e.xPos;for(let r=0,l;l=e.elements[r];r++)U.isSpacer(l)&&(l.height=e.height),l.xPos=n,l.centerline=this.getElemCenterline_(e,l),n+=l.width}finalize_(){let e=0,n=0;for(let r=0,l;l=this.rows[r];r++)l.yPos=n,l.xPos=this.startX,n+=l.height,e=Math.max(e,l.widthWithConnectedBlocks),this.recordElemPositions_(l);if(this.outputConnection&&this.block_.nextConnection){const r=this.block_.nextConnection.targetBlock();r&&(e=Math.max(e,r.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let n;if(((n=this.outputConnection)==null?void 0:n.connectionModel)===e)return this.outputConnection;for(const r of this.rows)for(const l of r.elements)if(l instanceof Wo&&l.connectionModel===e)return l;return null}},W$=class extends _r{constructor(e){if(super(e),this.type=X.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=qa(e),this.ids=de(e),this.wasShadow=e.isShadow(),this.oldJson=ts(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=lo(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new W$),n.oldXml=o.textToDom$$module$build$src$core$utils$xml(e.oldXml),n.ids=e.ids,n.wasShadow=e.wasShadow||n.oldXml.tagName.toLowerCase()==="shadow",n.oldJson=e.oldJson,e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}run(e){const n=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const r=this.ids[e],l=n.getBlockById(r);l?l.dispose(!1):r===this.blockId&&console.warn("Can't delete non-existent block: "+r)}else Oo(this.oldJson,n)}};i(ne.EVENT,X.BLOCK_DELETE,W$);var Ke=class{constructor(e,n){this.type=n,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e}connect_(e){const n=ge.INPUT_VALUE,r=this.getSourceBlock();var l=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let d;if(this.isConnected()){const k=this.stashShadowState(),D=this.targetBlock();D.isShadow()?D.dispose(!1):(this.disconnectInternal(),d=D),this.applyShadowState(k)}let $;we()&&($=new(F(X.BLOCK_MOVE))(l),$.setReason(["connect"])),UC(this,e),l.setParent(r),$&&($.recordNew(),N($)),d&&(e=this.type===n?d.outputConnection:d.previousConnection)&&((l=Ke.getConnectionForOrphanedConnection(l,e))?e.connect(l):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===ge.INPUT_VALUE||this.type===ge.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const n=o.getGroup$$module$build$src$core$events$utils();n||o.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),o.setGroup$$module$build$src$core$events$utils(n)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:n,childConnection:r}=this.getParentAndChildConnections();if(!n||!r)throw Error("Source connection not connected.");const l=o.getGroup$$module$build$src$core$events$utils();l||o.setGroup$$module$build$src$core$events$utils(!0);let d;we()&&(d=new(F(X.BLOCK_MOVE))(r.getSourceBlock()),d.setReason(["disconnect"]));const $=this.targetConnection;$&&($.targetConnection=null),this.targetConnection=null,e&&r.getSourceBlock().setParent(null),d&&(d.recordNew(),N(d)),r.getSourceBlock().isShadow()||n.respawnShadow_(),o.setGroup$$module$build$src$core$events$utils(l)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,n){if(this.getSourceBlock().isDeadOrDying())return!1;var r;return n=(r=e.getInput(n))==null?void 0:r.connection,r=this.targetBlock(),r&&r!==e||!n||n.targetConnection===this?!1:(n.isConnected()&&n.disconnect(),n.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,n;return(n=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?n:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?hi(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?ts(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const n=this.sourceBlock_.inputList;for(let r=0;r<n.length;r++)if(n[r].connection===this){e=n[r];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var n="Output Connection of ";else if(e.previousConnection===this)n="Previous Connection of ";else if(e.nextConnection===this)n="Next Connection of ";else{n=null;for(let r=0,l;l=e.inputList[r];r++)if(l.connection===this){n=l;break}if(n)n='Input "'+n.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return n+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),n=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:n}}applyShadowState({shadowDom:e,shadowState:n}){this.shadowDom=e,this.shadowState=n}setShadowStateInternal({shadowDom:e=null,shadowState:n=null}={}){this.shadowDom=e,this.shadowState=n,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var n=this.getSourceBlock();const r=this.getShadowState(),l=this.getShadowDom();if(n.isDeadOrDying()||!r&&!l)return null;if(r)return n=rl(r,n.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(l){if(n=cr(l,n.workspace),e)if(this.type===ge.INPUT_VALUE){if(!n.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(n.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===ge.NEXT_STATEMENT){if(!n.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(n.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return n}return null}serializeShadow(e){e&&(this.shadowDom=hi(e),this.shadowState=ts(e))}static getConnectionForOrphanedConnection(e,n){if(n.type===ge.OUTPUT_VALUE)return HC(e,n.getSourceBlock());e=e.lastConnectionInStack(!0);const r=n.getConnectionChecker();return e&&r.canConnect(n,e,!1)?e:null}};Ke.CAN_CONNECT=0,Ke.REASON_SELF_CONNECTION=1,Ke.REASON_WRONG_TYPE=2,Ke.REASON_TARGET_NULL=3,Ke.REASON_CHECKS_FAILED=4,Ke.REASON_DIFFERENT_WORKSPACES=5,Ke.REASON_SHADOW_PARENT=6,Ke.REASON_DRAG_CHECKS_FAILED=7,Ke.REASON_PREVIOUS_AND_OUTPUT=8;var vi=class{constructor(e,n,r){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=r&&!e.getBlockById(r)?r:C(),e.setBlockById(this.id,this),this.xy=new oe(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,n){if(this.type=n,r=Vn[n],!r||typeof r!="object")throw TypeError("Invalid block definition for type: "+n);Object.assign(this,r)}e.addTopBlock(this),e.addTypedBlock(this),new.target===vi&&this.doInit_()}doInit_(){const e=o.getGroup$$module$build$src$core$events$utils();e||o.setGroup$$module$build$src$core$events$utils(!0);const n=B();try{typeof this.init=="function"&&(o.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),o.setRecordUndo$$module$build$src$core$events$utils(n)),we()&&N(new(F(X.BLOCK_CREATE))(this))}finally{o.setGroup$$module$build$src$core$events$utils(e),o.setRecordUndo$$module$build$src$core$events$utils(n)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),we()&&N(new(F(X.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let n=null,r;(r=this.outputConnection)!=null&&r.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e==null||e.disconnect(),this.workspace.connectionChecker.canConnect(e,n,!1)?n.connect(e):e==null||e.onFailedConnect(n))}getOnlyValueConnection(){let e=null;for(let n=0;n<this.inputList.length;n++){const r=this.inputList[n].connection;if(r&&r.type===ge.INPUT_VALUE&&r.targetConnection){if(e)return null;e=r}}return e}unplugFromStack(e){let n=null;var r;if((r=this.previousConnection)!=null&&r.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect()),r=this.getNextBlock(),e&&r&&!r.isShadow()){let l,d;e=(d=(l=this.nextConnection)==null?void 0:l.targetConnection)!=null?d:null,e==null||e.disconnect(),n&&this.workspace.connectionChecker.canConnect(n,e,!1)&&n.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let n=0,r;r=this.inputList[n];n++)r.connection&&e.push(r.connection);return e}lastConnectionInStack(e){let n=this.nextConnection;for(;n;){const r=n.targetBlock();if(!r||e&&r.isShadow())return n;n=r.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let n=0,r;r=this.inputList[n];n++)if(r.connection&&r.connection.targetBlock()===e)return r;return null}getSurroundParent(){let e=this,n;do if(n=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===n);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,n=this;do e=n,n=e.parentBlock_;while(n);return e}getTopStackBlock(){let e=this,n;do n=e.getPreviousBlock();while(n&&n.getNextBlock()===e&&(e=n));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let r=0,l;l=this.inputList[r];r++)if(l.connection){var n=l.connection.targetBlock();n&&e.push(n)}return(n=this.getNextBlock())&&e.push(n),e}setParent(e){if(e!==this.parentBlock_){var n=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),r=!!n;if(r&&e&&n!==e)throw Error("Block connected to superior one that is not new parent.");if(!r&&e)throw Error("Block not connected to new parent.");if(r&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?ze(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const n=[this],r=this.getChildren(e);for(let l,d=0;l=r[d];d++)n.push(...l.getDescendants(e));return n}isDeletable(){return this.deletable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(We(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(let n=0,r;r=this.inputList[n];n++)for(let l=0,d;d=r.fieldRow[l];l++)d.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||1<e.fieldRow.length)return!1;return!0}getMatchingConnection(e,n){const r=this.getConnections_(!0);if(e=e.getConnections_(!0),r.length!==e.length)throw Error("Connection lists did not match in length.");for(let l=0;l<e.length;l++)if(e[l]===n)return r[l];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return cl(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=dl(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(let n=0,r;r=this.inputList[n];n++)for(let l=0,d;d=r.fieldRow[l];l++)if(d.name===e)return d;return null}getVars(){const e=[];for(let n=0,r;r=this.inputList[n];n++)for(let l=0,d;d=r.fieldRow[l];l++)d.referencesVariables()&&e.push(d.getValue());return e}getVarModels(){const e=[];for(let n=0,r;r=this.inputList[n];n++)for(let l=0,d;d=r.fieldRow[l];l++)if(d.referencesVariables()){const $=this.workspace.getVariableById(d.getValue());$&&e.push($)}return e}updateVarName(e){for(let n=0,r;r=this.inputList[n];n++)for(let l=0,d;d=r.fieldRow[l];l++)d.referencesVariables()&&e.getId()===d.getValue()&&d.refreshVariableName()}renameVarById(e,n){for(let r=0,l;l=this.inputList[r];r++)for(let d=0,$;$=l.fieldRow[d];d++)$.referencesVariables()&&e===$.getValue()&&$.setValue(n)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,n){const r=this.getField(n);if(!r)throw Error('Field "'+n+'" not found.');r.setValue(e)}setPreviousStatement(e,n){if(e)n===void 0&&(n=null),this.previousConnection||(this.previousConnection=this.makeConnection_(ge.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(n);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,n){if(e)n===void 0&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(ge.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,n){if(e)n===void 0&&(n=null),this.outputConnection||(this.outputConnection=this.makeConnection_(ge.OUTPUT_VALUE)),this.outputConnection.setCheck(n);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(N(new(F(X.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof fo&&this.inputList[e]instanceof fo)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof o.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof fo)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof zo)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}get disabled(){return T("disabled","v11","v12","the isEnabled or hasDisabledReason methods of Block"),this.hasDisabledReason(Rn)}set disabled(e){T("disabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(e,Rn)}setEnabled(e){T("setEnabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(!e,Rn)}setDisabledReason(e,n){e||this.workspace.options.disable||!this.hasDisabledReason(Rn)||n==Rn||this.setDisabledReason(!1,Rn),this.disabledReasons.has(n)!==e&&(e?this.disabledReasons.add(n):this.disabledReasons.delete(n),e=new(F(X.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(n),N(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(N(new(F(X.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,n){n=this.toTokens(n);for(let l=2;l<n.length;l++)n[l-2]==="("&&n[l]===")"&&(n[l-2]=n[l-1],n.splice(l-1,2));let r="";return n=n.reduce((l,d)=>(l=l+(r==="("||d===")"?"":" ")+d,r=d[d.length-1],l),""),n=n.trim()||"???",e&&n.length>e&&(n=n.substring(0,e-3)+"..."),n}toTokens(e="?"){const n=[];for(const l of this.inputList)if(l.name!=cc){for(const d of l.fieldRow)n.push(d.getText());if(l.connection){const d=l.connection.targetBlock();if(d){var r=l.connection;let $=r.getCheck();!$&&r.targetConnection&&($=r.targetConnection.getCheck()),(r=!!$&&($.includes("Boolean")||$.includes("Number")))&&n.push("("),n.push(...d.toTokens(e)),r&&n.push(")")}else n.push(e)}}return n}appendValueInput(e){return this.appendInput(new o.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new rs(e,this))}appendDummyInput(e=""){return this.appendInput(new fo(e,this))}appendEndRowInput(e=""){return this.appendInput(new zo(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,n){return(e=p(ne.INPUT,e,!1))?this.appendInput(new e(n,this)):null}jsonInit(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");for(var r=0;e["args"+r];){if(e["message"+r]===void 0)throw Error(n+`args${r} must have a corresponding message (message${r}).`);r++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,n):this.jsonInitColour(e,n),r=0;e["message"+r]!==void 0;)this.interpolate(e["message"+r],e["args"+r]||[],e["implicitAlign"+r]||e["lastDummyAlign"+r],n),r++;if(e.inputsInline!==void 0&&(o.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),o.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(r=At(e.tooltip),this.setTooltip(r)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(r=At(e.helpUrl),this.setHelpUrl(r)),typeof e.extensions=="string"&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&Dd(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(n=0;n<e.length;n++)Dd(e[n],this,!1)}jsonInitColour(e,n){if("colour"in e)if(e.colour===void 0)console.warn(n+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(n+"Illegal colour value: ",e)}}}jsonInitStyle(e,n){e=e.style;try{this.setStyle(e)}catch{console.warn(n+"Style does not exist: ",e)}}mixin(e,n){if(n!==void 0&&typeof n!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!n){n=[];for(const r in e)this[r]!==void 0&&n.push(r);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}Object.assign(this,e)}interpolate(e,n,r,l){e=Bm(e),this.validateTokens(e,n.length),n=this.interpolateArguments(e,n,r),r=[];for(let d=0,$;$=n[d];d++)if(this.isInputKeyword($.type)){if(e=this.inputFromJson($,l)){for(let k=0,D;D=r[k];k++)e.appendField(D[0],D[1]);r.length=0}}else(e=this.fieldFromJson($))&&r.push([e,$.name])}validateTokens(e,n){const r=[];let l=0;for(let d=0;d<e.length;d++){const $=e[d];if(typeof $=="number"){if(1>$||$>n)throw Error('Block "'+this.type+'": Message index %'+$+" out of range.");if(r[$])throw Error('Block "'+this.type+'": Message index %'+$+" duplicated.");r[$]=!0,l++}}if(l!==n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")}interpolateArguments(e,n,r){const l=[];for(let $=0;$<e.length;$++){var d=e[$];if(typeof d=="number"&&(d=n[d-1]),typeof d=="string"){if(d===`
`)d={type:"input_end_row"},r&&(d.align=r);else if(d=this.stringToFieldJson(d),!d)continue}l.push(d)}return(e=l.length)&&!this.isInputKeyword(l[e-1].type)&&(e={type:"input_dummy"},r&&(e.align=r),l.push(e)),l}fieldFromJson(e){const n=o.fromJson$$module$build$src$core$field_registry(e);return!n&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):n}inputFromJson(e,n){var r={LEFT:o.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:o.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:o.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:o.Align$$module$build$src$core$inputs$align.CENTRE};let l;switch(e.type){case"input_value":l=this.appendValueInput(e.name);break;case"input_statement":l=this.appendStatementInput(e.name);break;case"input_dummy":l=this.appendDummyInput(e.name);break;case"input_end_row":l=this.appendEndRowInput(e.name);break;default:l=this.appendInputFromRegistry(e.type,e.name)}return l?(e.check&&l.setCheck(e.check),e.align&&(r=r[e.align.toUpperCase()],r===void 0?console.warn(n+"Illegal align value: ",e.align):l.setAlign(r)),l):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||h(ne.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,n){if(e!==n){var r=-1,l=n?-1:this.inputList.length;for(let d=0,$;$=this.inputList[d];d++)if($.name===e){if(r=d,l!==-1)break}else if(n&&$.name===n&&(l=d,r!==-1))break;if(r===-1)throw Error('Named input "'+e+'" not found.');if(l===-1)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(r,l)}}moveNumberedInputBefore(e,n){if(e===n)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");const r=this.inputList[e];this.inputList.splice(e,1),e<n&&n--,this.inputList.splice(n,0,r)}removeInput(e,n){for(let r=0,l;l=this.inputList[r];r++)if(l.name===e)return l instanceof rs&&this.statementInputCount--,l.dispose(),this.inputList.splice(r,1),!0;if(n)return!1;throw Error("Input not found: "+e)}getInput(e){for(let n=0,r;r=this.inputList[n];n++)if(r.name===e)return r;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,n;return(n=(e=this.getIcon(Wt.COMMENT))==null?void 0:e.getText())!=null?n:null}setCommentText(e){var n;let r;const l=(r=(n=this.getIcon(Wt.COMMENT))==null?void 0:n.getText())!=null?r:null;if(l!==e){if(e!==null){if(n=this.getIcon(Wt.COMMENT),!n){if(n=p(ne.ICON,Wt.COMMENT.toString(),!1),!n)throw Error("No comment icon class is registered, so a comment cannot be set");if(n=new n(this),!GC(n))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");n=this.addIcon(n)}o.disable$$module$build$src$core$events$utils(),n.setText(e),o.enable$$module$build$src$core$events$utils()}else this.removeIcon(Wt.COMMENT);N(new(F(X.BLOCK_CHANGE))(this,"comment",null,l,e))}}setWarningText(e,n){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new wI(e);return this.icons.push(e),this.icons.sort((n,r)=>n.getWeight()-r.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let n;return(n=this.getIcon(e))==null||n.dispose(),this.icons=this.icons.filter(r=>!r.getType().equals(e)),!0}hasIcon(e){return this.icons.some(n=>n.getType().equals(e))}getIcon(e){return e instanceof Wt?this.icons.find(n=>n.getType().equals(e)):this.icons.find(n=>n.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,n,r){if(this.parentBlock_)throw Error("Block has parent");const l=new(F(X.BLOCK_MOVE))(this);r&&l.setReason(r),this.xy.translate(e,n),l.recordNew(),N(l)}makeConnection_(e){return new Ke(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let r=0,l;l=this.inputList[r];r++)if(l.connection){var n=l.connection.targetBlock();if(!n||!n.allInputsFilled(e))return!1}return(n=this.getNextBlock())?n.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};vi.COLLAPSED_INPUT_NAME=cc,vi.COLLAPSED_FIELD_NAME=oh;var vs=class{constructor(e,n,r,l){this.workspace=e,this.targetWorkspace=n,this.isFlyoutLabel=l,this.onMouseUpWrapper=null,this.height=this.width=0,this.cursorSvg=this.svgText=this.svgGroup=null,this.text=r.text,this.position=new oe(0,0),this.callbackKey=r.callbackKey||r.callbackkey,this.cssClass=r["web-class"]||null,this.info=r}createDom(){var e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(e+=" "+this.cssClass),this.svgGroup=Y(z.G,{class:e},this.workspace.getCanvas());let n;this.isFlyoutLabel||(n=Y(z.RECT,{class:"blocklyFlyoutButtonShadow",rx:vs.BORDER_RADIUS,ry:vs.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=Y(z.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:vs.BORDER_RADIUS,ry:vs.BORDER_RADIUS},this.svgGroup);const r=Y(z.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var l=At(this.text);this.workspace.RTL&&(l+=""),r.textContent=l,this.isFlyoutLabel&&(this.svgText=r,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const d=dt(r,"fontSize"),$=dt(r,"fontWeight"),k=dt(r,"fontFamily");if(this.width=te(r,d,$,k),l=se(l,d,$,k),this.height=l.height,!this.isFlyoutLabel){this.width+=2*vs.TEXT_MARGIN_X,this.height+=2*vs.TEXT_MARGIN_Y;let D;(D=n)==null||D.setAttribute("width",String(this.width));let q;(q=n)==null||q.setAttribute("height",String(this.height))}return e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),r.setAttribute("x",String(this.width/2)),r.setAttribute("y",String(this.height/2-l.height/2+l.baseline)),this.updateTransform(),this.onMouseUpWrapper=_e(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,n){this.position.x=e,this.position.y=n,this.updateTransform()}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){this.onMouseUpWrapper&&Ye(this.onMouseUpWrapper),this.svgGroup&&V(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(){throw Error("Attempted to set a marker on a button.")}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};vs.TEXT_MARGIN_X=5,vs.TEXT_MARGIN_Y=2,vs.BORDER_RADIUS=4,ct(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var Z=class{constructor(e,n,r){if(this.wsCoordinate=null,!n)throw Error("Cannot create a node without a location.");this.type=e,this.isConnectionLocation=Z.isConnectionType(e),this.location=n,this.processParams(r||null)}processParams(e){e&&e.wsCoordinate&&(this.wsCoordinate=e.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var e=this.location.getParentInput();const n=e.getSourceBlock();for(e=n.inputList.indexOf(e),e+=1;e<n.inputList.length;e++){const r=n.inputList[e],l=r.fieldRow;for(let d=0;d<l.length;d++){const $=l[d];if($.isClickable()||Z.NAVIGATE_ALL_FIELDS)return Z.createFieldNode($)}if(r.connection)return Z.createInputNode(r)}return null}findNextForField(){var e=this.location,n=e.getParentInput();const r=e.getSourceBlock();if(!r)throw Error("The current AST location is not associated with a block");var l=r.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)+1;l<r.inputList.length;l++){n=r.inputList[l];const d=n.fieldRow;for(;e<d.length;){if(d[e].isClickable()||Z.NAVIGATE_ALL_FIELDS)return Z.createFieldNode(d[e]);e++}if(e=0,n.connection)return Z.createInputNode(n)}return null}findPrevForInput(){const e=this.location.getParentInput(),n=e.getSourceBlock();for(var r=n.inputList.indexOf(e);0<=r;r--){var l=n.inputList[r];if(l.connection&&l!==e)return Z.createInputNode(l);l=l.fieldRow;for(let d=l.length-1;0<=d;d--){const $=l[d];if($.isClickable()||Z.NAVIGATE_ALL_FIELDS)return Z.createFieldNode($)}}return null}findPrevForField(){var e=this.location;const n=e.getParentInput(),r=e.getSourceBlock();if(!r)throw Error("The current AST location is not associated with a block");var l=r.inputList.indexOf(n);for(e=n.fieldRow.indexOf(e)-1;0<=l;l--){var d=r.inputList[l];if(d.connection&&d!==n)return Z.createInputNode(d);for(d=d.fieldRow;-1<e;){if(d[e].isClickable()||Z.NAVIGATE_ALL_FIELDS)return Z.createFieldNode(d[e]);e--}0<=l-1&&(e=r.inputList[l-1].fieldRow.length-1)}return null}navigateBetweenStacks(e){var n=this.getLocation();if(n.getSourceBlock){var r=n.getSourceBlock();r&&(n=r)}if(!n||n.isDeadOrDying())return null;if(n.workspace.isFlyout)return this.navigateFlyoutContents(e);r=n.getRootBlock(),n=r.workspace.getTopBlocks(!0);for(let l=0;l<n.length;l++)if(r.id===n[l].id)return e=l+(e?1:-1),e===-1||e===n.length?null:Z.createStackNode(n[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")}navigateFlyoutContents(e){let n;switch(this.getType()){case Z.types.STACK:n=this.getLocation();var r=n.workspace.targetWorkspace;break;case Z.types.BUTTON:n=this.getLocation(),r=n.getTargetWorkspace();break;default:return null}return r=r.getFlyout(),r&&(e=this.findNextLocationInFlyout(r.getContents(),n,e))?e.type==="button"&&e.button?Z.createButtonNode(e.button):e.type==="block"&&e.block?Z.createStackNode(e.block):null:null}findNextLocationInFlyout(e,n,r){const l=e.findIndex(d=>n instanceof vi&&d.block===n||n instanceof vs&&d.button===n);return 0>l?null:(r=r?l+1:l-1,r===-1||r===e.length?null:e[r])}findTopASTNodeForBlock(e){const n=Za(e);return n?Z.createConnectionNode(n):Z.createBlockNode(e)}getOutAstNodeForBlock(e){if(!e)return null;e=e.getTopStackBlock();const n=Za(e);return n&&n.targetConnection&&n.targetConnection.getParentInput()?Z.createInputNode(n.targetConnection.getParentInput()):Z.createStackNode(e)}findFirstFieldOrInput(e){e=e.inputList;for(let n=0;n<e.length;n++){const r=e[n],l=r.fieldRow;for(let d=0;d<l.length;d++){const $=l[d];if($.isClickable()||Z.NAVIGATE_ALL_FIELDS)return Z.createFieldNode($)}if(r.connection)return Z.createInputNode(r)}return null}getSourceBlock(){return this.getType()===Z.types.BLOCK?this.getLocation():this.getType()===Z.types.STACK?this.getLocation():this.getType()===Z.types.WORKSPACE||this.getType()===Z.types.BUTTON?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case Z.types.STACK:return this.navigateBetweenStacks(!0);case Z.types.OUTPUT:return Z.createBlockNode(this.location.getSourceBlock());case Z.types.FIELD:return this.findNextForField();case Z.types.INPUT:return this.findNextForInput();case Z.types.BLOCK:const e=this.location.nextConnection;if(!e)break;return Z.createConnectionNode(e);case Z.types.PREVIOUS:return Z.createBlockNode(this.location.getSourceBlock());case Z.types.NEXT:return Z.createConnectionNode(this.location.targetConnection);case Z.types.BUTTON:return this.navigateFlyoutContents(!0)}return null}in(){switch(this.type){case Z.types.WORKSPACE:const e=this.location.getTopBlocks(!0);if(0<e.length)return Z.createStackNode(e[0]);break;case Z.types.STACK:return this.findTopASTNodeForBlock(this.location);case Z.types.BLOCK:return this.findFirstFieldOrInput(this.location);case Z.types.INPUT:return Z.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case Z.types.STACK:return this.navigateBetweenStacks(!1);case Z.types.FIELD:return this.findPrevForField();case Z.types.INPUT:return this.findPrevForInput();case Z.types.BLOCK:var e=Za(this.location);if(!e)break;return Z.createConnectionNode(e);case Z.types.PREVIOUS:if((e=this.location.targetConnection)&&!e.getParentInput())return Z.createConnectionNode(e);break;case Z.types.NEXT:return Z.createBlockNode(this.location.getSourceBlock());case Z.types.BUTTON:return this.navigateFlyoutContents(!1)}return null}out(){switch(this.type){case Z.types.STACK:var e=this.location,n=e.getRelativeToSurfaceXY();return n=new oe(n.x,n.y+Z.DEFAULT_OFFSET_Y),Z.createWorkspaceNode(e.workspace,n);case Z.types.OUTPUT:return e=this.location,(n=e.targetConnection)?Z.createConnectionNode(n):Z.createStackNode(e.getSourceBlock());case Z.types.FIELD:if(e=this.location.getSourceBlock(),!e)throw Error("The current AST location is not associated with a block");return Z.createBlockNode(e);case Z.types.INPUT:return Z.createBlockNode(this.location.getSourceBlock());case Z.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case Z.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case Z.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(e){switch(e){case Z.types.PREVIOUS:case Z.types.NEXT:case Z.types.INPUT:case Z.types.OUTPUT:return!0}return!1}static createFieldNode(e){return e?new Z(Z.types.FIELD,e):null}static createConnectionNode(e){if(!e)return null;const n=e.type;return n===ge.INPUT_VALUE||n===ge.NEXT_STATEMENT&&e.getParentInput()?Z.createInputNode(e.getParentInput()):n===ge.NEXT_STATEMENT?new Z(Z.types.NEXT,e):n===ge.OUTPUT_VALUE?new Z(Z.types.OUTPUT,e):n===ge.PREVIOUS_STATEMENT?new Z(Z.types.PREVIOUS,e):null}static createInputNode(e){return e&&e.connection?new Z(Z.types.INPUT,e.connection):null}static createBlockNode(e){return e?new Z(Z.types.BLOCK,e):null}static createStackNode(e){return e?new Z(Z.types.STACK,e):null}static createButtonNode(e){return e?new Z(Z.types.BUTTON,e):null}static createWorkspaceNode(e,n){return n&&e?new Z(Z.types.WORKSPACE,e,{wsCoordinate:n}):null}static createTopNode(e){const n=Za(e);return n?Z.createConnectionNode(n):Z.createBlockNode(e)}};Z.NAVIGATE_ALL_FIELDS=!1,Z.DEFAULT_OFFSET_Y=-20,function(e){e=e.types||(e.types={}),e.FIELD="field",e.BLOCK="block",e.INPUT="input",e.OUTPUT="output",e.NEXT="next",e.PREVIOUS="previous",e.STACK="stack",e.WORKSPACE="workspace",e.BUTTON="button"}(Z||(Z={}));var z$=class extends Us{constructor(e,n,r,l){let d=e?e.workspace.id:void 0;l&&l.getType()===Z.types.WORKSPACE&&(d=l.getLocation().id),super(d),this.type=X.MARKER_MOVE,this.blockId=e==null?void 0:e.id,this.oldNode=r||void 0,this.newNode=l,this.isCursor=n}toJson(){const e=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new z$),n.isCursor=e.isCursor,n.blockId=e.blockId,n.oldNode=e.oldNode,n.newNode=e.newNode,n}};i(ne.EVENT,X.MARKER_MOVE,z$);var bD="blocklyCursor",yD="blocklyMarker",ED=.75,X$=class{constructor(e,n,r){this.workspace=e,this.marker=r,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=n,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=r.colour||e}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const e=this.isCursor()?bD:yD;return this.svgGroup_=Y(z.G,{class:e}),this.createDomInternal_(),this.svgGroup_}setParent_(e){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent=e}draw(e,n){if(n){this.constants_=this.workspace.getRenderer().getConstants();var r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||r,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent(e,n),e=this.currentMarkerSvg.childNodes[0],e!==void 0&&e.beginElement&&e.beginElement()}else this.hide()}showAtLocation_(e){const n=e.getLocation().type;e.getType()===Z.types.BLOCK?this.showWithBlock_(e):e.getType()===Z.types.OUTPUT?this.showWithOutput_(e):n===ge.INPUT_VALUE?this.showWithInput_(e):n===ge.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===Z.types.PREVIOUS?this.showWithPrevious_(e):e.getType()===Z.types.FIELD?this.showWithField_(e):e.getType()===Z.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===Z.types.STACK?this.showWithStack_(e):e.getType()===Z.types.BUTTON&&this.showWithButton_(e)}showWithBlockPrevOutput(e){e=e.getSourceBlock();const n=e.width;var r=e.height,l=r*ED;const d=this.constants_.CURSOR_BLOCK_PADDING;e.previousConnection?(r=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(n,d,l,r)):e.outputConnection?(l=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(n,r,l)):this.positionBlock_(n,d,l),this.setParent_(e),this.showCurrent_()}showWithBlock_(e){this.showWithBlockPrevOutput(e)}showWithPrevious_(e){this.showWithBlockPrevOutput(e)}showWithOutput_(e){this.showWithBlockPrevOutput(e)}showWithCoordinates_(e){var n=e.getWsCoordinate();e=n.x,n=n.y,this.workspace.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,n,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(e){e=e.getLocation();const n=e.getSize().width,r=e.getSize().height;this.positionRect_(0,0,n,r),this.setParent_(e),this.showCurrent_()}showWithInput_(e){e=e.getLocation();const n=e.getSourceBlock();this.positionInput_(e),this.setParent_(n),this.showCurrent_()}showWithNext_(e){var n=e.getLocation();e=n.getSourceBlock();let r=0;n=n.getOffsetInBlock().y;const l=e.getHeightWidth().width;this.workspace.RTL&&(r=-l),this.positionLine_(r,n,l),this.setParent_(e),this.showCurrent_()}showWithStack_(e){e=e.getLocation();var n=e.getHeightWidth();const r=n.width+this.constants_.CURSOR_STACK_PADDING;n=n.height+this.constants_.CURSOR_STACK_PADDING;const l=-this.constants_.CURSOR_STACK_PADDING/2,d=-this.constants_.CURSOR_STACK_PADDING/2;let $=l;this.workspace.RTL&&($=-(r+l)),this.positionRect_($,d,r,n),this.setParent_(e),this.showCurrent_()}showWithButton_(e){e=e.getLocation();const n=e.width+this.constants_.CURSOR_STACK_PADDING,r=e.height+this.constants_.CURSOR_STACK_PADDING,l=-this.constants_.CURSOR_STACK_PADDING/2,d=-this.constants_.CURSOR_STACK_PADDING/2;let $=l;this.workspace.RTL&&($=-(n+l)),this.positionRect_($,d,n,r),this.setParent_(e),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(e,n,r){if(e=ft(-n,r)+$e("V",-n)+$e("H",e+2*n)+$e("V",r),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(e){const n=e.getOffsetInBlock().x,r=e.getOffsetInBlock().y;e=Kt(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+n+","+r+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(e,n,r){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${e}`),this.markerSvgLine_.setAttribute("y",`${n}`),this.markerSvgLine_.setAttribute("width",`${r}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(e,n,r){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");e=ft(e,0)+$e("h",-(e-r.width))+$e("v",this.constants_.TAB_OFFSET_FROM_TOP)+r.pathDown+$e("V",n)+$e("H",e),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(e,n,r,l){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");e=ft(-n,r)+$e("V",-n)+$e("H",this.constants_.NOTCH_OFFSET_LEFT)+l.pathLeft+$e("H",e+2*n)+$e("V",r),this.markerBlock_.setAttribute("d",e),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(e,n,r,l){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${e}`),this.markerSvgRect_.setAttribute("y",`${n}`),this.markerSvgRect_.setAttribute("width",`${r}`),this.markerSvgRect_.setAttribute("height",`${l}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(e){e.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(e,n){const r=n.getSourceBlock();e=new(F(X.MARKER_MOVE))(r,this.isCursor(),e,n),N(e)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=Y(z.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=Y(z.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=Y(z.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=Y(z.PATH,{transform:""},this.markerSvg_),this.markerBlock_=Y(z.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();Y(z.ANIMATE,e,this.markerSvgLine_),Y(z.ANIMATE,e,this.markerInput_),Y(z.ANIMATE,Object.assign({},e,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(e){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",e),this.markerInput_.firstElementChild.setAttribute("values",e),this.markerBlock_.firstElementChild.setAttribute("values",e))}dispose(){this.svgGroup_&&V(this.svgGroup_)}},Rh=class{constructor(e,n,r){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=r,this.style=n,this.svgRoot=e,this.svgPath=Y(z.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}setMarkerSvg(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,n){e&&(n?he(this.svgRoot,e):x(this.svgRoot,e))}updateHighlighted(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,n){}addConnectionHighlight(e,n,r,l){if(this.connectionHighlights.has(e)){if(this.currentHighlightMatchesNew(e,n,r))return;this.removeConnectionHighlight(e)}n=Y(z.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:`translate(${r.x}, ${r.y})`+(l?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(e,n)}currentHighlightMatchesNew(e,n,r){let l;const d=(l=this.connectionHighlights.get(e))==null?void 0:l.getAttribute("d");return e=this.highlightOffsets.get(e),d===n&&oe.equals(e,r)}removeConnectionHighlight(e){const n=this.connectionHighlights.get(e);n&&(V(n),this.connectionHighlights.delete(e))}},Cs=class{constructor(e){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,o.setSelected$$module$build$src$core$common(e),this.topBlock=e,this.workspace=e.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){o.disable$$module$build$src$core$events$utils(),this.hidePreview(),o.enable$$module$build$src$core$events$utils();var{local:e,closest:n}=this.activeCandidate;e.connect(n);var r=e.isSuperior()?n:e,l=this.topBlock.getRootBlock();Fs().then(()=>{Ld(r.getSourceBlock()),setTimeout(()=>{l.bringToFront()},0)})}}update(e,n){const r=this.getCandidate(e);((this.wouldDeleteBlock=this.shouldDelete(!!r,n))||this.shouldUpdatePreviews(r,e))&&(o.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(r),this.maybeShowPreview(r),o.enable$$module$build$src$core$events$utils())}createMarkerBlock(e){o.disable$$module$build$src$core$events$utils();let n;try{const r=ts(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!r)throw Error(`Failed to serialize source block. ${e.toDevString()}`);n=Oo(r,this.workspace);for(const l of n.getDescendants(!1))l.setInsertionMarker(!0);n.initSvg(),n.getSvgRoot().setAttribute("visibility","hidden")}finally{o.enable$$module$build$src$core$events$utils()}return n}initAvailableConnections(){const e=this.topBlock.getConnections_(!1),n=this.topBlock.lastConnectionInStack(!0);return n&&n!==this.topBlock.nextConnection&&(e.push(n),this.lastOnStack=n),e}shouldUpdatePreviews(e,n){if(!e)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:r,closest:l}=this.activeCandidate;if(l===e.closest&&r===e.local)return!1;const d=r.x+n.x-l.x;return n=r.y+n.y-l.y,e.radius<Math.sqrt(d*d+n*n)-o.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(e){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let n=this.getStartRadius(),r=null;for(let l=0;l<this.availableConnections.length;l++){const d=this.availableConnections[l],$=d.closest(n,e);$.connection&&(r={closest:$.connection,local:d,radius:$.radius},n=$.radius)}return r}getStartRadius(){return this.activeCandidate?o.config$$module$build$src$core$config.connectingSnapRadius:o.config$$module$build$src$core$config.snapRadius}shouldDelete(e,n){return n&&this.workspace.getComponentManager().hasCapability(n.id,mt.Capability.DELETE_AREA)?n.wouldDelete(this.topBlock):!1}maybeShowPreview(e){if(!this.wouldDeleteBlock&&e){var n=e.closest,r;n===((r=this.activeCandidate)==null?void 0:r.closest)||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=e,this.showPreview(this.activeCandidate))}}showPreview(e){const n=this.workspace.getRenderer();switch(n.getConnectionPreviewMethod(e.closest,e.local,this.topBlock)){case Cs.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(e);break;case Cs.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(e);break;case Cs.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(e)}n.shouldHighlightConnection(e.closest)&&e.closest.highlight()}maybeHidePreview(e){if(!e)this.hidePreview();else if(this.activeCandidate){const n=this.activeCandidate.local!==e.local;(this.activeCandidate.closest!==e.closest||n||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let e;const n=(e=this.activeCandidate)==null?void 0:e.closest;n&&n.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(n)&&n.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(e){const{local:n,closest:r}=e;let l=(e=this.lastOnStack&&n===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!l)throw Error("Cannot show the insertion marker because there is no insertion marker block");let d;try{d=l.getMatchingConnection(n.getSourceBlock(),n)}catch{if(e&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),l=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),l=this.firstMarker=this.createMarkerBlock(this.topBlock)),!l)throw Error("Cannot show the insertion marker because there is no insertion marker block");d=l.getMatchingConnection(n.getSourceBlock(),n)}if(!d)throw Error("Cannot show the insertion marker because there is no associated connection");if(d===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");l.queueRender(),xo(),d.connect(r);const $={x:r.x-d.x,y:r.y-d.y},k=d.getOffsetInBlock().clone(),D=d;Fs().then(()=>{let q;(q=l)==null||q.positionNearConnection(D,$,k);let me;(me=l)==null||me.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=d}hideInsertionMarker(){if(this.markerConnection){var e=this.markerConnection,n=e.getSourceBlock(),r=n.outputConnection,l;if((l=n.previousConnection)!=null&&l.targetConnection||r!=null&&r.targetConnection)n.unplug(!0);else{let d;(d=e.targetBlock())==null||d.unplug(!1)}if(e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=n.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(e){e=e.closest,this.highlightedBlock=e.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(e,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(e){if(this.fadedBlock=e.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const e=[];return this.firstMarker&&e.push(this.firstMarker),this.lastMarker&&e.push(this.lastMarker),e}disposeInsertionMarker(e){if(e){o.disable$$module$build$src$core$events$utils();try{e.dispose()}finally{o.enable$$module$build$src$core$events$utils()}}}};(function(e){e=e.PREVIEW_TYPE||(e.PREVIEW_TYPE={}),e[e.INSERTION_MARKER=0]="INSERTION_MARKER",e[e.INPUT_OUTLINE=1]="INPUT_OUTLINE",e[e.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Cs||(Cs={})),Cs.PREVIEW_TYPE;var xh=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,Object.assign(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,n){this.constants_.createDom(e,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())}refreshDom(e,n){const r=this.getConstants();r.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=r.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new wh}makeRenderInfo_(e){return new Cc(this,e)}makeDrawer_(e,n){return new kh(e,n)}makeMarkerDrawer(e,n){return new X$(e,this.getConstants(),n)}makePathObject(e,n){return new Rh(e,n,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,n,r){return!!Ke.getConnectionForOrphanedConnection(e,r===ge.OUTPUT_VALUE?n.outputConnection:n.previousConnection)}getConnectionPreviewMethod(e,n,r){return T("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),n.type===ge.OUTPUT_VALUE||n.type===ge.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(r,e.targetBlock(),n.type)?Cs.PREVIEW_TYPE.INSERTION_MARKER:Cs.PREVIEW_TYPE.REPLACEMENT_FADE:Cs.PREVIEW_TYPE.INSERTION_MARKER}render(e){const n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()}},st={};st.BottomRow=F$,st.Connection=Wo,st.ConstantProvider=wh,st.Drawer=kh,st.ExternalValueInput=Ih,st.Field=Ol,st.Hat=U$,st.Icon=OI,st.InRowSpacer=is,st.InlineInput=V$,st.InputConnection=Ei,st.InputRow=H$,st.JaggedEdge=AI,st.MarkerSvg=X$,st.Measurable=po,st.NextConnection=NI,st.OutputConnection=MI,st.PathObject=Rh,st.PreviousConnection=LI,st.RenderInfo=Cc,st.Renderer=xh,st.RoundCorner=Ec,st.Row=bc,st.SpacerRow=G$,st.SquareCorner=vc,st.StatementInput=yc,st.TopRow=j$,st.Types=U,st.init=hg,st.register=Qa,st.unregister=jC;var PI=class{constructor(e,n){this.workspace=e,this.theme=n,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var n=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(n&&(n=n.getClassName())&&x(e,n),(n=this.theme.getClassName())&&he(e,n));for(let r=0,l;l=this.subscribedWorkspaces[r];r++)l.refreshTheme();for(const[r,l]of this.componentDB)for(const d of l){e=d.element,n=d.propertyName;const $=this.theme&&this.theme.getComponentStyle(r);e.style.setProperty(n,$||"")}for(const r of this.subscribedWorkspaces)r.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!ze(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,n,r){this.componentDB.has(n)||this.componentDB.set(n,[]),this.componentDB.get(n).push({element:e,propertyName:r}),n=this.theme&&this.theme.getComponentStyle(n),e.style.setProperty(r,n||"")}unsubscribe(e){if(e)for(const[n,r]of this.componentDB){for(let l=r.length-1;0<=l;l--)r[l].element===e&&r.splice(l,1);r.length||this.componentDB.delete(n)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},Y$="VARIABLE_DYNAMIC",Ir={CATEGORY_NAME:Y$};Ir.flyoutCategory=Gd,Ir.flyoutCategoryBlocks=gg,Ir.onCreateVariableButtonClick_Colour=mg,Ir.onCreateVariableButtonClick_Number=fg,Ir.onCreateVariableButtonClick_String=pg;var BI=30,wr=[];wr[ge.INPUT_VALUE]=ge.OUTPUT_VALUE,wr[ge.OUTPUT_VALUE]=ge.INPUT_VALUE,wr[ge.NEXT_STATEMENT]=ge.PREVIOUS_STATEMENT,wr[ge.PREVIOUS_STATEMENT]=ge.NEXT_STATEMENT;var K$="RENAME_VARIABLE_ID",J$="DELETE_VARIABLE_ID",FI=class{canConnect(e,n,r,l){return this.canConnectWithReason(e,n,r,l)===Ke.CAN_CONNECT}canConnectWithReason(e,n,r,l){const d=this.doSafetyChecks(e,n);return d!==Ke.CAN_CONNECT?d:this.doTypeChecks(e,n)?r&&!this.doDragChecks(e,n,l||0)?Ke.REASON_DRAG_CHECKS_FAILED:Ke.CAN_CONNECT:Ke.REASON_CHECKS_FAILED}getErrorMessage(e,n,r){switch(e){case Ke.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Ke.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Ke.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Ke.REASON_TARGET_NULL:return"Target connection is null.";case Ke.REASON_CHECKS_FAILED:return"Connection checks failed. "+(n+" expected "+n.getCheck()+", found "+r.getCheck());case Ke.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Ke.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Ke.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,n){if(!e||!n)return Ke.REASON_TARGET_NULL;let r,l,d;return e.isSuperior()?(r=e.getSourceBlock(),l=n.getSourceBlock(),d=n):(l=e.getSourceBlock(),r=n.getSourceBlock(),d=e,e=n),r===l?Ke.REASON_SELF_CONNECTION:d.type!==wr[e.type]?Ke.REASON_WRONG_TYPE:r.workspace!==l.workspace?Ke.REASON_DIFFERENT_WORKSPACES:r.isShadow()&&!l.isShadow()?Ke.REASON_SHADOW_PARENT:d.type===ge.OUTPUT_VALUE&&l.previousConnection&&l.previousConnection.isConnected()||d.type===ge.PREVIOUS_STATEMENT&&l.outputConnection&&l.outputConnection.isConnected()?Ke.REASON_PREVIOUS_AND_OUTPUT:Ke.CAN_CONNECT}doTypeChecks(e,n){if(e=e.getCheck(),n=n.getCheck(),!e||!n)return!0;for(let r=0;r<e.length;r++)if(n.includes(e[r]))return!0;return!1}doDragChecks(e,n,r){if(e.distanceFrom(n)>r||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case ge.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case ge.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case ge.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case ge.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection||n.targetBlock()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;default:return!1}return!oc.includes(n)}canConnectToPrevious_(e,n){return e.targetConnection||oc.includes(n)?!1:n.targetConnection?(e=n.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};i(ne.CONNECTION_CHECKER,uo,FI);var q$=class extends uc{constructor(e){super(e),this.type=X.VAR_DELETE,e&&(this.varType=e.type,this.varName=e.name)}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new q$),n.varType=e.varType,n.varName=e.varName,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");e?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)}};i(ne.EVENT,X.VAR_DELETE,q$);var Z$=class extends uc{constructor(e,n){super(e),this.type=X.VAR_RENAME,e&&(this.oldName=e.name,this.newName=typeof n>"u"?"":n)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new Z$),n.oldName=e.oldName,n.newName=e.newName,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");e?n.renameVariableById(this.varId,this.newName):n.renameVariableById(this.varId,this.oldName)}};i(ne.EVENT,X.VAR_RENAME,Z$);var Q$=class{constructor(e){this.workspace=e,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(;0<e.length;)this.deleteVariable(e[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,n){if(e.name!==n){var r=this.getVariable(n,e.type),l=this.workspace.getAllBlocks(!1),d=o.getGroup$$module$build$src$core$events$utils();d||o.setGroup$$module$build$src$core$events$utils(!0);try{r&&r.getId()!==e.getId()?this.renameVariableWithConflict(e,n,r,l):this.renameVariableAndUses(e,n,l)}finally{o.setGroup$$module$build$src$core$events$utils(d)}}}renameVariableById(e,n){const r=this.getVariableById(e);if(!r)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(r,n)}renameVariableAndUses(e,n,r){for(N(new(F(X.VAR_RENAME))(e,n)),e.name=n,n=0;n<r.length;n++)r[n].updateVarName(e)}renameVariableWithConflict(e,n,r,l){const d=e.type;for(n!==r.name&&this.renameVariableAndUses(r,n,l),n=0;n<l.length;n++)l[n].renameVarById(e.getId(),r.getId());N(new(F(X.VAR_DELETE))(e)),ze(this.variableMap.get(d),e)}createVariable(e,n,r){var l=this.getVariable(e,n);if(l){if(r&&l.getId()!==r)throw Error('Variable "'+e+'" is already in use and its id is "'+l.getId()+'" which conflicts with the passed in id, "'+r+'".');return l}if(r&&this.getVariableById(r))throw Error('Variable id, "'+r+'", is already in use.');return l=r||C(),n=n||"",l=new dc(this.workspace,e,n,l),e=this.variableMap.get(n)||[],e.push(l),this.variableMap.delete(n),this.variableMap.set(n,e),N(new(F(X.VAR_CREATE))(l)),l}deleteVariable(e){const n=e.getId(),r=this.variableMap.get(e.type);if(r){for(let l=0;l<r.length;l++)if(r[l].getId()===n){r.splice(l,1),N(new(F(X.VAR_DELETE))(e)),r.length===0&&this.variableMap.delete(e.type);break}}}deleteVariableById(e){const n=this.getVariableById(e);if(n){var r=n.name;const l=this.getVariableUsesById(e);for(let d=0,$;$=l[d];d++)if($.type==="procedures_defnoreturn"||$.type==="procedures_defreturn"){e=String($.getFieldValue("NAME")),r=o.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",r).replace("%2",e),Va(r);return}1<l.length?(r=o.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(l.length)).replace("%2",r),gd(r,d=>{d&&n&&this.deleteVariableInternal(n,l)})):this.deleteVariableInternal(n,l)}else console.warn("Can't delete non-existent variable: "+e)}deleteVariableInternal(e,n){const r=o.getGroup$$module$build$src$core$events$utils();r||o.setGroup$$module$build$src$core$events$utils(!0);try{for(let l=0;l<n.length;l++)n[l].dispose(!0);this.deleteVariable(e)}finally{o.setGroup$$module$build$src$core$events$utils(r)}}getVariable(e,n){if(n=this.variableMap.get(n||"")){for(let r=0,l;l=n[r];r++)if(o.Names$$module$build$src$core$names.equals(l.name,e))return l}return null}getVariableById(e){for(const n of this.variableMap.values())for(const r of n)if(r.getId()===e)return r;return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?e.slice():[]}getVariableTypes(e){const n=new Set(this.variableMap.keys());if(e&&e.getPotentialVariableMap())for(const r of e.getPotentialVariableMap().variableMap.keys())n.add(r);return n.has("")||n.add(""),Array.from(n.values())}getAllVariables(){let e=[];for(const n of this.variableMap.values())e=e.concat(n);return e}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(e=>e.name)}getVariableUsesById(e){const n=[],r=this.workspace.getAllBlocks(!1);for(let l=0;l<r.length;l++){const d=r[l].getVarModels();if(d)for(let $=0;$<d.length;$++)d[$].getId()===e&&n.push(r[l])}return n}},Nl=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new xI,this.potentialVariableMap=null,this.id=C(),Ee(this),this.options=e||new Es({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(m(ne.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new Q$(this)}dispose(){this.listeners.length=0,this.clear(),xe(this)}sortObjects(e,n){const r=Math.sin(yd(Nl.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),e.y+r*e.x-(n.y+r*n.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!ze(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const n=[].concat(this.topBlocks);return e&&1<n.length&&n.sort(this.sortObjects.bind(this)),n}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){ze(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,n=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),n&&e&&1<e.length&&e.sort(this.sortObjects.bind(this)),e.filter(r=>!r.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!ze(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const n=[].concat(this.topComments);return e&&1<n.length&&n.sort(this.sortObjects.bind(this)),n}getAllBlocks(e=!1){if(e){var n=this.getTopBlocks(!0);e=[];for(let r=0;r<n.length;r++)e.push(...n[r].getDescendants(!0))}else for(e=this.getTopBlocks(!1),n=0;n<e.length;n++)e.push(...e[n].getChildren(!1));return e.filter(r=>!r.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=o.getGroup$$module$build$src$core$events$utils();for(e||o.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();o.setGroup$$module$build$src$core$events$utils(e),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,n){this.variableMap.renameVariableById(e,n)}createVariable(e,n,r){return this.variableMap.createVariable(e,n,r)}getVariableUsesById(e){return this.variableMap.getVariableUsesById(e)}deleteVariableById(e){this.variableMap.deleteVariableById(e)}getVariable(e,n){return this.variableMap.getVariable(e,n)}getVariableById(e){return this.variableMap.getVariableById(e)}getVariablesOfType(e){return this.variableMap.getVariablesOfType(e)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(e,n){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let n=0;for(const r in e){if(e[r]>this.remainingCapacityOfType(r))return!1;n+=e[r]}return!(n>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var n=e?this.redoStack_:this.undoStack_,r=e?this.undoStack_:this.redoStack_;const l=n.pop();if(l){for(var d=[l];n.length&&l.group&&l.group===n[n.length-1].group;){const $=n.pop();$&&d.push($)}for(n=0;n<d.length;n++)r.push(d[n]);o.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(r=0;r<d.length;r++)d[r].run(e)}finally{o.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,je()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){ze(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let n=0;n<this.listeners.length;n++)(0,this.listeners[n])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,n){this.blockDB.set(e,n)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let n;return(n=this.commentDB.get(e))!=null?n:null}allInputsFilled(e){const n=this.getTopBlocks(!1);for(let r=0;r<n.length;r++)if(!n[r].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new Q$(this)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const n=this.options.parentWorkspace;return this.isFlyout?n&&n.options&&(e=n.options.parentWorkspace):n&&(e=n),e}static getById(e){return ae(e)}static getAll(){return fe()}};Nl.SCAN_ANGLE=3;var vD=100,UI=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,n){if(e.length){try{var r=new globalThis.Audio}catch{return}for(let d=0;d<e.length;d++){const $=e[d],k=$.match(/\.(\w+)$/);if(k&&r.canPlayType("audio/"+k[1])){var l=new globalThis.Audio($);break}}l&&this.sounds.set(n,l)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const n=e.play();if(n!==void 0?n.then(e.pause).catch(function(){}):e.pause(),Zd||NS)break}}play(e,n){if(!this.muted){var r=this.sounds.get(e);r?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<vD||(this.lastSound=e,r=Zd||t$?r:r.cloneNode(),r.volume=n===void 0?1:n,r.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,n)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},CD=20,ls=class extends Nl{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(m(ne.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||ls.setTopLevelWorkspaceMetrics,this.componentManager=new mt,this.connectionDBList=Rl.init(this.connectionChecker),this.audioManager=new UI(e.parentWorkspace),this.grid=this.options.gridPattern?new L$(this.options.gridPattern,e.gridOptions):null,this.markerManager=new fc(this),hn&&_d&&this.registerToolboxCategoryCallback(T$,_d),Ir&&Gd&&this.registerToolboxCategoryCallback(Y$,Gd),xn&&Vd&&(this.registerToolboxCategoryCallback(Sh,Vd),this.addChangeListener(cg)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new PI(this,this.options.theme||bh),this.themeManager_.subscribeWorkspace(this);let n;this.renderer=hg(this.options.renderer||"geras",this.getTheme(),(n=this.options.rendererOverrides)!=null?n:void 0),this.cachedParentSvgSize=new Ge(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(e){this.markerManager.setCursorSvg(e)}setMarkerSvg(e){this.markerManager.setMarkerSvg(e)}getMarker(e){return this.markerManager?this.markerManager.getMarker(e):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=bh),this.themeManager_.setTheme(e)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles(this.getAllBlocks(!1).filter(n=>!!n.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0);const e=new(F(X.THEME_CHANGE))(this.getTheme().name,this.id);N(e)}updateBlockStyles(e){for(let n=0,r;r=e[n];n++){const l=r.getStyleName();l&&r.setStyle(l)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let n=0,r=0,l=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(l=this.scale);do{const d=wn(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(l=1),n+=d.x*l,r+=d.y*l,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new oe(n,r)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new Ge(e.width,e.height)}getOriginOffsetInPixels(){return io(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,n){return this.injectionDiv||(this.injectionDiv=n??null),this.svgGroup_=Y(z.G,{class:"blocklyWorkspace"}),e&&(this.svgBackground_=Y(z.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new mD(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(_e(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),_e(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(m(ne.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=m(ne.CURSOR,this.options))&&this.markerManager.setCursor(new e),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&V(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&V(e.parentNode)}this.resizeHandlerWrapper&&(Ye(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=ls.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new jS(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}addFlyout(e){const n=new Es({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(m(ne.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(m(ne.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox&&this.toolbox.position(),this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(mt.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),r=[];for(let l=0,d;d=e[l];l++){d.position(n,r);const $=d.getBoundingRectangle();$&&r.push($)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=_s();oe.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,n){const r=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,r.setAttribute("data-cached-width",`${e}`)),n!=null&&(this.cachedParentSvgSize.height=n,r.setAttribute("data-cached-height",`${n}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(we()){var e=this.scale,n=-this.scrollY,r=-this.scrollX;if(!(e===this.oldScale&&1>Math.abs(n-this.oldTop)&&1>Math.abs(r-this.oldLeft))){var l=new(F(X.VIEWPORT_CHANGE))(n,r,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=n,this.oldLeft=r,N(l)}}}translate(e,n){let r;(r=this.layerManager)==null||r.translateLayers(new oe(e,n),this.scale);let l;(l=this.grid)==null||l.moveTo(e,n),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let n=e.length-1;0<=n;n--)e[n].queueRender();this.getTopBlocks().flatMap(n=>n.getDescendants(!1)).filter(n=>n.isInsertionMarker()).forEach(n=>n.queueRender()),Fs().then(()=>void this.markerManager.updateMarkers())}highlightBlock(e,n){if(n===void 0){for(let r=0,l;l=this.highlightedBlocks[r];r++)l.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((n=n===void 0||n)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):ze(this.highlightedBlocks,e),e.setHighlighted(n))}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}renameVariableById(e,n){super.renameVariableById(e,n),this.refreshToolboxSelection()}deleteVariableById(e){super.deleteVariableById(e),this.refreshToolboxSelection()}createVariable(e,n,r){return e=super.createVariable(e,n,r),this.refreshToolboxSelection(),e}recordDragTargets(){const e=this.componentManager.getComponents(mt.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let n=0,r;r=e[n];n++){const l=r.getClientRect();l&&this.dragTargetAreas.push({component:r,clientRect:l})}}newBlock(e,n){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let n=0,r;r=this.dragTargetAreas[n];n++)if(r.clientRect.contains(e.clientX,e.clientY))return r.component;return null}onMouseDown(e){const n=this.getGesture(e);n&&n.handleWsStart(e,this)}startDrag(e,n){Od(this,e,n)}moveDrag(e){return Ad(this,e)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(Uo.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,r=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||r){var l=$s(e);if(n$)var d=e.metaKey;n&&(e.ctrlKey||d||!r)?(l=-l.y/50,n=W(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,l)):(n=this.scrollX-l.x,r=this.scrollY-l.y,e.shiftKey&&!l.x&&(n=this.scrollX-l.y,r=this.scrollY),this.scroll(n,r)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new it(0,0,0,0);const n=e[0].getBoundingRectangle();for(let l=1;l<e.length;l++){var r=e[l];r.isInsertionMarker&&r.isInsertionMarker()||(r=r.getBoundingRectangle(),r.top<n.top&&(n.top=r.top),r.bottom>n.bottom&&(n.bottom=r.bottom),r.left<n.left&&(n.left=r.left),r.right>n.right&&(n.right=r.right))}return n}cleanUp(){this.setResizesEnabled(!1),o.setGroup$$module$build$src$core$events$utils(!0);var e=this.getTopBlocks(!0),n=e.filter($=>$.isMovable());const r=e.filter($=>!$.isMovable()).map($=>$.getBoundingRectangle());e=function($){for(const k of r)if($.intersects(k))return k;return null};var l=0;const d=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const $ of n){for(n=$.getBoundingRectangle(),$.moveBy(-n.left,l-n.top,["cleanup"]),$.snapToGrid(),n=$.getBoundingRectangle(),l=e(n);l!=null;)l=l.top+l.getHeight()+d,$.moveBy(0,l-n.top,["cleanup"]),$.snapToGrid(),n=$.getBoundingRectangle(),l=e(n);l=$.getRelativeToSurfaceXY().y+$.getHeightWidth().height+d}o.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.options.readOnly&&!this.isFlyout){var n=De.registry.getContextMenuOptions(De.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,e),Ya(e,n,this.RTL,this)}}updateToolbox(e){if(e=ld(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(ad(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(qe(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,n,r){r=Math.pow(this.options.zoomOptions.scaleSpeed,r);const l=this.scale*r;if(this.scale!==l){l>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale/this.scale:l<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale/this.scale);var d=this.getCanvas().getCTM(),$=this.getParentSvg().createSVGPoint();$.x=e,$.y=n,$=$.matrixTransform(d.inverse()),e=$.x,n=$.y,d=d.translate(e*(1-r),n*(1-r)).scale(r),this.scrollX=d.e,this.scrollY=d.f,this.setScale(l)}}zoomCenter(e){var n=this.getMetrics();let r;this.flyout?(r=n.svgWidth?n.svgWidth/2:0,n=n.svgHeight?n.svgHeight/2:0):(r=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop),this.zoom(r,n,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var r=this.getBlocksBoundingBox(),l=2*CD,d=r.right-r.left+l;if(r=r.bottom-r.top+l,d){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),r+=this.flyout.getHeight()/this.scale):(n+=this.flyout.getWidth(),d+=this.flyout.getWidth()/this.scale)),n/=d,e/=r,o.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{o.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){he(this.getCanvas(),"blocklyCanvasTransitioning"),he(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){x(this.getCanvas(),"blocklyCanvasTransitioning"),x(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),n=(e.scrollWidth-e.viewWidth)/2,r=(e.scrollHeight-e.viewHeight)/2;n=-n-e.scrollLeft,r=-r-e.scrollTop,this.scroll(n,r)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,n){if(this.isMovable()){var r=e?this.getBlockById(e):null;if(r){e=r.getRelativeToSurfaceXY(),r=n?{height:r.height,width:r.width}:r.getHeightWidth();var l=this.scale;n=(e.x+(this.RTL?-1:1)*r.width/2)*l,e=(e.y+r.height/2)*l,r=this.getMetrics(),this.scroll(-(n-r.viewWidth/2),-(e-r.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(e,n){this.hideChaff(!0);const r=this.getMetrics();e=Math.min(e,-r.scrollLeft),n=Math.min(n,-r.scrollTop);const l=r.scrollTop+Math.max(0,r.scrollHeight-r.viewHeight);e=Math.max(e,-(r.scrollLeft+Math.max(0,r.scrollWidth-r.viewWidth))),n=Math.max(n,-l),this.scrollX=e,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(e+r.scrollLeft),-(n+r.scrollTop),!1),e+=r.absoluteLeft,n+=r.absoluteTop,this.translate(e,n)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){ze(this.topBoundedElements,e)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(e){const n=!this.resizesEnabled&&e;this.resizesEnabled=e,n&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,n){if(typeof n!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,n)}getButtonCallback(e){let n;return(n=this.flyoutButtonCallbacks.get(e))!=null?n:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,n){if(typeof n!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,n)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){const n=e.type==="pointerdown",r=this.currentGesture_;return r?n&&r.hasStarted()?(console.warn("Tried to start the same gesture twice."),r.cancel(),null):r:n?this.currentGesture_=new Uo(e,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){Ao(),Xa(this),ro(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(mt.Capability.AUTOHIDEABLE,!0).forEach(n=>n.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const n=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*e.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)}},e_=class extends Us{constructor(e,n,r){super(r),this.type=X.SELECTED,this.oldElementId=e??void 0,this.newElementId=n??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new e_),n.oldElementId=e.oldElementId,n.newElementId=e.newElementId,n}};i(ne.EVENT,X.SELECTED,e_);var Sc=class{paste(e,n,r){if(!n.isCapacityAvailable(e.typeCounts))return null;r&&(e.blockState.x=r.x,e.blockState.y=r.y),r=r||new oe(e.blockState.x||0,e.blockState.y||0),o.disable$$module$build$src$core$events$utils();let l;try{l=Oo(e.blockState,n),WC(l,r)}finally{o.enable$$module$build$src$core$events$utils()}return l&&(we()&&!l.isShadow()&&N(new(F(X.BLOCK_CREATE))(l)),o.setSelected$$module$build$src$core$common(l),l)}};Sc.TYPE="block",fd(Sc.TYPE,new Sc);var Oh={};Oh.bumpIntoBounds=ml,Oh.bumpIntoBoundsHandler=$g,Oh.bumpTopObjectsIntoBounds=jd;var VI=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new oe(0,0),this.inGroup=!1,this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,n;return(n=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?n:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.options.readOnly&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,(this.inGroup=!!o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(m(ne.CONNECTION_PREVIEWER,this.workspace.options))(this.block),E(),this.workspace.setResizesEnabled(!1),pl(),e=!!e&&(e.altKey||e.ctrlKey||e.metaKey),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var n;(n=this.workspace.getLayerManager())==null||n.moveToDragLayer(this.block)}}startDraggingShadow(e){const n=this.block.getParent();if(!n)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=oe.difference(n.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),n.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let n,r,l;if(this.startParentConn=(l=(n=this.block.outputConnection)==null?void 0:n.targetConnection)!=null?l:(r=this.block.previousConnection)==null?void 0:r.targetConnection,e){let d;this.startChildConn=(d=this.block.nextConnection)==null?void 0:d.targetConnection}this.block.unplug(e),eg(this.block)}fireDragStartEvent(){const e=new(F(X.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));N(e)}fireDragEndEvent(){const e=new(F(X.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));N(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(F(X.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),N(e)}}drag(e){if(this.block.isShadow()){let n;(n=this.block.getParent())==null||n.drag(oe.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,oe.difference(e,this.startLoc))}updateConnectionPreview(e,n){var r=this.connectionCandidate;const l=this.getConnectionCandidate(e,n);if(l){this.connectionCandidate=n=r&&this.currCandidateIsBetter(r,n,l)?r:l;var{local:d,neighbour:$}=n;n=d.type===ge.OUTPUT_VALUE||d.type===ge.PREVIOUS_STATEMENT,r=$.isConnected()&&!$.targetBlock().isInsertionMarker(),n&&r&&!this.orphanCanConnectAtEnd(e,$.targetBlock(),d.type)?this.connectionPreviewer.previewReplacement(d,$,$.targetBlock()):this.connectionPreviewer.previewConnection(d,$)}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(e,n,r){return!!Ke.getConnectionForOrphanedConnection(e,r===ge.OUTPUT_VALUE?n.outputConnection:n.previousConnection)}currCandidateIsBetter(e,n,r){const{local:l,neighbour:d}=e;e=new oe(l.x,l.y);const $=new oe(d.x,d.y);return n=oe.distance(oe.sum(e,n),$),r.distance>n-o.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,n){e=this.getLocalConnections(e);let r=this.connectionCandidate?o.config$$module$build$src$core$config.connectingSnapRadius:o.config$$module$build$src$core$config.snapRadius,l=null;for(const d of e){const{connection:$,radius:k}=d.closest(r,n);$&&(l={local:d,neighbour:$,distance:k},r=k)}return l}getLocalConnections(e){const n=e.getConnections_(!1),r=e.lastConnectionInStack(!0);return r&&r!==e.nextConnection&&n.push(r),n}endDrag(e){if(this.block.isShadow()){let n;(n=this.block.getParent())==null||n.endDrag(e)}else{if(this.fireDragEndEvent(),this.fireMoveEvent(),R(),pl(),this.connectionPreviewer.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let n;(n=this.workspace.getLayerManager())==null||n.moveOffDragLayer(this.block,bi),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep()),this.inGroup||o.setGroup$$module$build$src$core$events$utils(!1)}}disposeStep(){this.block.snapToGrid(),this.connectionPreviewer.dispose(),this.workspace.setResizesEnabled(!0)}applyConnections(e){const{local:n,neighbour:r}=e;n.connect(r);const l=n.isSuperior()?r:n,d=this.block.getRootBlock();Fs().then(()=>{Ld(l.getSourceBlock()),setTimeout(()=>{d.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let n;(n=this.block.getParent())==null||n.revertDrag()}else{var e;if((e=this.startChildConn)==null||e.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case ge.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case ge.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let n;(n=this.workspace.getLayerManager())==null||n.moveOffDragLayer(this.block,bi),ml(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.connectionPreviewer.hidePreview(),this.connectionCandidate=null,this.block.setDragging(!1),this.dragging=!1}}},HI=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(e){this.drawer=e}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(e){const n=this.curNode;this.curNode=e,this.drawer&&this.drawer.draw(n,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},t_=class extends HI{constructor(){super(),this.type="cursor"}next(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()===Z.types.NEXT||e.getType()===Z.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e}in(){var e=this.getCurNode();if(!e)return null;(e.getType()===Z.types.PREVIOUS||e.getType()===Z.types.OUTPUT)&&(e=e.next());let n,r;return(e=(r=(n=e)==null?void 0:n.in())!=null?r:null)&&this.setCurNode(e),e}prev(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()===Z.types.NEXT||e.getType()===Z.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e}out(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()===Z.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null}};i(ne.CURSOR,uo,t_);var Ic=class extends t_{constructor(){super()}next(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null}in(){return this.next()}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null}out(){return this.prev()}getNextNode_(e,n){if(!e)return null;const r=e.in()||e.next();return n(r)?r:r?this.getNextNode_(r,n):(e=this.findSiblingOrParent(e.out()),n(e)?e:e?this.getNextNode_(e,n):null)}getPreviousNode_(e,n){if(!e)return null;let r=e.prev();return r=r?this.getRightMostChild(r):e.out(),n(r)?r:r?this.getPreviousNode_(r,n):null}validNode_(e){let n=!1;return e=e&&e.getType(),(e===Z.types.OUTPUT||e===Z.types.INPUT||e===Z.types.FIELD||e===Z.types.NEXT||e===Z.types.PREVIOUS||e===Z.types.WORKSPACE)&&(n=!0),n}findSiblingOrParent(e){if(!e)return null;const n=e.next();return n||this.findSiblingOrParent(e.out())}getRightMostChild(e){if(!e.in())return e;for(e=e.in();e&&e.next();)e=e.next();return this.getRightMostChild(e)}};Ic.registrationName="basicCursor",i(ne.CURSOR,Ic.registrationName,Ic);var GI=class extends Ic{validNode_(e){let n=!1;const r=e&&e.getType();return e&&(e=e.getLocation(),r===Z.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(n=!0)),n}},jI=10,On=class extends Ke{constructor(e,n){super(e,n),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[n],this.dbOpposite=e.workspace.connectionDBList[wr[n]],this.offsetInBlock=new oe(0,0),this.trackedState=On.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===On.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,n;(n=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||n.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const n=this.x-e.x;return e=this.y-e.y,Math.sqrt(n*n+e*e)}bumpAwayFrom(e,n=!1){if(!this.sourceBlock_.workspace.isDragging()){var r=o.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*jI),l=o.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*jI),d=e.sourceBlock_.getRootBlock(),$=this.sourceBlock_.getRootBlock();if(!d.isInFlyout&&!$.isInFlyout){var k=!0;if($.isMovable())d.isMovable()&&n&&(l=-l);else if(d.isMovable())k=!1,r=-r,l=-l;else return;n=k?e:this,e=k?this:e,d=k?$:d,($=Re()===d)||d.addSelect(),d.RTL&&(r=-r),d.moveBy(n.x+r-e.x,n.y+l-e.y,["bump"]),$||d.removeSelect()}}}moveTo(e,n){let r=!1;return this.trackedState===On.TrackedState.WILL_TRACK?(this.db.addConnection(this,n),this.trackedState=On.TrackedState.TRACKED,r=!0):this.trackedState===On.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,n),r=!0),this.x=e,this.y=n,r}moveBy(e,n){return this.moveTo(this.x+e,this.y+n)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,n){this.offsetInBlock.x=e,this.offsetInBlock.y=n}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const n=this.targetBlock();e&&n&&(e=oe.difference(this.offsetInBlock,e.offsetInBlock),n.translate(e.x,e.y))}closest(e,n){return this.dbOpposite.searchForClosest(this,e,n)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===On.TrackedState.TRACKED||!e&&this.trackedState===On.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=On.TrackedState.TRACKED):(this.trackedState===On.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=On.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let n=0;n<e.length;n++){const r=e[n],l=r.getConnections_(!0);for(let d=0;d<l.length;d++)l[d].setTracking(!1);for(const d of r.getIcons())ll(d)&&d.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==ge.INPUT_VALUE&&this.type!==ge.NEXT_STATEMENT)return e;const n=this.targetBlock();if(n){let r;n.isCollapsed()?(r=[],n.outputConnection&&r.push(n.outputConnection),n.nextConnection&&r.push(n.nextConnection),n.previousConnection&&r.push(n.previousConnection)):r=n.getConnections_(!0);for(let l=0;l<r.length;l++)e.push(...r[l].startTrackingAll());e.length||(e=[n])}return e}onFailedConnect(e){const n=this.getSourceBlock();if(B()){const r=o.getGroup$$module$build$src$core$events$utils();setTimeout((function(){n.isDisposed()||n.getParent()||(o.setGroup$$module$build$src$core$events$utils(r),this.bumpAwayFrom(e),o.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),o.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:n,childConnection:r}=this.getParentAndChildConnections();if(n&&r){var l=o.getGroup$$module$build$src$core$events$utils();l||o.setGroup$$module$build$src$core$events$utils(!0);var d=n.getSourceBlock(),$=r.getSourceBlock();super.disconnectInternal(e),d.queueRender(),$.updateDisabled(),$.queueRender(),$.getSvgRoot().style.display="block",o.setGroup$$module$build$src$core$events$utils(l)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var n=this.getSourceBlock();e=e.getSourceBlock(),n.updateDisabled(),e.updateDisabled(),e.queueRender();var r=Re();(r=r===n&&n||r===e&&e)&&(r.removeSelect(),r.addSelect()),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(On||(On={})),On.TrackedState;var Ss=class extends vi{constructor(e,n,r){if(super(e,n,r),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new oe(0,0),this.dragStrategy=new VI(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=Y(z.G,{}),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,ul(e),this.svgGroup.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const n of this.getIcons())n.initView(this.createIconPointerDownListener(n)),n.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),e=this.getSvgRoot(),!this.workspace.options.readOnly&&e&&_e(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()){let e;(e=this.getParent())==null||e.select()}else this.addSelect()}unselect(){if(this.isShadow()){let e;(e=this.getParent())==null||e.unselect()}else this.removeSelect()}setParent(e){const n=this.parentBlock_;if(e!==n){E(),super.setParent(e),R();var r=this.getSvgRoot();if(!this.workspace.isClearing&&r){var l=this.getRelativeToSurfaceXY();e?e.getSvgRoot().appendChild(r):n&&((e=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(r,e):this.workspace.getCanvas().appendChild(r),this.translate(l.x,l.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let n=0,r=0,l=this.getSvgRoot();if(l)do{const d=wn(l);n+=d.x,r+=d.y,l=l.parentNode}while(l&&!e.hasLayer(l));return new oe(n,r)}moveBy(e,n,r){if(this.parentBlock_)throw Error("Block has parent");const l=we();let d=null;l&&(d=new(F(X.BLOCK_MOVE))(this),r&&d.setReason(r)),e=new oe(e,n),n=this.getRelativeToSurfaceXY(),e=oe.sum(n,e),this.translate(e.x,e.y),this.updateComponentLocations(e),l&&d&&(d.recordNew(),N(d)),this.workspace.resizeContents()}translate(e,n){this.translation=`translate(${e}, ${n})`,this.relativeCoords=new oe(e,n),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,n){const r=this.getRelativeToSurfaceXY();this.moveBy(e.x-r.x,e.y-r.y,n)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var n=this.getRelativeToSurfaceXY();e=e.alignXY(n),e!==n&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const n=this.getRelativeToSurfaceXY();let r,l;return this.RTL?(r=n.x-e.width,l=n.x):(r=n.x,l=n.x+e.width),new it(n.y,n.y+e.height,r,l)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,n;n=this.inputList[e];e++)n.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}updateCollapsed(){var e=this.isCollapsed();const n=cc,r=oh;for(let d=0,$;$=this.inputList[d];d++)$.name!==n&&$.setVisible(!e);for(var l of this.getIcons())l.updateCollapsed();e?(e=this.toString(BI),(l=this.getField(r))?l.setValue(e):(this.getInput(n)||this.appendDummyInput(n)).appendField(new Sr(e),r)):(this.updateDisabled(),this.removeInput(n))}tab(e,n){const r=new GI;r.setCurNode(Z.createFieldNode(e)),e=r.getCurNode(),n?r.next():r.prev(),(n=r.getCurNode())&&n!==e&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))}onMouseDown(e){const n=this.workspace.getGesture(e);n&&n.handleBlockStart(e,this)}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const e=De.registry.getContextMenuOptions(De.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e}showContextMenu(e){const n=this.generateContextMenu();n&&n.length&&(Ya(e,n,this.RTL,this.workspace),jm(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const n of this.getChildren(!1))n.updateComponentLocations(oe.sum(e,n.relativeCoords))}updateConnectionLocations(e){for(const n of this.getConnections_(!1))n.moveToOffset(e)}updateIconLocations(e){for(const n of this.getIcons())n.onLocationChange(e)}updateFieldLocations(e){for(const n of this.inputList)for(const r of n.fieldRow)r.onLocationChange(e)}setDragging(e){(this.dragging=e)?(this.translation="",oc.push(...this.getConnections_(!0)),he(this.svgGroup,"blocklyDragging")):(oc.length=0,x(this.svgGroup,"blocklyDragging"));for(let n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e=this.getIcons();for(let n=0;n<e.length;n++)e[n].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,n){if(this.disposing=!0,Am(),Ka(),n&&(this.unplug(e),Md(this)),n=Re(),n instanceof vi){let r=n;for(;r!==null;)r===this&&n.unselect(),r=r.getParent()}super.dispose(!!e),V(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),Re()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(o.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),o.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Sc.TYPE,blockState:ts(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:We(this,!0)}}applyColour(){this.pathObject.applyColour(this);const e=this.getIcons();for(let n=0;n<e.length;n++)e[n].applyColour();for(let n=0,r;r=this.inputList[n];n++)for(let l=0,d;d=r.fieldRow[l];l++)d.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let n;(n=this.getNextBlock())==null||n.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const n of this.getChildren(!1))n.updateDisabled()}}setWarningText(e,n=""){if(n)this.warningTextDb.has(n)&&(clearTimeout(this.warningTextDb.get(n)),this.warningTextDb.delete(n));else{for(var r of this.warningTextDb.values())clearTimeout(r);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(n,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(n),this.setWarningText(e,n))},100));else if(this.isInFlyout&&(e=null),r=this.getIcon(jo.TYPE),e){let l=this.getSurroundParent(),d=null;for(;l;)l.isCollapsed()&&(d=l),l=l.getSurroundParent();d&&d.setWarningText(o.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Ss.COLLAPSED_WARNING_ID),r?r.addMessage(e,n):this.addIcon(new jo(this).addMessage(e,n))}else r&&(n?(r.addMessage("",n),r.getText()||this.removeIcon(jo.TYPE)):this.removeIcon(jo.TYPE))}setMutator(e){this.removeIcon(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof o.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return n=>{this.isDeadOrDying()||(n=this.workspace.getGesture(n))&&n.setStartIcon(e)}}removeIcon(e){const n=super.removeIcon(e);return e.equals(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),n}setEnabled(e){T("setEnabled","v11","v12","the setDisabledReason method of BlockSvg");const n=this.isEnabled();super.setEnabled(e),this.isEnabled()===n||this.getInheritedDisabled()||this.updateDisabled()}setDisabledReason(e,n){const r=this.isEnabled();super.setDisabledReason(e,n),this.isEnabled()===r||this.getInheritedDisabled()||this.updateDisabled()}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const n=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,n)this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour();else throw Error("Invalid style name: "+e)}getStyle(){return this.style}bringToFront(e=!1){let n=this;if(!n.isDeadOrDying())do{const r=n.getSvgRoot(),l=r.parentNode,d=l.childNodes;if(d[d.length-1]!==r&&l.appendChild(r),e)break;n=n.getParent()}while(n)}setPreviousStatement(e,n){super.setPreviousStatement(e,n),this.queueRender()}setNextStatement(e,n){super.setNextStatement(e,n),this.queueRender()}setOutput(e,n){super.setOutput(e,n),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,n){return e=super.removeInput(e,n),this.queueRender(),e}moveNumberedInputBefore(e,n){super.moveNumberedInputBefore(e,n),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(e)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var r=this.inputList[n].connection;r&&(r.setTracking(e),(r=r.targetBlock())&&r.setConnectionTracking(e))}}getConnections_(e){const n=[];if(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),e||!this.collapsed_)for(let r=0,l;l=this.inputList[r];r++)l.connection&&n.push(l.connection);return n}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,n){return super.getMatchingConnection(e,n)}makeConnection_(e){return new On(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const n of this.getConnections_(!1)){if(n.isSuperior()){let r;(r=n.targetBlock())==null||r.bumpNeighbours()}for(const r of n.neighbours(o.config$$module$build$src$core$config.snapRadius))r.getSourceBlock().getRootBlock()!==e&&(n.isConnected()&&r.isConnected()||(n.isSuperior()?r.bumpAwayFrom(n,!1):n.bumpAwayFrom(r,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,n,r){if(e.type===ge.NEXT_STATEMENT||e.type===ge.INPUT_VALUE){let l=n.x;n=n.y,l+=r.x-e.getOffsetInBlock().x,n+=r.y-e.getOffsetInBlock().y,this.moveBy(l,n)}}getChildren(e){return super.getChildren(e)}queueRender(){return em(this)}render(){this.queueRender(),xo()}renderEfficiently(){E(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),R(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const e of this.inputList){const n=e.connection;n&&n.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(fc.LOCAL_MARKER).draw();for(const e of this.inputList)for(const n of e.fieldRow)n.updateMarkers_()}setCursorSvg(e){this.pathObject.setCursorSvg(e)}setMarkerSvg(e){this.pathObject.setMarkerSvg(e)}getHeightWidth(){let e=this.height,n=this.width;var r=this.getNextBlock();if(r){r=r.getHeightWidth();const l=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=r.height-l,n=Math.max(n,r.width)}return{height:e,width:n}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,n){this.pathObject.updateShapeForInputHighlight(e,n)}setDragStrategy(e){this.dragStrategy=e}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,n){this.dragStrategy.drag(e,n)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},ts(this)),n=new Set(["id","height","width","pinned","enabled"]),r=function(l){for(const d in l)n.has(d)?delete l[d]:typeof l[d]=="object"&&r(l[d])};return r(e),[e]}};Ss.INLINE=-1,Ss.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var WI=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},Ah=class extends WI{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof Ss?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(Ts(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},n_=class extends Us{constructor(e,n){super(n),this.type=X.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new n_),n.isOpen=e.isOpen,n}};i(ne.EVENT,X.TRASHCAN_OPEN,n_);var zI=class extends Ah{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(e=new Es({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===Me.TOP?Me.BOTTOM:Me.TOP,this.flyout=new(m(ne.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===Me.RIGHT?Me.LEFT:Me.RIGHT,this.flyout=new(m(ne.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=Y(z.G,{class:"blocklyTrash"});let e;const n=String(Math.random()).substring(2);e=Y(z.CLIPPATH,{id:"blocklyTrashBodyClipPath"+n},this.svgGroup),Y(z.RECT,{width:Ml,height:Nh,y:Ll},e);const r=Y(z.IMAGE,{width:kn.width,x:-0,height:kn.height,y:-32,"clip-path":"url(#blocklyTrashBodyClipPath"+n+")"},this.svgGroup);return r.setAttributeNS(ns,"xlink:href",this.workspace.options.pathToMedia+kn.url),e=Y(z.CLIPPATH,{id:"blocklyTrashLidClipPath"+n},this.svgGroup),Y(z.RECT,{width:Ml,height:Ll},e),this.svgLid=Y(z.IMAGE,{width:kn.width,x:-0,height:kn.height,y:-32,"clip-path":"url(#blocklyTrashLidClipPath"+n+")"},this.svgGroup),this.svgLid.setAttributeNS(ns,"xlink:href",this.workspace.options.pathToMedia+kn.url),Ze(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),Ze(this.svgGroup,"pointerup",this,this.click),Ze(r,"pointerover",this,this.mouseOver),Ze(r,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(le(this.flyout.createDom(z.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:mt.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[mt.Capability.AUTOHIDEABLE,mt.Capability.DELETE_AREA,mt.Capability.DRAG_TARGET,mt.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&V(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(r){return JSON.parse(r)}),n=this.workspace.getParentSvg().style;n.cursor="wait",setTimeout(()=>{let r;(r=this.flyout)==null||r.show(e),n.cursor="";let l;(l=this.workspace.scrollbar)==null||l.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var n;(n=this.workspace.scrollbar)==null||n.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,n){if(this.initialized){var r=hd(this.workspace,e);e=dd(r,new Ge(Ml,Nh+Ll),SD,XI,e,this.workspace),n=pd(e,XI,r.vertical===Fo.TOP?_i.DOWN:_i.UP,n),this.top=n.top,this.left=n.left;var l;(l=this.svgGroup)==null||l.setAttribute("transform","translate("+this.left+","+this.top+")");var d;(d=this.flyout)==null||d.position()}}getBoundingRectangle(){return new it(this.top,this.top+Nh+Ll,this.left,this.left+Ml)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const n=e.top+wD-Mh;return e=e.left+ID-Mh,new it(n,n+Ll+Nh+2*Mh,e,e+Ml+2*Mh)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=xD;var n=1/(e+1);this.lidOpen+=this.isLidOpen?n:-n,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*KI),n=YI+this.lidOpen*(OD-YI),this.svgGroup&&(this.svgGroup.style.opacity=`${n}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),RD/e))}setLidAngle(e){const n=this.workspace.toolboxPosition===Me.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let r;(r=this.svgLid)==null||r.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:Ml-4)+","+(Ll-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*KI)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(F(X.TRASHCAN_OPEN))(e,this.workspace.id),N(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(0>=this.workspace.options.maxTrashcanContents||!A(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(kD)}}}cleanBlockJson(e){function n(r){if(r){if(delete r.id,delete r.x,delete r.y,delete r.enabled,delete r.disabledReasons,r.icons&&r.icons.comment){var l=r.icons.comment;delete l.height,delete l.width,delete l.pinned}l=r.inputs;for(var d in l){var $=l[d];const k=$.block;$=$.shadow,k&&n(k),$&&n($)}r.next&&(d=r.next,r=d.block,d=d.shadow,r&&n(r),d&&n(d))}}return e=JSON.parse(JSON.stringify(e)),n(e),Object.assign({},{kind:"BLOCK"},e)}},Ml=47,Nh=44,Ll=16,XI=20,SD=20,Mh=10,ID=0,wD=32,kD=.1,RD=80,xD=4,YI=.4,OD=.8,KI=45,tt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,n){if(this.shortcuts.get(e.name)&&!n)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),n=e.keyCodes,n!=null&&n.length)for(const r of n)this.addKeyMapping(r,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,n,r){e=`${e}`;const l=this.keyMap.get(e);if(l&&!r)throw Error(`Shortcut named "${n}" collides with shortcuts "${l}"`);l&&r?l.unshift(n):this.keyMap.set(e,[n])}removeKeyMapping(e,n,r){const l=this.keyMap.get(e);if(!l)return r||console.warn(`No keyboard shortcut named "${n}" registered with key code "${e}"`),!1;const d=l.indexOf(n);return-1<d?(l.splice(d,1),l.length===0&&this.keyMap.delete(e),!0):(r||console.warn(`No keyboard shortcut named "${n}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const n of this.keyMap.keys())this.removeKeyMapping(n,e,!0)}setKeyMap(e){this.keyMap.clear();for(const n in e)this.keyMap.set(n,e[n])}getKeyMap(){const e=Object.create(null);for(const[n,r]of this.keyMap)e[n]=r;return e}getRegistry(){const e=Object.create(null);for(const[n,r]of this.shortcuts)e[n]=r;return No(Object.create(null),e)}onKeyDown(e,n){var r=this.serializeKeyEvent(n);if(r=this.getShortcutNamesByKeyCode(r),!r)return!1;for(const l of r){if(r=this.shortcuts.get(l),!r||r.preconditionFn&&!r.preconditionFn(e))continue;let d,$;if(($=(d=r).callback)!=null&&$.call(d,e,n,r))return!0}return!1}getShortcutNamesByKeyCode(e){return this.keyMap.get(e)||[]}getKeyCodesByShortcutName(e){const n=[];for(const[r,l]of this.keyMap)-1<l.indexOf(e)&&n.push(r);return n}serializeKeyEvent(e){let n="";for(const r in tt.modifierKeys)e.getModifierState(r)&&(n!==""&&(n+="+"),n+=r);return n!==""&&e.keyCode?n+="+"+e.keyCode:e.keyCode&&(n=String(e.keyCode)),n}checkModifiers(e){for(const n of e)if(!(n in tt.modifierKeys))throw Error(n+" is not a valid modifier key.")}createSerializedKey(e,n){let r="";if(n){this.checkModifiers(n);for(const l in tt.modifierKeys)n.includes(tt.modifierKeys[l])&&(r!==""&&(r+="+"),r+=l)}return r!==""&&e?r+="+"+e:e&&(r=`${e}`),r}};tt.registry=new tt,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(tt||(tt={}));var s_=null,o_=null,AD={duplicateInternal:JC,copyInternal:KC},wc={};wc.BlockPaster=Sc,wc.TEST_ONLY=AD,wc.paste=fi,wc.registry=u$;var mo;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(mo||(mo={}));var Ci=null,Si=null,Dl=null;Ig();var go={};go.names=mo,go.registerCopy=yg,go.registerCut=Eg,go.registerDefaultShortcuts=Ig,go.registerDelete=bg,go.registerEscape=Tg,go.registerPaste=vg,go.registerRedo=Sg,go.registerUndo=Cg;var ND=class{constructor(e,n){this.procedureModelClass=e,this.parameterModelClass=n,this.priority=zS}save(e){return e=e.getProcedureMap().getProcedures().map(n=>wg(n)),e.length?e:null}load(e,n){const r=n.getProcedureMap();for(const l of e)r.add(kg(this.procedureModelClass,this.parameterModelClass,l,n))}clear(e){e.getProcedureMap().clear()}},Lh={};Lh.ProcedureSerializer=ND,Lh.loadProcedure=kg,Lh.saveProcedure=wg;var JI=class{constructor(){this.priority=WS}save(e){const n=[];for(const r of e.getAllVariables())e={name:r.name,id:r.getId()},r.type&&(e.type=r.type),n.push(e);return n.length?n:null}load(e,n){for(const r of e)n.createVariable(r.name,r.type,r.id)}clear(e){e.getVariableMap().clear()}};Ba("variables",new JI);var qI={};qI.VariableSerializer=JI;var i_={};i_.load=ZC,i_.save=qC;var MD={blocks:pc,exceptions:$r,priorities:lD,procedures:Lh,registry:c$,variables:qI,workspaceComments:nh,workspaces:i_},r_=class{constructor(e,n,r,l,d){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,n=n===void 0?!0:n,r=r===void 0?!0:r;const $=n&&r;n&&(this.hScroll=new Mt(e,!0,$,l,d)),r&&(this.vScroll=new Mt(e,!1,$,l,d)),$&&(this.corner_=Y(z.RECT,{height:Mt.scrollbarThickness,width:Mt.scrollbarThickness,class:"blocklyScrollbarBackground"}),le(this.corner_,e.getBubbleCanvas()))}dispose(){V(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var n=!1,r=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(n=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(r=!0)):r=n=!0,n||r){try{o.disable$$module$build$src$core$events$utils(),this.hScroll&&n&&this.hScroll.resize(e),this.vScroll&&r&&this.vScroll.resize(e)}finally{o.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let l;(l=this.corner_)==null||l.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let l;(l=this.corner_)==null||l.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,n){this.hScroll&&this.hScroll.setOrigin(e,n),this.vScroll&&this.vScroll.setOrigin(e,n)}set(e,n,r){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(n,!1),(r||r===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},l_=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let n=0,r=0;return e&&(n=e.getWidth(),r=e.getHeight()),new Ge(n,r)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,n=0;const r=this.getToolboxMetrics(),l=this.getFlyoutMetrics(),d=!!this.workspace_.getToolbox();var $;const k=!(($=this.workspace_.getFlyout())!=null&&$.autoClose);$=d?r.position:l.position;const D=$===Me.TOP;return $===Me.LEFT&&(d&&(e+=r.width),k&&(e+=l.width)),D&&(d&&(n+=r.height),k&&(n+=l.height)),{top:n,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const n=this.getSvgMetrics(),r=this.getToolboxMetrics(),l=this.getFlyoutMetrics(),d=!!this.workspace_.getToolbox();var $;const k=!(($=this.workspace_.getFlyout())!=null&&$.autoClose);$=d?r.position:l.position;const D=$===Me.LEFT||$===Me.RIGHT;return($===Me.TOP||$===Me.BOTTOM)&&(d&&(n.height-=r.height),k&&(n.height-=l.height)),D&&(d&&(n.width-=r.width),k&&(n.width-=l.width)),{height:n.height/e,width:n.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*e,width:(n.right-n.left)*e,top:n.top*e,left:n.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const n=this.workspace_.isMovableHorizontally(),r=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const l={};return r||(l.top=e.top,l.bottom=e.top+e.height),n||(l.left=e.left,l.right=e.left+e.width),l}getPaddedContent_(e,n){const r=n.top+n.height,l=n.left+n.width,d=e.width;e=e.height;const $=d/2,k=e/2;return{top:Math.min(n.top-k,r-e),bottom:Math.max(r+k,n.top+e),left:Math.min(n.left-$,l-d),right:Math.max(l+$,n.left+d)}}getScrollMetrics(e,n,r){e=e?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var l=r||this.getContentMetrics();r=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,l),l=r.top!==void 0?r.top:n.top;const d=r.left!==void 0?r.left:n.left;return{top:l/e,left:d/e,width:((r.right!==void 0?r.right:n.right)-d)/e,height:((r.bottom!==void 0?r.bottom:n.bottom)-l)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),r=this.getSvgMetrics(),l=this.getAbsoluteMetrics(),d=this.getViewMetrics(),$=this.getContentMetrics(),k=this.getScrollMetrics(!1,d,$);return{contentHeight:$.height,contentWidth:$.width,contentTop:$.top,contentLeft:$.left,scrollHeight:k.height,scrollWidth:k.width,scrollTop:k.top,scrollLeft:k.left,viewHeight:d.height,viewWidth:d.width,viewTop:d.top,viewLeft:d.left,absoluteTop:l.top,absoluteLeft:l.left,svgHeight:r.height,svgWidth:r.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:n.width,flyoutHeight:n.height}}};i(ne.METRICS_MANAGER,uo,l_),"Blockly"in globalThis||(globalThis.Blockly={Msg:tI});var ZI=class extends wh{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&V(this.selectedGlowFilter),this.replacementGlowFilter&&V(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH,r=Un("c",[Se(25,-e),Se(71,-e),Se(n,0)]);return{height:e,width:n,path:r}}makeHexagonal(){function e(r,l,d){var $=r/2;return $=$>n?n:$,d=d?-1:1,r=(l?-1:1)*r/2,co(-d*$,r)+co(d*$,r)}const n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(r){return r/=2,r>n?n:r},height(r){return r},connectionOffsetY(r){return r/2},connectionOffsetX(r){return-r},pathDown(r){return e(r,!1,!1)},pathUp(r){return e(r,!0,!1)},pathRightDown(r){return e(r,!1,!0)},pathRightUp(r){return e(r,!1,!0)}}}makeRounded(){function e(l,d,$){const k=l>r?l-r:0;l=(l>r?r:l)/2;const D=$===d?"0":"1";return Nt("a","0 0,"+D,l,Se(($?1:-1)*l,(d?-1:1)*l))+$e("v",(d?-1:1)*k)+Nt("a","0 0,"+D,l,Se(($?-1:1)*l,(d?-1:1)*l))}const n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width(l){return l/=2,l>n?n:l},height(l){return l},connectionOffsetY(l){return l/2},connectionOffsetX(l){return-l},pathDown(l){return e(l,!1,!1)},pathUp(l){return e(l,!0,!1)},pathRightDown(l){return e(l,!1,!0)},pathRightUp(l){return e(l,!1,!0)}}}makeSquared(){function e(r,l,d){r-=2*n;const $=d===l?"0":"1";return Nt("a","0 0,"+$,n,Se((d?1:-1)*n,(l?-1:1)*n))+$e("v",(l?-1:1)*r)+Nt("a","0 0,"+$,n,Se((d?-1:1)*n,(l?-1:1)*n))}const n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(r){return n},height(r){return r},connectionOffsetY(r){return r/2},connectionOffsetX(r){return-r},pathDown(r){return e(r,!1,!1)},pathUp(r){return e(r,!0,!1)},pathRightDown(r){return e(r,!1,!0)},pathRightUp(r){return e(r,!1,!0)}}}shapeFor(e){let n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case ge.INPUT_VALUE:case ge.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&n.includes("Boolean")?this.HEXAGONAL:n&&n.includes("Number")?this.ROUNDED:(n&&n.includes("String"),this.ROUNDED);case ge.PREVIOUS_STATEMENT:case ge.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(me){return Un("c",[Se(me*d/2,0),Se(me*d*3/4,k/2),Se(me*d,k)])+fl([Se(me*d,$)])+Un("c",[Se(me*d/4,k/2),Se(me*d/2,k),Se(me*d,k)])+$e("h",me*l)+Un("c",[Se(me*d/2,0),Se(me*d*3/4,-(k/2)),Se(me*d,-k)])+fl([Se(me*d,-$)])+Un("c",[Se(me*d/4,-(k/2)),Se(me*d/2,-k),Se(me*d,-k)])}const n=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,l=n/3,d=l/3,$=r/2,k=$/2,D=e(1),q=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:r,pathLeft:D,pathRight:q}}makeInsideCorners(){const e=this.CORNER_RADIUS,n=Nt("a","0 0,0",e,Se(-e,e)),r=Nt("a","0 0,1",e,Se(-e,e)),l=Nt("a","0 0,0",e,Se(e,e)),d=Nt("a","0 0,1",e,Se(e,e));return{width:e,height:e,pathTop:n,pathBottom:l,rightWidth:e,rightHeight:e,pathTopRight:r,pathBottomRight:d}}generateSecondaryColour_(e){return rr("#000",e,.15)||e}generateTertiaryColour_(e){return rr("#000",e,.25)||e}createDom(e,n,r){super.createDom(e,n,r),e=Y(z.DEFS,{},e),n=Y(z.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),Y(z.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),r=Y(z.FECOMPONENTTRANSFER,{result:"outBlur"},n),Y(z.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),Y(z.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),Y(z.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter=n,e=Y(z.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),Y(z.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=Y(z.FECOMPONENTTRANSFER,{result:"outBlur"},e),Y(z.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),Y(z.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),Y(z.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),Y(z.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableText>text,`,`${e} .blocklyEditableText>text,`,`${e} .blocklyNonEditableText>g>text,`,`${e} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .blocklyMenuItem,`,`${e}.blocklyDropDownDiv .blocklyMenuItem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .blocklyMenuItemContent {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},QI=class extends kh{constructor(e,n){super(e,n)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(0>=e.height)){if(U.isSpacer(e)){const l=e.precedesStatement;var n=e.followsStatement;if(l||n){const d=this.constants_.INSIDE_CORNERS;var r=d.rightHeight;r=e.height-(l?r:0),n=n?d.pathBottomRight:"",e=0<r?$e("V",e.yPos+r):"",this.outlinePath_+=n+e+(l?d.pathTopRight:"");return}}this.outlinePath_+=$e("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=ft(e.xPos,this.info_.startY),this.outlinePath_+=$e("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=$e("V",e.baseline),this.outlinePath_+=$e("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const n=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=Kt(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(n,e))}getInlineInputPath(e){const n=e.width-2*e.connectionWidth,r=e.height;return $e("h",n)+e.shape.pathRightDown(r)+$e("h",-n)+e.shape.pathUp(r)+"z"}drawStatementInput_(e){var n=e.getLastInput();const r=n.xPos+n.notchOffset+n.shape.width,l=this.constants_.INSIDE_CORNERS,d=n.shape.pathRight+$e("h",-(n.notchOffset-l.width))+l.pathTop,$=e.height-2*l.height;n=l.pathBottom+$e("h",n.notchOffset-l.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=$e("H",r)+d+$e("v",$)+n+$e("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const n=e.connectionModel;if(n.type===ge.NEXT_STATEMENT||n.type===ge.PREVIOUS_STATEMENT||n.type===ge.OUTPUT_VALUE&&!e.isDynamicShape)super.drawConnectionHighlightPath(e);else{e=n.type===ge.INPUT_VALUE?Kt(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):Kt(e.width,-e.height/2)+e.shape.pathDown(e.height);var r=n.getSourceBlock(),l,d;(d=(l=r.pathObject).addConnectionHighlight)==null||d.call(l,n,e,n.getOffsetInBlock(),r.RTL)}}},kr=class extends lt{constructor(e,n,r,l,d,$,k){if(super(lt.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",r=Number(At(r)),n=Number(At(n)),isNaN(r)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=r||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Ge(n,r+kr.Y_PADDING),this.imageHeight=r,typeof d=="function"&&(this.clickHandler=d),e!==lt.SKIP_SETUP&&(k?this.configure_(k):(this.flipRtl=!!$,this.altText=At(l)||""),this.setValue(At(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=At(e.alt))}initView(){this.imageElement=Y(z.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(ns,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(ns,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};kr.Y_PADDING=1,ao("field_image",kr),kr.prototype.DEFAULT_VALUE="";var Dh=class extends lt{constructor(e,n,r){super(lt.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",e!==lt.SKIP_SETUP&&(r&&this.configure_(r),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new Lt;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new Lt;let n;return this.fullBlockClickTarget_=!((n=this.getConstants())==null||!n.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,n=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&we()&&this.value_!==e&&n&&N(new(F(X.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new Lt;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.getColourTertiary())):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(x(e,"blocklyInvalidInput"),on(e,Jt.INVALID,!1)):(he(e,"blocklyInvalidInput"),on(e,Jt.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new Lt;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,n=!1){this.workspace_=this.sourceBlock_.workspace,!n&&this.workspace_.options.modalInputs&&(MS||t$||Zd)?this.showPromptEditor():this.showInlineEditor(n)}showPromptEditor(){$d(o.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e){const n=this.getSourceBlock();if(!n)throw new Lt;xd(this,n.RTL,this.widgetDispose_.bind(this),this.workspace_),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new Lt;o.setGroup$$module$build$src$core$events$utils(!0);const n=lr();var r=this.getClickTarget_();if(!r)throw Error("A click target has not been set.");he(r,"editing"),r=document.createElement("input"),r.className="blocklyHtmlInput",r.setAttribute("spellcheck",this.spellcheck_);const l=this.workspace_.getScale();var d=this.getConstants().FIELD_TEXT_FONTSIZE*l+"pt";return n.style.fontSize=d,r.style.fontSize=d,d=Dh.BORDERRADIUS*l+"px",this.isFullBlockField()&&(d=this.getScaledBBox(),d=(d.bottom-d.top)/2+"px",e=e.getParent()?e.getParent().getColourTertiary():this.sourceBlock_.getColourTertiary(),r.style.border=1*l+"px solid "+e,n.style.borderRadius=d,n.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(n.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*l+"px")),r.style.borderRadius=d,n.appendChild(r),r.value=r.defaultValue=this.getEditorText_(this.value_),r.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(r),r}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&we()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(N(new(F(X.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),o.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=lr().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");x(e,"editing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=_e(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper=_e(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(Ye(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onKeyInputWrapper&&(Ye(this.onKeyInputWrapper),this.onKeyInputWrapper=null)}onHtmlInputKeyDown_(e){e.key==="Enter"?(ar(this),ro()):e.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),ar(this),ro()):e.key==="Tab"&&(ar(this),ro(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&we()&&this.value_!==e&&N(new(F(X.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,n=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,n)}resizeEditor_(){Fs().then(()=>{const e=this.getSourceBlock();if(!e)throw new Lt;const n=lr(),r=this.getScaledBBox();n.style.width=r.right-r.left+"px",n.style.height=r.bottom-r.top+"px";const l=r.top;n.style.left=`${e.RTL?r.right-n.offsetWidth:r.left}px`,n.style.top=`${l}px`})}repositionForWindowResize(){let e;const n=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return n instanceof Ss?(ml(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),n)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};Dh.BORDERRADIUS=4;var Ph=class extends Dh{constructor(e,n,r){super(e,n,r)}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(At(e.text),void 0,e)}};ao("field_input",Ph),Ph.prototype.DEFAULT_VALUE="";var ew=class extends F${constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Bh=class extends yc{constructor(e,n){if(super(e,n),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;n=e.getNextBlock();)e=n;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},tw=class extends po{constructor(e){super(e),this.width=this.height=0,this.type|=U.getType("RIGHT_CONNECTION")}},nw=class extends j${constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const n=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||n}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},sw=class extends Cc{constructor(e,n){super(e,n),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new nw(this.constants_),this.bottomRow=new ew(this.constants_),this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new tw(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,n){return n?n instanceof zo||e instanceof rs||n instanceof rs?!0:e instanceof o.ValueInput$$module$build$src$core$inputs$value_input||e instanceof fo||e instanceof zo?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&U.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&U.isLeftRoundedCorner(e)&&n&&(U.isPreviousConnection(n)||U.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&U.isLeftSquareCorner(e)&&n&&U.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,n){if(U.isTopRow(e)&&U.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const r=U.isInputRow(e)&&e.hasStatement,l=U.isInputRow(n)&&n.hasStatement;return l||r?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),l&&r?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):U.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):U.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,n){const r=this.width-this.startX;return U.isInputRow(e)&&e.hasStatement||U.isInputRow(n)&&n.hasStatement?Math.max(r,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):r}getElemCenterline_(e,n){if(e.hasStatement&&!U.isSpacer(n)&&!U.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(U.isInlineInput(n)&&n instanceof Ei){const r=n.connectedBlock;if(r&&r.outputConnection&&r.nextConnection)return e.yPos+r.height/2}return super.getElemCenterline_(e,n)}addInput_(e,n){if((e instanceof fo||e instanceof zo)&&n.hasDummyInput&&n.align===o.Align$$module$build$src$core$inputs$align.LEFT&&e.align===o.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(n,e);else if(e instanceof rs){n.elements.push(new Bh(this.constants_,e)),n.hasStatement=!0,n.align===null&&(n.align=e.align);return}super.addInput_(e,n)}addAlignmentPadding_(e,n){if(this.rightAlignedDummyInputs.get(e)){let r;for(let l=0;l<e.elements.length;l++){const d=e.elements[l];if(U.isSpacer(d)&&(r=d),U.isField(d)&&d instanceof Ol&&d.parentInput===this.rightAlignedDummyInputs.get(e))break}if(r){r.width+=n,e.width+=n;return}}super.addAlignmentPadding_(e,n)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let n=e;for(let d=2;d<this.rows.length-1;d+=2){var r=this.rows[d-1];const $=this.rows[d];var l=this.rows[d+1];if(r=d===2?!!this.topRow.hasPreviousConnection:!!r.followsStatement,l=d+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!l.precedesStatement,U.isInputRow($)&&$.hasStatement){$.measure();let k,D;n=$.width-((D=(k=$.getLastInput())==null?void 0:k.width)!=null?D:0)+e}else if(r&&(d===2||l)&&U.isInputRow($)&&!$.hasStatement){l=$.xPos,r=null;for(let k=0;k<$.elements.length;k++){const D=$.elements[k];U.isSpacer(D)&&(r=D),r&&(U.isField(D)||U.isInput(D))&&l<n&&!(U.isField(D)&&D instanceof Ol&&(D.field instanceof Sr||D.field instanceof kr))&&(r.width+=n-l),l+=D.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var n=0,r=0;r<this.rows.length;r++){const l=this.rows[r];l.yPos=n,n+=l.height}this.height=n,r=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,n=e.height(r),r=e.width(r),this.outputConnection.height=n,this.outputConnection.width=r,this.outputConnection.startX=r,this.outputConnection.connectionOffsetY=e.connectionOffsetY(n),this.outputConnection.connectionOffsetX=e.connectionOffsetX(r),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=r,this.rightSide.height=n,this.rightSide.width=e,this.rightSide.centerline=n/2,this.rightSide.xPos=this.width+e),this.startX=r,this.width+=r+e,this.widthWithChildren+=r+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,n=0;n<this.rows.length;n++){var r=this.rows[n];if(!U.isInputRow(r))continue;e=r.elements[r.elements.length-2];let l=this.getNegativeSpacing_(r.elements[1]),d=this.getNegativeSpacing_(e);e=l+d;const $=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-e<$&&(e=this.width-$,l=e/2,d=e/2),r.elements.unshift(new is(this.constants_,-l)),r.elements.push(new is(this.constants_,-d))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,n=0;n<this.rows.length;n++)r=this.rows[n],U.isTopOrBottomRow(r)&&(r.elements[1].width-=e),r.width-=e,r.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const n=this.outputConnection.width;var r=this.outputConnection.shape.type;const l=this.constants_;if(1<this.inputRows.length)switch(r){case l.SHAPES.ROUND:return r=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=this.height/2>r?r:this.height/2,n-r*(1-Math.sin(Math.acos((r-this.constants_.SMALL_PADDING)/r)));default:return 0}if(U.isInlineInput(e)&&e instanceof Ei){const d=e.connectedBlock;return e=d?d.pathObject.outputShapeType:e.shape.type,e==null||d&&d.outputConnection&&(d.statementInputCount||d.nextConnection)||r===l.SHAPES.HEXAGONAL&&r!==e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][e]}return U.isField(e)&&e instanceof Ol?r===l.SHAPES.ROUND&&e.field instanceof Ph?n-2.75*l.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[r][0]:U.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let l=2;l<this.rows.length-1;l+=2){const d=this.rows[l-1],$=this.rows[l],k=this.rows[l+1];var e=l===2,n=l+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!k.precedesStatement;if(e?this.topRow.hasPreviousConnection:d.followsStatement){var r=$.elements[1];if(r=$.elements.length===3&&r instanceof Ol&&(r.field instanceof Sr||r.field instanceof kr),!e&&r)d.height-=this.constants_.SMALL_PADDING,k.height-=this.constants_.SMALL_PADDING,$.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!n)d.height+=this.constants_.SMALL_PADDING;else if(n){for(e=!1,n=0;n<$.elements.length;n++)if(r=$.elements[n],r instanceof Ei&&U.isInlineInput(r)&&r.connectedBlock&&!r.connectedBlock.isShadow()&&40<=r.connectedBlock.getHeightWidth().height){e=!0;break}e&&(d.height-=this.constants_.SMALL_PADDING,k.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},ow=class extends X${constructor(e,n,r){super(e,n,r),this.markerCircle=null}showWithInputOutput(e){const n=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle(e.x,e.y),this.setParent_(n),this.showCurrent_()}showWithOutput_(e){this.showWithInputOutput(e)}showWithInput_(e){this.showWithInputOutput(e)}showWithBlock_(e){e=e.getLocation();const n=e.getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(e),this.showCurrent_()}positionCircle(e,n){let r;(r=this.markerCircle)==null||r.setAttribute("cx",`${e}`);let l;(l=this.markerCircle)==null||l.setAttribute("cy",`${n}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=Y(z.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const e=this.getBlinkProperties_();Y(z.ANIMATE,e,this.markerCircle)}return this.markerSvg_}applyColour_(e){super.applyColour_(e);let n;(n=this.markerCircle)==null||n.setAttribute("fill",this.colour_);let r;if((r=this.markerCircle)==null||r.setAttribute("stroke",this.colour_),this.isCursor()){e=this.colour_+";transparent;transparent;";let l;(l=this.markerCircle)==null||l.firstElementChild.setAttribute("values",e)}}},iw=class extends Rh{constructor(e,n,r){super(e,n,r),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=r}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const n=e.getParent();e.isShadow()&&n&&this.svgPath.setAttribute("stroke",n.getColourTertiary());for(const r of this.outlines.values())r.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(e,n){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(n?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,n){e=this.getOutlinePath(e),e.setAttribute("d",n),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,Y(z.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let n,r;(n=this.outlines.get(e))==null||(r=n.parentNode)==null||r.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},a_=class extends xh{constructor(e){super(e)}makeConstants_(){return new ZI}makeRenderInfo_(e){return new sw(this,e)}makeDrawer_(e,n){return new QI(e,n)}makeMarkerDrawer(e,n){return new ow(e,this.getConstants(),n)}makePathObject(e,n){return new iw(e,n,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(e,n,r){return T("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),n.type===ge.OUTPUT_VALUE?e.isConnected()?Cs.PREVIEW_TYPE.REPLACEMENT_FADE:Cs.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(e,n,r)}};Qa("zelos",a_);var rw=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,n,r){o.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=r,r.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(n)&&(n.highlight(),this.staticConn=n)}finally{o.enable$$module$build$src$core$events$utils()}}previewConnection(e,n){if(e!==this.draggedConn||n!==this.staticConn){o.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,n)&&(this.markerConn=this.previewMarker(e,n)),this.workspace.getRenderer().shouldHighlightConnection(n)&&n.highlight(),this.draggedConn=e,this.staticConn=n}finally{o.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,n){return n.type===ge.PREVIOUS_STATEMENT||n.type===ge.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof a_)}previewMarker(e,n){const r=e.getSourceBlock(),l=this.createInsertionMarker(r),d=this.getMatchingConnection(r,l,e);if(!d)return null;l.queueRender(),xo(),d.connect(n);const $={x:n.x-d.x,y:n.y-d.y},k=d.getOffsetInBlock().clone();return Fs().then(()=>{if(!l.isDeadOrDying()){o.disable$$module$build$src$core$events$utils();try{l==null||l.positionNearConnection(d,$,k),l==null||l.getSvgRoot().setAttribute("visibility","visible")}finally{o.enable$$module$build$src$core$events$utils()}}}),d}createInsertionMarker(e){const n=ts(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!n)throw Error(`Failed to serialize source block. ${e.toDevString()}`);e=Oo(n,this.workspace);for(const r of e.getDescendants(!1))r.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,n,r){if(e=e.getConnections_(!0),n=n.getConnections_(!0),e.length!==n.length)return null;for(let l=0;l<e.length;l++)if(e[l]===r)return n[l];return null}hidePreview(){o.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{o.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const n=e.getSourceBlock(),r=n.outputConnection;let l;if((l=n.previousConnection)!=null&&l.targetConnection||r!=null&&r.targetConnection)n.unplug(!0);else{let d;(d=e.targetBlock())==null||d.unplug(!1)}n.dispose()}dispose(){this.hidePreview()}};i(ne.CONNECTION_PREVIEWER,uo,rw);var Ii={};Ii.Align=o.Align$$module$build$src$core$inputs$align,Ii.DummyInput=fo,Ii.EndRowInput=zo,Ii.Input=Al,Ii.StatementInput=rs,Ii.ValueInput=o.ValueInput$$module$build$src$core$inputs$value_input,Ii.inputTypes=o.inputTypes$$module$build$src$core$inputs$input_types;var lw=!1,aw;o.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=ke());var n=[];this.init(e),e=e.getTopBlocks(!0);for(let r=0,l;l=e[r];r++){let d=this.blockToCode(l);Array.isArray(d)&&(d=d[0]),d&&(l.outputConnection&&(d=this.scrubNakedValue(d),this.STATEMENT_PREFIX&&!l.suppressPrefixSuffix&&(d=this.injectId(this.STATEMENT_PREFIX,l)+d),this.STATEMENT_SUFFIX&&!l.suppressPrefixSuffix&&(d+=this.injectId(this.STATEMENT_SUFFIX,l))),n.push(d))}return n=n.join(`
`),n=this.finish(n),n=n.replace(/^\s+\n/,""),n=n.replace(/\n\s+$/,`
`),n=n.replace(/[ \t]+\n/g,`
`)}prefixLines(e,n){return n+e.replace(/(?!\n$)\n/g,`
`+n)}allNestedComments(e){const n=[];e=e.getDescendants(!0);for(let r=0;r<e.length;r++){const l=e[r].getCommentText();l&&n.push(l)}return n.length&&n.push(""),n.join(`
`)}blockToCode(e,n){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return n?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return n?"":this.blockToCode(e.getChildren(!1)[0]);var r=this.forBlock[e.type];if(typeof r!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(r=r.call(e,e,this),Array.isArray(r)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,r[0],n),r[1]]}if(typeof r=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,e)+r),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,r,n);if(r===null)return"";throw SyntaxError("Invalid code generated: "+r)}valueToCode(e,n,r){if(isNaN(r))throw TypeError("Expecting valid order from block: "+e.type);var l=e.getInputTargetBlock(n);if(!l&&!e.getInput(n))throw ReferenceError(`Input "${n}" doesn't exist on "${e.type}"`);if(!l||(n=this.blockToCode(l),n===""))return"";if(!Array.isArray(n))throw TypeError(`Expecting tuple from value block: ${l.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+l.type);if(!e)return"";l=!1;var d=Math.floor(r);const $=Math.floor(n);if(d<=$&&(d!==$||d!==0&&d!==99)){for(l=!0,d=0;d<this.ORDER_OVERRIDES.length;d++)if(this.ORDER_OVERRIDES[d][0]===r&&this.ORDER_OVERRIDES[d][1]===n){l=!1;break}}return l&&(e="("+e+")"),e}statementToCode(e,n){const r=e.getInputTargetBlock(n);if(!r&&!e.getInput(n))throw ReferenceError(`Input "${n}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(r),typeof e!="string")throw TypeError("Expecting code from statement block: "+(r&&r.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,n){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+e),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+e),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),e}injectId(e,n){return n=n.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+n+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,n){if(!this.definitions_[e]){const r=this.nameDB_.getDistinctName(e,o.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=r,Array.isArray(n)&&(n=n.join(`
`)),n=n.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);let l;for(;l!==n;)l=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]}getVariableName(e){return this.getName(e,o.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,o.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,n){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,n)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,n,r){return n}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},aw={},aw.CodeGenerator=o.CodeGenerator$$module$build$src$core$generator;var cw=class extends l_{constructor(e,n){super(e),this.flyout_=n}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const n=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:n.height*e,width:n.width*e,top:n.y*e,left:n.x*e}}getScrollMetrics(e,n,r){return n=r||this.getContentMetrics(),r=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(n.height+2*r)/e,width:(n.width+n.left+r)/e,top:0,left:0}}},Pl;(function(e){e.BLOCK="block",e.BUTTON="button"})(Pl||(Pl={}));var LD="WORKSPACE_AT_BLOCK_CAPACITY",Fh=class extends Ah{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.contents=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new ls(e),this.workspace_.setMetricsManager(new cw(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.id=C(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(e){return this.svgGroup_=Y(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=Y(z.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new r_(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(_e(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(_e(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:mt.ComponentWeight.FLYOUT_WEIGHT,capabilities:[mt.Capability.AUTOHIDEABLE,mt.Capability.DELETE_AREA,mt.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)Ye(e);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&V(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const n=e!==this.isVisible();this.visible=e,n&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const n=e!==this.containerVisible;this.containerVisible=e,n&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let n;(n=this.workspace_.scrollbar)==null||n.setContainerVisible(e)}positionAt_(e,n,r,l){let d;(d=this.svgGroup_)==null||d.setAttribute("width",`${e}`);let $;($=this.svgGroup_)==null||$.setAttribute("height",`${n}`),this.workspace_.setCachedParentSvgSize(e,n),this.svgGroup_&&Qe(this.svgGroup_,"translate("+r+"px,"+l+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(r,l),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const e of this.listeners)Ye(e);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=Pa(e),e=this.createFlyoutInfo(e),xo(this.workspace_),this.setContents(e.contents),this.layout_(e.contents,e.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(e){const n=[],r=[];this.permanentlyDisabled.length=0;const l=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const d of e){if("custom"in d){e=this.getDynamicCategoryContents(d.custom),e=Pa(e);const{contents:$,gaps:k}=this.createFlyoutInfo(e);n.push(...$),r.push(...k)}switch(d.kind.toUpperCase()){case"BLOCK":e=d;const $=this.createFlyoutBlock(e);n.push({type:Pl.BLOCK,block:$}),this.addBlockGap(e,r,l);break;case"SEP":this.addSeparatorGap(d,r,l);break;case"LABEL":e=this.createButton(d,!0),n.push({type:Pl.BUTTON,button:e}),r.push(l);break;case"BUTTON":e=this.createButton(d,!1),n.push({type:Pl.BUTTON,button:e}),r.push(l)}}return{contents:n,gaps:r}}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}createButton(e,n){return new vs(this.workspace_,this.targetWorkspace,e,n)}createFlyoutBlock(e){let n;return e.blockxml?(e=typeof e.blockxml=="string"?o.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,(n=this.getRecycledBlock(e.getAttribute("type")))||(n=cr(e,this.workspace_))):(n=this.getRecycledBlock(e.type),n||(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[Rn]),n=rl(e,this.workspace_))),n.isEnabled()||this.permanentlyDisabled.push(n),n}getRecycledBlock(e){let n=-1;for(let r=0;r<this.recycledBlocks.length;r++)if(this.recycledBlocks[r].type===e){n=r;break}return n===-1?void 0:this.recycledBlocks.splice(n,1)[0]}addBlockGap(e,n,r){let l;e.gap?l=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?o.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,l=parseInt(e.getAttribute("gap"))),n.push(!l||isNaN(l)?r:l)}addSeparatorGap(e,n,r){e=parseInt(String(e.gap)),!isNaN(e)&&0<n.length?n[n.length-1]=e:n.push(r)}clearOldBlocks(){var e=this.workspace_.getTopBlocks(!1);for(let r=0,l;l=e[r];r++)this.blockIsRecyclable_(l)?this.recycleBlock(l):l.dispose(!1,!1);for(e=0;e<this.mats.length;e++){const r=this.mats[e];r&&(Id(r),V(r))}this.mats.length=0;for(let r=0,l;l=this.buttons_[r];r++)l.dispose();this.buttons_.length=0;let n;(n=this.workspace_.getPotentialVariableMap())==null||n.clear()}emptyRecycledBlocks(){for(let e=0;e<this.recycledBlocks.length;e++)this.recycledBlocks[e].dispose();this.recycledBlocks=[]}blockIsRecyclable_(e){return!1}recycleBlock(e){const n=e.getRelativeToSurfaceXY();e.moveBy(-n.x,-n.y),this.recycledBlocks.push(e)}addBlockListeners_(e,n,r){this.listeners.push(_e(e,"pointerdown",null,this.blockMouseDown(n))),this.listeners.push(_e(r,"pointerdown",null,this.blockMouseDown(n))),this.listeners.push(Ze(e,"pointerenter",n,()=>{this.targetWorkspace.isDragging()||n.addSelect()})),this.listeners.push(Ze(e,"pointerleave",n,()=>{this.targetWorkspace.isDragging()||n.removeSelect()})),this.listeners.push(Ze(r,"pointerenter",n,()=>{this.targetWorkspace.isDragging()||n.addSelect()})),this.listeners.push(Ze(r,"pointerleave",n,()=>{this.targetWorkspace.isDragging()||n.removeSelect()}))}blockMouseDown(e){return n=>{const r=this.targetWorkspace.getGesture(n);r&&(r.setStartBlock(e),r.handleFlyoutStart(n,this))}}onMouseDown(e){const n=this.targetWorkspace.getGesture(e);n&&n.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()}createBlock(e){let n=null;o.disable$$module$build$src$core$events$utils();var r=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock(e)}finally{o.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=Ha(this.targetWorkspace,r),we()){for(o.setGroup$$module$build$src$core$events$utils(!0),r=0;r<e.length;r++){const l=e[r];N(new(F(X.VAR_CREATE))(l))}N(new(F(X.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity(),n}initFlyoutButton_(e,n,r){const l=e.createDom();e.moveTo(n,r),e.show(),this.listeners.push(_e(l,"pointerdown",this,this.onMouseDown)),this.buttons_.push(e)}createRect_(e,n,r,l,d){return n=Y(z.RECT,{"fill-opacity":0,x:n,y:r,height:l.height,width:l.width}),n.tooltip=e,ul(n),this.workspace_.getCanvas().insertBefore(n,e.getSvgRoot()),this.rectMap_.set(e,n),this.mats[d]=n}moveRectToBlock_(e,n){const r=n.getHeightWidth();e.setAttribute("width",String(r.width)),e.setAttribute("height",String(r.height)),n=n.getRelativeToSurfaceXY(),e.setAttribute("y",String(n.y)),e.setAttribute("x",String(this.RTL?n.x-r.width:n.x))}filterForCapacity(){const e=this.workspace_.getTopBlocks(!1);for(let n=0,r;r=e[n];n++)if(!this.permanentlyDisabled.includes(r)){const l=this.targetWorkspace.isCapacityAvailable(We(r));for(;r;)r.setDisabledReason(!l,LD),r=r.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const r=this.serializeBlock(e);return n.setResizesEnabled(!1),n=Oo(r,n),this.positionNewBlock(e,n),n}serializeBlock(e){return ts(e)}positionNewBlock(e,n){const r=this.targetWorkspace;var l=r.getOriginOffsetInPixels(),d=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),d=oe.sum(d,e),l=oe.difference(d,l),l.scale(1/r.scale),n.moveTo(new oe(l.x,l.y))}};Fh.FlyoutItemType=Pl;var c_=class extends Fh{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),l=n.getViewMetrics();n=n.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(r.top+(r.height-l.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const n=e.getAbsoluteMetrics(),r=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Me.LEFT?e.width:r.width-this.width_:this.toolboxPosition_===Me.LEFT?0:r.width:this.toolboxPosition_===Me.LEFT?0:r.width+n.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}}setBackgroundPath(e,n){const r=this.toolboxPosition_===Me.RIGHT;var l=e+this.CORNER_RADIUS;l=["M "+(r?l:0)+",0"],l.push("h",r?-e:e),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("v",Math.max(0,n)),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("h",r?e:-e),l.push("z"),this.svgBackground_.setAttribute("d",l.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var n=$s(e);if(n.y){const r=this.workspace_.getMetricsManager(),l=r.getScrollMetrics();n=r.getViewMetrics().top-l.top+n.y;let d;(d=this.workspace_.scrollbar)==null||d.setY(n),Xa(this.workspace_),ro()}e.preventDefault(),e.stopPropagation()}layout_(e,n){this.workspace_.scale=this.targetWorkspace.scale;var r=this.MARGIN;const l=this.RTL?r:r+this.tabWidth_;for(let D=0,q;q=e[D];D++)if(q.type==="block"){var d=q.block;if(!d)continue;var $=d.getDescendants(!1);for(let ht=0,ut;ut=$[ht];ht++)ut.isInFlyout=!0;$=d.getSvgRoot();const me=d.getHeightWidth();var k=d.outputConnection?l-this.tabWidth_:l;d.moveBy(k,r),k=this.createRect_(d,this.RTL?k-me.width:k,r,me,D),this.addBlockListeners_($,d,k),r+=me.height+n[D]}else q.type==="button"&&(d=q.button,this.initFlyoutButton_(d,l,r),r+=d.height+n[D])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const n=this.dragAngleRange_;return e<n&&e>-n||e<-180+n||e>180-n}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_===Me.LEFT?new it(-1e9,1e9,-1e9,n+e.width):new it(-1e9,1e9,n,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;var n=this.workspace_.getTopBlocks(!1);for(let l=0,d;d=n[l];l++){var r=d.getHeightWidth().width;d.outputConnection&&(r-=this.tabWidth_),e=Math.max(e,r)}for(let l=0,d;d=this.buttons_[l];l++)e=Math.max(e,d.width);if(e+=1.5*this.MARGIN+this.tabWidth_,e*=this.workspace_.scale,e+=Mt.scrollbarThickness,this.width_!==e){for(let l=0,d;d=n[l];l++){if(this.RTL){r=d.getRelativeToSurfaceXY().x;let $=e/this.workspace_.scale-this.MARGIN;d.outputConnection||($-=this.tabWidth_),d.moveBy($-r,0)}this.rectMap_.has(d)&&this.moveRectToBlock_(this.rectMap_.get(d),d)}if(this.RTL)for(let l=0,d;d=this.buttons_[l];l++)n=d.getPosition().y,d.moveTo(e/this.workspace_.scale-d.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Me.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};c_.registryName="verticalFlyout",i(ne.FLYOUTS_VERTICAL_TOOLBOX,uo,c_);var uw=class extends Fh{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),r=n.getScrollMetrics(),l=n.getViewMetrics();n=n.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(r.left+(r.width-l.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const n=e.getAbsoluteMetrics(),r=e.getViewMetrics();e=e.getToolboxMetrics();const l=this.toolboxPosition_===Me.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?l?e.height:r.height-this.height_:l?0:r.height:l?0:r.height+n.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,e,n)}}setBackgroundPath(e,n){const r=this.toolboxPosition_===Me.TOP,l=["M 0,"+(r?0:this.CORNER_RADIUS)];r?(l.push("h",e+2*this.CORNER_RADIUS),l.push("v",n),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("h",-e),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),l.push("h",e),l.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),l.push("v",n),l.push("h",-e-2*this.CORNER_RADIUS)),l.push("z"),this.svgBackground_.setAttribute("d",l.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var n=$s(e);if(n=n.x||n.y){const r=this.workspace_.getMetricsManager(),l=r.getScrollMetrics();n=r.getViewMetrics().left-l.left+n;let d;(d=this.workspace_.scrollbar)==null||d.setX(n),Xa(this.workspace_),ro()}e.preventDefault(),e.stopPropagation()}layout_(e,n){this.workspace_.scale=this.targetWorkspace.scale;const r=this.MARGIN;let l=r+this.tabWidth_;this.RTL&&(e=e.reverse());for(let D=0,q;q=e[D];D++)if(q.type==="block"){var d=q.block;if(d==null)continue;var $=d.getDescendants(!1);for(let ht=0,ut;ut=$[ht];ht++)ut.isInFlyout=!0;$=d.getSvgRoot();const me=d.getHeightWidth();var k=d.outputConnection?this.tabWidth_:0;k=this.RTL?l+me.width:l-k,d.moveBy(k,r),k=this.createRect_(d,k,r,me,D),l+=me.width+n[D],this.addBlockListeners_($,d,k)}else q.type==="button"&&(d=q.button,this.initFlyoutButton_(d,l,r),l+=d.width+n[D])}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const n=this.dragAngleRange_;return e<90+n&&e>90-n||e>-90-n&&e<-90+n}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_===Me.TOP?new it(-1e9,n+e.height,-1e9,1e9):new it(n,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=0;const n=this.workspace_.getTopBlocks(!1);for(let l=0,d;d=n[l];l++)e=Math.max(e,d.getHeightWidth().height);const r=this.buttons_;for(let l=0,d;d=r[l];l++)e=Math.max(e,d.height);if(e+=1.5*this.MARGIN,e*=this.workspace_.scale,e+=Mt.scrollbarThickness,this.height_!==e){for(let l=0,d;d=n[l];l++)this.rectMap_.has(d)&&this.moveRectToBlock_(this.rectMap_.get(d),d);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Me.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};i(ne.FLYOUTS_HORIZONTAL_TOOLBOX,uo,uw);var kc=class extends Hn{constructor(e,n,r,l,d){super(lt.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=kc.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new Ge(0,0),e!==lt.SKIP_SETUP&&(d?this.configure_(d):this.setTypes(r,l),n&&this.setValidator(n))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new Lt;this.variable||(e=o.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new Lt;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var n=this.getSourceBlock();if(!n)throw new Lt;const r=e.getAttribute("id"),l=e.textContent,d=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=o.getOrCreateVariablePackage$$module$build$src$core$variables(n.workspace,r,l,d),d!==null&&d!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+lo(e)+".");this.setValue(n.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.name,this.variable.type&&e.setAttribute("variabletype",this.variable.type),e}saveState(e){var n=this.saveLegacyState(kc);return n!==null||(this.initModel(),n={id:this.variable.getId()},e&&(n.name=this.variable.name,n.type=this.variable.type)),n}loadState(e){const n=this.getSourceBlock();if(!n)throw new Lt;this.loadLegacyState(kc,e)||(e=o.getOrCreateVariablePackage$$module$build$src$core$variables(n.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var n=this.getSourceBlock();if(!n)throw new Lt;return n=o.getVariable$$module$build$src$core$variables(n.workspace,e),n?(n=n.type,this.typeIsAllowed(n)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const n=this.getSourceBlock();if(!n)throw new Lt;this.variable=o.getVariable$$module$build$src$core$variables(n.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const n=this.getVariableTypes();if(!n)return!0;for(let r=0;r<n.length;r++)if(e===n[r])return!0;return!1}getVariableTypes(){var e=this.variableTypes;if(e===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(e=e||[""],e.length===0)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e}setTypes(e=null,n=""){if(Array.isArray(e)){let r=!1;for(let l=0;l<e.length;l++)e[l]===n&&(r=!0);if(!r)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}else if(e!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=n,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,n){if(e=n.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===K$){o.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===J$){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(At(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let n=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var r=this.getVariableTypes(),l=0;l<r.length;l++){const d=this.sourceBlock_.workspace.getVariablesOfType(r[l]);n=n.concat(d)}for(n.sort(dc.compareByName),r=[],l=0;l<n.length;l++)r[l]=[n[l].name,n[l].getId()];return r.push([o.Msg$$module$build$src$core$msg.RENAME_VARIABLE,K$]),o.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&r.push([o.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),J$]),r}};ao("field_variable",kc);var u_=class extends Dh{constructor(e,n,r,l,d,$){super(lt.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==lt.SKIP_SETUP&&($?this.configure_($):this.setConstraints(n,r,l),this.setValue(e),d&&this.setValidator(d))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,n,r){this.setMinInternal(e),this.setMaxInternal(n),this.setPrecisionInternal(r),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let n=String(this.precision_);n.includes("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const r=n.indexOf(".");this.decimalPlaces=r===-1?e?0:null:n.length-r-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return-1/0<this.min_&&(e.min=`${this.min_}`,on(e,Jt.VALUEMIN,this.min_)),1/0>this.max_&&(e.max=`${this.max_}`,on(e,Jt.VALUEMAX,this.max_)),e}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};ao("field_number",u_),u_.prototype.DEFAULT_VALUE=0;var dw=class extends Sr{constructor(e,n,r){super(String(e??""),n,r),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(At(e.text),void 0,e)}};ao("field_label_serializable",dw);var Rr=class extends lt{constructor(e,n,r){super(lt.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=Rr.CHECK_CHAR,e!==lt.SKIP_SETUP&&(r&&this.configure_(r),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(Rr);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();he(e,"blocklyCheckbox"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||Rr.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};Rr.CHECK_CHAR="",ao("field_checkbox",Rr),Rr.prototype.DEFAULT_VALUE=!1;var hw=class{constructor(e,n){this.draggable=e,this.workspace=n,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){this.draggable.startDrag(e)}onDrag(e,n){this.moveDraggable(e,n),n=this.getRoot(this.draggable),Ts(n)&&n.setDeleteStyle(this.wouldDeleteDraggable(e,n)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const n=this.getRoot(this.draggable);if(this.dragTarget!==e){let r;(r=this.dragTarget)==null||r.onDragExit(n),e==null||e.onDragEnter(n)}e==null||e.onDragOver(n),this.dragTarget=e}moveDraggable(e,n){n=this.pixelsToWorkspaceUnits(n),n=oe.sum(this.startLoc,n),this.draggable.drag(n,e)}wouldDeleteDraggable(e,n){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,mt.Capability.DELETE_AREA)?e.wouldDelete(n):!1}onDragEnd(e){const n=o.getGroup$$module$build$src$core$events$utils();var r=this.workspace.getDragTarget(e);const l=this.getRoot(this.draggable);if(r){let d;(d=this.dragTarget)==null||d.onDrop(l)}this.shouldReturnToStart(e,l)&&this.draggable.revertDrag(),(r=Ts(l)&&this.wouldDeleteDraggable(e,l))&&this.draggable instanceof Ss&&Md(this.draggable.getRootBlock()),this.draggable.endDrag(e),r&&Ts(l)&&(e=o.getGroup$$module$build$src$core$events$utils(),o.setGroup$$module$build$src$core$events$utils(n),l.dispose(),o.setGroup$$module$build$src$core$events$utils(e))}getRoot(e){return e instanceof Ss?e.getRootBlock():e}shouldReturnToStart(e,n){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(n):!1}pixelsToWorkspaceUnits(e){return e=new oe(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};i(ne.BLOCK_DRAGGER,uo,hw);var Rc={};Rc.BlockDragStrategy=VI,Rc.BubbleDragStrategy=vI,Rc.CommentDragStrategy=$I,Rc.Dragger=hw;var d_=class extends Us{constructor(e,n,r){super(e?e.workspace.id:void 0),this.type=X.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=n,this.blocks=r)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new d_),n.isStart=e.isStart,n.blockId=e.blockId,n.blocks=e.blocks,n}};i(ne.EVENT,X.BLOCK_DRAG,d_);var h_=class extends _r{constructor(e,n,r,l){super(e),this.type=X.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=n,this.oldValue=r,this.newValue=l)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new h_),n.name=e.name,n.oldValue=e.oldValue,n.newValue=e.newValue,n}isNull(){return this.oldValue===this.newValue}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(n=n.getBlockById(this.blockId),!n)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};i(ne.EVENT,X.BLOCK_FIELD_INTERMEDIATE_CHANGE,h_);var p_=class extends _r{constructor(e){super(e),this.type=X.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new p_),n.oldParentId=e.oldParentId,n.oldInputName=e.oldInputName,e.oldCoordinate&&(r=e.oldCoordinate.split(","),n.oldCoordinate=new oe(Number(r[0]),Number(r[1]))),n.newParentId=e.newParentId,n.newInputName=e.newInputName,e.newCoordinate&&(r=e.newCoordinate.split(","),n.newCoordinate=new oe(Number(r[0]),Number(r[1]))),e.reason!==void 0&&(n.reason=e.reason),e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var n=e.getBlockById(this.blockId);if(!n)throw Error("The block associated with the block move event could not be found");e={};const r=n.getParent();return r?(e.parentId=r.id,(n=r.getInputWithBlock(n))&&(e.inputName=n.name)):e.coordinate=n.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&oe.equals(this.oldCoordinate,this.newCoordinate)}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var r=n.getBlockById(this.blockId);if(r){var l=e?this.newParentId:this.oldParentId,d=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,l){var $=n.getBlockById(l);if(!$){console.warn("Can't connect to non-existent block: "+l);return}}if(r.getParent()&&r.unplug(),e)d=r.getRelativeToSurfaceXY(),r.moveBy(e.x-d.x,e.y-d.y,this.reason);else{n=r.outputConnection,(!n||r.previousConnection&&r.previousConnection.isConnected())&&(n=r.previousConnection);let k,D;r=(D=n)==null?void 0:D.type,d?(r=$.getInput(d))&&(k=r.connection):r===ge.PREVIOUS_STATEMENT&&(k=$.nextConnection),k&&n?n.connect(k):console.warn("Can't connect to non-existent input: "+d)}}else console.warn("Can't move non-existent block: "+this.blockId)}};i(ne.EVENT,X.BLOCK_MOVE,p_);var f_=class extends Us{constructor(e,n,r){super(e?e.workspace.id:void 0),this.type=X.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=n,this.bubbleType=r)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new f_),n.isOpen=e.isOpen,n.bubbleType=e.bubbleType,n.blockId=e.blockId,n}},m_;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(m_||(m_={})),i(ne.EVENT,X.BUBBLE_OPEN,f_);var $o=class extends gl{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=o.getGroup$$module$build$src$core$events$utils(),this.recordUndo=B())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new $o),n.commentId=e.commentId,n}static CommentCreateDeleteHelper(e,n){const r=e.getEventWorkspace_();if(n){if(!e.json)throw Error("Encountered a comment event without proper json");Fa(e.json,r)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(n=r.getCommentById(e.commentId))?n.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},g_=class extends $o{constructor(e,n,r){super(e),this.type=X.COMMENT_CHANGE,e&&(this.oldContents_=typeof n>"u"?"":n,this.newContents_=typeof r>"u"?"":r)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new g_),n.oldContents_=e.oldContents,n.newContents_=e.newContents,n}isNull(){return this.oldContents_===this.newContents_}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){var r=e?this.newContents_:this.oldContents_;if(r===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");n.setText(r)}else console.warn("Can't change non-existent comment: "+this.commentId)}};i(ne.EVENT,X.COMMENT_CHANGE,g_);var $_=class extends $o{constructor(e,n){super(e),this.newCollapsed=n,this.type=X.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new $_),n.newCollapsed=e.newCollapsed,n}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(n=n.getCommentById(this.commentId))?n.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};i(ne.EVENT,X.COMMENT_COLLAPSE,$_);var __=class extends $o{constructor(e){super(e),this.type=X.COMMENT_CREATE,e&&(this.xml=Ja(e),this.json=sl(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=lo(this.xml),e.json=this.json,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new __),n.xml=o.textToDom$$module$build$src$core$utils$xml(e.xml),n.json=e.json,n}run(e){$o.CommentCreateDeleteHelper(this,e)}};i(ne.EVENT,X.COMMENT_CREATE,__);var T_=class extends $o{constructor(e){super(e),this.type=X.COMMENT_DELETE,e&&(this.xml=Ja(e),this.json=sl(e,{addCoordinates:!0}))}run(e){$o.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=lo(this.xml),e.json=this.json,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new T_),n.xml=o.textToDom$$module$build$src$core$utils$xml(e.xml),n.json=e.json,n}};i(ne.EVENT,X.COMMENT_DELETE,T_);var b_=class extends Us{constructor(e,n){super(e?e.workspace.id:void 0),this.type=X.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=n)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new b_),n.isStart=e.isStart,n.commentId=e.commentId,n}};i(ne.EVENT,X.COMMENT_DRAG,b_);var y_=class extends $o{constructor(e){super(e),this.type=X.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new y_),r=e.oldCoordinate.split(","),n.oldCoordinate_=new oe(Number(r[0]),Number(r[1])),r=e.newCoordinate.split(","),n.newCoordinate_=new oe(Number(r[0]),Number(r[1])),n}isNull(){return oe.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");n.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};i(ne.EVENT,X.COMMENT_MOVE,y_);var E_=class extends $o{constructor(e){super(e),this.type=X.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new E_),n.oldSize=new Ge(e.oldWidth,e.oldHeight),n.newSize=new Ge(e.newWidth,e.newHeight),n}isNull(){return Ge.equals(this.oldSize,this.newSize)}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");n.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};i(ne.EVENT,X.COMMENT_RESIZE,E_);var v_=class extends Us{constructor(e,n,r){super(r),this.type=X.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=n??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,n,r){return n=super.fromJson(e,n,r??new v_),n.oldItem=e.oldItem,n.newItem=e.newItem,n}};i(ne.EVENT,X.TOOLBOX_ITEM_SELECT,v_);var pw=class extends gl{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=X.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};i(ne.EVENT,X.FINISHED_LOADING,pw);var fw,mw,gw,$w,_w,Tw,bw,yw,Ew,vw,Cw,Sw,Iw,ww,kw,Rw,xw,Ow,Aw,Nw,Mw,Lw,Dw,Pw,Bw,pe;o.BLOCK_CHANGE$$module$build$src$core$events$events=X.BLOCK_CHANGE,o.BLOCK_CREATE$$module$build$src$core$events$events=X.BLOCK_CREATE,o.BLOCK_DELETE$$module$build$src$core$events$events=X.BLOCK_DELETE,fw=X.BLOCK_DRAG,o.BLOCK_MOVE$$module$build$src$core$events$events=X.BLOCK_MOVE,mw=X.BLOCK_FIELD_INTERMEDIATE_CHANGE,gw=X.BUBBLE_OPEN,$w=X.BLOCK_CHANGE,_w=X.CLICK,Tw=X.COMMENT_CHANGE,bw=X.COMMENT_CREATE,yw=X.COMMENT_DELETE,Ew=X.COMMENT_MOVE,vw=X.COMMENT_RESIZE,Cw=X.COMMENT_DRAG,Sw=X.BLOCK_CREATE,Iw=X.BLOCK_DELETE,ww=X.FINISHED_LOADING,kw=X.MARKER_MOVE,Rw=X.BLOCK_MOVE,xw=X.SELECTED,Ow=X.THEME_CHANGE,Aw=X.TOOLBOX_ITEM_SELECT,Nw=X.TRASHCAN_OPEN,Mw=X.UI,Lw=X.VAR_CREATE,Dw=X.VAR_DELETE,Pw=X.VAR_RENAME,Bw=X.VIEWPORT_CHANGE,pe={},pe.Abstract=gl,pe.BLOCK_CHANGE=o.BLOCK_CHANGE$$module$build$src$core$events$events,pe.BLOCK_CREATE=o.BLOCK_CREATE$$module$build$src$core$events$events,pe.BLOCK_DELETE=o.BLOCK_DELETE$$module$build$src$core$events$events,pe.BLOCK_DRAG=fw,pe.BLOCK_FIELD_INTERMEDIATE_CHANGE=mw,pe.BLOCK_MOVE=o.BLOCK_MOVE$$module$build$src$core$events$events,pe.BUBBLE_OPEN=gw,pe.BUMP_EVENTS=fS,pe.BlockBase=_r,pe.BlockChange=Tr,pe.BlockCreate=A$,pe.BlockDelete=W$,pe.BlockDrag=d_,pe.BlockFieldIntermediateChange=h_,pe.BlockMove=p_,pe.BubbleOpen=f_,pe.BubbleType=m_,pe.CHANGE=$w,pe.CLICK=_w,pe.COMMENT_CHANGE=Tw,pe.COMMENT_CREATE=bw,pe.COMMENT_DELETE=yw,pe.COMMENT_DRAG=Cw,pe.COMMENT_MOVE=Ew,pe.COMMENT_RESIZE=vw,pe.CREATE=Sw,pe.Click=qg,pe.ClickTarget=Zg,pe.CommentBase=$o,pe.CommentChange=g_,pe.CommentCollapse=$_,pe.CommentCreate=__,pe.CommentDelete=T_,pe.CommentDrag=b_,pe.CommentMove=y_,pe.CommentResize=E_,pe.DELETE=Iw,pe.FINISHED_LOADING=ww,pe.FinishedLoading=pw,pe.MARKER_MOVE=kw,pe.MOVE=Rw,pe.MarkerMove=z$,pe.SELECTED=xw,pe.Selected=e_,pe.THEME_CHANGE=Ow,pe.TOOLBOX_ITEM_SELECT=Aw,pe.TRASHCAN_OPEN=Nw,pe.ThemeChange=N$,pe.ToolboxItemSelect=v_,pe.TrashcanOpen=n_,pe.UI=Mw,pe.UiBase=Us,pe.VAR_CREATE=Lw,pe.VAR_DELETE=Dw,pe.VAR_RENAME=Pw,pe.VIEWPORT_CHANGE=Bw,pe.VarBase=uc,pe.VarCreate=_$,pe.VarDelete=q$,pe.VarRename=Z$,pe.ViewportChange=M$,pe.clearPendingUndo=je,pe.disable=o.disable$$module$build$src$core$events$utils,pe.disableOrphans=ue,pe.enable=o.enable$$module$build$src$core$events$utils,pe.filter=Ue,pe.fire=N,pe.fromJson=ce,pe.get=F,pe.getDescendantIds=de,pe.getGroup=o.getGroup$$module$build$src$core$events$utils,pe.getRecordUndo=B,pe.isEnabled=we,pe.setGroup=o.setGroup$$module$build$src$core$events$utils,pe.setRecordUndo=o.setRecordUndo$$module$build$src$core$events$utils;var zs={};zs.BottomRow=ew,zs.ConstantProvider=ZI,zs.Drawer=QI,zs.MarkerSvg=ow,zs.PathObject=iw,zs.RenderInfo=sw,zs.Renderer=a_,zs.RightConnectionShape=tw,zs.StatementInput=Bh,zs.TopRow=nw,Xg();var qt={};qt.registerCleanup=Og,qt.registerCollapse=Ng,qt.registerCollapseExpandBlock=Ug,qt.registerComment=Bg,qt.registerCommentCreate=zg,qt.registerCommentDelete=jg,qt.registerCommentDuplicate=Wg,qt.registerCommentOptions=aS,qt.registerDefaultOptions=Xg,qt.registerDelete=Hg,qt.registerDeleteAll=Dg,qt.registerDisable=Vg,qt.registerDuplicate=Pg,qt.registerExpand=Mg,qt.registerHelp=Gg,qt.registerInline=Fg,qt.registerRedo=xg,qt.registerUndo=Rg;var Uh={};Uh.CommentView=TI,Uh.RenderedWorkspaceComment=_h,Uh.WorkspaceComment=$h;var xc={};xc.Bubble=ot,xc.MiniWorkspaceBubble=Vo,xc.TextBubble=RI,xc.TextInputBubble=CI;var Fw=class extends wh{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},Uw=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=ft(e.xPos,this.info_.startY);for(let n=0,r;r=e.elements[n];n++)U.isLeftSquareCorner(r)?this.steps_+=this.highlightConstants_.START_POINT:U.isLeftRoundedCorner(r)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):U.isPreviousConnection(r)?this.steps_+=this.notchPaths_.pathLeft:U.isHat(r)?this.steps_+=this.startPaths_.path(this.RTL_):U.isSpacer(r)&&r.width!==0&&(this.steps_+=$e("H",r.xPos+r.width-this.highlightOffset));this.steps_+=$e("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+$e("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const n=e.getLastInput();if(this.RTL_){const r=e.height-n.connectionHeight;this.steps_+=Kt(n.xPos+n.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+$e("v",r)}else this.steps_+=Kt(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const n=e.getLastInput();if(n)if(this.RTL_){const r=e.height-2*this.insideCornerPaths_.height;this.steps_+=Kt(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+$e("v",r)+this.insideCornerPaths_.pathBottom(this.RTL_)+co(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Kt(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+co(e.width-n.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const n=e.xPos+e.width-this.highlightOffset;e instanceof G$&&e.followsStatement&&(this.steps_+=$e("H",n)),this.RTL_&&(this.steps_+=$e("H",n),e.height>this.highlightOffset&&(this.steps_+=$e("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=$e("V",e.baseline-this.highlightOffset);else{const n=this.info_.bottomRow.elements[0];U.isLeftSquareCorner(n)?this.steps_+=Kt(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):U.isLeftRoundedCorner(n)&&(this.steps_+=Kt(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=Kt(this.info_.startX,e):(this.steps_+=Kt(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=$e("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,U.isLeftRoundedCorner(e.elements[0])?this.steps_+=$e("V",this.outsideCornerPaths_.height):this.steps_+=$e("V",e.capline+this.highlightOffset))}drawInlineInput(e){const n=this.highlightOffset,r=e.xPos+e.connectionWidth;var l=e.centerline-e.height/2;const d=e.width-e.connectionWidth,$=l+n;this.RTL_?(l=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=Kt(r-n,$)+$e("v",l)+this.puzzleTabPaths_.pathDown(this.RTL_)+$e("v",e)+$e("h",d)):this.inlineSteps_+=Kt(e.xPos+e.width+n,$)+$e("v",e.height)+$e("h",-d)+Kt(r,l+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},Vw=class extends kh{constructor(e,n){super(e,n),this.highlighter_=new Uw(n)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=$e("H",e.xPos+e.width)+$e("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const n=e.centerline-e.height/2;if(e.connectionModel){let r=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),e.connectionModel.setOffsetInBlock(r,n+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const n=e.getLastInput();if(n!=null&&n.connectionModel){let r=e.xPos+e.statementEdge+n.notchOffset;r=this.info_.RTL?-1*r:r+this.constants_.DARK_PATH_OFFSET,n.connectionModel.setOffsetInBlock(r,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const n=e.getLastInput();if(n&&n.connectionModel){let r=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),n.connectionModel.setOffsetInBlock(r,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const n=e.connection,r=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-r:r)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},Hw=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=ft(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(e+n)-n,l=ft(r,r)+Nt("a","0 0,0",e,Se(-r-n,e-r)),d=Nt("a","0 0,0",e+n,Se(e+n,e+n)),$=ft(r,-r)+Nt("a","0 0,0",e+n,Se(e-r,r+n));return{width:e+n,height:e,pathTop(k){return k?l:""},pathBottom(k){return k?d:$}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,r=(1-Math.SQRT1_2)*(e-n)+n,l=ft(r,r)+Nt("a","0 0,1",e-n,Se(e-r,-r+n)),d=ft(n,e)+Nt("a","0 0,1",e-n,Se(e,-e+n)),$=-r,k=ft(r,$)+Nt("a","0 0,1",e-n,Se(-r+n,-$-e));return{height:e,topLeft(D){return D?l:d},bottomLeft(){return k}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,r=ft(-2,-n+3.4)+co(-.45*e,-2.1),l=$e("v",2.5)+ft(.97*-e,2.5)+Un("q",[Se(.05*-e,10),Se(.3*e,9.5)])+ft(.67*e,-1.9)+$e("v",2.5),d=$e("v",-1.5)+ft(-.92*e,-.5)+Un("q",[Se(-.19*e,-5.5),Se(0,-11)])+ft(.92*e,1),$=ft(-5,n-.7)+co(.46*e,-2.1);return{width:e,height:n,pathUp(k){return k?r:d},pathDown(k){return k?l:$}}}makeNotch(){return{pathLeft:$e("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:co(5.1,2.6)+ft(-10.2,6.8)+co(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,n=ft(25,-8.7)+Un("c",[Se(29.7,-6.2),Se(57.2,-.5),Se(75,8.7)]),r=Un("c",[Se(17.8,-9.2),Se(45.3,-14.9),Se(75,-8.7)])+Kt(100.5,e+.5);return{path(l){return l?n:r}}}},Gw=class extends V${constructor(e,n){super(e,n),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},jw=class extends yc{constructor(e,n){super(e,n),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},Ww=class extends Cc{constructor(e,n){super(e,n),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof rs||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,n){this.isInline&&e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new Gw(this.constants_,e)),n.hasInlineInput=!0):e instanceof rs?(n.elements.push(new jw(this.constants_,e)),n.hasStatement=!0):e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new Ih(this.constants_,e)),n.hasExternalInput=!0):(e instanceof fo||e instanceof zo)&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||n.align!==null||(n.align=e.align)}addElemSpacing_(){let e=!1;for(let r=0,l;l=this.rows[r];r++)l.hasExternalInput&&(e=!0);for(let r=0,l;l=this.rows[r];r++){var n=l.elements;if(l.elements=[],l.startsWithElemSpacer()&&l.elements.push(new is(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let d=0;d<n.length-1;d++){l.elements.push(n[d]);const $=this.getInRowSpacing_(n[d],n[d+1]);l.elements.push(new is(this.constants_,$))}l.elements.push(n[n.length-1]),l.endsWithElemSpacer()&&(n=this.getInRowSpacing_(n[n.length-1],null),e&&l.hasDummyInput&&(n+=this.constants_.TAB_WIDTH),l.elements.push(new is(this.constants_,n)))}}}getInRowSpacing_(e,n){if(!e)return n&&U.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&U.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&U.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!U.isInput(e)&&(!n||U.isStatementInput(n)))return U.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:U.isIcon(e)?2*this.constants_.LARGE_PADDING+1:U.isHat(e)?this.constants_.NO_PADDING:U.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:U.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:U.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(U.isInput(e)&&!n){if(U.isExternalInput(e))return this.constants_.NO_PADDING;if(U.isInlineInput(e))return this.constants_.LARGE_PADDING;if(U.isStatementInput(e))return this.constants_.NO_PADDING}if(!U.isInput(e)&&n&&U.isInput(n)){if(U.isField(e)&&e.isEditable){if(U.isInlineInput(n)||U.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(U.isInlineInput(n)||U.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(U.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(U.isIcon(e)&&n&&!U.isInput(n))return this.constants_.LARGE_PADDING;if(U.isInlineInput(e)&&n&&U.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(U.isLeftSquareCorner(e)&&n){if(U.isHat(n))return this.constants_.NO_PADDING;if(U.isPreviousConnection(n))return n.notchOffset;if(U.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(U.isLeftRoundedCorner(e)&&n){if(U.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(U.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return U.isField(e)&&n&&U.isField(n)&&e.isEditable===n.isEditable||n&&U.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,n){return U.isTopRow(e)&&U.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:U.isTopRow(e)||U.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){if(U.isSpacer(n))return e.yPos+n.height/2;if(U.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,U.isNextConnection(n)?e+n.height/2:e-n.height/2;if(U.isTopRow(e))return U.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;let r=e.yPos;return U.isField(n)||U.isIcon(n)?(r+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(r+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):r=U.isInlineInput(n)?r+n.height/2:r+e.height/2,r}alignRowElements_(){if(this.isInline){var e=0,n=new WeakMap,r=null;for(let l=this.rows.length-1,d;d=this.rows[l];l--)n.set(d,e),U.isInputRow(d)&&(d.hasStatement&&this.alignStatementRow_(d),r&&r.hasStatement&&d.width<r.width?n.set(d,r.width):e=d.hasStatement?d.width:Math.max(e,d.width),r=d);e=0;for(let l=0,d;d=this.rows[l];l++)d.hasStatement?e=this.getDesiredRowWidth_(d):U.isSpacer(d)?d.width=Math.max(e,n.get(d)):(r=d.width,e=Math.max(e,n.get(d))-r,0<e&&this.addAlignmentPadding_(d,e),e=d.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,n=0;for(let l=0,d;d=this.rows[l];l++){d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var r=n-this.topRow.ascenderHeight;d===this.bottomRow&&r<this.constants_.MIN_BLOCK_HEIGHT&&(r=this.constants_.MIN_BLOCK_HEIGHT-r,this.bottomRow.height+=r,n+=r),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(r=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,r.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},zw=class extends Rh{constructor(e,n,r){super(e,n,r),this.constants=r,this.colourDark="#000000",this.svgPathDark=Y(z.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=Y(z.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=rr("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},Xw=class extends xh{constructor(e){super(e),this.highlightConstants=null}init(e,n){super.init(e,n),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,n){super.refreshDom(e,n),this.getHighlightConstants().init()}makeConstants_(){return new Fw}makeRenderInfo_(e){return new Ww(this,e)}makeDrawer_(e,n){return new Vw(e,n)}makePathObject(e,n){return new zw(e,n,this.getConstants())}makeHighlightConstants_(){return new Hw(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Qa("geras",Xw);var _o={};_o.ConstantProvider=Fw,_o.Drawer=Vw,_o.HighlightConstantProvider=Hw,_o.Highlighter=Uw,_o.InlineInput=Gw,_o.PathObject=zw,_o.RenderInfo=Ww,_o.Renderer=Xw,_o.StatementInput=jw;var Yw=class extends Cc{constructor(e,n){super(e,n)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var n=0;n<this.rows.length;n++)if(this.rows[n].hasExternalInput){e=!0;break}for(n=0;n<this.rows.length;n++){const l=this.rows[n];var r=l.elements;if(l.elements=[],l.startsWithElemSpacer()&&l.elements.push(new is(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(let d=0;d<r.length-1;d++){l.elements.push(r[d]);const $=this.getInRowSpacing_(r[d],r[d+1]);l.elements.push(new is(this.constants_,$))}l.elements.push(r[r.length-1]),l.endsWithElemSpacer()&&(r=this.getInRowSpacing_(r[r.length-1],null),e&&l.hasDummyInput&&(r+=this.constants_.TAB_WIDTH),l.elements.push(new is(this.constants_,r)))}}}getInRowSpacing_(e,n){if(!e)return n&&U.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&U.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&U.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!U.isInput(e)&&!n)return U.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:U.isIcon(e)?2*this.constants_.LARGE_PADDING+1:U.isHat(e)?this.constants_.NO_PADDING:U.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:U.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:U.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(U.isInput(e)&&!n){if(U.isExternalInput(e))return this.constants_.NO_PADDING;if(U.isInlineInput(e))return this.constants_.LARGE_PADDING;if(U.isStatementInput(e))return this.constants_.NO_PADDING}if(!U.isInput(e)&&n&&U.isInput(n)){if(U.isField(e)&&e.isEditable){if(U.isInlineInput(n)||U.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(U.isInlineInput(n)||U.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(U.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(U.isIcon(e)&&n&&!U.isInput(n))return this.constants_.LARGE_PADDING;if(U.isInlineInput(e)&&n&&U.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(U.isLeftSquareCorner(e)&&n){if(U.isHat(n))return this.constants_.NO_PADDING;if(U.isPreviousConnection(n)||U.isNextConnection(n))return n.notchOffset}return U.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:U.isField(e)&&n&&U.isField(n)&&e.isEditable===n.isEditable||n&&U.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,n){return U.isTopRow(e)&&U.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:U.isTopRow(e)||U.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){if(U.isSpacer(n))return e.yPos+n.height/2;if(U.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,U.isNextConnection(n)?e+n.height/2:e-n.height/2;if(U.isTopRow(e))return U.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;let r=e.yPos;return r=U.isField(n)&&e.hasStatement?r+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):r+e.height/2}finalize_(){let e=0,n=0;for(var r=0;r<this.rows.length;r++){const d=this.rows[r];d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var l=n-this.topRow.ascenderHeight;d===this.bottomRow&&l<this.constants_.MIN_BLOCK_HEIGHT&&(l=this.constants_.MIN_BLOCK_HEIGHT-l,this.bottomRow.height+=l,n+=l),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(r=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,r.getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline}},Kw=class extends xh{constructor(e){super(e)}makeRenderInfo_(e){return new Yw(this,e)}};Qa("thrasos",Kw);var C_={};C_.RenderInfo=Yw,C_.Renderer=Kw;var DD={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},PD={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},BD=new Cr("zelos",DD,PD),FD={Classic:bh,Zelos:BD},S_=class{constructor(e,n,r){this.id_=e.toolboxitemid||I(),this.level_=(this.parent_=r||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}},Xs=class extends S_{constructor(e,n,r){super(e,n,r),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(r)}}parseCategoryDef_(e){this.name_="name"in e?At(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),di(this.htmlDiv_,Hs.TREEITEM),on(this.htmlDiv_,Jt.SELECTED,!1),on(this.htmlDiv_,Jt.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),di(this.iconDom_,Hs.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&on(this.htmlDiv_,Jt.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div"),n=this.cssConfig_.container;return n&&he(e,n),e}createRowContainer_(){const e=document.createElement("div");var n=this.cssConfig_.row;return n&&he(e,n),n=`${Xs.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e}createRowContentsContainer_(){const e=document.createElement("div"),n=this.cssConfig_.rowcontentcontainer;return n&&he(e,n),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const n=this.cssConfig_.icon;n&&he(e,n)}return e.style.display="inline-block",e}createLabelDom_(e){const n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,(e=this.cssConfig_.label)&&he(n,e),n}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=Xs.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const n=e.categorystyle||e.categoryStyle;if((e=e.colour)&&n)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(n)return this.getColourfromStyle(n);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var n=this.workspace_.getTheme();if(e&&n){if((n=n.categoryStyles[e])&&n.colour)return this.parseColour(n.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=At(e),e==null||e==="")return"";var n=Number(e);return isNaN(n)?(n=ir(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):Pm(n)}openIcon_(e){if(e){var n=this.cssConfig_.closedicon;n&&b(e,n),(n=this.cssConfig_.openicon)&&he(e,n)}}closeIcon_(e){if(e){var n=this.cssConfig_.openicon;n&&b(e,n),(n=this.cssConfig_.closedicon)&&he(e,n)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var n=this.cssConfig_.selected;if(e){const r=this.parseColour(Xs.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||r,n&&he(this.rowDiv_,n)}else this.rowDiv_.style.backgroundColor="",n&&x(this.rowDiv_,n);on(this.htmlDiv_,Jt.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Pa(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){V(this.htmlDiv_)}};Xs.registrationName="category",Xs.nestedPadding=19,Xs.borderWidth=8,Xs.defaultBackgroundColour="#57e",ct(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),i(ne.TOOLBOX_ITEM,Xs.registrationName,Xs);var Oc=class extends S_{constructor(e,n){super(e,n),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div"),n=this.cssConfig_.container;return n&&he(e,n),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){V(this.htmlDiv)}};Oc.registrationName="sep",ct(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),i(ne.TOOLBOX_ITEM,Oc.registrationName,Oc);var Bl=class extends Xs{constructor(e,n,r){super(e,n,r),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxContents",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const n=e.contents;if(n){this.flyoutItems_=[],e=!0;for(let r=0;r<n.length;r++){const l=n[r];!h(ne.TOOLBOX_ITEM,l.kind)||l.kind.toLowerCase()===Oc.registrationName&&e?(this.flyoutItems_.push(l),e=!0):(this.createToolboxItem(l),e=!1)}}}}createToolboxItem(e){let n=e.kind;n.toUpperCase()==="CATEGORY"&&cd(e)&&(n=Bl.registrationName),e=new(p(ne.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),di(this.subcategoriesDiv_,Hs.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),on(this.htmlDiv_,Jt.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const n=this.cssConfig_.icon;n&&he(e,n),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const n=document.createElement("div");n.style.display="none";var r=this.cssConfig_.contents;for(r&&he(n,r),r=0;r<e.length;r++){const l=e[r];l.init();const d=l.getDiv();if(n.appendChild(d),l.getClickTarget){let $;($=l.getClickTarget())==null||$.setAttribute("id",l.getId())}}return n}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let n;(n=this.parentToolbox_.getFlyout())==null||n.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}on(this.htmlDiv_,Jt.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const n=this.getChildToolboxItems();for(let r=0;r<n.length;r++)n[r].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Bl.registrationName="collapsibleCategory",i(ne.TOOLBOX_ITEM,Bl.registrationName,Bl);var Jw=class extends Ah{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const n=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),le(this.flyout.createDom("svg"),n),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:mt.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[mt.Capability.AUTOHIDEABLE,mt.Capability.DELETE_AREA,mt.Capability.DRAG_TARGET]})}createDom_(e){e=e.getParentSvg();const n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,di(this.contentsDiv_,Hs.TREE),n.appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),he(e,"blocklyToolboxDiv"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return he(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,n){e=_e(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),n=_e(n,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(n)}onClick_(e){if(sn(e)||e.target===this.HtmlDiv)ke().hideChaff(!1);else{var n=e.target.getAttribute("id");n&&(n=this.getToolboxItemById(n),n.isSelectable()&&(this.setSelectedItem(n),n.onClick(e))),ke().hideChaff(!0)}rt()}onKeyDown_(e){let n=!1;switch(e.key){case"ArrowDown":n=this.selectNext();break;case"ArrowUp":n=this.selectPrevious();break;case"ArrowLeft":n=this.selectParent();break;case"ArrowRight":n=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(e)),n&&e.preventDefault()}createFlyout_(){const e=this.workspace_,n=new Es({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?m(ne.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):m(ne.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(n)}render(e){this.toolboxDef_=e;for(let n=0;n<this.contents_.length;n++){const r=this.contents_[n];r&&r.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const n=document.createDocumentFragment();for(let r=0;r<e.length;r++)this.createToolboxItem(e[r],n);this.contentsDiv_.appendChild(n)}createToolboxItem(e,n){var r=e.kind;r.toUpperCase()==="CATEGORY"&&cd(e)&&(r=Bl.registrationName),(r=p(ne.TOOLBOX_ITEM,r.toLowerCase()))&&(e=new r(e,this),e.init(),this.addToolboxItem_(e),(r=e.getDiv())&&n.appendChild(r),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible()){e=e.getChildToolboxItems();for(let n=0;n<e.length;n++)this.addToolboxItem_(e[n])}}getToolboxItems(){return this.contents_}addStyle(e){e&&this.HtmlDiv&&he(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&x(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const n=e.top,r=n+e.height,l=e.left;return e=l+e.width,this.toolboxPosition===Me.TOP?new it(-1e7,r,-1e7,1e7):this.toolboxPosition===Me.BOTTOM?new it(n,1e7,-1e7,1e7):this.toolboxPosition===Me.LEFT?new it(-1e7,1e7,-1e7,e):new it(-1e7,1e7,l,1e7)}wouldDelete(e){return e instanceof Ss?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(Ts(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(n):this.removeStyle(n)}getToolboxItemById(e){return this.contentMap_[e]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===Me.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition===Me.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition===Me.LEFT?e.scrollX+n.width:e.scrollX,this.toolboxPosition===Me.TOP?e.scrollY+n.height:e.scrollY),He(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let e=0;e<this.contents_.length;e++){const n=this.contents_[e];n.refreshTheme&&n.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const n=this.selectedItem_;!e&&!n||e&&!hS(e)||(this.shouldDeselectItem_(n,e)&&n!==null&&this.deselectItem_(n),this.shouldSelectItem_(n,e)&&e!==null&&this.selectItem_(n,e),this.updateFlyout_(n,e),this.fireSelectEvent(n,e))}shouldDeselectItem_(e,n){return e!==null&&(!e.isCollapsible()||e!==n)}shouldSelectItem_(e,n){return n!==null&&n!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),on(this.contentsDiv_,Jt.ACTIVEDESCENDANT,"")}selectItem_(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),on(this.contentsDiv_,Jt.ACTIVEDESCENDANT,n.getId())}selectItemByPosition(e){-1<e&&e<this.contents_.length&&(e=this.contents_[e],e.isSelectable()&&this.setSelectedItem(e))}updateFlyout_(e,n){n&&(e!==n||n.isCollapsible())&&n.getContents().length?(this.flyout.show(n.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,n){const r=e&&e.getName();let l=n&&n.getName();e===n&&(l=null),e=new(F(X.TOOLBOX_ITEM_SELECT))(r,l,this.workspace_.id),N(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){let n=this.contents_[e];for(;n&&!n.isSelectable();)n=this.contents_[++e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;let e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){let n=this.contents_[e];for(;n&&!n.isSelectable();)n=this.contents_[--e];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)Ye(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),V(this.HtmlDiv))}};ct(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),i(ne.TOOLBOX,uo,Jw);var UD="11.2.2",VD=ge.INPUT_VALUE,HD=ge.OUTPUT_VALUE,GD=ge.NEXT_STATEMENT,jD=ge.PREVIOUS_STATEMENT,WD=Me.TOP,zD=Me.BOTTOM,XD=Me.LEFT,YD=Me.RIGHT;Nl.prototype.newBlock=function(e,n){return new vi(this,e,n)},ls.prototype.newBlock=function(e,n){return new Ss(this,e,n)},Nl.prototype.newComment=function(e){return new $h(this,e)},ls.prototype.newComment=function(e){return new _h(this,e)},ls.newTrashcan=function(e){return new zI(e)},Vo.prototype.newWorkspaceSvg=function(e){return new ls(e)},o.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=Ud(e),e=e[0].concat(e[1]);for(let n=0;n<e.length;n++)this.getName(e[n][0],o.Names$$module$build$src$core$names.NameType.PROCEDURE)};var K={};return K.ASTNode=Z,K.BasicCursor=Ic,K.Block=vi,K.BlockSvg=Ss,K.Blocks=Vn,K.COLLAPSED_FIELD_NAME=oh,K.COLLAPSED_INPUT_NAME=cc,K.COLLAPSE_CHARS=BI,K.CodeGenerator=o.CodeGenerator$$module$build$src$core$generator,K.CollapsibleToolboxCategory=Bl,K.ComponentManager=mt,K.Connection=Ke,K.ConnectionChecker=FI,K.ConnectionDB=Rl,K.ConnectionType=ge,K.ContextMenu=vr,K.ContextMenuItems=qt,K.ContextMenuRegistry=De,K.Css=i$,K.Cursor=t_,K.DELETE_VARIABLE_ID=J$,K.DeleteArea=Ah,K.DragTarget=WI,K.DropDownDiv=$n,K.Events=pe,K.Extensions=Ws,K.Field=lt,K.FieldCheckbox=Rr,K.FieldDropdown=Hn,K.FieldImage=kr,K.FieldLabel=Sr,K.FieldLabelSerializable=dw,K.FieldNumber=u_,K.FieldTextInput=Ph,K.FieldVariable=kc,K.Flyout=Fh,K.FlyoutButton=vs,K.FlyoutMetricsManager=cw,K.Generator=o.CodeGenerator$$module$build$src$core$generator,K.Gesture=Uo,K.Grid=L$,K.HorizontalFlyout=uw,K.INPUT_VALUE=VD,K.Input=Al,K.InsertionMarkerManager=Cs,K.InsertionMarkerPreviewer=rw,K.Marker=HI,K.MarkerManager=fc,K.Menu=h$,K.MenuItem=p$,K.MetricsManager=l_,K.Msg=o.Msg$$module$build$src$core$msg,K.NEXT_STATEMENT=GD,K.Names=o.Names$$module$build$src$core$names,K.OPPOSITE_TYPE=wr,K.OUTPUT_VALUE=HD,K.Options=Es,K.PREVIOUS_STATEMENT=jD,K.PROCEDURE_CATEGORY_NAME=Sh,K.Procedures=xn,K.RENAME_VARIABLE_ID=K$,K.RenderedConnection=On,K.Scrollbar=Mt,K.ScrollbarPair=r_,K.ShortcutItems=go,K.ShortcutRegistry=tt,K.TOOLBOX_AT_BOTTOM=zD,K.TOOLBOX_AT_LEFT=XD,K.TOOLBOX_AT_RIGHT=YD,K.TOOLBOX_AT_TOP=WD,K.TabNavigateCursor=GI,K.Theme=Cr,K.ThemeManager=PI,K.Themes=FD,K.Toolbox=Jw,K.ToolboxCategory=Xs,K.ToolboxItem=S_,K.ToolboxSeparator=Oc,K.Tooltip=ss,K.Touch=pr,K.Trashcan=zI,K.UnattachedFieldError=Lt,K.VARIABLE_CATEGORY_NAME=T$,K.VARIABLE_DYNAMIC_CATEGORY_NAME=Y$,K.VERSION=UD,K.VariableMap=Q$,K.VariableModel=dc,K.Variables=hn,K.VariablesDynamic=Ir,K.VerticalFlyout=c_,K.WidgetDiv=js,K.Workspace=Nl,K.WorkspaceAudio=UI,K.WorkspaceDragger=bI,K.WorkspaceSvg=ls,K.Xml=_n,K.ZoomControls=jS,K.blockAnimations=Tc,K.blockRendering=st,K.browserEvents=Do,K.bubbles=xc,K.bumpObjects=Oh,K.clipboard=wc,K.comments=Uh,K.common=dn,K.config=o.config$$module$build$src$core$config,K.constants=uD,K.defineBlocksWithJsonArray=Rt,K.dialog=gr,K.dragging=Rc,K.fieldRegistry=yh,K.geras=_o,K.getMainWorkspace=ke,K.getSelected=Re,K.hasBubble=ll,K.hideChaff=pS,K.icons=yi,K.inject=QC,K.inputs=Ii,K.isCopyable=ec,K.isDeletable=Ts,K.isDraggable=ur,K.isIcon=dg,K.isObservable=Fd,K.isPaster=cS,K.isRenderedElement=uS,K.isSelectable=dS,K.isSerializable=Ua,K.isVariableBackedParameterModel=om,K.layers=dD,K.procedures=xn,K.registry=Mo,K.renderManagement=rh,K.serialization=MD,K.setLocale=$$,K.setParentContainer=Tt,K.svgResize=He,K.thrasos=C_,K.uiPosition=mr,K.utils=yt,K.zelos=zs,K.__namespace__=o,K})}(uT)),uT.exports}var OH=nr();const AH=Ea(OH),{ASTNode:X3,BasicCursor:Y3,Block:K3,BlockSvg:J3,Blocks:q3,COLLAPSED_FIELD_NAME:Z3,COLLAPSED_INPUT_NAME:Q3,COLLAPSE_CHARS:e5,CodeGenerator:t5,CollapsibleToolboxCategory:n5,ComponentManager:s5,Connection:o5,ConnectionChecker:i5,ConnectionDB:r5,ConnectionType:l5,ContextMenu:a5,ContextMenuItems:c5,ContextMenuRegistry:u5,Css:d5,Cursor:h5,DELETE_VARIABLE_ID:p5,DeleteArea:f5,DragTarget:m5,DropDownDiv:g5,Events:$5,Extensions:_5,Field:T5,FieldCheckbox:b5,FieldDropdown:y5,FieldImage:E5,FieldLabel:v5,FieldLabelSerializable:C5,FieldNumber:S5,FieldTextInput:I5,FieldVariable:w5,Flyout:k5,FlyoutButton:R5,FlyoutMetricsManager:x5,Generator:O5,Gesture:A5,Grid:N5,HorizontalFlyout:M5,INPUT_VALUE:L5,Input:D5,InsertionMarkerManager:P5,InsertionMarkerPreviewer:B5,Marker:F5,MarkerManager:U5,Menu:V5,MenuItem:H5,MetricsManager:G5,Msg:j5,NEXT_STATEMENT:W5,Names:z5,OPPOSITE_TYPE:X5,OUTPUT_VALUE:Y5,Options:K5,PREVIOUS_STATEMENT:J5,PROCEDURE_CATEGORY_NAME:q5,Procedures:Z5,RENAME_VARIABLE_ID:Q5,RenderedConnection:eY,Scrollbar:tY,ScrollbarPair:nY,ShortcutItems:sY,ShortcutRegistry:oY,TOOLBOX_AT_BOTTOM:iY,TOOLBOX_AT_LEFT:rY,TOOLBOX_AT_RIGHT:lY,TOOLBOX_AT_TOP:aY,TabNavigateCursor:cY,Theme:NH,ThemeManager:uY,Themes:dY,Toolbox:hY,ToolboxCategory:XN,ToolboxItem:pY,ToolboxSeparator:fY,Tooltip:mY,Touch:gY,Trashcan:$Y,UnattachedFieldError:_Y,VARIABLE_CATEGORY_NAME:TY,VARIABLE_DYNAMIC_CATEGORY_NAME:bY,VERSION:yY,VariableMap:EY,VariableModel:vY,Variables:CY,VariablesDynamic:SY,VerticalFlyout:IY,WidgetDiv:wY,Workspace:kY,WorkspaceAudio:RY,WorkspaceDragger:xY,WorkspaceSvg:OY,Xml:Yc,ZoomControls:AY,blockAnimations:NY,blockRendering:MY,browserEvents:LY,bubbles:DY,bumpObjects:PY,clipboard:BY,comments:FY,common:UY,config:VY,constants:HY,defineBlocksWithJsonArray:GY,dialog:jY,dragging:WY,fieldRegistry:zY,geras:XY,getMainWorkspace:YY,getSelected:KY,hasBubble:JY,hideChaff:qY,icons:ZY,inject:MH,inputs:QY,isCopyable:eK,isDeletable:tK,isDraggable:nK,isIcon:sK,isObservable:oK,isPaster:iK,isRenderedElement:rK,isSelectable:lK,isSerializable:aK,isVariableBackedParameterModel:cK,layers:uK,procedures:dK,registry:zR,renderManagement:hK,serialization:YN,setLocale:pK,setParentContainer:fK,svgResize:mK,thrasos:gK,uiPosition:$K,utils:LH,zelos:_K}=AH;function DH(t,s){var o=null,i=null,a=function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];i=function(){o=null,t.apply(void 0,u)},o!=null&&clearTimeout(o),o=window.setTimeout(i,s)},c=function(){o!=null&&(clearTimeout(o),i&&i())};return[a,c]}var df=function(){return df=Object.assign||function(t){for(var s,o=1,i=arguments.length;o<i;o++){s=arguments[o];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},df.apply(this,arguments)};function PH(t,s,o){try{return s.getAllBlocks(!1).length>0?void 0:(Yc.domToWorkspace(LH.xml.textToDom(t),s),!0)}catch(i){return o&&o(i),!1}}function BH(t,s,o){try{return YN.workspaces.load(t,s),!0}catch(i){return o&&o(i),!1}}var FH=function(t){var s=t.ref,o=t.initialXml,i=t.initialJson,a=t.toolboxConfiguration,c=t.workspaceConfiguration,u=t.onWorkspaceChange,h=t.onImportXmlError,p=t.onImportError,f=t.onInject,g=t.onDispose;p=p??h;var m=ye.useState(null),T=m[0],I=m[1],C=ye.useState(o||null),w=C[0],A=C[1],S=ye.useState(i||null),y=S[0],v=S[1],M=ye.useState(!1),L=M[0],P=M[1],B=ye.useState(!1),N=B[0],ee=B[1],ie=ye.useRef(c);ye.useEffect(function(){ie.current=c},[c]);var Te=ye.useRef(a);ye.useEffect(function(){Te.current=a,a&&T&&!(c!=null&&c.readOnly)&&T.updateToolbox(a)},[a,T,c]);var Ue=ye.useRef(f),je=ye.useRef(g);ye.useEffect(function(){Ue.current=f},[f]),ye.useEffect(function(){je.current=g},[g]);var we=ye.useCallback(function(Fe){u&&u(Fe)},[u]);return ye.useEffect(function(){if(s.current){var Fe=MH(s.current,df(df({},ie.current),{toolbox:Te.current}));I(Fe),P(!1),ee(!1),Ue.current&&Ue.current(Fe);var de=je.current;return function(){Fe.dispose(),de&&de(Fe)}}},[s]),ye.useEffect(function(){T&&!N&&we(T)},[we,N,T]),ye.useEffect(function(){if(T!=null){var Fe=function(){we(T)};return T.addChangeListener(Fe),function(){T.removeChangeListener(Fe)}}},[T,we]),ye.useEffect(function(){if(T!=null){var Fe=DH(function(){var F=Yc.domToText(Yc.workspaceToDom(T));if(F!==w){var ue=YN.workspaces.save(T);v(ue),A(F)}},200),de=Fe[0],ce=Fe[1];return T.addChangeListener(de),function(){T.removeChangeListener(de),ce()}}},[T,w]),ye.useEffect(function(){if(w&&T&&!L){var Fe=PH(w,T,p);Fe||A(null),P(!0)}else if(y&&T&&!L){var Fe=BH(y,T,p);Fe||v(null);var de=Yc.domToText(Yc.workspaceToDom(T));A(de),P(!0)}},[y,w,T,L,p]),{workspace:T,xml:w,json:y}},KN={exports:{}},UH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",VH=UH,HH=VH;function JN(){}function qN(){}qN.resetWarningCache=JN;var GH=function(){function t(i,a,c,u,h,p){if(p!==HH){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}t.isRequired=t;function s(){return t}var o={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:qN,resetWarningCache:JN};return o.PropTypes=o,o};KN.exports=GH();var jH=KN.exports;const Is=Ea(jH);var WH={initialXml:Is.string,initialJson:Is.object,toolboxConfiguration:Is.object,workspaceConfiguration:Is.object,className:Is.string,onWorkspaceChange:Is.func,onImportXmlError:Is.func,onImportError:Is.func,onXmlChange:Is.func,onJsonChange:Is.func,onInject:Is.func,onDispose:Is.func};function ZN(t){var s=t.initialXml,o=t.initialJson,i=t.toolboxConfiguration,a=t.workspaceConfiguration,c=t.className,u=t.onWorkspaceChange,h=t.onXmlChange,p=t.onJsonChange,f=t.onImportXmlError,g=t.onImportError,m=t.onInject,T=t.onDispose,I=ye.useRef(null),C=FH({ref:I,initialXml:s,initialJson:o,toolboxConfiguration:i,workspaceConfiguration:a,onWorkspaceChange:u,onImportXmlError:f,onImportError:g,onInject:m,onDispose:T}),w=C.xml,A=C.json,S=ye.useRef(h);ye.useEffect(function(){S.current=h},[h]);var y=ye.useRef(p);return ye.useEffect(function(){y.current=p},[p]),ye.useEffect(function(){S.current&&w&&S.current(w),y.current&&A&&y.current(A)},[w,A]),_.jsx("div",{className:c,ref:I})}ZN.propTypes=WH;var QN={exports:{}},dT={exports:{}},XR;function zH(){return XR||(XR=1,function(t,s){(function(o,i){t.exports=i()})(Qs,function(){var o=o||{Msg:Object.create(null)};return o.Msg.ADD_COMMENT="Add Comment",o.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",o.Msg.CHANGE_VALUE_TITLE="Change value:",o.Msg.CLEAN_UP="Clean up Blocks",o.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",o.Msg.COLLAPSE_ALL="Collapse Blocks",o.Msg.COLLAPSE_BLOCK="Collapse Block",o.Msg.COLOUR_BLEND_COLOUR1="colour 1",o.Msg.COLOUR_BLEND_COLOUR2="colour 2",o.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",o.Msg.COLOUR_BLEND_RATIO="ratio",o.Msg.COLOUR_BLEND_TITLE="blend",o.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",o.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",o.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",o.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",o.Msg.COLOUR_RANDOM_TITLE="random colour",o.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",o.Msg.COLOUR_RGB_BLUE="blue",o.Msg.COLOUR_RGB_GREEN="green",o.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",o.Msg.COLOUR_RGB_RED="red",o.Msg.COLOUR_RGB_TITLE="colour with",o.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",o.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",o.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",o.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",o.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",o.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",o.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",o.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",o.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",o.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",o.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",o.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",o.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",o.Msg.CONTROLS_IF_MSG_ELSE="else",o.Msg.CONTROLS_IF_MSG_ELSEIF="else if",o.Msg.CONTROLS_IF_MSG_IF="if",o.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",o.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",o.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",o.Msg.CONTROLS_REPEAT_INPUT_DO="do",o.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",o.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",o.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",o.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",o.Msg.DELETE_BLOCK="Delete Block",o.Msg.DELETE_VARIABLE="Delete the '%1' variable",o.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",o.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",o.Msg.DIALOG_CANCEL="Cancel",o.Msg.DIALOG_OK="OK",o.Msg.DISABLE_BLOCK="Disable Block",o.Msg.DUPLICATE_BLOCK="Duplicate",o.Msg.DUPLICATE_COMMENT="Duplicate Comment",o.Msg.ENABLE_BLOCK="Enable Block",o.Msg.EXPAND_ALL="Expand Blocks",o.Msg.EXPAND_BLOCK="Expand Block",o.Msg.EXTERNAL_INPUTS="External Inputs",o.Msg.HELP="Help",o.Msg.INLINE_INPUTS="Inline Inputs",o.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",o.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",o.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",o.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",o.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",o.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",o.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",o.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",o.Msg.LISTS_GET_INDEX_FIRST="first",o.Msg.LISTS_GET_INDEX_FROM_END="# from end",o.Msg.LISTS_GET_INDEX_FROM_START="#",o.Msg.LISTS_GET_INDEX_GET="get",o.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",o.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",o.Msg.LISTS_GET_INDEX_LAST="last",o.Msg.LISTS_GET_INDEX_RANDOM="random",o.Msg.LISTS_GET_INDEX_REMOVE="remove",o.Msg.LISTS_GET_INDEX_TAIL="",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",o.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",o.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",o.Msg.LISTS_GET_SUBLIST_END_LAST="to last",o.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",o.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",o.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",o.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",o.Msg.LISTS_GET_SUBLIST_TAIL="",o.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",o.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",o.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",o.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",o.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",o.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",o.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",o.Msg.LISTS_INLIST="in list",o.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",o.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",o.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",o.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",o.Msg.LISTS_LENGTH_TITLE="length of %1",o.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",o.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",o.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",o.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",o.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",o.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",o.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",o.Msg.LISTS_SET_INDEX_INPUT_TO="as",o.Msg.LISTS_SET_INDEX_INSERT="insert at",o.Msg.LISTS_SET_INDEX_SET="set",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",o.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",o.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",o.Msg.LISTS_SORT_ORDER_DESCENDING="descending",o.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",o.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",o.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",o.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",o.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",o.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",o.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",o.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",o.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",o.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",o.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",o.Msg.LOGIC_BOOLEAN_FALSE="false",o.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",o.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",o.Msg.LOGIC_BOOLEAN_TRUE="true",o.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",o.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",o.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",o.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",o.Msg.LOGIC_NEGATE_TITLE="not %1",o.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",o.Msg.LOGIC_NULL="null",o.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",o.Msg.LOGIC_NULL_TOOLTIP="Returns null.",o.Msg.LOGIC_OPERATION_AND="and",o.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",o.Msg.LOGIC_OPERATION_OR="or",o.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",o.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",o.Msg.LOGIC_TERNARY_CONDITION="test",o.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",o.Msg.LOGIC_TERNARY_IF_FALSE="if false",o.Msg.LOGIC_TERNARY_IF_TRUE="if true",o.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",o.Msg.MATH_ADDITION_SYMBOL="+",o.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",o.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",o.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",o.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",o.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",o.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",o.Msg.MATH_CHANGE_TITLE="change %1 by %2",o.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",o.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",o.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",o.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",o.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",o.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",o.Msg.MATH_DIVISION_SYMBOL="",o.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",o.Msg.MATH_IS_EVEN="is even",o.Msg.MATH_IS_NEGATIVE="is negative",o.Msg.MATH_IS_ODD="is odd",o.Msg.MATH_IS_POSITIVE="is positive",o.Msg.MATH_IS_PRIME="is prime",o.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",o.Msg.MATH_IS_WHOLE="is whole",o.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",o.Msg.MATH_MODULO_TITLE="remainder of %1  %2",o.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",o.Msg.MATH_MULTIPLICATION_SYMBOL="",o.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",o.Msg.MATH_NUMBER_TOOLTIP="A number.",o.Msg.MATH_ONLIST_HELPURL="",o.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",o.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",o.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",o.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",o.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",o.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",o.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",o.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",o.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",o.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",o.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",o.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",o.Msg.MATH_POWER_SYMBOL="^",o.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",o.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",o.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",o.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",o.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",o.Msg.MATH_ROUND_OPERATOR_ROUND="round",o.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",o.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",o.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",o.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",o.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",o.Msg.MATH_SINGLE_OP_ROOT="square root",o.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",o.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",o.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",o.Msg.MATH_SUBTRACTION_SYMBOL="-",o.Msg.MATH_TRIG_ACOS="acos",o.Msg.MATH_TRIG_ASIN="asin",o.Msg.MATH_TRIG_ATAN="atan",o.Msg.MATH_TRIG_COS="cos",o.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",o.Msg.MATH_TRIG_SIN="sin",o.Msg.MATH_TRIG_TAN="tan",o.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",o.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",o.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",o.Msg.NEW_NUMBER_VARIABLE="Create number variable...",o.Msg.NEW_STRING_VARIABLE="Create string variable...",o.Msg.NEW_VARIABLE="Create variable...",o.Msg.NEW_VARIABLE_TITLE="New variable name:",o.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",o.Msg.ORDINAL_NUMBER_SUFFIX="",o.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",o.Msg.PROCEDURES_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",o.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",o.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",o.Msg.PROCEDURES_CREATE_DO="Create '%1'",o.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",o.Msg.PROCEDURES_DEFNORETURN_DO="",o.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",o.Msg.PROCEDURES_DEFNORETURN_TITLE="to",o.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",o.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFRETURN_RETURN="return",o.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",o.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",o.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",o.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",o.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",o.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",o.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",o.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",o.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",o.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",o.Msg.REDO="Redo",o.Msg.REMOVE_COMMENT="Remove Comment",o.Msg.RENAME_VARIABLE="Rename variable...",o.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",o.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_APPEND_TITLE="to %1 append text %2",o.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",o.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",o.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",o.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",o.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",o.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",o.Msg.TEXT_CHARAT_FIRST="get first letter",o.Msg.TEXT_CHARAT_FROM_END="get letter # from end",o.Msg.TEXT_CHARAT_FROM_START="get letter #",o.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",o.Msg.TEXT_CHARAT_LAST="get last letter",o.Msg.TEXT_CHARAT_RANDOM="get random letter",o.Msg.TEXT_CHARAT_TAIL="",o.Msg.TEXT_CHARAT_TITLE="in text %1 %2",o.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",o.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",o.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",o.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",o.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",o.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",o.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",o.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",o.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",o.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",o.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",o.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",o.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",o.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",o.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",o.Msg.TEXT_GET_SUBSTRING_TAIL="",o.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",o.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",o.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",o.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",o.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",o.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",o.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",o.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",o.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",o.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",o.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",o.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",o.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_LENGTH_TITLE="length of %1",o.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",o.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",o.Msg.TEXT_PRINT_TITLE="print %1",o.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",o.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",o.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",o.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",o.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",o.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",o.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",o.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",o.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",o.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",o.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",o.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",o.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",o.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",o.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",o.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",o.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",o.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",o.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",o.Msg.TODAY="Today",o.Msg.UNDO="Undo",o.Msg.UNNAMED_KEY="unnamed",o.Msg.VARIABLES_DEFAULT_NAME="item",o.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",o.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",o.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",o.Msg.VARIABLES_SET="set %1 to %2",o.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",o.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",o.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",o.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",o.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",o.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",o.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",o.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",o.Msg.CONTROLS_FOREACH_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_FOR_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=o.Msg.CONTROLS_IF_MSG_ELSEIF,o.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=o.Msg.CONTROLS_IF_MSG_ELSE,o.Msg.CONTROLS_IF_IF_TITLE_IF=o.Msg.CONTROLS_IF_MSG_IF,o.Msg.CONTROLS_IF_MSG_THEN=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.LISTS_CREATE_WITH_ITEM_TITLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.MATH_CHANGE_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.PROCEDURES_DEFRETURN_COMMENT=o.Msg.PROCEDURES_DEFNORETURN_COMMENT,o.Msg.PROCEDURES_DEFRETURN_DO=o.Msg.PROCEDURES_DEFNORETURN_DO,o.Msg.PROCEDURES_DEFRETURN_PROCEDURE=o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,o.Msg.PROCEDURES_DEFRETURN_TITLE=o.Msg.PROCEDURES_DEFNORETURN_TITLE,o.Msg.TEXT_APPEND_VARIABLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.COLOUR_HUE="20",o.Msg.LISTS_HUE="260",o.Msg.LOGIC_HUE="210",o.Msg.LOOPS_HUE="120",o.Msg.MATH_HUE="230",o.Msg.PROCEDURES_HUE="290",o.Msg.TEXTS_HUE="160",o.Msg.VARIABLES_DYNAMIC_HUE="310",o.Msg.VARIABLES_HUE="330",o.Msg})}(dT)),dT.exports}var eM={exports:{}};(function(t,s){(function(o,i){t.exports=i(nr())})(Qs,function(o){var i=o.__namespace__,a=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),c={customContextMenu:function(b){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(H={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:u(this)},V=this.getField("VAR").getText(),V={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",V),enabled:!0,callback:h(this)},b.unshift(H),b.unshift(V));else{if(this.type==="variables_get_dynamic")var x="variables_set_dynamic",H=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else x="variables_get_dynamic",H=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var V=this.getField("VAR");x={type:x,fields:{VAR:V.saveState(!0)}},b.push({enabled:0<this.workspace.remainingCapacity(),text:H.replace("%1",V.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,x)})}},onchange:function(b){b=this.getFieldValue("VAR"),b=i.getVariable$$module$build$src$core$variables(this.workspace,b),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(b.type):this.getInput("VALUE").connection.setCheck(b.type)}},u=function(b){return function(){const x=b.workspace,H=b.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(x,H)}},h=function(b){return function(){const x=b.workspace,H=b.getField("VAR").getVariable();x.deleteVariableById(H.getId()),x.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",c),i.defineBlocks$$module$build$src$core$common(a);var p={blocks:a},f=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),g={customContextMenu:function(b){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(H={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:m(this)},V=this.getField("VAR").getText(),V={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",V),enabled:!0,callback:T(this)},b.unshift(H),b.unshift(V));else{if(this.type==="variables_get")var x="variables_set",H=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else x="variables_get",H=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var V=this.getField("VAR");x={type:x,fields:{VAR:V.saveState(!0)}},b.push({enabled:0<this.workspace.remainingCapacity(),text:H.replace("%1",V.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,x)})}}},m=function(b){return function(){const x=b.workspace,H=b.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(x,H)}},T=function(b){return function(){const x=b.workspace,H=b.getField("VAR").getVariable();x.deleteVariableById(H.getId()),x.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",g),i.defineBlocks$$module$build$src$core$common(f);var I={blocks:f},C=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),w={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const b=x=>{const H=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+x]});return H.setValidator(function(V){const le=this.getValue();V=V==="FROM_START"||V==="FROM_END",V!==(le==="FROM_START"||le==="FROM_END")&&this.getSourceBlock().updateAt_(x,V)}),H};this.appendDummyInput("WHERE1_INPUT").appendField(b(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(b(2),"WHERE2"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");var x=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return b.setAttribute("at1",`${x}`),x=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,b.setAttribute("at2",`${x}`),b},domToMutation:function(b){const x=b.getAttribute("at1")==="true";b=b.getAttribute("at2")==="true",this.updateAt_(1,x),this.updateAt_(2,b)},updateAt_:function(b,x){this.removeInput("AT"+b),this.removeInput("ORDINAL"+b,!0),x?(this.appendValueInput("AT"+b).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+b).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+b),b===2&&i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),b===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};C.text_getSubstring=w,C.text_changeCase={init:function(){const b=[[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:b}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},C.text_trim={init:function(){const b=[[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:b}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},C.text_print={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var A={updateType_:function(b){this.outputConnection.setCheck(b==="NUMBER"?"Number":"String")},mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");return b.setAttribute("type",this.getFieldValue("TYPE")),b},domToMutation:function(b){this.updateType_(b.getAttribute("type"))}};C.text_prompt_ext=Object.assign({},A,{init:function(){var b=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),b=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:b}),b.setValidator(x=>{this.updateType_(x)}),this.appendValueInput("TEXT").appendField(b,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),C.text_prompt=Object.assign({},A,{init:function(){this.mixin(S);var b=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),b=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:b}),b.setValidator(x=>{this.updateType_(x)}),this.appendDummyInput().appendField(b,"TYPE").appendField(this.newQuote_(!0)).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),C.text_count={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},C.text_replace={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},C.text_reverse={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var S={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(b){for(let x=0,H;H=this.inputList[x];x++)for(let V=0,le;le=H.fieldRow[V];V++)if(b===le.name){H.insertFieldAt(V,this.newQuote_(!0)),H.insertFieldAt(V+2,this.newQuote_(!1));return}console.warn('field named "'+b+'" not found in '+this.toDevString())},newQuote_:function(b){return b=this.RTL?!b:b,i.fromJson$$module$build$src$core$field_registry({type:"field_image",src:b?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:b?"":""})}},y=function(){this.mixin(S),this.quoteField_("TEXT")},v={itemCount_:0,mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");return b.setAttribute("items",`${this.itemCount_}`),b},domToMutation:function(b){this.itemCount_=parseInt(b.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(b){this.itemCount_=b.itemCount,this.updateShape_()},decompose:function(b){const x=b.newBlock("text_create_join_container");x.initSvg();let H=x.getInput("STACK").connection;for(let V=0;V<this.itemCount_;V++){const le=b.newBlock("text_create_join_item");le.initSvg(),H.connect(le.previousConnection),H=le.nextConnection}return x},compose:function(b){var x=b.getInputTargetBlock("STACK");for(b=[];x;)x.isInsertionMarker()||b.push(x.valueConnection_),x=x.getNextBlock();for(x=0;x<this.itemCount_;x++){const H=this.getInput("ADD"+x).connection.targetConnection;H&&!b.includes(H)&&H.disconnect()}for(this.itemCount_=b.length,this.updateShape_(),x=0;x<this.itemCount_;x++){let H;(H=b[x])==null||H.reconnect(this,"ADD"+x)}},saveConnections:function(b){b=b.getInputTargetBlock("STACK");let x=0;for(;b;){if(b.isInsertionMarker()){b=b.getNextBlock();continue}const H=this.getInput("ADD"+x);b.valueConnection_=H&&H.connection.targetConnection,b=b.getNextBlock(),x++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var b=0;b<this.itemCount_;b++)if(!this.getInput("ADD"+b)){const x=this.appendValueInput("ADD"+b).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);b===0&&x.appendField(i.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(b=this.itemCount_;this.getInput("ADD"+b);b++)this.removeInput("ADD"+b)}},M=function(){this.mixin(S),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};i.register$$module$build$src$core$extensions("text_append_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var L=function(){this.setTooltip(()=>i.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},P={isAt_:!1,mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");return b.setAttribute("at",`${this.isAt_}`),b},domToMutation:function(b){b=b.getAttribute("at")!=="false",this.updateAt_(b)},updateAt_:function(b){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),b&&(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=b}},B=function(){this.getField("WHERE").setValidator(function(b){b=b==="FROM_START"||b==="FROM_END";const x=this.getSourceBlock();b!==x.isAt_&&x.updateAt_(b)}),this.updateAt_(!0),this.setTooltip(()=>{var b=this.getFieldValue("WHERE");let x=i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(b==="FROM_START"||b==="FROM_END")&&(b=b==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(x+="  "+b.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),x})};i.register$$module$build$src$core$extensions("text_indexOf_tooltip",L),i.register$$module$build$src$core$extensions("text_quotes",y),i.registerMixin$$module$build$src$core$extensions("quote_image_mixin",S),i.registerMutator$$module$build$src$core$extensions("text_join_mutator",v,M),i.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",P,B),i.defineBlocks$$module$build$src$core$common(C);var N={blocks:C},ee={},ie={setStatements_:function(b){this.hasStatements_!==b&&(b?(this.appendStatementInput("STACK").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=b)},updateParams_:function(){let b="";this.arguments_.length&&(b=i.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.disable$$module$build$src$core$events$utils();try{this.setFieldValue(b,"PARAMS")}finally{i.enable$$module$build$src$core$events$utils()}},mutationToDom:function(b){const x=i.createElement$$module$build$src$core$utils$xml("mutation");b&&x.setAttribute("name",this.getFieldValue("NAME"));for(let H=0;H<this.argumentVarModels_.length;H++){const V=i.createElement$$module$build$src$core$utils$xml("arg"),le=this.argumentVarModels_[H];V.setAttribute("name",le.name),V.setAttribute("varid",le.getId()),b&&this.paramIds_&&V.setAttribute("paramId",this.paramIds_[H]),x.appendChild(V)}return this.hasStatements_||x.setAttribute("statements","false"),x},domToMutation:function(b){this.arguments_=[],this.argumentVarModels_=[];for(let H=0,V;V=b.childNodes[H];H++)if(V.nodeName.toLowerCase()==="arg"){var x=V;const le=x.getAttribute("name");x=x.getAttribute("varid")||x.getAttribute("varId"),this.arguments_.push(le),x=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,x,le,""),x!==null?this.argumentVarModels_.push(x):console.log(`Failed to create a variable named "${le}", ignoring.`)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(b.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const b=Object.create(null);if(this.argumentVarModels_.length){b.params=[];for(let x=0;x<this.argumentVarModels_.length;x++)b.params.push({name:this.argumentVarModels_[x].name,id:this.argumentVarModels_[x].getId()})}return this.hasStatements_||(b.hasStatements=!1),b},loadExtraState:function(b){if(this.arguments_=[],this.argumentVarModels_=[],b.params)for(let H=0;H<b.params.length;H++){var x=b.params[H];x=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,x.id,x.name,""),this.arguments_.push(x.name),this.argumentVarModels_.push(x)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(b.hasStatements!==!1)},decompose:function(b){const x=i.createElement$$module$build$src$core$utils$xml("block");x.setAttribute("type","procedures_mutatorcontainer");var H=i.createElement$$module$build$src$core$utils$xml("statement");H.setAttribute("name","STACK"),x.appendChild(H);for(let le=0;le<this.arguments_.length;le++){const Qe=i.createElement$$module$build$src$core$utils$xml("block");Qe.setAttribute("type","procedures_mutatorarg");var V=i.createElement$$module$build$src$core$utils$xml("field");V.setAttribute("name","NAME");const E=i.createTextNode$$module$build$src$core$utils$xml(this.arguments_[le]);V.appendChild(E),Qe.appendChild(V),V=i.createElement$$module$build$src$core$utils$xml("next"),Qe.appendChild(V),H.appendChild(Qe),H=V}return b=i.domToBlock$$module$build$src$core$xml(x,b),this.type==="procedures_defreturn"?b.setFieldValue(this.hasStatements_,"STATEMENTS"):b.removeInput("STATEMENT_INPUT"),i.mutateCallers$$module$build$src$core$procedures(this),b},compose:function(b){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let x=b.getInputTargetBlock("STACK");for(;x&&!x.isInsertionMarker();){var H=x.getFieldValue("NAME");this.arguments_.push(H),H=this.workspace.getVariable(H,""),this.argumentVarModels_.push(H),this.paramIds_.push(x.id),x=x.nextConnection&&x.nextConnection.targetBlock()}if(this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),b=b.getFieldValue("STATEMENTS"),b!==null&&(b=b==="TRUE",this.hasStatements_!==b))if(b){this.setStatements_(!0);var V;(V=this.statementConnection_)==null||V.reconnect(this,"STACK"),this.statementConnection_=null}else V=this.getInput("STACK").connection,(this.statementConnection_=V.targetConnection)&&(V=V.targetBlock(),V.unplug(),V.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(b,x){var H=this.workspace.getVariableById(b);if(H.type===""){H=H.name,x=this.workspace.getVariableById(x);var V=!1;for(let le=0;le<this.argumentVarModels_.length;le++)this.argumentVarModels_[le].getId()===b&&(this.arguments_[le]=x.name,this.argumentVarModels_[le]=x,V=!0);V&&(this.displayRenamedVar_(H,x.name),i.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(b){const x=b.name;let H=!1,V;for(let le=0;le<this.argumentVarModels_.length;le++)this.argumentVarModels_[le].getId()===b.getId()&&(V=this.arguments_[le],this.arguments_[le]=x,H=!0);H&&(this.displayRenamedVar_(V,x),i.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(b,x){this.updateParams_();var H=this.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(H&&H.bubbleIsVisible()){H=H.getWorkspace().getAllBlocks(!1);for(let V=0,le;le=H[V];V++)le.type==="procedures_mutatorarg"&&i.Names$$module$build$src$core$names.equals(b,le.getFieldValue("NAME"))&&le.setFieldValue(x,"NAME")}},customContextMenu:function(b){if(!this.isInFlyout){var x=this.getFieldValue("NAME"),H={type:this.callType_,extraState:{name:x,params:this.arguments_}};if(b.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",x),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,H)}),!this.isCollapsed())for(x=0;x<this.argumentVarModels_.length;x++){H=this.argumentVarModels_[x];const V={type:"variables_get",fields:{VAR:{name:H.name,id:H.getId(),type:H.type}}};b.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",H.name),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,V)})}}}};ee.procedures_defnoreturn=Object.assign({},ie,{init:function(){var b=i.findLegalName$$module$build$src$core$procedures("",this);b=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:b}),b.setValidator(i.rename$$module$build$src$core$procedures),b.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(b,"NAME").appendField("","PARAMS"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),ee.procedures_defreturn=Object.assign({},ie,{init:function(){var b=i.findLegalName$$module$build$src$core$procedures("",this);b=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:b}),b.setValidator(i.rename$$module$build$src$core$procedures),b.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(b,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT).appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var Te={init:function(){this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};ee.procedures_mutatorcontainer=Te;var Ue={init:function(){const b=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:i.DEFAULT_ARG$$module$build$src$core$procedures});b.setValidator(this.validator_),b.oldShowEditorFn_=b.showEditor_,b.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(b,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,b.onFinishEditing_=this.deleteIntermediateVars_,b.createdVariables_=[],b.onFinishEditing_("x")},validator_:function(b){var x=this.getSourceBlock();const H=x.workspace.getRootWorkspace();if(b=b.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!b)return null;const V=(x.workspace.targetWorkspace||x.workspace).getAllBlocks(!1),le=b.toLowerCase();for(let Qe=0;Qe<V.length;Qe++){if(V[Qe].id===this.getSourceBlock().id)continue;const E=V[Qe].getFieldValue("NAME");if(E&&E.toLowerCase()===le)return null}return x.isInFlyout||((x=H.getVariable(b,""))&&x.name!==b&&H.renameVariableById(x.getId(),b),x||(x=H.createVariable(b,""))&&this.createdVariables_&&this.createdVariables_.push(x)),b},deleteIntermediateVars_:function(b){const x=this.getSourceBlock().workspace.getRootWorkspace();if(x)for(let H=0;H<this.createdVariables_.length;H++){const V=this.createdVariables_[H];V.name!==b&&x.deleteVariableById(V.getId())}}};ee.procedures_mutatorarg=Ue;var je="DISABLED_PROCEDURE_DEFINITION",we={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(b,x){i.Names$$module$build$src$core$names.equals(b,this.getProcedureCall())&&(this.setFieldValue(x,"NAME"),this.setTooltip((this.outputConnection?i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",x)))},setProcedureParameters_:function(b,x){var H=i.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((H=(H=H&&H.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&H.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),b.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=x;else{if(x.length!==b.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let le=0;le<this.arguments_.length;le++){var V=this.getInput("ARG"+le);V&&(V=V.connection.targetConnection,this.quarkConnections_[this.quarkIds_[le]]=V,H&&V&&!x.includes(this.quarkIds_[le])&&(V.disconnect(),V.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(b),this.argumentVarModels_=[],b=0;b<this.arguments_.length;b++)H=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[b],""),this.argumentVarModels_.push(H);if(this.updateShape_(),this.quarkIds_=x){for(x=0;x<this.arguments_.length;x++)if(b=this.quarkIds_[x],b in this.quarkConnections_){let le;(le=this.quarkConnections_[b])!=null&&le.reconnect(this,"ARG"+x)||delete this.quarkConnections_[b]}}}},updateShape_:function(){for(var b=0;b<this.arguments_.length;b++){var x=this.getField("ARGNAME"+b);if(x){i.disable$$module$build$src$core$events$utils();try{x.setValue(this.arguments_[b])}finally{i.enable$$module$build$src$core$events$utils()}}else x=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[b]}),this.appendValueInput("ARG"+b).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT).appendField(x,"ARGNAME"+b)}for(b=this.arguments_.length;this.getInput("ARG"+b);b++)this.removeInput("ARG"+b);(b=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||b.appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&b.removeField("WITH"))},mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");b.setAttribute("name",this.getProcedureCall());for(let x=0;x<this.arguments_.length;x++){const H=i.createElement$$module$build$src$core$utils$xml("arg");H.setAttribute("name",this.arguments_[x]),b.appendChild(H)}return b},domToMutation:function(b){var x=b.getAttribute("name");this.renameProcedure(this.getProcedureCall(),x),x=[];const H=[];for(let V=0,le;le=b.childNodes[V];V++)le.nodeName.toLowerCase()==="arg"&&(x.push(le.getAttribute("name")),H.push(le.getAttribute("paramId")));this.setProcedureParameters_(x,H)},saveExtraState:function(){const b=Object.create(null);return b.name=this.getProcedureCall(),this.arguments_.length&&(b.params=this.arguments_),b},loadExtraState:function(b){if(this.renameProcedure(this.getProcedureCall(),b.name),b=b.params){const x=[];x.length=b.length,x.fill(null),this.setProcedureParameters_(b,x)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(b){if(this.workspace&&!this.workspace.isFlyout&&b.recordUndo)if(b.type===i.BLOCK_CREATE$$module$build$src$core$events$events&&b.ids.includes(this.id)){var x=this.getProcedureCall(),H=i.getDefinition$$module$build$src$core$procedures(x,this.workspace);if(!H||H.type===this.defType_&&JSON.stringify(H.getVars())===JSON.stringify(this.arguments_)||(H=null),H)H.isEnabled()||(this.setDisabledReason(!0,je),this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",x)));else{i.setGroup$$module$build$src$core$events$utils(b.group),b=i.createElement$$module$build$src$core$utils$xml("xml"),x=i.createElement$$module$build$src$core$utils$xml("block"),x.setAttribute("type",this.defType_),H=this.getRelativeToSurfaceXY();var V=H.y+2*i.config$$module$build$src$core$config.snapRadius;x.setAttribute("x",`${H.x+i.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),x.setAttribute("y",`${V}`),H=this.mutationToDom(),x.appendChild(H),H=i.createElement$$module$build$src$core$utils$xml("field"),H.setAttribute("name","NAME"),V=this.getProcedureCall();const le=i.findLegalName$$module$build$src$core$procedures(V,this);V!==le&&this.renameProcedure(V,le),H.appendChild(i.createTextNode$$module$build$src$core$utils$xml(V)),x.appendChild(H),b.appendChild(x),i.domToWorkspace$$module$build$src$core$xml(b,this.workspace),i.setGroup$$module$build$src$core$events$utils(!1)}}else b.type===i.BLOCK_DELETE$$module$build$src$core$events$events?(x=this.getProcedureCall(),i.getDefinition$$module$build$src$core$procedures(x,this.workspace)||(i.setGroup$$module$build$src$core$events$utils(b.group),this.dispose(!0),i.setGroup$$module$build$src$core$events$utils(!1))):b.type===i.BLOCK_CHANGE$$module$build$src$core$events$events&&b.element==="disabled"&&(x=this.getProcedureCall(),(V=i.getDefinition$$module$build$src$core$procedures(x,this.workspace))&&V.id===b.blockId&&((H=i.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),i.setGroup$$module$build$src$core$events$utils(b.group),b=V.isEnabled(),this.setDisabledReason(!b,je),this.setWarningText(b?null:i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",x)),i.setGroup$$module$build$src$core$events$utils(H)))},customContextMenu:function(b){if(this.workspace.isMovable()){var x=this.getProcedureCall(),H=this.workspace;b.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const V=i.getDefinition$$module$build$src$core$procedures(x,H);V&&(H.centerOnBlock(V.id),i.setSelected$$module$build$src$core$common(V))}})}}};ee.procedures_callnoreturn=Object.assign({},we,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),ee.procedures_callreturn=Object.assign({},we,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var Fe="UNPARENTED_IFRETURN",de={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");return b.setAttribute("value",String(Number(this.hasReturnValue_))),b},domToMutation:function(b){this.hasReturnValue_=b.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(b){if(!(this.workspace.isDragging&&this.workspace.isDragging()||b.type!==i.BLOCK_MOVE$$module$build$src$core$events$events&&b.type!==i.BLOCK_CREATE$$module$build$src$core$events$events)){b=!1;var x=this;do{if(this.FUNCTION_TYPES.includes(x.type)){b=!0;break}x=x.getSurroundParent()}while(x);if(b?(x.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):x.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{i.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!b,Fe)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};ee.procedures_ifreturn=de,i.defineBlocks$$module$build$src$core$common(ee);var ce={blocks:ee},F=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),ue={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};i.register$$module$build$src$core$extensions("math_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",ue));var ae={mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation"),x=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return b.setAttribute("divisor_input",String(x)),b},domToMutation:function(b){b=b.getAttribute("divisor_input")==="true",this.updateShape_(b)},updateShape_:function(b){const x=this.getInput("DIVISOR");b?x||this.appendValueInput("DIVISOR").setCheck("Number"):x&&this.removeInput("DIVISOR")}},fe=function(){this.getField("PROPERTY").setValidator(function(b){b=b==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(b)})};i.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",ae,fe),i.register$$module$build$src$core$extensions("math_change_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Ee={updateType_:function(b){b==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");return b.setAttribute("op",this.getFieldValue("OP")),b},domToMutation:function(b){if(b=b.getAttribute("op"),b===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(b)}},xe=function(){this.getField("OP").setValidator((function(b){this.updateType_(b)}).bind(this))};i.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",Ee,xe),i.defineBlocks$$module$build$src$core$common(F);var ke={blocks:F},qe=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),Re={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};i.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",Re));var Oe={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};i.register$$module$build$src$core$extensions("controls_flow_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Oe));var Tt={customContextMenu:function(b){if(!this.isInFlyout){var x=this.getField("VAR"),H=x.getVariable().name;this.isCollapsed()||H===null||(x={type:"variables_get",fields:{VAR:x.saveState(!0)}},b.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",H),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,x)}))}}};i.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Tt),i.register$$module$build$src$core$extensions("controls_for_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.register$$module$build$src$core$extensions("controls_forEach_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var He=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),We="CONTROL_FLOW_NOT_IN_LOOP",Ft={getSurroundLoop:function(){let b=this;do{if(He.has(b.type))return b;b=b.getSurroundParent()}while(b);return null},onchange:function(b){const x=this.workspace;if(x.isDragging&&!x.isDragging()&&(b.type===i.BLOCK_MOVE$$module$build$src$core$events$events||b.type===i.BLOCK_CREATE$$module$build$src$core$events$events)&&(b=!!this.getSurroundLoop(),this.setWarningText(b?null:i.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{i.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!b,We)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}};i.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",Ft),i.defineBlocks$$module$build$src$core$common(qe);var Rt={blocks:qe,loopTypes:He},Zn=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),nn={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};i.register$$module$build$src$core$extensions("logic_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",nn));var xt={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const b=i.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&b.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&b.setAttribute("else","1"),b},domToMutation:function(b){this.elseifCount_=parseInt(b.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(b.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const b=Object.create(null);return this.elseifCount_&&(b.elseIfCount=this.elseifCount_),this.elseCount_&&(b.hasElse=!0),b},loadExtraState:function(b){this.elseifCount_=b.elseIfCount||0,this.elseCount_=b.hasElse?1:0,this.updateShape_()},decompose:function(b){const x=b.newBlock("controls_if_if");x.initSvg();let H=x.nextConnection;for(let V=1;V<=this.elseifCount_;V++){const le=b.newBlock("controls_if_elseif");le.initSvg(),H.connect(le.previousConnection),H=le.nextConnection}return this.elseCount_&&(b=b.newBlock("controls_if_else"),b.initSvg(),H.connect(b.previousConnection)),x},compose:function(b){b=b.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const x=[null],H=[null];let V=null;for(;b;){if(!b.isInsertionMarker())switch(b.type){case"controls_if_elseif":this.elseifCount_++,x.push(b.valueConnection_),H.push(b.statementConnection_);break;case"controls_if_else":this.elseCount_++,V=b.statementConnection_;break;default:throw TypeError("Unknown block type: "+b.type)}b=b.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(x,H,V)},saveConnections:function(b){b=b.nextConnection.targetBlock();let x=1;for(;b;){if(!b.isInsertionMarker())switch(b.type){case"controls_if_elseif":var H=this.getInput("IF"+x);const V=this.getInput("DO"+x);b.valueConnection_=H&&H.connection.targetConnection,b.statementConnection_=V&&V.connection.targetConnection,x++;break;case"controls_if_else":H=this.getInput("ELSE"),b.statementConnection_=H&&H.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+b.type)}b=b.getNextBlock()}},rebuildShape_:function(){const b=[null],x=[null];let H=null;this.getInput("ELSE")&&(H=this.getInput("ELSE").connection.targetConnection);for(let V=1;this.getInput("IF"+V);V++){const le=this.getInput("IF"+V),Qe=this.getInput("DO"+V);b.push(le.connection.targetConnection),x.push(Qe.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(b,x,H)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var b=1;this.getInput("IF"+b);b++)this.removeInput("IF"+b),this.removeInput("DO"+b);for(b=1;b<=this.elseifCount_;b++)this.appendValueInput("IF"+b).setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+b).appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(b,x,H){for(let V=1;V<=this.elseifCount_;V++){let le;(le=b[V])==null||le.reconnect(this,"IF"+V);let Qe;(Qe=x[V])==null||Qe.reconnect(this,"DO"+V)}H==null||H.reconnect(this,"ELSE")}};i.registerMutator$$module$build$src$core$extensions("controls_if_mutator",xt,null,["controls_if_elseif","controls_if_else"]);var rt=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};i.register$$module$build$src$core$extensions("controls_if_tooltip",rt);var ms={onchange:function(b){this.prevBlocks_||(this.prevBlocks_=[null,null]);var x=this.getInputTargetBlock("A");const H=this.getInputTargetBlock("B");x&&H&&!this.workspace.connectionChecker.doTypeChecks(x.outputConnection,H.outputConnection)&&(i.setGroup$$module$build$src$core$events$utils(b.group),b=this.prevBlocks_[0],b!==x&&(x.unplug(),!b||b.isDisposed()||b.isShadow()||this.getInput("A").connection.connect(b.outputConnection)),x=this.prevBlocks_[1],x!==H&&(H.unplug(),!x||x.isDisposed()||x.isShadow()||this.getInput("B").connection.connect(x.outputConnection)),this.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},Qn=function(){this.mixin(ms)};i.register$$module$build$src$core$extensions("logic_compare",Qn);var gs={prevParentConnection_:null,onchange:function(b){const x=this.getInputTargetBlock("THEN"),H=this.getInputTargetBlock("ELSE"),V=this.outputConnection.targetConnection;if((x||H)&&V)for(let le=0;2>le;le++){const Qe=le===1?x:H;Qe&&!Qe.workspace.connectionChecker.doTypeChecks(Qe.outputConnection,V)&&(i.setGroup$$module$build$src$core$events$utils(b.group),V===this.prevParentConnection_?(this.unplug(),V.getSourceBlock().bumpNeighbours()):(Qe.unplug(),Qe.bumpNeighbours()),i.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=V}};i.registerMixin$$module$build$src$core$extensions("logic_ternary",gs),i.defineBlocks$$module$build$src$core$common(Zn);var _e={blocks:Zn},Ze=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Ye={init:function(){this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");return b.setAttribute("items",String(this.itemCount_)),b},domToMutation:function(b){if(b=b.getAttribute("items"),!b)throw new TypeError("element did not have items");this.itemCount_=parseInt(b,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(b){this.itemCount_=b.itemCount,this.updateShape_()},decompose:function(b){const x=b.newBlock("lists_create_with_container");x.initSvg();let H=x.getInput("STACK").connection;for(let V=0;V<this.itemCount_;V++){const le=b.newBlock("lists_create_with_item");if(le.initSvg(),!le.previousConnection)throw Error("itemBlock has no previousConnection");H.connect(le.previousConnection),H=le.nextConnection}return x},compose:function(b){var x=b.getInputTargetBlock("STACK");for(b=[];x;)x.isInsertionMarker()||b.push(x.valueConnection_),x=x.getNextBlock();for(x=0;x<this.itemCount_;x++){const H=this.getInput("ADD"+x).connection.targetConnection;H&&!b.includes(H)&&H.disconnect()}for(this.itemCount_=b.length,this.updateShape_(),x=0;x<this.itemCount_;x++){let H;(H=b[x])==null||H.reconnect(this,"ADD"+x)}},saveConnections:function(b){b=b.getInputTargetBlock("STACK");let x=0;for(;b;){if(b.isInsertionMarker()){b=b.getNextBlock();continue}const H=this.getInput("ADD"+x);let V;b.valueConnection_=(V=H)==null?void 0:V.connection.targetConnection,b=b.getNextBlock(),x++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var b=0;b<this.itemCount_;b++)if(!this.getInput("ADD"+b)){const x=this.appendValueInput("ADD"+b).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);b===0&&x.appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(b=this.itemCount_;this.getInput("ADD"+b);b++)this.removeInput("ADD"+b)}};Ze.lists_create_with=Ye;var Bn={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};Ze.lists_create_with_container=Bn;var sn={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};Ze.lists_create_with_item=sn;var W={init:function(){var b=[[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),b=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:b}),!b)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(b,"END"),this.setInputsInline(!0),this.setTooltip(()=>i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};Ze.lists_indexOf=W;var $s={init:function(){var b=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),b=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:b}),b.setValidator(function(x){x=x==="REMOVE",this.getSourceBlock().updateStatement_(x)}),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(b,"MODE").appendField("","SPACE"),b=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),b.setValidator(function(x){const H=this.getValue();x=x==="FROM_START"||x==="FROM_END",x!==(H==="FROM_START"||H==="FROM_END")&&this.getSourceBlock().updateAt_(x)}),this.appendDummyInput().appendField(b,"WHERE"),this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const x=this.getFieldValue("MODE"),H=this.getFieldValue("WHERE");let V="";switch(x+" "+H){case"GET FROM_START":case"GET FROM_END":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":V=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(H==="FROM_START"||H==="FROM_END")&&(V+="  "+(H==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),V})},mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");b.setAttribute("statement",String(!this.outputConnection));const x=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return b.setAttribute("at",String(x)),b},domToMutation:function(b){const x=b.getAttribute("statement")==="true";this.updateStatement_(x),b=b.getAttribute("at")!=="false",this.updateAt_(b)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(b){b.isStatement?this.updateStatement_(!0):typeof b=="string"&&this.domToMutation(i.textToDom$$module$build$src$core$utils$xml(b))},updateStatement_:function(b){b!==!this.outputConnection&&(this.unplug(!0,!0),b?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(b){this.removeInput("AT"),this.removeInput("ORDINAL",!0),b?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};Ze.lists_getIndex=$s;var ze={init:function(){var b=[[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),b=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:b}),this.appendDummyInput().appendField(b,"MODE").appendField("","SPACE"),b=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),b.setValidator(function(x){const H=this.getValue();x=x==="FROM_START"||x==="FROM_END",x!==(H==="FROM_START"||H==="FROM_END")&&this.getSourceBlock().updateAt_(x)}),this.appendDummyInput().appendField(b,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const x=this.getFieldValue("MODE"),H=this.getFieldValue("WHERE");let V="";switch(x+" "+H){case"SET FROM_START":case"SET FROM_END":V=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":V=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":V=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":V=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":V=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":V=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":V=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":V=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(H==="FROM_START"||H==="FROM_END")&&(V+="  "+i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),V})},mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation"),x=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return b.setAttribute("at",String(x)),b},domToMutation:function(b){b=b.getAttribute("at")!=="false",this.updateAt_(b)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(b){this.removeInput("AT"),this.removeInput("ORDINAL",!0),b?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};Ze.lists_setIndex=ze;var ct={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const b=x=>{const H=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+x]});return H.setValidator(function(V){const le=this.getValue();V=V==="FROM_START"||V==="FROM_END",V!==(le==="FROM_START"||le==="FROM_END")&&this.getSourceBlock().updateAt_(x,V)}),H};this.appendDummyInput("WHERE1_INPUT").appendField(b(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(b(2),"WHERE2"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");var x=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return b.setAttribute("at1",String(x)),x=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,b.setAttribute("at2",String(x)),b},domToMutation:function(b){const x=b.getAttribute("at1")==="true";b=b.getAttribute("at2")==="true",this.updateAt_(1,x),this.updateAt_(2,b)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(b,x){this.removeInput("AT"+b),this.removeInput("ORDINAL"+b,!0),x?(this.appendValueInput("AT"+b).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+b).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+b),b===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};Ze.lists_getSublist=ct,Ze.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},Ze.lists_split={init:function(){const b=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!b)throw Error("field_dropdown not found");b.setValidator(x=>{this.updateType_(x)}),this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(b,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const x=this.getFieldValue("MODE");if(x==="SPLIT")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(x==="JOIN")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+x)})},updateType_:function(b){if(this.getFieldValue("MODE")!==b){const x=this.getInput("INPUT").connection;x.setShadowDom(null);const H=x.targetBlock();H&&(x.disconnect(),H.isShadow()?H.dispose(!1):this.bumpNeighbours())}b==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const b=i.createElement$$module$build$src$core$utils$xml("mutation");return b.setAttribute("mode",this.getFieldValue("MODE")),b},domToMutation:function(b){this.updateType_(b.getAttribute("mode"))},saveExtraState:function(){return{mode:this.getFieldValue("MODE")}},loadExtraState:function(b){this.updateType_(b.mode)}},i.defineBlocks$$module$build$src$core$common(Ze);var Yt={blocks:Ze},Y=Object.assign({},Ze,Zn,qe,F,ee,C,f,a),he={blocks:Y,lists:Yt,logic:_e,loops:Rt,math:ke,procedures:ce,texts:N,variables:I,variablesDynamic:p};return he.__namespace__=i,he})})(eM);var tM=eM.exports;const XH=Ea(tM);(function(t,s){(function(o,i){t.exports=i(nr(),zH(),tM)})(Qs,function(o,i,a){return o.setLocale(i),o})})(QN);var YH=QN.exports;const KH=Ea(YH),{ASTNode:TK,BasicCursor:bK,Block:yK,BlockSvg:EK,Blocks:un,COLLAPSED_FIELD_NAME:vK,COLLAPSED_INPUT_NAME:CK,COLLAPSE_CHARS:SK,CodeGenerator:IK,CollapsibleToolboxCategory:wK,ComponentManager:kK,Connection:RK,ConnectionChecker:xK,ConnectionDB:OK,ConnectionType:AK,ContextMenu:NK,ContextMenuItems:MK,ContextMenuRegistry:LK,Css:DK,Cursor:PK,DELETE_VARIABLE_ID:BK,DeleteArea:FK,DragTarget:UK,DropDownDiv:VK,Events:HK,Extensions:GK,Field:jK,FieldCheckbox:WK,FieldDropdown:zK,FieldImage:XK,FieldLabel:YK,FieldLabelSerializable:KK,FieldNumber:hT,FieldTextInput:nd,FieldVariable:JK,Flyout:qK,FlyoutButton:ZK,FlyoutMetricsManager:QK,Generator:e6,Gesture:t6,Grid:n6,HorizontalFlyout:s6,INPUT_VALUE:o6,Input:i6,InsertionMarkerManager:r6,InsertionMarkerPreviewer:l6,Marker:a6,MarkerManager:c6,Menu:u6,MenuItem:d6,MetricsManager:h6,Msg:p6,NEXT_STATEMENT:f6,Names:m6,OPPOSITE_TYPE:g6,OUTPUT_VALUE:$6,Options:_6,PREVIOUS_STATEMENT:T6,PROCEDURE_CATEGORY_NAME:b6,Procedures:y6,RENAME_VARIABLE_ID:E6,RenderedConnection:v6,Scrollbar:C6,ScrollbarPair:S6,ShortcutItems:I6,ShortcutRegistry:w6,TOOLBOX_AT_BOTTOM:k6,TOOLBOX_AT_LEFT:R6,TOOLBOX_AT_RIGHT:x6,TOOLBOX_AT_TOP:O6,TabNavigateCursor:A6,Theme:N6,ThemeManager:M6,Themes:L6,Toolbox:D6,ToolboxCategory:P6,ToolboxItem:B6,ToolboxSeparator:F6,Tooltip:U6,Touch:V6,Trashcan:H6,UnattachedFieldError:G6,VARIABLE_CATEGORY_NAME:j6,VARIABLE_DYNAMIC_CATEGORY_NAME:W6,VERSION:z6,VariableMap:X6,VariableModel:Y6,Variables:K6,VariablesDynamic:J6,VerticalFlyout:q6,WidgetDiv:Z6,Workspace:Q6,WorkspaceAudio:e8,WorkspaceDragger:t8,WorkspaceSvg:n8,Xml:s8,ZoomControls:o8,blockAnimations:i8,blockRendering:r8,browserEvents:l8,bubbles:a8,bumpObjects:c8,clipboard:u8,comments:d8,common:h8,config:p8,constants:f8,defineBlocksWithJsonArray:m8,dialog:g8,dragging:$8,fieldRegistry:_8,geras:T8,getMainWorkspace:b8,getSelected:y8,hasBubble:E8,hideChaff:v8,icons:C8,inject:S8,inputs:I8,isCopyable:w8,isDeletable:k8,isDraggable:R8,isIcon:x8,isObservable:O8,isPaster:A8,isRenderedElement:N8,isSelectable:M8,isSerializable:L8,isVariableBackedParameterModel:D8,layers:P8,procedures:B8,registry:F8,renderManagement:U8,serialization:V8,setLocale:H8,setParentContainer:G8,svgResize:j8,thrasos:W8,uiPosition:z8,utils:X8,zelos:Y8}=KH;un.flutter_center={init(){this.appendValueInput("child").setCheck("Widget").appendField("Center child"),this.setOutput(!0,["Widget","Center"]),this.setColour(230),this.setTooltip("Centers its child"),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/Center-class.html")}};un.scaffold={init:function(){this.appendDummyInput().setAlign(void 0).appendField("Scaffold"),this.appendValueInput("appBar").setCheck("AppBar").setAlign(void 0).appendField("appBar"),this.appendValueInput("body").setCheck("Widget").setAlign(void 0).appendField("body"),this.appendValueInput("fab").setCheck("FloatingActionButton").setAlign(void 0).appendField("floatingActionButton"),this.setOutput(!0,["Widget","Scaffold"]),this.setColour(165),this.setTooltip("Hi"),this.setHelpUrl("https://api.flutter.dev/flutter/material/Scaffold-class")}};un.appBar={init:function(){this.appendDummyInput().appendField("appBar"),this.appendValueInput("title").setAlign(void 0).appendField("title").setCheck("flutter_text"),this.setOutput(!0,["Widget","AppBar"]),this.setColour(165),this.setTooltip(""),this.setHelpUrl("https://api.flutter.dev/flutter/material/AppBar-class.html")}};un.flutter_text={init:function(){this.appendValueInput("data").setCheck("String").appendField("Text"),this.setColour(230),this.setOutput(!0,["Widget","Text"]),this.setTooltip("Text Widget"),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/Text-class.html")}};un.flutter_row={init:function(){this.appendDummyInput().appendField("Row"),this.appendValueInput("children").appendField("children").setCheck(["Array","Widget"]),this.setOutput(!0,["Widget","Row"]),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/Row-class.html")}};un.flutter_column={init:function(){this.appendDummyInput().appendField("Column"),this.appendValueInput("children").appendField("children").setCheck(["Array","Widget"]),this.setOutput(!0,["Widget","Column"]),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/Column-class.html")}};un.flutter_listview={init:function(){this.appendDummyInput().appendField("ListView"),this.appendValueInput("children").appendField("children").setCheck(["Array","Widget"]),this.setOutput(!0,["Widget","ListView"]),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/ListView-class.html")}};un.flutter_icon={init:function(){this.appendValueInput("icon").setCheck("IconData").appendField("icon"),this.appendValueInput("color").setCheck("Color").appendField("color"),this.appendValueInput("size").setCheck("Number").appendField("size"),this.setColour(230),this.setOutput(!0,["Widget","Icon"]),this.setTooltip(""),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/Icon-class.html")}};un.flutter_icons={init:function(){this.appendDummyInput().appendField("Icons.").appendField(new nd("android"),"constant"),this.setOutput(!0,"IconData"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/IconData-class.html")}};un.flutter_placeholder={init:function(){this.appendDummyInput().appendField("Placeholder"),this.appendDummyInput().appendField("color"),this.appendDummyInput().appendField("strokeWidth").appendField(new hT(2),"strokeWidth"),this.appendDummyInput().appendField("fallbackWidth").appendField(new hT(400),"fallbackWidth"),this.appendDummyInput().appendField("fallbackHeight").appendField(new hT(400),"fallbackHeight"),this.setOutput(!0,["Widget","Placeholder"]),this.setColour(230),this.setTooltip("A widget that draws a box that represents where other widgets will one day be added."),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/Placeholder-class.html")}};un.flutter_raised_button={init:function(){this.appendDummyInput().appendField("RaisedButton"),this.appendStatementInput("onPressed").setCheck("Function").appendField("onPressed"),this.appendValueInput("child").setCheck("Widget").appendField("child"),this.setOutput(!0,["Widget","RaisedButton"]),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://api.flutter.dev/flutter/material/RaisedButton-class.html")}};un.flutter_fab={init:function(){this.appendDummyInput().appendField("Floating Action Button"),this.appendStatementInput("onPressed").setCheck("Function").appendField("onPressed"),this.appendValueInput("child").setCheck("Widget").appendField("child"),this.setOutput(!0,["Widget","FloatingActionButton"]),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://api.flutter.dev/flutter/material/FloatingActionButton-class.html")}};un.flutter_stateful_widget={init:function(){this.appendDummyInput().appendField(new nd("App"),"classname").appendField("MainWidget"),this.appendStatementInput("Variables").setCheck(null).appendField("Variables"),this.appendValueInput("content").setCheck("Widget"),this.setColour(250),this.setTooltip("MainWidget is a StatefulWidget that can hold state and rebuild when the state changes."),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/StatefulWidget-class.html")}};un.flutter_create_instance={init:function(){this.appendDummyInput().appendField("Create instance of").appendField(new nd("MyWidget"),"className"),this.setOutput(!0,"Widget"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}};un.flutter_container={init:function(){this.appendDummyInput().appendField("Container"),this.appendValueInput("width").setCheck("Number").appendField("width"),this.appendValueInput("height").setCheck("Number").appendField("height"),this.appendValueInput("color").setCheck("Colour").appendField("color"),this.appendValueInput("child").setCheck("Widget").appendField("child"),this.setOutput(!0,["Widget","Container"]),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/Container/Container.html")}};un.flutter_set_state_call={init:function(){this.appendDummyInput().appendField("setState"),this.appendStatementInput("code").setCheck(null).appendField("code to run"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://api.flutter.dev/flutter/widgets/State/setState.html")}};un.flutter_raw_input={init:function(){this.appendDummyInput().appendField("raw code").appendField(new nd("default"),"code"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}};un.flutter_raw_statement={init:function(){this.appendDummyInput().appendField("raw code").appendField(new nd("var a = 0;"),"code"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}};var nM={exports:{}};(function(t,s){(function(o,i){t.exports=i(nr())})(Qs,function(o){var i=o.__namespace__,a=function(E,R){return["[]",W.ATOMIC]},c=function(E,R){const G=Array(E.itemCount_);for(let j=0;j<E.itemCount_;j++)G[j]=R.valueToCode(E,"ADD"+j,W.NONE)||"null";return["["+G.join(", ")+"]",W.ATOMIC]},u=function(E,R){const G=R.valueToCode(E,"ITEM",W.NONE)||"null";return["new List.filled("+(R.valueToCode(E,"NUM",W.NONE)||"0")+", "+G+")",W.UNARY_POSTFIX]},h=function(E,R){return[(R.valueToCode(E,"VALUE",W.UNARY_POSTFIX)||"[]")+".length",W.UNARY_POSTFIX]},p=function(E,R){return[(R.valueToCode(E,"VALUE",W.UNARY_POSTFIX)||"[]")+".isEmpty",W.UNARY_POSTFIX]},f=function(E,R){const G=E.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",j=R.valueToCode(E,"FIND",W.NONE)||"''";return R=(R.valueToCode(E,"VALUE",W.UNARY_POSTFIX)||"[]")+"."+G+"("+j+")",E.workspace.options.oneBasedIndex?[R+" + 1",W.ADDITIVE]:[R,W.UNARY_POSTFIX]},g=function(E,R){function G(){const Ie=R.nameDB_.getDistinctName("tmp_list",i.NameType$$module$build$src$core$names.VARIABLE),bt="List "+Ie+" = "+se+`;
`;return se=Ie,bt}var j=E.getFieldValue("MODE")||"GET";const te=E.getFieldValue("WHERE")||"FROM_START";let se=R.valueToCode(E,"VALUE",te==="RANDOM"||te==="FROM_END"?W.NONE:W.UNARY_POSTFIX)||"[]";if((te!=="RANDOM"||j!=="REMOVE")&&te!=="FROM_END"||se.match(/^\w+$/))switch(te){case"FIRST":if(j==="GET")return[se+".first",W.UNARY_POSTFIX];if(j==="GET_REMOVE")return[se+".removeAt(0)",W.UNARY_POSTFIX];if(j==="REMOVE")return se+`.removeAt(0);
`;break;case"LAST":if(j==="GET")return[se+".last",W.UNARY_POSTFIX];if(j==="GET_REMOVE")return[se+".removeLast()",W.UNARY_POSTFIX];if(j==="REMOVE")return se+`.removeLast();
`;break;case"FROM_START":if(E=R.getAdjusted(E,"AT"),j==="GET")return[se+"["+E+"]",W.UNARY_POSTFIX];if(j==="GET_REMOVE")return[se+".removeAt("+E+")",W.UNARY_POSTFIX];if(j==="REMOVE")return se+".removeAt("+E+`);
`;break;case"FROM_END":if(E=R.getAdjusted(E,"AT",1,!1,W.ADDITIVE),j==="GET")return[se+"["+se+".length - "+E+"]",W.UNARY_POSTFIX];if(j==="GET_REMOVE"||j==="REMOVE"){if(E=se+".removeAt("+se+".length - "+E+")",j==="GET_REMOVE")return[E,W.UNARY_POSTFIX];if(j==="REMOVE")return E+`;
`}break;case"RANDOM":if(R.definitions_.import_dart_math="import 'dart:math' as Math;",j==="REMOVE")return j=R.nameDB_.getDistinctName("tmp_x",i.NameType$$module$build$src$core$names.VARIABLE),"int "+j+" = new Math.Random().nextInt("+se+`.length);
`+(se+".removeAt("+j+`);
`);if(j==="GET")return[R.provideFunction_("lists_get_random_item",`
dynamic ${R.FUNCTION_NAME_PLACEHOLDER_}(List my_list) {
  int x = new Math.Random().nextInt(my_list.length);
  return my_list[x];
}
`)+"("+se+")",W.UNARY_POSTFIX];if(j==="GET_REMOVE")return[R.provideFunction_("lists_remove_random_item",`
dynamic ${R.FUNCTION_NAME_PLACEHOLDER_}(List my_list) {
  int x = new Math.Random().nextInt(my_list.length);
  return my_list.removeAt(x);
}
`)+"("+se+")",W.UNARY_POSTFIX]}else{if(te==="RANDOM")return R.definitions_.import_dart_math="import 'dart:math' as Math;",j=G(),E=R.nameDB_.getDistinctName("tmp_x",i.NameType$$module$build$src$core$names.VARIABLE),j+("int "+E+" = new Math.Random().nextInt("+se+`.length);
`)+(se+".removeAt("+E+`);
`);if(j==="REMOVE")return j=R.getAdjusted(E,"AT",1,!1,W.ADDITIVE),G()+(se+".removeAt("+se+".length - "+j+`);
`);if(j==="GET")return j=R.getAdjusted(E,"AT",1),[R.provideFunction_("lists_get_from_end",`
dynamic ${R.FUNCTION_NAME_PLACEHOLDER_}(List my_list, num x) {
  x = my_list.length - x;
  return my_list[x];
}
`)+"("+se+", "+j+")",W.UNARY_POSTFIX];if(j==="GET_REMOVE")return j=R.getAdjusted(E,"AT",1),[R.provideFunction_("lists_remove_from_end",`
dynamic ${R.FUNCTION_NAME_PLACEHOLDER_}(List my_list, num x) {
  x = my_list.length - x;
  return my_list.removeAt(x);
}
`)+"("+se+", "+j+")",W.UNARY_POSTFIX]}throw Error("Unhandled combination (lists_getIndex).")},m=function(E,R){function G(){if(se.match(/^\w+$/))return"";const bt=R.nameDB_.getDistinctName("tmp_list",i.NameType$$module$build$src$core$names.VARIABLE),jt="List "+bt+" = "+se+`;
`;return se=bt,jt}const j=E.getFieldValue("MODE")||"GET";var te=E.getFieldValue("WHERE")||"FROM_START";let se=R.valueToCode(E,"LIST",W.UNARY_POSTFIX)||"[]";const Ie=R.valueToCode(E,"TO",W.ASSIGNMENT)||"null";switch(te){case"FIRST":if(j==="SET")return se+"[0] = "+Ie+`;
`;if(j==="INSERT")return se+".insert(0, "+Ie+`);
`;break;case"LAST":if(j==="SET")return G()+(se+"["+se+".length - 1] = "+Ie+`;
`);if(j==="INSERT")return se+".add("+Ie+`);
`;break;case"FROM_START":if(E=R.getAdjusted(E,"AT"),j==="SET")return se+"["+E+"] = "+Ie+`;
`;if(j==="INSERT")return se+".insert("+E+", "+Ie+`);
`;break;case"FROM_END":if(E=R.getAdjusted(E,"AT",1,!1,W.ADDITIVE),te=G(),j==="SET")return te+(se+"["+se+".length - "+E+"] = "+Ie+`;
`);if(j==="INSERT")return te+(se+".insert("+se+".length - "+E+", "+Ie+`);
`);break;case"RANDOM":if(R.definitions_.import_dart_math="import 'dart:math' as Math;",E=G(),te=R.nameDB_.getDistinctName("tmp_x",i.NameType$$module$build$src$core$names.VARIABLE),E+="int "+te+" = new Math.Random().nextInt("+se+`.length);
`,j==="SET")return E+(se+"["+te+"] = "+Ie+`;
`);if(j==="INSERT")return E+(se+".insert("+te+", "+Ie+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},T=function(E,R){const G=R.valueToCode(E,"LIST",W.UNARY_POSTFIX)||"[]";var j=E.getFieldValue("WHERE1");const te=E.getFieldValue("WHERE2");if(G.match(/^\w+$/)||j!=="FROM_END"&&te==="FROM_START"){switch(j){case"FROM_START":j=R.getAdjusted(E,"AT1");break;case"FROM_END":j=R.getAdjusted(E,"AT1",1,!1,W.ADDITIVE),j=G+".length - "+j;break;case"FIRST":j="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(te){case"FROM_START":var se=R.getAdjusted(E,"AT2",1);break;case"FROM_END":se=R.getAdjusted(E,"AT2",0,!1,W.ADDITIVE),se=G+".length - "+se;break;case"LAST":break;default:throw Error("Unhandled option (lists_getSublist).")}R=te==="LAST"?G+".sublist("+j+")":G+".sublist("+j+", "+se+")"}else se=R.getAdjusted(E,"AT1"),E=R.getAdjusted(E,"AT2"),R=R.provideFunction_("lists_get_sublist",`
List ${R.FUNCTION_NAME_PLACEHOLDER_}(List list, String where1, num at1, String where2, num at2) {
  int getAt(String where, num at) {
    if (where == 'FROM_END') {
      at = list.length - 1 - at;
    } else if (where == 'FIRST') {
      at = 0;
    } else if (where == 'LAST') {
      at = list.length - 1;
    } else if (where != 'FROM_START') {
      throw 'Unhandled option (lists_getSublist).';
    }
    return at;
  }
  at1 = getAt(where1, at1);
  at2 = getAt(where2, at2) + 1;
  return list.sublist(at1, at2);
}
`)+"("+G+", '"+j+"', "+se+", '"+te+"', "+E+")";return[R,W.UNARY_POSTFIX]},I=function(E,R){const G=R.valueToCode(E,"LIST",W.NONE)||"[]",j=E.getFieldValue("DIRECTION")==="1"?1:-1;return E=E.getFieldValue("TYPE"),[R.provideFunction_("lists_sort",`
List ${R.FUNCTION_NAME_PLACEHOLDER_}(List list, String type, int direction) {
  var compareFuncs = {
    'NUMERIC': (a, b) => (direction * a.compareTo(b)).toInt(),
    'TEXT': (a, b) => direction * a.toString().compareTo(b.toString()),
    'IGNORE_CASE':
      (a, b) => direction *
      a.toString().toLowerCase().compareTo(b.toString().toLowerCase())
  };
  list = new List.from(list);
  var compare = compareFuncs[type];
  list.sort(compare);
  return list;
}
`)+"("+G+', "'+E+'", '+j+")",W.UNARY_POSTFIX]},C=function(E,R){let G=R.valueToCode(E,"INPUT",W.UNARY_POSTFIX);if(R=R.valueToCode(E,"DELIM",W.NONE)||"''",E=E.getFieldValue("MODE"),E==="SPLIT")G||(G="''"),E="split";else if(E==="JOIN")G||(G="[]"),E="join";else throw Error("Unknown mode: "+E);return[G+"."+E+"("+R+")",W.UNARY_POSTFIX]},w=function(E,R){return["new List.from("+(R.valueToCode(E,"LIST",W.NONE)||"[]")+".reversed)",W.UNARY_POSTFIX]},A=function(E,R){let G=0,j="",te,se;R.STATEMENT_PREFIX&&(j+=R.injectId(R.STATEMENT_PREFIX,E));do se=R.valueToCode(E,"IF"+G,W.NONE)||"false",te=R.statementToCode(E,"DO"+G),R.STATEMENT_SUFFIX&&(te=R.prefixLines(R.injectId(R.STATEMENT_SUFFIX,E),R.INDENT)+te),j+=(0<G?"else ":"")+"if ("+se+`) {
`+te+"}",G++;while(E.getInput("IF"+G));return(E.getInput("ELSE")||R.STATEMENT_SUFFIX)&&(te=E.getInput("ELSE")?R.statementToCode(E,"ELSE"):"",R.STATEMENT_SUFFIX&&(te=R.prefixLines(R.injectId(R.STATEMENT_SUFFIX,E),R.INDENT)+te),j+=` else {
`+te+"}"),j+`
`},S=function(E,R){const G={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[E.getFieldValue("OP")],j=G==="=="||G==="!="?W.EQUALITY:W.RELATIONAL,te=R.valueToCode(E,"A",j)||"0";return E=R.valueToCode(E,"B",j)||"0",[te+" "+G+" "+E,j]},y=function(E,R){const G=E.getFieldValue("OP")==="AND"?"&&":"||",j=G==="&&"?W.LOGICAL_AND:W.LOGICAL_OR;let te=R.valueToCode(E,"A",j);return E=R.valueToCode(E,"B",j),te||E?(R=G==="&&"?"true":"false",te||(te=R),E||(E=R)):E=te="false",[te+" "+G+" "+E,j]},v=function(E,R){const G=W.UNARY_PREFIX;return["!"+(R.valueToCode(E,"BOOL",G)||"true"),G]},M=function(E,R){return[E.getFieldValue("BOOL")==="TRUE"?"true":"false",W.ATOMIC]},L=function(E,R){return["null",W.ATOMIC]},P=function(E,R){const G=R.valueToCode(E,"IF",W.CONDITIONAL)||"false",j=R.valueToCode(E,"THEN",W.CONDITIONAL)||"null";return E=R.valueToCode(E,"ELSE",W.CONDITIONAL)||"null",[G+" ? "+j+" : "+E,W.CONDITIONAL]},B=function(E,R){let G;G=E.getField("TIMES")?String(Number(E.getFieldValue("TIMES"))):R.valueToCode(E,"TIMES",W.ASSIGNMENT)||"0";let j=R.statementToCode(E,"DO");j=R.addLoopTrap(j,E),E="";const te=R.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE);let se=G;return G.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(G)||(se=R.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE),E+="var "+se+" = "+G+`;
`),E+("for (int "+te+" = 0; "+te+" < "+se+"; "+te+`++) {
`+j+`}
`)},N=function(E,R){const G=E.getFieldValue("MODE")==="UNTIL";let j=R.valueToCode(E,"BOOL",G?W.UNARY_PREFIX:W.NONE)||"false",te=R.statementToCode(E,"DO");return te=R.addLoopTrap(te,E),G&&(j="!"+j),"while ("+j+`) {
`+te+`}
`},ee=function(E,R){var G=R.getVariableName(E.getFieldValue("VAR")),j=R.valueToCode(E,"FROM",W.ASSIGNMENT)||"0",te=R.valueToCode(E,"TO",W.ASSIGNMENT)||"0";const se=R.valueToCode(E,"BY",W.ASSIGNMENT)||"1";let Ie=R.statementToCode(E,"DO");if(Ie=R.addLoopTrap(Ie,E),i.isNumber$$module$build$src$core$utils$string(j)&&i.isNumber$$module$build$src$core$utils$string(te)&&i.isNumber$$module$build$src$core$utils$string(se))R=Number(j)<=Number(te),E="for ("+G+" = "+j+"; "+G+(R?" <= ":" >= ")+te+"; "+G,G=Math.abs(Number(se)),E=G===1?E+(R?"++":"--"):E+((R?" += ":" -= ")+G),E+=`) {
`+Ie+`}
`;else{E="";let bt=j;j.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(j)||(bt=R.nameDB_.getDistinctName(G+"_start",i.NameType$$module$build$src$core$names.VARIABLE),E+="var "+bt+" = "+j+`;
`),j=te,te.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(te)||(j=R.nameDB_.getDistinctName(G+"_end",i.NameType$$module$build$src$core$names.VARIABLE),E+="var "+j+" = "+te+`;
`),te=R.nameDB_.getDistinctName(G+"_inc",i.NameType$$module$build$src$core$names.VARIABLE),E+="num "+te+" = ",E=i.isNumber$$module$build$src$core$utils$string(se)?E+(Math.abs(Number(se))+`;
`):E+("("+se+`).abs();
`),E+="if ("+bt+" > "+j+`) {
`,E+=R.INDENT+te+" = -"+te+`;
`,E=E+`}
for (`+(G+" = "+bt+"; "+te+" >= 0 ? "+G+" <= "+j+" : "+G+" >= "+j+"; "+G+" += "+te+`) {
`+Ie+`}
`)}return E},ie=function(E,R){const G=R.getVariableName(E.getFieldValue("VAR")),j=R.valueToCode(E,"LIST",W.ASSIGNMENT)||"[]";let te=R.statementToCode(E,"DO");return te=R.addLoopTrap(te,E),"for (var "+G+" in "+j+`) {
`+te+`}
`},Te=function(E,R){let G="";if(R.STATEMENT_PREFIX&&(G+=R.injectId(R.STATEMENT_PREFIX,E)),R.STATEMENT_SUFFIX&&(G+=R.injectId(R.STATEMENT_SUFFIX,E)),R.STATEMENT_PREFIX){const j=E.getSurroundLoop();j&&!j.suppressPrefixSuffix&&(G+=R.injectId(R.STATEMENT_PREFIX,j))}switch(E.getFieldValue("FLOW")){case"BREAK":return G+`break;
`;case"CONTINUE":return G+`continue;
`}throw Error("Unknown flow statement.")},Ue=function(E,R){return E=Number(E.getFieldValue("NUM")),E===1/0?["double.infinity",W.UNARY_POSTFIX]:E===-1/0?["-double.infinity",W.UNARY_PREFIX]:[String(E),0>E?W.UNARY_PREFIX:W.ATOMIC]},je=function(E,R){var G={ADD:[" + ",W.ADDITIVE],MINUS:[" - ",W.ADDITIVE],MULTIPLY:[" * ",W.MULTIPLICATIVE],DIVIDE:[" / ",W.MULTIPLICATIVE],POWER:[null,W.NONE]}[E.getFieldValue("OP")];const j=G[0];G=G[1];const te=R.valueToCode(E,"A",G)||"0";return E=R.valueToCode(E,"B",G)||"0",j?[te+j+E,G]:(R.definitions_.import_dart_math="import 'dart:math' as Math;",["Math.pow("+te+", "+E+")",W.UNARY_POSTFIX])},we=function(E,R){const G=E.getFieldValue("OP");let j;if(G==="NEG")return E=R.valueToCode(E,"NUM",W.UNARY_PREFIX)||"0",E[0]==="-"&&(E=" "+E),["-"+E,W.UNARY_PREFIX];switch(R.definitions_.import_dart_math="import 'dart:math' as Math;",E=G==="ABS"||G.substring(0,5)==="ROUND"?R.valueToCode(E,"NUM",W.UNARY_POSTFIX)||"0":G==="SIN"||G==="COS"||G==="TAN"?R.valueToCode(E,"NUM",W.MULTIPLICATIVE)||"0":R.valueToCode(E,"NUM",W.NONE)||"0",G){case"ABS":j=E+".abs()";break;case"ROOT":j="Math.sqrt("+E+")";break;case"LN":j="Math.log("+E+")";break;case"EXP":j="Math.exp("+E+")";break;case"POW10":j="Math.pow(10,"+E+")";break;case"ROUND":j=E+".round()";break;case"ROUNDUP":j=E+".ceil()";break;case"ROUNDDOWN":j=E+".floor()";break;case"SIN":j="Math.sin("+E+" / 180 * Math.pi)";break;case"COS":j="Math.cos("+E+" / 180 * Math.pi)";break;case"TAN":j="Math.tan("+E+" / 180 * Math.pi)"}if(j)return[j,W.UNARY_POSTFIX];switch(G){case"LOG10":j="Math.log("+E+") / Math.log(10)";break;case"ASIN":j="Math.asin("+E+") / Math.pi * 180";break;case"ACOS":j="Math.acos("+E+") / Math.pi * 180";break;case"ATAN":j="Math.atan("+E+") / Math.pi * 180";break;default:throw Error("Unknown math operator: "+G)}return[j,W.MULTIPLICATIVE]},Fe=function(E,R){const G={PI:["Math.pi",W.UNARY_POSTFIX],E:["Math.e",W.UNARY_POSTFIX],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",W.MULTIPLICATIVE],SQRT2:["Math.sqrt2",W.UNARY_POSTFIX],SQRT1_2:["Math.sqrt1_2",W.UNARY_POSTFIX],INFINITY:["double.infinity",W.ATOMIC]};return E=E.getFieldValue("CONSTANT"),E!=="INFINITY"&&(R.definitions_.import_dart_math="import 'dart:math' as Math;"),G[E]},de=function(E,R){var G={EVEN:[" % 2 == 0",W.MULTIPLICATIVE,W.EQUALITY],ODD:[" % 2 == 1",W.MULTIPLICATIVE,W.EQUALITY],WHOLE:[" % 1 == 0",W.MULTIPLICATIVE,W.EQUALITY],POSITIVE:[" > 0",W.RELATIONAL,W.RELATIONAL],NEGATIVE:[" < 0",W.RELATIONAL,W.RELATIONAL],DIVISIBLE_BY:[null,W.MULTIPLICATIVE,W.EQUALITY],PRIME:[null,W.NONE,W.UNARY_POSTFIX]};const j=E.getFieldValue("PROPERTY"),[te,se,Ie]=G[j];if(G=R.valueToCode(E,"NUMBER_TO_CHECK",se)||"0",j==="PRIME")R.definitions_.import_dart_math="import 'dart:math' as Math;",E=R.provideFunction_("math_isPrime",`
bool ${R.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is null, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (n == null || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) == 0 || n % (x + 1) == 0) {
      return false;
    }
  }
  return true;
}
`)+"("+G+")";else if(j==="DIVISIBLE_BY"){if(E=R.valueToCode(E,"DIVISOR",W.MULTIPLICATIVE)||"0",E==="0")return["false",W.ATOMIC];E=G+" % "+E+" == 0"}else E=G+te;return[E,Ie]},ce=function(E,R){const G=R.valueToCode(E,"DELTA",W.ADDITIVE)||"0";return E=R.getVariableName(E.getFieldValue("VAR")),E+" = ("+E+" is num ? "+E+" : 0) + "+G+`;
`},F=function(E,R){const G=E.getFieldValue("OP");switch(E=R.valueToCode(E,"LIST",W.NONE)||"[]",G){case"SUM":R=R.provideFunction_("math_sum",`
num ${R.FUNCTION_NAME_PLACEHOLDER_}(List<num> myList) {
  num sumVal = 0;
  myList.forEach((num entry) {sumVal += entry;});
  return sumVal;
}
`)+"("+E+")";break;case"MIN":R.definitions_.import_dart_math="import 'dart:math' as Math;",R=R.provideFunction_("math_min",`
num ${R.FUNCTION_NAME_PLACEHOLDER_}(List<num> myList) {
  if (myList.isEmpty) return null;
  num minVal = myList[0];
  myList.forEach((num entry) {minVal = Math.min(minVal, entry);});
  return minVal;
}
`)+"("+E+")";break;case"MAX":R.definitions_.import_dart_math="import 'dart:math' as Math;",R=R.provideFunction_("math_max",`
num ${R.FUNCTION_NAME_PLACEHOLDER_}(List<num> myList) {
  if (myList.isEmpty) return null;
  num maxVal = myList[0];
  myList.forEach((num entry) {maxVal = Math.max(maxVal, entry);});
  return maxVal;
}
`)+"("+E+")";break;case"AVERAGE":R=R.provideFunction_("math_mean",`
num ${R.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  // First filter list for numbers only.
  List localList = new List.from(myList);
  localList.removeWhere((a) => a is! num);
  if (localList.isEmpty) return null;
  num sumVal = 0;
  localList.forEach((var entry) {sumVal += entry;});
  return sumVal / localList.length;
}
`)+"("+E+")";break;case"MEDIAN":R=R.provideFunction_("math_median",`
num ${R.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  // First filter list for numbers only, then sort, then return middle value
  // or the average of two middle values if list has an even number of elements.
  List localList = new List.from(myList);
  localList.removeWhere((a) => a is! num);
  if (localList.isEmpty) return null;
  localList.sort((a, b) => (a - b));
  int index = localList.length ~/ 2;
  if (localList.length % 2 == 1) {
    return localList[index];
  } else {
    return (localList[index - 1] + localList[index]) / 2;
  }
}
`)+"("+E+")";break;case"MODE":R.definitions_.import_dart_math="import 'dart:math' as Math;",R=R.provideFunction_("math_modes",`
List ${R.FUNCTION_NAME_PLACEHOLDER_}(List values) {
  List modes = [];
  List counts = [];
  int maxCount = 0;
  for (int i = 0; i < values.length; i++) {
    var value = values[i];
    bool found = false;
    int thisCount;
    for (int j = 0; j < counts.length; j++) {
      if (counts[j][0] == value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.add([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (int j = 0; j < counts.length; j++) {
    if (counts[j][1] == maxCount) {
        modes.add(counts[j][0]);
    }
  }
  return modes;
}
`)+"("+E+")";break;case"STD_DEV":R.definitions_.import_dart_math="import 'dart:math' as Math;",R=R.provideFunction_("math_standard_deviation",`
num ${R.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  // First filter list for numbers only.
  List numbers = new List.from(myList);
  numbers.removeWhere((a) => a is! num);
  if (numbers.isEmpty) return null;
  num n = numbers.length;
  num sum = 0;
  numbers.forEach((x) => sum += x);
  num mean = sum / n;
  num sumSquare = 0;
  numbers.forEach((x) => sumSquare += Math.pow(x - mean, 2));
  return Math.sqrt(sumSquare / n);
}
`)+"("+E+")";break;case"RANDOM":R.definitions_.import_dart_math="import 'dart:math' as Math;",R=R.provideFunction_("math_random_item",`
dynamic ${R.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  int x = new Math.Random().nextInt(myList.length);
  return myList[x];
}
`)+"("+E+")";break;default:throw Error("Unknown operator: "+G)}return[R,W.UNARY_POSTFIX]},ue=function(E,R){const G=R.valueToCode(E,"DIVIDEND",W.MULTIPLICATIVE)||"0";return E=R.valueToCode(E,"DIVISOR",W.MULTIPLICATIVE)||"0",[G+" % "+E,W.MULTIPLICATIVE]},ae=function(E,R){R.definitions_.import_dart_math="import 'dart:math' as Math;";const G=R.valueToCode(E,"VALUE",W.NONE)||"0",j=R.valueToCode(E,"LOW",W.NONE)||"0";return E=R.valueToCode(E,"HIGH",W.NONE)||"double.infinity",["Math.min(Math.max("+G+", "+j+"), "+E+")",W.UNARY_POSTFIX]},fe=function(E,R){R.definitions_.import_dart_math="import 'dart:math' as Math;";const G=R.valueToCode(E,"FROM",W.NONE)||"0";return E=R.valueToCode(E,"TO",W.NONE)||"0",[R.provideFunction_("math_random_int",`
int ${R.FUNCTION_NAME_PLACEHOLDER_}(num a, num b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    num c = a;
    a = b;
    b = c;
  }
  return new Math.Random().nextInt(b - a + 1) + a;
}
`)+"("+G+", "+E+")",W.UNARY_POSTFIX]},Ee=function(E,R){return R.definitions_.import_dart_math="import 'dart:math' as Math;",["new Math.Random().nextDouble()",W.UNARY_POSTFIX]},xe=function(E,R){R.definitions_.import_dart_math="import 'dart:math' as Math;";const G=R.valueToCode(E,"X",W.NONE)||"0";return["Math.atan2("+(R.valueToCode(E,"Y",W.NONE)||"0")+", "+G+") / Math.pi * 180",W.MULTIPLICATIVE]},ke=function(E,R){const G=R.getProcedureName(E.getFieldValue("NAME"));var j="";R.STATEMENT_PREFIX&&(j+=R.injectId(R.STATEMENT_PREFIX,E)),R.STATEMENT_SUFFIX&&(j+=R.injectId(R.STATEMENT_SUFFIX,E)),j&&(j=R.prefixLines(j,R.INDENT));let te="";R.INFINITE_LOOP_TRAP&&(te=R.prefixLines(R.injectId(R.INFINITE_LOOP_TRAP,E),R.INDENT));let se="";E.getInput("STACK")&&(se=R.statementToCode(E,"STACK"));let Ie="";E.getInput("RETURN")&&(Ie=R.valueToCode(E,"RETURN",W.NONE)||"");let bt="";se&&Ie&&(bt=j),Ie&&(Ie=R.INDENT+"return "+Ie+`;
`);const jt=Ie?"dynamic":"void",dt=[],Ot=E.getVars();for(let In=0;In<Ot.length;In++)dt[In]=R.getVariableName(Ot[In]);return j=jt+" "+G+"("+dt.join(", ")+`) {
`+j+te+se+bt+Ie+"}",j=R.scrub_(E,j),R.definitions_["%"+G]=j,null},qe=function(E,R){const G=R.getProcedureName(E.getFieldValue("NAME")),j=[],te=E.getVars();for(let se=0;se<te.length;se++)j[se]=R.valueToCode(E,"ARG"+se,W.NONE)||"null";return[G+"("+j.join(", ")+")",W.UNARY_POSTFIX]},Re=function(E,R){return R.forBlock.procedures_callreturn(E,R)[0]+`;
`},Oe=function(E,R){let G="if ("+(R.valueToCode(E,"CONDITION",W.NONE)||"false")+`) {
`;return R.STATEMENT_SUFFIX&&(G+=R.prefixLines(R.injectId(R.STATEMENT_SUFFIX,E),R.INDENT)),E.hasReturnValue_?(E=R.valueToCode(E,"VALUE",W.NONE)||"null",G+=R.INDENT+"return "+E+`;
`):G+=R.INDENT+`return;
`,G+`}
`},Tt=function(E,R){return[R.quote_(E.getFieldValue("TEXT")),W.ATOMIC]},He=function(E,R){switch(E.itemCount_){case 0:return["''",W.ATOMIC];case 1:return[(R.valueToCode(E,"ADD0",W.UNARY_POSTFIX)||"''")+".toString()",W.UNARY_POSTFIX];default:const G=Array(E.itemCount_);for(let j=0;j<E.itemCount_;j++)G[j]=R.valueToCode(E,"ADD"+j,W.NONE)||"''";return["["+G.join(",")+"].join()",W.UNARY_POSTFIX]}},We=function(E,R){const G=R.getVariableName(E.getFieldValue("VAR"));return E=R.valueToCode(E,"TEXT",W.NONE)||"''",G+" = ["+G+", "+E+`].join();
`},Ft=function(E,R){return[(R.valueToCode(E,"VALUE",W.UNARY_POSTFIX)||"''")+".length",W.UNARY_POSTFIX]},Rt=function(E,R){return[(R.valueToCode(E,"VALUE",W.UNARY_POSTFIX)||"''")+".isEmpty",W.UNARY_POSTFIX]},Zn=function(E,R){const G=E.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",j=R.valueToCode(E,"FIND",W.NONE)||"''";return R=(R.valueToCode(E,"VALUE",W.UNARY_POSTFIX)||"''")+"."+G+"("+j+")",E.workspace.options.oneBasedIndex?[R+" + 1",W.ADDITIVE]:[R,W.UNARY_POSTFIX]},nn=function(E,R){const G=E.getFieldValue("WHERE")||"FROM_START",j=R.valueToCode(E,"VALUE",G==="FIRST"||G==="FROM_START"?W.UNARY_POSTFIX:W.NONE)||"''";switch(G){case"FIRST":return[j+"[0]",W.UNARY_POSTFIX];case"FROM_START":return E=R.getAdjusted(E,"AT"),[j+"["+E+"]",W.UNARY_POSTFIX];case"LAST":case"FROM_END":return E=G==="LAST"?1:R.getAdjusted(E,"AT",1),[`${R.provideFunction_("text_get_from_end",`
String ${R.FUNCTION_NAME_PLACEHOLDER_}(String text, num x) {
  return text[text.length - x];
}
`)}(${j}, ${E})`,W.UNARY_POSTFIX];case"RANDOM":return R.definitions_.import_dart_math="import 'dart:math' as Math;",[R.provideFunction_("text_random_letter",`
String ${R.FUNCTION_NAME_PLACEHOLDER_}(String text) {
  int x = new Math.Random().nextInt(text.length);
  return text[x];
}
`)+"("+j+")",W.UNARY_POSTFIX]}throw Error("Unhandled option (text_charAt).")},xt=function(E,R){var G=E.getFieldValue("WHERE1");const j=E.getFieldValue("WHERE2"),te=G!=="FROM_END"&&j==="FROM_START",se=R.valueToCode(E,"STRING",te?W.UNARY_POSTFIX:W.NONE)||"''";if(G==="FIRST"&&j==="LAST")return[se,W.NONE];if(se.match(/^'?\w+'?$/)||te){switch(G){case"FROM_START":G=R.getAdjusted(E,"AT1");break;case"FROM_END":G=R.getAdjusted(E,"AT1",1,!1,W.ADDITIVE),G=se+".length - "+G;break;case"FIRST":G="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(j){case"FROM_START":var Ie=R.getAdjusted(E,"AT2",1);break;case"FROM_END":Ie=R.getAdjusted(E,"AT2",0,!1,W.ADDITIVE),Ie=se+".length - "+Ie;break;case"LAST":break;default:throw Error("Unhandled option (text_getSubstring).")}R=j==="LAST"?se+".substring("+G+")":se+".substring("+G+", "+Ie+")"}else Ie=R.getAdjusted(E,"AT1"),E=R.getAdjusted(E,"AT2"),R=R.provideFunction_("text_get_substring",`
String ${R.FUNCTION_NAME_PLACEHOLDER_}(String text, String where1, num at1, String where2, num at2) {
  int getAt(String where, num at) {
    if (where == 'FROM_END') {
      at = text.length - 1 - at;
    } else if (where == 'FIRST') {
      at = 0;
    } else if (where == 'LAST') {
      at = text.length - 1;
    } else if (where != 'FROM_START') {
      throw 'Unhandled option (text_getSubstring).';
    }
    return at;
  }
  at1 = getAt(where1, at1);
  at2 = getAt(where2, at2) + 1;
  return text.substring(at1, at2);
}
`)+"("+se+", '"+G+"', "+Ie+", '"+j+"', "+E+")";return[R,W.UNARY_POSTFIX]},rt=function(E,R){const G={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[E.getFieldValue("CASE")];return E=R.valueToCode(E,"TEXT",G?W.UNARY_POSTFIX:W.NONE)||"''",[G?E+G:R.provideFunction_("text_toTitleCase",`
String ${R.FUNCTION_NAME_PLACEHOLDER_}(String str) {
  RegExp exp = new RegExp(r'\\b');
  List<String> list = str.split(exp);
  final title = new StringBuffer();
  for (String part in list) {
    if (part.length > 0) {
      title.write(part[0].toUpperCase());
      if (part.length > 0) {
        title.write(part.substring(1).toLowerCase());
      }
    }
  }
  return title.toString();
}
`)+"("+E+")",W.UNARY_POSTFIX]},ms=function(E,R){const G={LEFT:".replaceFirst(new RegExp(r'^\\s+'), '')",RIGHT:".replaceFirst(new RegExp(r'\\s+$'), '')",BOTH:".trim()"}[E.getFieldValue("MODE")];return[(R.valueToCode(E,"TEXT",W.UNARY_POSTFIX)||"''")+G,W.UNARY_POSTFIX]},Qn=function(E,R){return"print("+(R.valueToCode(E,"TEXT",W.NONE)||"''")+`);
`},gs=function(E,R){R.definitions_.import_dart_html="import 'dart:html' as Html;";let G="Html.window.prompt("+(E.getField("TEXT")?R.quote_(E.getFieldValue("TEXT")):R.valueToCode(E,"TEXT",W.NONE)||"''")+", '')";return E.getFieldValue("TYPE")==="NUMBER"&&(R.definitions_.import_dart_math="import 'dart:math' as Math;",G="Math.parseDouble("+G+")"),[G,W.UNARY_POSTFIX]},_e=function(E,R){const G=R.valueToCode(E,"TEXT",W.NONE)||"''";return E=R.valueToCode(E,"SUB",W.NONE)||"''",[R.provideFunction_("text_count",`
int ${R.FUNCTION_NAME_PLACEHOLDER_}(String haystack, String needle) {
  if (needle.length == 0) {
    return haystack.length + 1;
  }
  int index = 0;
  int count = 0;
  while (index != -1) {
    index = haystack.indexOf(needle, index);
    if (index != -1) {
      count++;
     index += needle.length;
    }
  }
  return count;
}
`)+"("+G+", "+E+")",W.UNARY_POSTFIX]},Ze=function(E,R){const G=R.valueToCode(E,"TEXT",W.UNARY_POSTFIX)||"''",j=R.valueToCode(E,"FROM",W.NONE)||"''";return E=R.valueToCode(E,"TO",W.NONE)||"''",[G+".replaceAll("+j+", "+E+")",W.UNARY_POSTFIX]},Ye=function(E,R){return["new String.fromCharCodes("+(R.valueToCode(E,"TEXT",W.UNARY_POSTFIX)||"''")+".runes.toList().reversed)",W.UNARY_PREFIX]},Bn=function(E,R){return[R.getVariableName(E.getFieldValue("VAR")),W.ATOMIC]},sn=function(E,R){const G=R.valueToCode(E,"VALUE",W.ASSIGNMENT)||"0";return R.getVariableName(E.getFieldValue("VAR"))+" = "+G+`;
`},W;(function(E){E[E.ATOMIC=0]="ATOMIC",E[E.UNARY_POSTFIX=1]="UNARY_POSTFIX",E[E.UNARY_PREFIX=2]="UNARY_PREFIX",E[E.MULTIPLICATIVE=3]="MULTIPLICATIVE",E[E.ADDITIVE=4]="ADDITIVE",E[E.SHIFT=5]="SHIFT",E[E.BITWISE_AND=6]="BITWISE_AND",E[E.BITWISE_XOR=7]="BITWISE_XOR",E[E.BITWISE_OR=8]="BITWISE_OR",E[E.RELATIONAL=9]="RELATIONAL",E[E.EQUALITY=10]="EQUALITY",E[E.LOGICAL_AND=11]="LOGICAL_AND",E[E.LOGICAL_OR=12]="LOGICAL_OR",E[E.IF_NULL=13]="IF_NULL",E[E.CONDITIONAL=14]="CONDITIONAL",E[E.CASCADE=15]="CASCADE",E[E.ASSIGNMENT=16]="ASSIGNMENT",E[E.NONE=99]="NONE"})(W||(W={}));var $s=class extends i.CodeGenerator$$module$build$src$core$generator{constructor(E="Dart"){super(E),this.isInitialized=!1;for(const R in W)E=W[R],typeof E!="string"&&(this["ORDER_"+R]=E);this.addReservedWords("assert,break,case,catch,class,const,continue,default,do,else,enum,extends,false,final,finally,for,if,in,is,new,null,rethrow,return,super,switch,this,throw,true,try,var,void,while,with,print,identityHashCode,identical,BidirectionalIterator,Comparable,double,Function,int,Invocation,Iterable,Iterator,List,Map,Match,num,Pattern,RegExp,Set,StackTrace,String,StringSink,Type,bool,DateTime,Deprecated,Duration,Expando,Null,Object,RuneIterator,Runes,Stopwatch,StringBuffer,Symbol,Uri,Comparator,AbstractClassInstantiationError,ArgumentError,AssertionError,CastError,ConcurrentModificationError,CyclicInitializationError,Error,Exception,FallThroughError,FormatException,IntegerDivisionByZeroException,NoSuchMethodError,NullThrownError,OutOfMemoryError,RangeError,StackOverflowError,StateError,TypeError,UnimplementedError,UnsupportedError")}init(E){super.init(E),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(E.getVariableMap()),this.nameDB_.populateVariables(E),this.nameDB_.populateProcedures(E);const R=[];var G=i.allDeveloperVariables$$module$build$src$core$variables(E);for(let j=0;j<G.length;j++)R.push(this.nameDB_.getName(G[j],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(E=i.allUsedVarModels$$module$build$src$core$variables(E),G=0;G<E.length;G++)R.push(this.nameDB_.getName(E[G].getId(),i.NameType$$module$build$src$core$names.VARIABLE));R.length&&(this.definitions_.variables="var "+R.join(", ")+";"),this.isInitialized=!0}finish(E){E&&(E=this.prefixLines(E,this.INDENT)),E=`main() {
`+E+"}";const R=[],G=[];for(let j in this.definitions_){const te=this.definitions_[j];te.match(/^import\s/)?R.push(te):G.push(te)}return E=super.finish(E),this.isInitialized=!1,this.nameDB_.reset(),(R.join(`
`)+`

`+G.join(`

`)).replace(/\n\n+/g,`

`).replace(/\n*$/,`


`)+E}scrubNakedValue(E){return E+`;
`}quote_(E){return E=E.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/\$/g,"\\$").replace(/'/g,"\\'"),"'"+E+"'"}multiline_quote_(E){return E.split(/\n/g).map(this.quote_).join(` + '\\n' + 
`)}scrub_(E,R,G=!1){let j="";if(!E.outputConnection||!E.outputConnection.targetConnection){var te=E.getCommentText();te&&(te=i.wrap$$module$build$src$core$utils$string(te,this.COMMENT_WRAP-3),j=E.getProcedureDef?j+this.prefixLines(te+`
`,"/// "):j+this.prefixLines(te+`
`,"// "));for(let se=0;se<E.inputList.length;se++)E.inputList[se].type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(te=E.inputList[se].connection.targetBlock())&&(te=this.allNestedComments(te))&&(j+=this.prefixLines(te,"// "))}return E=E.nextConnection&&E.nextConnection.targetBlock(),G=G?"":this.blockToCode(E),j+R+G}getAdjusted(E,R,G=0,j=!1,te=W.NONE){E.workspace.options.oneBasedIndex&&G--;const se=E.workspace.options.oneBasedIndex?"1":"0";let Ie=te;return G?Ie=W.ADDITIVE:j&&(Ie=W.UNARY_PREFIX),E=this.valueToCode(E,R,Ie)||se,G===0&&!j?E:i.isNumber$$module$build$src$core$utils$string(E)?(E=String(Number(E)+G),j&&(E=String(-Number(E))),E):(0<G?E=`${E} + ${G}`:0>G&&(E=`${E} - ${-G}`),j&&(E=G?`-(${E})`:`-${E}`),Math.floor(te)>=Math.floor(Ie)&&(E=`(${E})`),E)}},ze={};ze.lists_create_empty=a,ze.lists_create_with=c,ze.lists_getIndex=g,ze.lists_getSublist=T,ze.lists_indexOf=f,ze.lists_isEmpty=p,ze.lists_length=h,ze.lists_repeat=u,ze.lists_reverse=w,ze.lists_setIndex=m,ze.lists_sort=I,ze.lists_split=C;var ct={};ct.controls_if=A,ct.controls_ifelse=A,ct.logic_boolean=M,ct.logic_compare=S,ct.logic_negate=v,ct.logic_null=L,ct.logic_operation=y,ct.logic_ternary=P;var Yt={};Yt.controls_flow_statements=Te,Yt.controls_for=ee,Yt.controls_forEach=ie,Yt.controls_repeat=B,Yt.controls_repeat_ext=B,Yt.controls_whileUntil=N;var Y={};Y.math_arithmetic=je,Y.math_atan2=xe,Y.math_change=ce,Y.math_constant=Fe,Y.math_constrain=ae,Y.math_modulo=ue,Y.math_number=Ue,Y.math_number_property=de,Y.math_on_list=F,Y.math_random_float=Ee,Y.math_random_int=fe,Y.math_round=we,Y.math_single=we,Y.math_trig=we;var he={};he.procedures_callnoreturn=Re,he.procedures_callreturn=qe,he.procedures_defnoreturn=ke,he.procedures_defreturn=ke,he.procedures_ifreturn=Oe;var b={};b.text=Tt,b.text_append=We,b.text_changeCase=rt,b.text_charAt=nn,b.text_count=_e,b.text_getSubstring=xt,b.text_indexOf=Zn,b.text_isEmpty=Rt,b.text_join=He,b.text_length=Ft,b.text_print=Qn,b.text_prompt=gs,b.text_prompt_ext=gs,b.text_replace=Ze,b.text_reverse=Ye,b.text_trim=ms;var x={};x.variables_get=Bn,x.variables_set=sn;var H={};H.variables_get_dynamic=Bn,H.variables_set_dynamic=sn;var V=new $s;V.addReservedWords("Html,Math");var le=Object.assign({},ze,ct,Yt,Y,he,b,x,H);for(const E in le)V.forBlock[E]=le[E];var Qe={};return Qe.DartGenerator=$s,Qe.Order=W,Qe.dartGenerator=V,Qe.__namespace__=i,Qe})})(nM);var JH=nM.exports;const qH=Ea(JH),{DartGenerator:K8,Order:Je,dartGenerator:Ae}=qH;Ae.forBlock.flutter_center=function(t){const s=Ae.valueToCode(t,"child",Je.NONE);return[`Center(
${s?INDENT+"child: "+s+`,
`:""})`,Je.NONE]};Ae.finish=function(t){const s=`
import 'package:flutter/material.dart';

void main() {
	  runApp(MaterialApp(
	  	 home: MyWidget(),
	  ));
}

class MyWidget extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return App();
  }
}
`.trim(),o=Object.values(Ae.definitions_).join(`
`);return`${s}
${o?o+`
`:""}
${t}`};Ae.forBlock.flutter_text=function(t){return["Text("+Ae.valueToCode(t,"data",Je.ATOMIC)+")",Je.NONE]};Ae.forBlock.scaffold=function(t){let s=Ae.valueToCode(t,"appBar",Je.NONE),o=Ae.valueToCode(t,"body",Je.NONE),i=Ae.valueToCode(t,"fab",Je.NONE),a=`Scaffold(
`;return s&&(a+="	 appBar: "+s+`,
`),o&&(a+="	 body: "+o+`,
`),i&&(a+="	 floatingActionButton: "+i+`,
`),a+=")",[a,Je.NONE]};Ae.forBlock.appBar=function(t){let s=Ae.valueToCode(t,"title",Je.NONE),o=`AppBar(
`;return s&&(o+="	 title: "+s+`,
`),o+=")",[o,Je.NONE]};Ae.forBlock.flutter_row=function(t){let s=Ae.valueToCode(t,"children",Je.NONE),o=`Row(
`;return s&&(o+="	 children: <Widget> ",s.startsWith("[")?o+=s+`,
`:o+=`[
	`+s+`],
`),o+=")",[o,Je.NONE]};Ae.forBlock.flutter_column=function(t){let s=Ae.valueToCode(t,"children",Je.NONE),o=`Column(
`;return s&&(o+="	 children: <Widget> ",s.startsWith("[")?o+=s+`,
`:o+=`[
	`+s+`],
`),o+=")",[o,Je.NONE]};Ae.forBlock.flutter_listview=function(t){let s=Ae.valueToCode(t,"children",Je.NONE),o=`ListView(
`;return s&&(o+="	 children: <Widget> ",s.startsWith("[")?o+=s+`,
`:o+=`[
	`+s+`],
`),o+=")",[o,Je.NONE]};Ae.forBlock.flutter_icon=function(t){let s=Ae.valueToCode(t,"icon",Je.NONE),o=Ae.valueToCode(t,"color",Je.ATOMIC),i=Ae.valueToCode(t,"size",Je.ATOMIC),a=`Icon(
`;return s&&(a+="	"+s+`,
`),o&&(o.startsWith("#")?a+="	 color: const Color(0xFF"+o.slice(1).toUpperCase()+`),
`:a+="	 color: "+o+`,
`),i&&(a+="	 size: "+i+`,
`),a+=")",[a,Je.NONE]};Ae.forBlock.flutter_icons=function(t){return["Icons."+t.getFieldValue("constant"),Je.NONE]};Ae.forBlock.flutter_placeholder=function(t){let s=t.getFieldValue("color"),o=t.getFieldValue("strokeWidth"),i=t.getFieldValue("fallbackWidth"),a=t.getFieldValue("fallbackHeight"),c=s?s.slice(1).toUpperCase():"000000",u=`Placeholder(
`;return u+="	color: const Color(0xFF"+c+`),
`,u+="	strokeWidth: "+o+`,
`,u+="	fallbackWidth: "+i+`,
`,u+="	fallbackHeight: "+a+`,
`,u+=")",[u,Je.NONE]};Ae.forBlock.flutter_raised_button=function(t){let s=Ae.valueToCode(t,"child",Je.ATOMIC),o=Ae.statementToCode(t,"onPressed"),i=`RaisedButton(
`;return o.trim()?i+=`	 onPressed: () {
`+o+`},
`:i+=`	 onPressed: null,
`,s&&(i+="	 child: "+s+`
`),i+=")",[i,Je.NONE]};Ae.forBlock.flutter_fab=function(t){let s=Ae.valueToCode(t,"child",Je.ATOMIC),o=Ae.statementToCode(t,"onPressed"),i=`FloatingActionButton(
`;return o.trim()?i+=`	 onPressed: () {
`+o+`},
`:i+=`	 onPressed: null,
`,s&&(i+="	 child: "+s+`,
`),i+=")",[i,Je.NONE]};Ae.forBlock.flutter_stateful_widget=function(t){let s=t.getFieldValue("classname"),o=Ae.valueToCode(t,"content",Je.NONE),i=Ae.statementToCode(t,"Variables");return"class "+s+` extends StatefulWidget {
  @override
  _`+s+"State createState() => _"+s+`State();
}

class _`+s+"State extends State<"+s+`> {
`+i+`
  @override
  Widget build(BuildContext context) {
    return `+o+`;
  }
}
`};Ae.forBlock.flutter_create_instance=function(t){return[t.getFieldValue("className")+"()",Je.NONE]};Ae.forBlock.flutter_container=function(t){let s=Ae.valueToCode(t,"width",Je.ATOMIC),o=Ae.valueToCode(t,"height",Je.ATOMIC),i=Ae.valueToCode(t,"color",Je.ATOMIC),a=Ae.valueToCode(t,"child",Je.ATOMIC),c=`Container(
`;return i&&(i.startsWith("#")?c+="	 color: const Color(0xFF"+i.slice(1).toUpperCase()+`),
`:c+="	 color: "+i+`,
`),s&&(c+="	 width: "+s+`,
`),o&&(c+="	 height: "+o+`,
`),a&&(c+="	 child: "+a+`,
`),c+=")",[c,Je.NONE]};Ae.forBlock.flutter_set_state_call=function(t){return`setState(() {
`+Ae.statementToCode(t,"code")+`
});
`};Ae.forBlock.flutter_raw_input=function(t){return[t.getFieldValue("code"),Je.ATOMIC]};Ae.forBlock.flutter_raw_statement=function(t){return t.getFieldValue("code")+`
`};Ae.forBlock.procedures_defnoreturn=function(t){let s=t.getFieldValue("NAME"),o=Ae.statementToCode(t,"STACK");return o=o.replace(/\n/g,`
	`),`void ${s}() {
	${o}
}
`};Ae.forBlock.procedures_defreturn=function(t){let s=t.getFieldValue("NAME"),o=Ae.statementToCode(t,"STACK");o=o.replace(/\n/g,`
	`);let i=Ae.valueToCode(t,"RETURN",Je.NONE)||"";return`
${s}() {
	${o}
	return ${i};
}
`};const ZH={kind:"category",name:"Flutter",colour:"#ffb5eb",contents:[{kind:"block",type:"flutter_center"},{kind:"block",type:"flutter_stateful_widget"},{kind:"block",type:"flutter_create_instance"},{kind:"block",type:"flutter_set_state_call"},{kind:"block",type:"flutter_raw_input"},{kind:"block",type:"flutter_raw_statement"},{kind:"block",type:"flutter_container"},{kind:"block",type:"flutter_text"},{kind:"block",type:"scaffold"},{kind:"block",type:"appBar"},{kind:"block",type:"flutter_row"},{kind:"block",type:"flutter_column"},{kind:"block",type:"flutter_listview"},{kind:"block",type:"flutter_icon"},{kind:"block",type:"flutter_icons"},{kind:"block",type:"flutter_placeholder"},{kind:"block",type:"flutter_raised_button"},{kind:"block",type:"flutter_fab"}]};var sM={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(t,s){(function(o,i){t.exports=i(nr())})(Qs,o=>(()=>{var i={370:S=>{S.exports=o}},a={};function c(S){var y=a[S];if(y!==void 0)return y.exports;var v=a[S]={exports:{}};return i[S](v,v.exports,c),v.exports}c.d=(S,y)=>{for(var v in y)c.o(y,v)&&!c.o(S,v)&&Object.defineProperty(S,v,{enumerable:!0,get:y[v]})},c.o=(S,y)=>Object.prototype.hasOwnProperty.call(S,y),c.r=S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})};var u={};c.r(u),c.d(u,{Backpack:()=>I,BackpackChange:()=>m,BackpackOpen:()=>f,backpackChange:()=>g,backpackOpen:()=>p});var h=c(370);h.Msg.COPY_ALL_TO_BACKPACK="Copy All Blocks to Backpack",h.Msg.COPY_TO_BACKPACK="Copy to Backpack",h.Msg.EMPTY_BACKPACK="Empty",h.Msg.PASTE_ALL_FROM_BACKPACK="Paste All Blocks from Backpack",h.Msg.REMOVE_FROM_BACKPACK="Remove from Backpack";const p="backpack_open";class f extends h.Events.UiBase{constructor(y,v){super(v),this.isOpen=y,this.type=p}toJson(){const y=super.toJson();return y.isOpen=this.isOpen,y}static fromJson(y,v,M){const L=super.fromJson(y,v,M);return L.isOpen=y.isOpen,L}}h.registry.register(h.registry.Type.EVENT,p,f);const g="backpack_change";class m extends h.Events.UiBase{constructor(){super(...arguments),this.type=g}}function T(S){return S.toFlyoutInfo!==void 0}h.registry.register(h.registry.Type.EVENT,g,m);class I extends h.DragTarget{constructor(y,v){super(),this.workspace_=y,this.id="backpack",this.flyout_=null,this.contents_=[],this.boundEvents=[],this.left_=0,this.top_=0,this.WIDTH_=40,this.HEIGHT_=60,this.MARGIN_VERTICAL_=20,this.MARGIN_HORIZONTAL_=20,this.HOTSPOT_MARGIN_=10,this.svgGroup_=null,this.svgImg_=null,this.spriteTop=10,this.spriteLeft=20,this.spriteSize=80,this.initialized_=!1,this.options=function(M){var L,P,B;const N={allowEmptyBackpackOpen:!0,useFilledBackpackImage:!1,skipSerializerRegistration:!1,contextMenu:{emptyBackpack:!0,removeFromBackpack:!0,copyToBackpack:!0,copyAllToBackpack:!1,pasteAllToBackpack:!1,disablePreconditionChecks:!1}};return M?{allowEmptyBackpackOpen:(L=M.allowEmptyBackpackOpen)!==null&&L!==void 0?L:N.allowEmptyBackpackOpen,useFilledBackpackImage:(P=M.useFilledBackpackImage)!==null&&P!==void 0?P:N.useFilledBackpackImage,skipSerializerRegistration:(B=M.skipSerializerRegistration)!==null&&B!==void 0?B:N.skipSerializerRegistration,contextMenu:Object.assign(Object.assign({},N.contextMenu),M.contextMenu)}:N}(v),this.registerSerializer()}registerSerializer(){this.options.skipSerializerRegistration||h.registry.hasItem(h.registry.Type.SERIALIZER,"backpack")||h.serialization.registry.register("backpack",new A)}init(){var y,v,M;this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[h.ComponentManager.Capability.AUTOHIDEABLE,h.ComponentManager.Capability.DRAG_TARGET,h.ComponentManager.Capability.POSITIONABLE]}),this.initFlyout(),this.createDom(),this.attachListeners(),this.options.contextMenu&&(y=this.options.contextMenu,v=this.workspace_,y.emptyBackpack&&function(L){const P=L.configureContextMenu;L.configureContextMenu=(B,N)=>{const ee=L.getComponentManager().getComponent("backpack"),ie=ee&&ee.getClientRect();if(N instanceof PointerEvent&&ie&&(!ee||!ie.contains(N.clientX,N.clientY)))return void(P&&P.call(null,B,N));B.length=0;const Te={text:h.Msg.EMPTY_BACKPACK,enabled:!!ee.getCount(),callback:function(){ee.empty()},scope:{workspace:L},weight:0};B.push(Te)}}(v),y.removeFromBackpack&&function(){if(h.ContextMenuRegistry.registry.getItem("remove_from_backpack"))return;const L={displayText:h.Msg.REMOVE_FROM_BACKPACK,preconditionFn:function(P){if(!P.block)return"hidden";const B=P.block.workspace;if(B.isFlyout&&B.targetWorkspace){const N=B.targetWorkspace.getComponentManager().getComponent("backpack"),ee=N&&N.getFlyout();if(N&&ee&&ee.getWorkspace().id===B.id)return"enabled"}return"hidden"},callback:function(P){P.block&&P.block.workspace.targetWorkspace&&P.block.workspace.targetWorkspace.getComponentManager().getComponent("backpack").removeBlock(P.block)},scopeType:h.ContextMenuRegistry.ScopeType.BLOCK,id:"remove_from_backpack",weight:200};h.ContextMenuRegistry.registry.register(L)}(),y.copyToBackpack&&function(L){if(h.ContextMenuRegistry.registry.getItem("copy_to_backpack"))return;const P={displayText:function(B){if(!B.block)return"";const N=B.block.workspace.getComponentManager().getComponent("backpack").getCount();return`${h.Msg.COPY_TO_BACKPACK} (${N})`},preconditionFn:function(B){if(!B.block)return"hidden";const N=B.block.workspace;if(!N.isFlyout){const ee=N.getComponentManager().getComponent("backpack");if(ee)return L?"enabled":ee.containsBlock(B.block)?"disabled":"enabled"}return"hidden"},callback:function(B){B.block&&B.block.workspace.getComponentManager().getComponent("backpack").addBlock(B.block)},scopeType:h.ContextMenuRegistry.ScopeType.BLOCK,id:"copy_to_backpack",weight:200};h.ContextMenuRegistry.registry.register(P)}((M=y.disablePreconditionChecks)!==null&&M!==void 0&&M),y.copyAllToBackpack&&function(){if(h.ContextMenuRegistry.registry.getItem("copy_all_to_backpack"))return;const L={displayText:h.Msg.COPY_ALL_TO_BACKPACK,preconditionFn:function(P){const B=P.workspace;return B&&!B.isFlyout&&B.getComponentManager().getComponent("backpack")?"enabled":"hidden"},callback:function(P){const B=P.workspace;B&&B.getComponentManager().getComponent("backpack").addBlocks(B.getTopBlocks(!0))},scopeType:h.ContextMenuRegistry.ScopeType.WORKSPACE,id:"copy_all_to_backpack",weight:200};h.ContextMenuRegistry.registry.register(L)}(),y.pasteAllToBackpack&&function(){if(h.ContextMenuRegistry.registry.getItem("paste_all_from_backpack"))return;const L={displayText:function(P){if(!P.workspace)return"";const B=P.workspace.getComponentManager().getComponent("backpack").getCount();return`${h.Msg.PASTE_ALL_FROM_BACKPACK} (${B})`},preconditionFn:function(P){const B=P.workspace;return B&&!B.isFlyout&&B.getComponentManager().getComponent("backpack")?"enabled":"hidden"},callback:function(P){const B=P.workspace;B&&B.getComponentManager().getComponent("backpack").getContents().forEach(N=>{h.serialization.blocks.append(JSON.parse(N),B).scheduleSnapAndBump()})},scopeType:h.ContextMenuRegistry.ScopeType.WORKSPACE,id:"paste_all_from_backpack",weight:200};h.ContextMenuRegistry.registry.register(L)}()),this.initialized_=!0,this.workspace_.resize()}dispose(){this.svgGroup_&&h.utils.dom.removeNode(this.svgGroup_);for(const y of this.boundEvents)h.browserEvents.unbind(y);this.boundEvents.length=0}initFlyout(){var y;const v=new h.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides||void 0,move:{scrollbars:!0}});if(this.workspace_.horizontalLayout){v.toolboxPosition=this.workspace_.toolboxPosition===h.utils.toolbox.Position.TOP?h.utils.toolbox.Position.BOTTOM:h.utils.toolbox.Position.TOP;const L=h.registry.getClassFromOptions(h.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0);if(!L)throw new Error("HorizontalFlyout does not exist");this.flyout_=new L(v)}else{v.toolboxPosition=this.workspace_.toolboxPosition===h.utils.toolbox.Position.RIGHT?h.utils.toolbox.Position.LEFT:h.utils.toolbox.Position.RIGHT;const L=h.registry.getClassFromOptions(h.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0);if(!L)throw new Error("VerticalFlyout does not exist");this.flyout_=new L(v)}const M=this.workspace_.getParentSvg().parentNode;M==null||M.appendChild((y=this.flyout_)===null||y===void 0?void 0:y.createDom(h.utils.Svg.SVG)),this.flyout_.init(this.workspace_)}createDom(){this.svgGroup_=h.utils.dom.createSvgElement(h.utils.Svg.G,{},null);const y=h.utils.idGenerator.genUid(),v=h.utils.dom.createSvgElement(h.utils.Svg.CLIPPATH,{id:"blocklyBackpackClipPath"+y},this.svgGroup_);h.utils.dom.createSvgElement(h.utils.Svg.RECT,{width:this.WIDTH_,height:this.HEIGHT_},v),this.svgImg_=h.utils.dom.createSvgElement(h.utils.Svg.IMAGE,{class:"blocklyBackpack","clip-path":"url(#blocklyBackpackClipPath"+y+")",width:this.spriteSize+"px",x:-this.spriteLeft,height:this.spriteSize+"px",y:-this.spriteTop},this.svgGroup_),this.svgImg_.setAttributeNS(h.utils.dom.XLINK_NS,"xlink:href",C),h.utils.dom.insertAfter(this.svgGroup_,this.workspace_.getBubbleCanvas())}attachListeners(){this.svgGroup_&&(this.addEvent(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable),this.addEvent(this.svgGroup_,"mouseup",this,this.onClick),this.addEvent(this.svgGroup_,"mouseover",this,this.onMouseOver),this.addEvent(this.svgGroup_,"mouseout",this,this.onMouseOut))}addEvent(y,v,M,L){const P=h.browserEvents.bind(y,v,M,L);this.boundEvents.push(P)}getFlyout(){return this.flyout_}getClientRect(){if(!this.svgGroup_)return null;const y=this.svgGroup_.getBoundingClientRect(),v=y.top+this.spriteTop-this.HOTSPOT_MARGIN_,M=v+this.HEIGHT_+2*this.HOTSPOT_MARGIN_,L=y.left+this.spriteLeft-this.HOTSPOT_MARGIN_,P=L+this.WIDTH_+2*this.HOTSPOT_MARGIN_;return new h.utils.Rect(v,M,L,P)}getBoundingRectangle(){return new h.utils.Rect(this.top_,this.top_+this.HEIGHT_,this.left_,this.left_+this.WIDTH_)}position(y,v){if(!this.initialized_)return;const M=this.workspace_.scrollbar,L=M&&M.isVisible()&&M.canScrollVertically(),P=M&&M.isVisible()&&M.canScrollHorizontally();y.toolboxMetrics.position===h.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?(this.left_=y.absoluteMetrics.left+y.viewMetrics.width-this.WIDTH_-this.MARGIN_HORIZONTAL_,L&&!this.workspace_.RTL&&(this.left_-=h.Scrollbar.scrollbarThickness)):(this.left_=this.MARGIN_HORIZONTAL_,L&&this.workspace_.RTL&&(this.left_+=h.Scrollbar.scrollbarThickness));const B=y.toolboxMetrics.position===h.TOOLBOX_AT_BOTTOM;B?(this.top_=y.absoluteMetrics.top+y.viewMetrics.height-this.HEIGHT_-this.MARGIN_VERTICAL_,P&&(this.top_-=h.Scrollbar.scrollbarThickness)):this.top_=y.absoluteMetrics.top+this.MARGIN_VERTICAL_;let N=this.getBoundingRectangle();for(let ee,ie=0;ee=v[ie];ie++)N.intersects(ee)&&(this.top_=B?ee.top-this.HEIGHT_-this.MARGIN_VERTICAL_:ee.bottom+this.MARGIN_VERTICAL_,N=this.getBoundingRectangle(),ie=-1);this.svgGroup_&&this.svgGroup_.setAttribute("transform",`translate(${this.left_},${this.top_})`)}getCount(){return this.contents_.length}getContents(){return[...this.contents_]}onDrop(y){T(y)&&this.addBackpackable(y)}blockToJsonString(y){const v=h.serialization.blocks.save(y);v.kind="BLOCK";const M=function(L,P){for(const B in L)B&&(P.indexOf(B)!==-1&&delete L[B],L[B]&&typeof L[B]=="object"&&M(L[B],P))};return v&&M(v,["id","height","width","pinned","enabled"]),JSON.stringify(v)}blockXmlToJsonString(y){if(!y.startsWith("<block"))throw new Error("Unrecognized XML format");const v=new h.Workspace;try{const M=h.Xml.domToBlock(h.utils.xml.textToDom(y),v);return this.blockToJsonString(M)}finally{v.dispose()}}containsBlock(y){return T(y)?this.containsBackpackable(y):this.contents_.indexOf(this.blockToJsonString(y))!==-1}addBlock(y){T(y)?this.addBackpackable(y):this.addItem(this.blockToJsonString(y))}addBlocks(y){for(const v of y)T(v)?this.addBackpackable(v):this.addItem(this.blockToJsonString(v))}removeBlock(y){T(y)?this.removeBackpackable(y):this.removeItem(this.blockToJsonString(y))}containsBackpackable(y){return y.toFlyoutInfo().every(v=>this.contents_.indexOf(JSON.stringify(v))!==-1)}addBackpackable(y){this.addBackpackables([y])}addBackpackables(y){this.addItems(y.map(v=>v.toFlyoutInfo()).reduce((v,M)=>[...v,...M]).map(v=>JSON.stringify(v)))}removeBackpackable(y){for(const v of y.toFlyoutInfo())this.removeItem(JSON.stringify(v))}addItem(y){this.addItems([y])}addItems(y){const v=this.filterDuplicates(y);v.length&&(this.contents_.unshift(...v),this.onContentChange())}removeItem(y){const v=this.contents_.indexOf(y);v!==-1&&(this.contents_.splice(v,1),this.onContentChange())}setContents(y){this.contents_=[],this.contents_=this.filterDuplicates(y.map(v=>v.startsWith("<block")?this.blockXmlToJsonString(v):v)),this.onContentChange()}empty(){this.getCount()&&(this.contents_.length&&(this.contents_=[],this.onContentChange()),this.close())}onContentChange(){this.maybeRefreshFlyoutContents(),h.Events.fire(new m(this.workspace_.id)),this.options.useFilledBackpackImage&&this.svgImg_&&(this.contents_.length>0?this.svgImg_.setAttributeNS(h.utils.dom.XLINK_NS,"xlink:href",w):this.svgImg_.setAttributeNS(h.utils.dom.XLINK_NS,"xlink:href",C))}filterDuplicates(y){return y.filter((v,M)=>y.indexOf(v)===M&&this.contents_.indexOf(v)===-1)}isOpenable(){return!(this.isOpen()||!this.options.allowEmptyBackpackOpen)||this.getCount()>0}isOpen(){return!!this.flyout_&&this.flyout_.isVisible()}open(){var y;if(!this.isOpenable())return;const v=this.contents_.map(M=>JSON.parse(M));(y=this.flyout_)===null||y===void 0||y.show(v),this.workspace_.scrollbar&&this.workspace_.scrollbar.setVisible&&this.workspace_.scrollbar.setVisible(!1),h.Events.fire(new f(!0,this.workspace_.id))}maybeRefreshFlyoutContents(){var y;if(!this.isOpen())return;const v=this.contents_.map(M=>JSON.parse(M));(y=this.flyout_)===null||y===void 0||y.show(v)}close(){var y;this.isOpen()&&((y=this.flyout_)===null||y===void 0||y.hide(),this.workspace_.scrollbar&&this.workspace_.scrollbar.setVisible&&this.workspace_.scrollbar.setVisible(!0),h.Events.fire(new f(!1,this.workspace_.id)))}autoHide(y){y||this.close()}onClick(y){if(y instanceof MouseEvent&&h.browserEvents.isRightButton(y))return;this.open();const v=new(h.Events.get(h.Events.CLICK))(null,this.workspace_.id,"backpack");h.Events.fire(v)}onDragEnter(y){T(y)&&this.updateHoverStying(!0)}onDragExit(y){this.updateHoverStying(!1)}onMouseOver(){this.isOpenable()&&this.updateHoverStying(!0)}onMouseOut(){this.updateHoverStying(!1)}updateHoverStying(y){const v="blocklyBackpackDarken";this.svgImg_&&(y?h.utils.dom.addClass(this.svgImg_,v):h.utils.dom.removeClass(this.svgImg_,v))}shouldPreventMove(y){return y instanceof h.BlockSvg}blockMouseDownWhenOpenable(y){y instanceof MouseEvent&&!h.browserEvents.isRightButton(y)&&this.isOpenable()&&y.stopPropagation()}}const C="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIGZpbGw9IiM0NTVBNjQiPjxnPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMjQiIHdpZHRoPSIyNCIvPjwvZz48Zz48Zy8+PGc+PHBhdGggZD0iTTEzLjk3LDUuMzRDMTMuOTgsNS4yMywxNCw1LjEyLDE0LDVjMC0xLjEtMC45LTItMi0ycy0yLDAuOS0yLDJjMCwwLjEyLDAuMDIsMC4yMywwLjAzLDAuMzRDNy42OSw2LjE1LDYsOC4zOCw2LDExdjggYzAsMS4xLDAuOSwyLDIsMmg4YzEuMSwwLDItMC45LDItMnYtOEMxOCw4LjM4LDE2LjMxLDYuMTUsMTMuOTcsNS4zNHogTTExLDVjMC0wLjU1LDAuNDUtMSwxLTFzMSwwLjQ1LDEsMSBjMCwwLjAzLTAuMDEsMC4wNi0wLjAyLDAuMDlDMTIuNjYsNS4wMywxMi4zNCw1LDEyLDVzLTAuNjYsMC4wMy0wLjk4LDAuMDlDMTEuMDEsNS4wNiwxMSw1LjAzLDExLDV6IE0xNiwxM3YxdjAuNSBjMCwwLjI4LTAuMjIsMC41LTAuNSwwLjVTMTUsMTQuNzgsMTUsMTQuNVYxNHYtMUg4di0xaDdoMVYxM3oiLz48L2c+PC9nPjwvc3ZnPg==",w="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMjQiCiAgIGhlaWdodD0iMjQiCiAgIHZpZXdCb3g9IjAgMCAyNCAyNCIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnNSIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzMiIgLz4KICA8ZwogICAgIGlkPSJsYXllcjEiPgogICAgPGcKICAgICAgIHN0eWxlPSJmaWxsOiM0NTVhNjQiCiAgICAgICBpZD0iZzg0OCIKICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuMjY0NTgzMzMsMCwwLDAuMjY0NTgzMzMsOC44MjQ5OTk3LDguODI0OTk5NykiPgogICAgICA8ZwogICAgICAgICBpZD0iZzgyNiI+CiAgICAgICAgPHJlY3QKICAgICAgICAgICBmaWxsPSJub25lIgogICAgICAgICAgIGhlaWdodD0iMjQiCiAgICAgICAgICAgd2lkdGg9IjI0IgogICAgICAgICAgIGlkPSJyZWN0ODI0IgogICAgICAgICAgIHg9IjAiCiAgICAgICAgICAgeT0iMCIgLz4KICAgICAgPC9nPgogICAgICA8ZwogICAgICAgICBpZD0iZzgzNCI+CiAgICAgICAgPGcKICAgICAgICAgICBpZD0iZzgyOCIgLz4KICAgICAgICA8ZwogICAgICAgICAgIGlkPSJnMjIyMyI+CiAgICAgICAgICA8ZwogICAgICAgICAgICAgaWQ9ImcyMTAxNiI+CiAgICAgICAgICAgIDxnCiAgICAgICAgICAgICAgIHN0eWxlPSJmaWxsOiM0NTVhNjQiCiAgICAgICAgICAgICAgIGlkPSJnMTQ5MyIKICAgICAgICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMy43Nzk1Mjc2LDAsMCwzLjc3OTUyNzYsLTMzLjM1NDMzLC0zMy4zNTQzMykiPgogICAgICAgICAgICAgIDxnCiAgICAgICAgICAgICAgICAgaWQ9ImcxNDcxIj4KICAgICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICAgICBpZD0icmVjdDE0NjkiCiAgICAgICAgICAgICAgICAgICBzdHlsZT0iZmlsbDpub25lIgogICAgICAgICAgICAgICAgICAgZD0iTSAwLDAgSCAyNCBWIDI0IEggMCBaIiAvPgogICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICA8ZwogICAgICAgICAgICAgICAgIGlkPSJnMTQ3OSI+CiAgICAgICAgICAgICAgICA8ZwogICAgICAgICAgICAgICAgICAgaWQ9ImcxNDczIiAvPgogICAgICAgICAgICAgICAgPGcKICAgICAgICAgICAgICAgICAgIGlkPSJnMTQ3NyI+CiAgICAgICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICAgICAgIGlkPSJwYXRoMTQ3NSIKICAgICAgICAgICAgICAgICAgICAgZD0ibSAxMiwzIGMgLTEuMSwwIC0yLDAuOSAtMiwyIDAsMC4xMiAwLjAxOTMsMC4yMjk4NDM4IDAuMDI5MywwLjMzOTg0MzggQyA3LjY4OTI5NjUsNi4xNDk4NDMzIDYsOC4zOCA2LDExIHYgOCBjIDAsMS4xIDAuOSwyIDIsMiBoIDggYyAxLjEsMCAyLC0wLjkgMiwtMiBWIDExIEMgMTgsOC4zOCAxNi4zMTA3MDMsNi4xNDk4NDMzIDEzLjk3MDcwMyw1LjMzOTg0MzggMTMuOTgwNzAzLDUuMjI5ODQzOCAxNCw1LjEyIDE0LDUgMTQsMy45IDEzLjEsMyAxMiwzIFogbSAwLDEgYyAwLjU1LDAgMSwwLjQ1IDEsMSAwLDAuMDMgLTAuMDA5NSwwLjA1OTg0NCAtMC4wMTk1MywwLjA4OTg0NCBDIDEyLjY2MDQ2OSw1LjAyOTg0MzggMTIuMzQsNSAxMiw1IDExLjY2LDUgMTEuMzM5NTMxLDUuMDI5ODQzOCAxMS4wMTk1MzEsNS4wODk4NDM4IDExLjAwOTUzMSw1LjA1OTg0MzggMTEsNS4wMyAxMSw1IDExLDQuNDUgMTEuNDUsNCAxMiw0IFogbSAtMy40NzI2NTYyLDYuMzk4NDM4IGggMS4xNTYyNSB2IDIuNjQwNjI0IGggMC4zMDkzMzU0IGwgLTIuMzdlLTUsLTEuMTcxMTQ2IDEuMDgyNzEwNSwtMTBlLTcgMC4wMTEsMS4xNzExNDYgaCAwLjMzMzMwNCBsIC0wLjAzNTA0LC0yLjU4NzMxNSBoIDAuNTc4MTI1IDAuNTc4MTI1IGwgMC4wMTEwNSwyLjU4NzMxNSBoIDAuMzU2MDI0IFYgMTIuMDYwNTQ3IEggMTQuMDYyNSB2IDAuOTc4NTE1IGggMC4zMzAwNzggdiAtMi41NTI3MzQgaCAxLjE1NjI1IHYgMi41NTI3MzQgaCAwLjk2Njc5NyB2IDAuMzU3NDIyIEggOS42ODM1OTM4IDguNTI3MzQzOCA3LjYwMzUxNTYgdiAtMC4zNTc0MjIgaCAwLjkyMzgyODIgeiIKICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICAgIDwvZz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=";h.Css.register(`
.blocklyBackpack {
  opacity: 0.4;
}
.blocklyBackpackDarken {
  opacity: 0.6;
}
.blocklyBackpack:active {
  opacity: 0.8;
}
`);class A{constructor(){this.priority=h.serialization.priorities.BLOCKS-10}save(y){const v=y.getComponentManager().getComponent("backpack");return v==null?void 0:v.getContents().map(M=>JSON.parse(M))}load(y,v){const M=y.map(P=>JSON.stringify(P)),L=v.getComponentManager().getComponent("backpack");L==null||L.setContents(M)}clear(y){const v=y.getComponentManager().getComponent("backpack");v==null||v.empty()}}return u})())})(sM);var QH=sM.exports,oM={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(t,s){(function(o,i){t.exports=i(nr())})(Qs,o=>(()=>{var i={370:g=>{g.exports=o}},a={};function c(g){var m=a[g];if(m!==void 0)return m.exports;var T=a[g]={exports:{}};return i[g](T,T.exports,c),T.exports}c.d=(g,m)=>{for(var T in m)c.o(m,T)&&!c.o(g,T)&&Object.defineProperty(g,T,{enumerable:!0,get:m[T]})},c.o=(g,m)=>Object.prototype.hasOwnProperty.call(g,m),c.r=g=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})};var u={};c.r(u),c.d(u,{WorkspaceSearch:()=>f});var h=c(370);const p=function(){let g=!1;return function(){if(g)return;g=!0;const m=document.createElement("style");m.id="blockly-ws-search-style";const T=document.createTextNode(`path.blocklyPath.blockly-ws-search-highlight {
    fill: #000;
  }
  path.blocklyPath.blockly-ws-search-highlight.blockly-ws-search-current {
    fill: grey;
  }
  .blockly-ws-search-close-btn {
    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4=) no-repeat top left;
  }
  .blockly-ws-search-next-btn {
    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNNy40MSA4LjU5TDEyIDEzLjE3bDQuNTktNC41OEwxOCAxMGwtNiA2LTYtNiAxLjQxLTEuNDF6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PC9zdmc+) no-repeat top left;
  }
  .blockly-ws-search-previous-btn {
    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNNy40MSAxNS40MUwxMiAxMC44M2w0LjU5IDQuNThMMTggMTRsLTYtNi02IDZ6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==) no-repeat top left;
  }
  .blockly-ws-search {
    background: #fff;
    border: solid lightgrey 0.5px;
    box-shadow: 0px 10px 20px grey;
    justify-content: center;
    padding: 0.25em;
    position: absolute;
    z-index: 70;
  }
  .blockly-ws-search-input input {
    border: none;
  }
  .blockly-ws-search button {
    border: none;
    padding-left: 6px;
    padding-right: 6px;
  }
  .blockly-ws-search-actions {
    display: flex;
  }
  .blockly-ws-search-container {
    display: flex;
  }
  .blockly-ws-search-content {
    display: flex;
  }`);m.appendChild(T),document.head.insertBefore(m,document.head.firstChild)}}();class f{constructor(m){this.workspace=m,this.id="workspaceSearch",this.htmlDiv=null,this.actionDiv=null,this.inputElement=null,this.textInputPlaceholder="Search",this.blocks=[],this.currentBlockIndex=-1,this.searchText="",this.searchOnInput=!0,this.caseSensitive=!1,this.preserveSelected=!0,this.boundEvents=[]}init(){this.workspace.getComponentManager().addComponent({component:this,weight:0,capabilities:[h.ComponentManager.Capability.POSITIONABLE]}),p(),this.createDom(),this.setVisible(!1),this.workspace.resize()}dispose(){for(const m of this.boundEvents)h.browserEvents.unbind(m);this.boundEvents.length=0,this.htmlDiv&&(this.htmlDiv.remove(),this.htmlDiv=null),this.actionDiv=null,this.inputElement=null}createDom(){const m=this.workspace.getInjectionDiv();this.addEvent(m,"keydown",this,y=>this.onWorkspaceKeyDown(y)),this.htmlDiv=document.createElement("div"),h.utils.dom.addClass(this.htmlDiv,"blockly-ws-search");const T=document.createElement("div");h.utils.dom.addClass(T,"blockly-ws-search-container");const I=document.createElement("div");h.utils.dom.addClass(I,"blockly-ws-search-content"),T.appendChild(I);const C=document.createElement("div");h.utils.dom.addClass(C,"blockly-ws-search-input"),this.inputElement=this.createTextInput(),this.addEvent(this.inputElement,"keydown",this,y=>this.onKeyDown(y)),this.addEvent(this.inputElement,"input",this,()=>this.onInput()),this.addEvent(this.inputElement,"click",this,()=>{var y;this.searchAndHighlight(this.searchText,this.preserveSelected),(y=this.inputElement)===null||y===void 0||y.select()}),C.appendChild(this.inputElement),I.appendChild(C),this.actionDiv=document.createElement("div"),h.utils.dom.addClass(this.actionDiv,"blockly-ws-search-actions"),I.appendChild(this.actionDiv);const w=this.createNextBtn();w&&this.addActionBtn(w,()=>this.next());const A=this.createPreviousBtn();A&&this.addActionBtn(A,()=>this.previous());const S=this.createCloseBtn();S&&(this.addBtnListener(S,()=>this.close()),T.appendChild(S)),this.htmlDiv.appendChild(T),m.insertBefore(this.htmlDiv,this.workspace.getParentSvg())}addEvent(m,T,I,C){const w=h.browserEvents.conditionalBind(m,T,I,C);this.boundEvents.push(w)}addActionBtn(m,T){var I;this.addBtnListener(m,T),(I=this.actionDiv)===null||I===void 0||I.appendChild(m)}createTextInput(){const m=document.createElement("input");return m.type="text",m.setAttribute("placeholder",this.textInputPlaceholder),m}createNextBtn(){return this.createBtn("blockly-ws-search-next-btn","Find next")}createPreviousBtn(){return this.createBtn("blockly-ws-search-previous-btn","Find previous")}createCloseBtn(){return this.createBtn("blockly-ws-search-close-btn","Close search bar")}createBtn(m,T){const I=document.createElement("button");return h.utils.dom.addClass(I,m),I.setAttribute("aria-label",T),I}addBtnListener(m,T){this.addEvent(m,"click",this,T),this.addEvent(m,"keydown",this,I=>{I.key==="Enter"?(T(I),I.preventDefault()):I.key==="Escape"&&this.close(),I.stopPropagation()})}getBoundingRectangle(){return null}position(m,T){this.htmlDiv&&(this.workspace.RTL?this.htmlDiv.style.left=m.absoluteMetrics.left+"px":m.toolboxMetrics.position===h.TOOLBOX_AT_RIGHT?this.htmlDiv.style.right=m.toolboxMetrics.width+"px":this.htmlDiv.style.right="0",this.htmlDiv.style.top=m.absoluteMetrics.top+"px")}onInput(){if(this.searchOnInput&&this.inputElement){const m=this.inputElement.value.trim();m!==this.searchText&&this.searchAndHighlight(m,this.preserveSelected)}}onKeyDown(m){if(m.key==="Escape")this.close();else if(m.key==="Enter")if(this.searchOnInput)m.shiftKey?this.previous():this.next();else{if(!this.inputElement)return;const T=this.inputElement.value.trim();T!==this.searchText&&this.searchAndHighlight(T,this.preserveSelected)}}onWorkspaceKeyDown(m){(m.ctrlKey||m.metaKey)&&m.key==="f"&&(this.open(),m.preventDefault(),m.stopPropagation())}previous(){this.setCurrentBlock(this.currentBlockIndex-1)}next(){this.setCurrentBlock(this.currentBlockIndex+1)}setSearchPlaceholder(m){this.textInputPlaceholder=m,this.inputElement&&this.inputElement.setAttribute("placeholder",this.textInputPlaceholder)}setCurrentBlock(m){if(!this.blocks.length)return;let T=this.blocks[this.currentBlockIndex];T&&this.unhighlightCurrentSelection(T),this.currentBlockIndex=(m%this.blocks.length+this.blocks.length)%this.blocks.length,T=this.blocks[this.currentBlockIndex],this.highlightCurrentSelection(T),this.workspace.centerOnBlock(T.id,!1)}open(){var m,T;this.setVisible(!0),(m=this.inputElement)===null||m===void 0||m.focus(),(T=this.inputElement)===null||T===void 0||T.select(),this.searchText&&this.searchAndHighlight(this.searchText)}close(){this.setVisible(!1),this.workspace.markFocused(),this.clearBlocks()}setVisible(m){this.htmlDiv&&(this.htmlDiv.style.display=m?"flex":"none")}searchAndHighlight(m,T){const I=this.blocks[this.currentBlockIndex];this.searchText=m.trim(),this.clearBlocks(),this.blocks=this.getMatchingBlocks(this.workspace,this.searchText,this.caseSensitive),this.highlightSearchGroup(this.blocks);let C=0;T&&(C=this.blocks.indexOf(I),C=C>-1?C:0),this.setCurrentBlock(C)}getSearchPool(m){return m.getAllBlocks(!0).filter(T=>{const I=T.getSurroundParent();return!I||!I.isCollapsed()})}isBlockMatch(m,T,I){let C="";if(m.isCollapsed())C=m.toString();else{const w=[];m.inputList.forEach(A=>{A.fieldRow.forEach(S=>{w.push(S.getText())})}),C=w.join(" ").trim()}return I||(C=C.toLowerCase()),C.indexOf(T)>-1}getMatchingBlocks(m,T,I){return T?(this.caseSensitive||(T=T.toLowerCase()),this.getSearchPool(m).filter(C=>this.isBlockMatch(C,T,I))):[]}clearBlocks(){this.unhighlightSearchGroup(this.blocks);const m=this.blocks[this.currentBlockIndex];m&&this.unhighlightCurrentSelection(m),this.currentBlockIndex=-1,this.blocks=[]}highlightCurrentSelection(m){const T=m.pathObject.svgPath;h.utils.dom.addClass(T,"blockly-ws-search-current")}unhighlightCurrentSelection(m){const T=m.pathObject.svgPath;h.utils.dom.removeClass(T,"blockly-ws-search-current")}highlightSearchGroup(m){m.forEach(T=>{const I=T.pathObject.svgPath;h.utils.dom.addClass(I,"blockly-ws-search-highlight")})}unhighlightSearchGroup(m){m.forEach(T=>{const I=T.pathObject.svgPath;h.utils.dom.removeClass(I,"blockly-ws-search-highlight")})}}return u})())})(oM);var eG=oM.exports,iM={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(t,s){(function(o,i){t.exports=i(nr())})(Qs,o=>(()=>{var i={370:I=>{I.exports=o}},a={};function c(I){var C=a[I];if(C!==void 0)return C.exports;var w=a[I]={exports:{}};return i[I](w,w.exports,c),w.exports}c.d=(I,C)=>{for(var w in C)c.o(C,w)&&!c.o(I,w)&&Object.defineProperty(I,w,{enumerable:!0,get:C[w]})},c.o=(I,C)=>Object.prototype.hasOwnProperty.call(I,C),c.r=I=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})};var u={};c.r(u),c.d(u,{Minimap:()=>m,PositionedMinimap:()=>T});var h=c(370);const p=new Set([h.Events.VIEWPORT_CHANGE,h.Events.BLOCK_CHANGE,h.Events.BLOCK_CREATE,h.Events.BLOCK_DELETE,h.Events.BLOCK_DRAG,h.Events.BLOCK_MOVE]);class f{constructor(C,w){this.primaryWorkspace=C,this.minimapWorkspace=w,this.svgGroup=null,this.rect=null,this.background=null,this.initialized=!1,this.id=String(Math.random()).substring(2),this.onChangeWrapper=this.onChange.bind(this)}init(){this.svgGroup=h.utils.dom.createSvgElement(h.utils.Svg.G,{class:"blockly-focus-region"},null);const C=h.utils.dom.createSvgElement(new h.utils.Svg("mask"),{id:"focusRegionMask"+this.id},this.svgGroup);this.background=h.utils.dom.createSvgElement(h.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",mask:"url(#focusRegionMask"+this.id+")"},this.svgGroup),h.utils.dom.createSvgElement(h.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",fill:"white"},C),this.rect=h.utils.dom.createSvgElement(h.utils.Svg.RECT,{x:0,y:0,rx:6,ry:6,fill:"black"},C);const w=this.minimapWorkspace.getParentSvg();w.firstChild?w.insertBefore(this.svgGroup,w.firstChild):w.appendChild(this.svgGroup),window.addEventListener("resize",()=>{this.update()}),window.addEventListener("load",()=>{this.update()}),this.onChangeWrapper=this.onChange.bind(this),this.primaryWorkspace.addChangeListener(this.onChangeWrapper),this.update(),this.initialized=!0}dispose(){this.onChangeWrapper&&(this.primaryWorkspace.removeChangeListener(this.onChangeWrapper),this.onChangeWrapper=()=>null),this.svgGroup&&h.utils.dom.removeNode(this.svgGroup),this.svgGroup=null,this.rect=null,this.background=null,this.initialized=!1}onChange(C){p.has(C.type)&&this.update()}update(){const C=this.primaryWorkspace.getMetricsManager(),w=this.minimapWorkspace.getMetricsManager(),A=C.getViewMetrics(!0),S=C.getContentMetrics(!0),y=w.getContentMetrics(),v=w.getSvgMetrics();if(S.width===0)return;const M=y.width/w.getContentMetrics(!0).width,L=A.width*M,P=A.height*M;let B=(A.left-S.left)*M,N=(A.top-S.top)*M;if(B+=(v.width-y.width)/2,N+=(v.height-y.height)/2,!this.rect)throw new Error("The focus region must be initialized (`init`) before calling `update`");this.rect.setAttribute("transform",`translate(${B},${N})`),this.rect.setAttribute("width",L.toString()),this.rect.setAttribute("height",P.toString())}isEnabled(){return this.initialized}}h.Css.register(`
.blockly-focus-region {
  fill: #e6e6e6;
}
`);const g=new Set([h.Events.BLOCK_CHANGE,h.Events.BLOCK_CREATE,h.Events.BLOCK_DELETE,h.Events.BLOCK_DRAG,h.Events.BLOCK_MOVE]);class m{constructor(C){this.minimapWorkspace=null,this.focusRegion=null,this.onMouseMoveWrapper=null,this.onMouseDownWrapper=null,this.onMouseUpWrapper=null,this.minimapWrapper=null,this.primaryWorkspace=C}init(){var C;const w=this.primaryWorkspace.getInjectionDiv().parentNode;if(!w)throw new Error("The workspace must be injected into the page before the minimap can be initalized");this.minimapWrapper=document.createElement("div"),this.minimapWrapper.id="minimapWrapper"+this.primaryWorkspace.id,this.minimapWrapper.className="blockly-minimap",w==null||w.appendChild(this.minimapWrapper),this.minimapWorkspace=h.inject(this.minimapWrapper.id,{rtl:this.primaryWorkspace.RTL,move:{scrollbars:!0,drag:!1,wheel:!1},zoom:{maxScale:1/0,minScale:0},readOnly:!0,theme:this.primaryWorkspace.getTheme(),renderer:this.primaryWorkspace.options.renderer}),(C=this.minimapWorkspace.scrollbar)===null||C===void 0||C.setContainerVisible(!1),this.primaryWorkspace.addChangeListener(S=>{this.mirror(S)}),window.addEventListener("resize",()=>{this.minimapWorkspace&&this.minimapWorkspace.zoomToFit()});const A=S=>this.onClickDown(S);this.minimapWorkspace.svgGroup_.addEventListener("pointerdown",A,!0),this.onMouseDownWrapper=[[this.minimapWorkspace.svgGroup_,"pointerdown",A]],this.onMouseUpWrapper=h.browserEvents.bind(w,"mouseup",this,this.onClickUp),this.focusRegion=new f(this.primaryWorkspace,this.minimapWorkspace),this.enableFocusRegion()}dispose(){this.isFocusEnabled()&&this.disableFocusRegion(),this.minimapWorkspace&&this.minimapWorkspace.dispose(),h.utils.dom.removeNode(this.minimapWrapper),this.onMouseMoveWrapper&&h.browserEvents.unbind(this.onMouseMoveWrapper),this.onMouseDownWrapper&&h.browserEvents.unbind(this.onMouseDownWrapper),this.onMouseUpWrapper&&h.browserEvents.unbind(this.onMouseUpWrapper)}mirror(C){if(!g.has(C.type)||C.type===h.Events.BLOCK_CREATE&&C.xml.tagName==="shadow")return;const w=C.toJson();this.minimapWorkspace&&h.Events.fromJson(w,this.minimapWorkspace).run(!0),h.renderManagement.finishQueuedRenders().then(()=>{this.minimapWorkspace&&this.minimapWorkspace.zoomToFit()})}static minimapToPrimaryCoords(C,w,A,S){A-=(w.svgWidth-w.contentWidth)/2,S-=(w.svgHeight-w.contentHeight)/2;const y=C.contentWidth/w.contentWidth;A*=y,S*=y;let v=-C.contentLeft-A,M=-C.contentTop-S;return v+=C.viewWidth/2,M+=C.viewHeight/2,[v,M]}primaryScroll(C){const w=this.primaryWorkspace.getMetrics();if(this.minimapWorkspace){const A=this.minimapWorkspace.getMetrics();if(w&&A){const[S,y]=m.minimapToPrimaryCoords(w,A,C.offsetX,C.offsetY);this.primaryWorkspace.scroll(S,y)}}}onClickDown(C){this.minimapWorkspace&&(C.stopImmediatePropagation(),this.onMouseMoveWrapper=h.browserEvents.bind(this.minimapWorkspace.svgGroup_,"mousemove",this,this.onMouseMove),this.primaryScroll(C))}onClickUp(){this.onMouseMoveWrapper&&(h.browserEvents.unbind(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}onMouseMove(C){this.primaryScroll(C)}enableFocusRegion(){this.focusRegion&&this.focusRegion.init()}disableFocusRegion(){this.focusRegion&&this.focusRegion.dispose()}isFocusEnabled(){return!!this.focusRegion&&this.focusRegion.isEnabled()}}class T extends m{constructor(C){super(C),this.id="minimap",this.margin=20,this.top=0,this.left=0,this.width=225,this.height=150}init(){super.init(),this.primaryWorkspace.getComponentManager().addComponent({component:this,weight:3,capabilities:[h.ComponentManager.Capability.POSITIONABLE]}),this.primaryWorkspace.resize()}getBoundingRectangle(){return new h.utils.Rect(this.top,this.top+this.height,this.left,this.left+this.width)}position(C,w){this.setSize(),this.setPosition(C,w),this.setAttributes()}setSize(){const C=this.primaryWorkspace.getMetrics().viewWidth;this.width=Math.max(200,C/5),this.height=2*this.width/3}setPosition(C,w){const A=this.primaryWorkspace,S=A.scrollbar,y=S&&S.isVisible()&&S.canScrollVertically(),v=S&&S.isVisible()&&S.canScrollHorizontally();C.toolboxMetrics.position===h.TOOLBOX_AT_LEFT||A.horizontalLayout&&!A.RTL?(this.left=C.absoluteMetrics.left+C.viewMetrics.width-this.width-this.margin,y&&!A.RTL&&(this.left-=h.Scrollbar.scrollbarThickness)):(this.left=this.margin,y&&A.RTL&&(this.left+=h.Scrollbar.scrollbarThickness));const M=C.toolboxMetrics.position===h.TOOLBOX_AT_BOTTOM;M?(this.top=C.absoluteMetrics.top+C.viewMetrics.height-this.height-this.margin,v&&(this.top-=h.Scrollbar.scrollbarThickness)):this.top=C.absoluteMetrics.top+this.margin;let L=this.getBoundingRectangle();for(let P=0;P<w.length;P++)L.intersects(w[P])&&(this.top=M?w[P].top-this.height-this.margin:w[P].bottom+this.margin,L=this.getBoundingRectangle(),P=-1)}setAttributes(){var C;const w=(C=this.minimapWorkspace)===null||C===void 0?void 0:C.getInjectionDiv();if(!w||(w==null?void 0:w.parentElement)===null)return;const A=w.parentElement.style;A.zIndex="2",A.position="absolute",A.width=`${this.width}px`,A.height=`${this.height}px`,A.top=`${this.top}px`,A.left=`${this.left}px`,this.minimapWorkspace&&h.svgResize(this.minimapWorkspace)}}return h.Css.register(`
.blockly-minimap {
  box-shadow: 2px 2px 10px grey;
}
`),u})())})(iM);var tG=iM.exports,nG={exports:{}};/*! For license information please see index.js.LICENSE.txt */(function(t,s){(function(o,i){t.exports=i(nr())})(Qs,o=>(()=>{var i={370:p=>{p.exports=o}},a={},c=function p(f){var g=a[f];if(g!==void 0)return g.exports;var m=a[f]={exports:{}};return i[f](m,m.exports,p),m.exports}(370);class u{constructor(){this.blockCreationWorkspace=new c.Workspace,this.trigramsToBlocks=new Map}indexBlocks(f){const g=new c.Workspace;f.forEach(m=>{const T=g.newBlock(m);this.indexBlockText(m.replaceAll("_"," "),m),T.inputList.forEach(I=>{I.fieldRow.forEach(C=>{this.indexDropdownOption(C,m),this.indexBlockText(C.getText(),m)})})})}indexDropdownOption(f,g){f instanceof c.FieldDropdown&&f.getOptions(!0).forEach(m=>{typeof m[0]=="string"?this.indexBlockText(m[0],g):"alt"in m[0]&&this.indexBlockText(m[0].alt,g)})}blockTypesMatching(f){return[...this.generateTrigrams(f).map(g=>{var m;return(m=this.trigramsToBlocks.get(g))!==null&&m!==void 0?m:new Set}).reduce((g,m)=>this.getIntersection(g,m)).values()]}indexBlockText(f,g){this.generateTrigrams(f).forEach(m=>{var T;const I=(T=this.trigramsToBlocks.get(m))!==null&&T!==void 0?T:new Set;I.add(g),this.trigramsToBlocks.set(m,I)})}generateTrigrams(f){const g=f.toLowerCase();if(!g)return[];if(g.length<=3)return[g];const m=[];for(let T=0;T<g.length-3;T++)m.push(g.substring(T,T+3));return m}getIntersection(f,g){return new Set([...f].filter(m=>g.has(m)))}}class h extends c.ToolboxCategory{constructor(f,g,m){super(f,g,m),this.blockSearcher=new u,this.initBlockSearcher(),this.registerShortcut()}createDom_(){var f;const g=super.createDom_();return this.searchField=document.createElement("input"),this.searchField.type="search",this.searchField.placeholder="Search",this.workspace_.RTL?this.searchField.style.marginRight="8px":this.searchField.style.marginLeft="8px",this.searchField.addEventListener("keyup",m=>{if(m.key==="Escape")return this.parentToolbox_.clearSelection(),!0;this.matchBlocks()}),(f=this.rowContents_)===null||f===void 0||f.replaceChildren(this.searchField),g}getPosition(){var f;const g=((f=this.workspace_.options.languageTree)===null||f===void 0?void 0:f.contents)||[];for(let m=0;m<g.length;m++)if(g[m].kind===h.SEARCH_CATEGORY_KIND)return m;return-1}registerShortcut(){const f=c.ShortcutRegistry.registry.createSerializedKey(c.utils.KeyCodes.B,[c.utils.KeyCodes.CTRL]);c.ShortcutRegistry.registry.register({name:h.START_SEARCH_SHORTCUT,callback:()=>{const g=this.getPosition();return!(g<0||(this.parentToolbox_.selectItemByPosition(g),0))},keyCodes:[f]})}getAvailableBlocks(f,g){"contents"in f?f.contents.forEach(m=>{this.getAvailableBlocks(m,g)}):f.kind.toLowerCase()==="block"&&"type"in f&&f.type&&g.add(f.type)}initBlockSearcher(){var f,g;const m=new Set;(g=(f=this.workspace_.options.languageTree)===null||f===void 0?void 0:f.contents)===null||g===void 0||g.forEach(T=>this.getAvailableBlocks(T,m)),this.blockSearcher.indexBlocks([...m])}onClick(f){super.onClick(f),f.preventDefault(),f.stopPropagation(),this.setSelected(this.parentToolbox_.getSelectedItem()===this)}setSelected(f){super.setSelected(f),this.searchField&&(f?(this.searchField.focus(),this.matchBlocks()):(this.searchField.value="",this.searchField.blur()))}matchBlocks(){var f;const g=((f=this.searchField)===null||f===void 0?void 0:f.value)||"";this.flyoutItems_=g?this.blockSearcher.blockTypesMatching(g).map(m=>({kind:"block",type:m})):[],this.flyoutItems_.length||this.flyoutItems_.push({kind:"label",text:g.length<3?"Type to search for blocks":"No matching blocks found"}),this.parentToolbox_.refreshSelection()}dispose(){super.dispose(),c.ShortcutRegistry.registry.unregister(h.START_SEARCH_SHORTCUT)}}return h.START_SEARCH_SHORTCUT="startSearch",h.SEARCH_CATEGORY_KIND="search",c.registry.register(c.registry.Type.TOOLBOX_ITEM,h.SEARCH_CATEGORY_KIND,h),{}})())})(nG);class rM extends XN{constructor(s,o,i){super(s,o,i)}}zR.register(zR.Type.TOOLBOX_ITEM,XN.registrationName,rM,!0);const sG={Backend_Components_blocks:{colourPrimary:"#ab7fe6",colourSecondary:"#64C7FF",colourTertiary:"#8839c4"},General_Middlewares_blocks:{colourPrimary:"#1fc59b",colourSecondary:"#64C7FF",colourTertiary:"#017d5e"},Session_Handling_blocks:{colourPrimary:"#ffd000",colourSecondary:"#64C7FF",colourTertiary:"#d39700"},JWT_Authentication_blocks:{colourPrimary:"#6590df",colourSecondary:"#64C7FF",colourTertiary:"#2a5ebf"},Database_blocks:{colourPrimary:"#afcd77",colourSecondary:"#64C7FF",colourTertiary:"#89bc2b"},Custom_blocks:{colourPrimary:"#ffb5eb",colourSecondary:"#ffd5e5",colourTertiary:"#f585c2"},Json_blocks:{colourPrimary:"#ff968a",colourSecondary:"#c2b0f2",colourTertiary:"#877bcf",colourAccent:"#7f6ad8"}},oG={loops_blocks:{colourPrimary:"#2ecc71",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},variable_blocks:{colourPrimary:"#e74c3c",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},text_blocks:{colourPrimary:"#008080",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},math_blocks:{colourPrimary:"#1cf00d",colourSecondary:"#00a2ff",colourTertiary:"#5e00f5"},function_blocks:{colourPrimary:"#783fa1",colourSecondary:"#75604a",colourTertiary:"#C5EAFF"},color_blocks:{colourPrimary:"#75604a",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},list_blocks:{colourPrimary:"#800080",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"}},iG=NH.defineTheme("myCustomTheme",{name:"myCustomTheme",blockStyles:{...sG,...oG},categoryStyles:{search:{colour:"#4a148c"}},componentStyles:{workspaceBackgroundColour:"#daebfbab",toolboxForegroundColour:"#000000",flyoutBackgroundColour:"#dcdcdce9",flyoutForegroundColour:"#fff",flyoutOpacity:1,scrollbarColour:"#b0c8df",scrollbarOpacity:.7,insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,markerColour:"#fff",cursorColour:"#fff"},fontStyle:{family:"Arial, sans-serif",weight:"normal",size:14},startHats:!0}),{blocks:J8,lists:q8,logic:Z8,loops:Q8,math:e9,procedures:t9,texts:n9,variables:s9,variablesDynamic:o9}=XH,rG={kind:"category",name:"Logic",colour:"#3498db",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_ternary"}]},lG={kind:"category",name:"Loops",colour:"#2ecc71",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:10}}},BY:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"controls_forEach"},{kind:"block",type:"controls_flow_statements"}]},aG={kind:"category",name:"Variables",colour:"#e74c3c",custom:"VARIABLE"},cG={kind:"category",name:"Function",colour:"#783fa1",contents:[{kind:"block",type:"procedures_defnoreturn"},{kind:"block",type:"procedures_defreturn"},{kind:"block",type:"procedures_ifreturn"}]},uG={kind:"category",name:"List",colour:"#800080",contents:[{kind:"block",type:"lists_create_with"},{kind:"block",type:"lists_repeat"},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_isEmpty"},{kind:"block",type:"lists_sort"},{kind:"block",type:"lists_reverse"},{kind:"block",type:"lists_indexOf"},{kind:"block",type:"lists_setIndex"},{kind:"block",type:"lists_split"}]};function YR(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function dG(...t){return s=>{let o=!1;const i=t.map(a=>{const c=YR(a,s);return!o&&typeof c=="function"&&(o=!0),c});if(o)return()=>{for(let a=0;a<i.length;a++){const c=i[a];typeof c=="function"?c():YR(t[a],null)}}}}function lM(t){const s=pG(t),o=O.forwardRef((i,a)=>{const{children:c,...u}=i,h=O.Children.toArray(c),p=h.find(mG);if(p){const f=p.props.children,g=h.map(m=>m===p?O.Children.count(f)>1?O.Children.only(null):O.isValidElement(f)?f.props.children:null:m);return _.jsx(s,{...u,ref:a,children:O.isValidElement(f)?O.cloneElement(f,void 0,g):null})}return _.jsx(s,{...u,ref:a,children:c})});return o.displayName=`${t}.Slot`,o}var hG=lM("Slot");function pG(t){const s=O.forwardRef((o,i)=>{const{children:a,...c}=o;if(O.isValidElement(a)){const u=$G(a),h=gG(c,a.props);return a.type!==O.Fragment&&(h.ref=i?dG(i,u):u),O.cloneElement(a,h)}return O.Children.count(a)>1?O.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var fG=Symbol("radix.slottable");function mG(t){return O.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===fG}function gG(t,s){const o={...s};for(const i in s){const a=t[i],c=s[i];/^on[A-Z]/.test(i)?a&&c?o[i]=(...h)=>{const p=c(...h);return a(...h),p}:a&&(o[i]=a):i==="style"?o[i]={...a,...c}:i==="className"&&(o[i]=[a,c].filter(Boolean).join(" "))}return{...t,...o}}function $G(t){var i,a;let s=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,o=s&&"isReactWarning"in s&&s.isReactWarning;return o?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,o=s&&"isReactWarning"in s&&s.isReactWarning,o?t.props.ref:t.props.ref||t.ref)}const KR=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,JR=Bt,_G=(t,s)=>o=>{var i;if((s==null?void 0:s.variants)==null)return JR(t,o==null?void 0:o.class,o==null?void 0:o.className);const{variants:a,defaultVariants:c}=s,u=Object.keys(a).map(f=>{const g=o==null?void 0:o[f],m=c==null?void 0:c[f];if(g===null)return null;const T=KR(g)||KR(m);return a[f][T]}),h=o&&Object.entries(o).reduce((f,g)=>{let[m,T]=g;return T===void 0||(f[m]=T),f},{}),p=s==null||(i=s.compoundVariants)===null||i===void 0?void 0:i.reduce((f,g)=>{let{class:m,className:T,...I}=g;return Object.entries(I).every(C=>{let[w,A]=C;return Array.isArray(A)?A.includes({...c,...h}[w]):{...c,...h}[w]===A})?[...f,m,T]:f},[]);return JR(t,u,p,o==null?void 0:o.class,o==null?void 0:o.className)},fE="-",TG=t=>{const s=yG(t),{conflictingClassGroups:o,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:u=>{const h=u.split(fE);return h[0]===""&&h.length!==1&&h.shift(),aM(h,s)||bG(u)},getConflictingClassGroupIds:(u,h)=>{const p=o[u]||[];return h&&i[u]?[...p,...i[u]]:p}}},aM=(t,s)=>{var u;if(t.length===0)return s.classGroupId;const o=t[0],i=s.nextPart.get(o),a=i?aM(t.slice(1),i):void 0;if(a)return a;if(s.validators.length===0)return;const c=t.join(fE);return(u=s.validators.find(({validator:h})=>h(c)))==null?void 0:u.classGroupId},qR=/^\[(.+)\]$/,bG=t=>{if(qR.test(t)){const s=qR.exec(t)[1],o=s==null?void 0:s.substring(0,s.indexOf(":"));if(o)return"arbitrary.."+o}},yG=t=>{const{theme:s,classGroups:o}=t,i={nextPart:new Map,validators:[]};for(const a in o)Mb(o[a],i,a,s);return i},Mb=(t,s,o,i)=>{t.forEach(a=>{if(typeof a=="string"){const c=a===""?s:ZR(s,a);c.classGroupId=o;return}if(typeof a=="function"){if(EG(a)){Mb(a(i),s,o,i);return}s.validators.push({validator:a,classGroupId:o});return}Object.entries(a).forEach(([c,u])=>{Mb(u,ZR(s,c),o,i)})})},ZR=(t,s)=>{let o=t;return s.split(fE).forEach(i=>{o.nextPart.has(i)||o.nextPart.set(i,{nextPart:new Map,validators:[]}),o=o.nextPart.get(i)}),o},EG=t=>t.isThemeGetter,vG=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,o=new Map,i=new Map;const a=(c,u)=>{o.set(c,u),s++,s>t&&(s=0,i=o,o=new Map)};return{get(c){let u=o.get(c);if(u!==void 0)return u;if((u=i.get(c))!==void 0)return a(c,u),u},set(c,u){o.has(c)?o.set(c,u):a(c,u)}}},Lb="!",Db=":",CG=Db.length,SG=t=>{const{prefix:s,experimentalParseClassName:o}=t;let i=a=>{const c=[];let u=0,h=0,p=0,f;for(let C=0;C<a.length;C++){let w=a[C];if(u===0&&h===0){if(w===Db){c.push(a.slice(p,C)),p=C+CG;continue}if(w==="/"){f=C;continue}}w==="["?u++:w==="]"?u--:w==="("?h++:w===")"&&h--}const g=c.length===0?a:a.substring(p),m=IG(g),T=m!==g,I=f&&f>p?f-p:void 0;return{modifiers:c,hasImportantModifier:T,baseClassName:m,maybePostfixModifierPosition:I}};if(s){const a=s+Db,c=i;i=u=>u.startsWith(a)?c(u.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(o){const a=i;i=c=>o({className:c,parseClassName:a})}return i},IG=t=>t.endsWith(Lb)?t.substring(0,t.length-1):t.startsWith(Lb)?t.substring(1):t,wG=t=>{const s=Object.fromEntries(t.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const a=[];let c=[];return i.forEach(u=>{u[0]==="["||s[u]?(a.push(...c.sort(),u),c=[]):c.push(u)}),a.push(...c.sort()),a}},kG=t=>({cache:vG(t.cacheSize),parseClassName:SG(t),sortModifiers:wG(t),...TG(t)}),RG=/\s+/,xG=(t,s)=>{const{parseClassName:o,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:c}=s,u=[],h=t.trim().split(RG);let p="";for(let f=h.length-1;f>=0;f-=1){const g=h[f],{isExternal:m,modifiers:T,hasImportantModifier:I,baseClassName:C,maybePostfixModifierPosition:w}=o(g);if(m){p=g+(p.length>0?" "+p:p);continue}let A=!!w,S=i(A?C.substring(0,w):C);if(!S){if(!A){p=g+(p.length>0?" "+p:p);continue}if(S=i(C),!S){p=g+(p.length>0?" "+p:p);continue}A=!1}const y=c(T).join(":"),v=I?y+Lb:y,M=v+S;if(u.includes(M))continue;u.push(M);const L=a(S,A);for(let P=0;P<L.length;++P){const B=L[P];u.push(v+B)}p=g+(p.length>0?" "+p:p)}return p};function OG(){let t=0,s,o,i="";for(;t<arguments.length;)(s=arguments[t++])&&(o=cM(s))&&(i&&(i+=" "),i+=o);return i}const cM=t=>{if(typeof t=="string")return t;let s,o="";for(let i=0;i<t.length;i++)t[i]&&(s=cM(t[i]))&&(o&&(o+=" "),o+=s);return o};function AG(t,...s){let o,i,a,c=u;function u(p){const f=s.reduce((g,m)=>m(g),t());return o=kG(f),i=o.cache.get,a=o.cache.set,c=h,h(p)}function h(p){const f=i(p);if(f)return f;const g=xG(p,o);return a(p,g),g}return function(){return c(OG.apply(null,arguments))}}const Zt=t=>{const s=o=>o[t]||[];return s.isThemeGetter=!0,s},uM=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,dM=/^\((?:(\w[\w-]*):)?(.+)\)$/i,NG=/^\d+\/\d+$/,MG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,LG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,DG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,PG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,BG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vl=t=>NG.test(t),Ve=t=>!!t&&!Number.isNaN(Number(t)),ki=t=>!!t&&Number.isInteger(Number(t)),pT=t=>t.endsWith("%")&&Ve(t.slice(0,-1)),Xo=t=>MG.test(t),FG=()=>!0,UG=t=>LG.test(t)&&!DG.test(t),hM=()=>!1,VG=t=>PG.test(t),HG=t=>BG.test(t),GG=t=>!ve(t)&&!Ce(t),jG=t=>Aa(t,mM,hM),ve=t=>uM.test(t),xr=t=>Aa(t,gM,UG),fT=t=>Aa(t,KG,Ve),QR=t=>Aa(t,pM,hM),WG=t=>Aa(t,fM,HG),op=t=>Aa(t,$M,VG),Ce=t=>dM.test(t),Hc=t=>Na(t,gM),zG=t=>Na(t,JG),ex=t=>Na(t,pM),XG=t=>Na(t,mM),YG=t=>Na(t,fM),ip=t=>Na(t,$M,!0),Aa=(t,s,o)=>{const i=uM.exec(t);return i?i[1]?s(i[1]):o(i[2]):!1},Na=(t,s,o=!1)=>{const i=dM.exec(t);return i?i[1]?s(i[1]):o:!1},pM=t=>t==="position"||t==="percentage",fM=t=>t==="image"||t==="url",mM=t=>t==="length"||t==="size"||t==="bg-size",gM=t=>t==="length",KG=t=>t==="number",JG=t=>t==="family-name",$M=t=>t==="shadow",qG=()=>{const t=Zt("color"),s=Zt("font"),o=Zt("text"),i=Zt("font-weight"),a=Zt("tracking"),c=Zt("leading"),u=Zt("breakpoint"),h=Zt("container"),p=Zt("spacing"),f=Zt("radius"),g=Zt("shadow"),m=Zt("inset-shadow"),T=Zt("text-shadow"),I=Zt("drop-shadow"),C=Zt("blur"),w=Zt("perspective"),A=Zt("aspect"),S=Zt("ease"),y=Zt("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...M(),Ce,ve],P=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],N=()=>[Ce,ve,p],ee=()=>[Vl,"full","auto",...N()],ie=()=>[ki,"none","subgrid",Ce,ve],Te=()=>["auto",{span:["full",ki,Ce,ve]},ki,Ce,ve],Ue=()=>[ki,"auto",Ce,ve],je=()=>["auto","min","max","fr",Ce,ve],we=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Fe=()=>["start","end","center","stretch","center-safe","end-safe"],de=()=>["auto",...N()],ce=()=>[Vl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],F=()=>[t,Ce,ve],ue=()=>[...M(),ex,QR,{position:[Ce,ve]}],ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],fe=()=>["auto","cover","contain",XG,jG,{size:[Ce,ve]}],Ee=()=>[pT,Hc,xr],xe=()=>["","none","full",f,Ce,ve],ke=()=>["",Ve,Hc,xr],qe=()=>["solid","dashed","dotted","double"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Oe=()=>[Ve,pT,ex,QR],Tt=()=>["","none",C,Ce,ve],He=()=>["none",Ve,Ce,ve],We=()=>["none",Ve,Ce,ve],Ft=()=>[Ve,Ce,ve],Rt=()=>[Vl,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Xo],breakpoint:[Xo],color:[FG],container:[Xo],"drop-shadow":[Xo],ease:["in","out","in-out"],font:[GG],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Xo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Xo],shadow:[Xo],spacing:["px",Ve],text:[Xo],"text-shadow":[Xo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vl,ve,Ce,A]}],container:["container"],columns:[{columns:[Ve,ve,Ce,h]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ee()}],"inset-x":[{"inset-x":ee()}],"inset-y":[{"inset-y":ee()}],start:[{start:ee()}],end:[{end:ee()}],top:[{top:ee()}],right:[{right:ee()}],bottom:[{bottom:ee()}],left:[{left:ee()}],visibility:["visible","invisible","collapse"],z:[{z:[ki,"auto",Ce,ve]}],basis:[{basis:[Vl,"full","auto",h,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ve,Vl,"auto","initial","none",ve]}],grow:[{grow:["",Ve,Ce,ve]}],shrink:[{shrink:["",Ve,Ce,ve]}],order:[{order:[ki,"first","last","none",Ce,ve]}],"grid-cols":[{"grid-cols":ie()}],"col-start-end":[{col:Te()}],"col-start":[{"col-start":Ue()}],"col-end":[{"col-end":Ue()}],"grid-rows":[{"grid-rows":ie()}],"row-start-end":[{row:Te()}],"row-start":[{"row-start":Ue()}],"row-end":[{"row-end":Ue()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":je()}],"auto-rows":[{"auto-rows":je()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...we(),"normal"]}],"justify-items":[{"justify-items":[...Fe(),"normal"]}],"justify-self":[{"justify-self":["auto",...Fe()]}],"align-content":[{content:["normal",...we()]}],"align-items":[{items:[...Fe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Fe(),{baseline:["","last"]}]}],"place-content":[{"place-content":we()}],"place-items":[{"place-items":[...Fe(),"baseline"]}],"place-self":[{"place-self":["auto",...Fe()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:de()}],mx:[{mx:de()}],my:[{my:de()}],ms:[{ms:de()}],me:[{me:de()}],mt:[{mt:de()}],mr:[{mr:de()}],mb:[{mb:de()}],ml:[{ml:de()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:ce()}],w:[{w:[h,"screen",...ce()]}],"min-w":[{"min-w":[h,"screen","none",...ce()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...ce()]}],h:[{h:["screen","lh",...ce()]}],"min-h":[{"min-h":["screen","lh","none",...ce()]}],"max-h":[{"max-h":["screen","lh",...ce()]}],"font-size":[{text:["base",o,Hc,xr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Ce,fT]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",pT,ve]}],"font-family":[{font:[zG,ve,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Ce,ve]}],"line-clamp":[{"line-clamp":[Ve,"none",Ce,fT]}],leading:[{leading:[c,...N()]}],"list-image":[{"list-image":["none",Ce,ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ce,ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...qe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ve,"from-font","auto",Ce,xr]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[Ve,"auto",Ce,ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce,ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce,ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ue()}],"bg-repeat":[{bg:ae()}],"bg-size":[{bg:fe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ki,Ce,ve],radial:["",Ce,ve],conic:[ki,Ce,ve]},YG,WG]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:Ee()}],"gradient-via-pos":[{via:Ee()}],"gradient-to-pos":[{to:Ee()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:xe()}],"rounded-s":[{"rounded-s":xe()}],"rounded-e":[{"rounded-e":xe()}],"rounded-t":[{"rounded-t":xe()}],"rounded-r":[{"rounded-r":xe()}],"rounded-b":[{"rounded-b":xe()}],"rounded-l":[{"rounded-l":xe()}],"rounded-ss":[{"rounded-ss":xe()}],"rounded-se":[{"rounded-se":xe()}],"rounded-ee":[{"rounded-ee":xe()}],"rounded-es":[{"rounded-es":xe()}],"rounded-tl":[{"rounded-tl":xe()}],"rounded-tr":[{"rounded-tr":xe()}],"rounded-br":[{"rounded-br":xe()}],"rounded-bl":[{"rounded-bl":xe()}],"border-w":[{border:ke()}],"border-w-x":[{"border-x":ke()}],"border-w-y":[{"border-y":ke()}],"border-w-s":[{"border-s":ke()}],"border-w-e":[{"border-e":ke()}],"border-w-t":[{"border-t":ke()}],"border-w-r":[{"border-r":ke()}],"border-w-b":[{"border-b":ke()}],"border-w-l":[{"border-l":ke()}],"divide-x":[{"divide-x":ke()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ke()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...qe(),"hidden","none"]}],"divide-style":[{divide:[...qe(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...qe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ve,Ce,ve]}],"outline-w":[{outline:["",Ve,Hc,xr]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",g,ip,op]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",m,ip,op]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:ke()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[Ve,xr]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":ke()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",T,ip,op]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[Ve,Ce,ve]}],"mix-blend":[{"mix-blend":[...Re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ve]}],"mask-image-linear-from-pos":[{"mask-linear-from":Oe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Oe()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":Oe()}],"mask-image-t-to-pos":[{"mask-t-to":Oe()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":Oe()}],"mask-image-r-to-pos":[{"mask-r-to":Oe()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":Oe()}],"mask-image-b-to-pos":[{"mask-b-to":Oe()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":Oe()}],"mask-image-l-to-pos":[{"mask-l-to":Oe()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":Oe()}],"mask-image-x-to-pos":[{"mask-x-to":Oe()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":Oe()}],"mask-image-y-to-pos":[{"mask-y-to":Oe()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Ce,ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":Oe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Oe()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[Ve]}],"mask-image-conic-from-pos":[{"mask-conic-from":Oe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Oe()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ue()}],"mask-repeat":[{mask:ae()}],"mask-size":[{mask:fe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ce,ve]}],filter:[{filter:["","none",Ce,ve]}],blur:[{blur:Tt()}],brightness:[{brightness:[Ve,Ce,ve]}],contrast:[{contrast:[Ve,Ce,ve]}],"drop-shadow":[{"drop-shadow":["","none",I,ip,op]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",Ve,Ce,ve]}],"hue-rotate":[{"hue-rotate":[Ve,Ce,ve]}],invert:[{invert:["",Ve,Ce,ve]}],saturate:[{saturate:[Ve,Ce,ve]}],sepia:[{sepia:["",Ve,Ce,ve]}],"backdrop-filter":[{"backdrop-filter":["","none",Ce,ve]}],"backdrop-blur":[{"backdrop-blur":Tt()}],"backdrop-brightness":[{"backdrop-brightness":[Ve,Ce,ve]}],"backdrop-contrast":[{"backdrop-contrast":[Ve,Ce,ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ve,Ce,ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ve,Ce,ve]}],"backdrop-invert":[{"backdrop-invert":["",Ve,Ce,ve]}],"backdrop-opacity":[{"backdrop-opacity":[Ve,Ce,ve]}],"backdrop-saturate":[{"backdrop-saturate":[Ve,Ce,ve]}],"backdrop-sepia":[{"backdrop-sepia":["",Ve,Ce,ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ce,ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ve,"initial",Ce,ve]}],ease:[{ease:["linear","initial",S,Ce,ve]}],delay:[{delay:[Ve,Ce,ve]}],animate:[{animate:["none",y,Ce,ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Ce,ve]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:He()}],"rotate-x":[{"rotate-x":He()}],"rotate-y":[{"rotate-y":He()}],"rotate-z":[{"rotate-z":He()}],scale:[{scale:We()}],"scale-x":[{"scale-x":We()}],"scale-y":[{"scale-y":We()}],"scale-z":[{"scale-z":We()}],"scale-3d":["scale-3d"],skew:[{skew:Ft()}],"skew-x":[{"skew-x":Ft()}],"skew-y":[{"skew-y":Ft()}],transform:[{transform:[Ce,ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Rt()}],"translate-x":[{"translate-x":Rt()}],"translate-y":[{"translate-y":Rt()}],"translate-z":[{"translate-z":Rt()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce,ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce,ve]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[Ve,Hc,xr,fT]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ZG=AG(qG);function ci(...t){return ZG(Bt(t))}const QG=_G("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Bi=O.forwardRef(({className:t,variant:s,size:o,asChild:i=!1,...a},c)=>{const u=i?hG:"button";return _.jsx(u,{className:ci(QG({variant:s,size:o,className:t})),ref:c,...a})});Bi.displayName="Button";const mE=O.forwardRef(({className:t,...s},o)=>_.jsx("div",{ref:o,className:ci("rounded-xl border bg-card text-card-foreground shadow",t),...s}));mE.displayName="Card";const _M=O.forwardRef(({className:t,...s},o)=>_.jsx("div",{ref:o,className:ci("flex flex-col space-y-1.5 p-6",t),...s}));_M.displayName="CardHeader";const TM=O.forwardRef(({className:t,...s},o)=>_.jsx("div",{ref:o,className:ci("font-semibold leading-none tracking-tight",t),...s}));TM.displayName="CardTitle";const ej=O.forwardRef(({className:t,...s},o)=>_.jsx("div",{ref:o,className:ci("text-sm text-muted-foreground",t),...s}));ej.displayName="CardDescription";const gE=O.forwardRef(({className:t,...s},o)=>_.jsx("div",{ref:o,className:ci("p-6 pt-0",t),...s}));gE.displayName="CardContent";const tj=O.forwardRef(({className:t,...s},o)=>_.jsx("div",{ref:o,className:ci("flex items-center p-6 pt-0",t),...s}));tj.displayName="CardFooter";const nj=({code:t})=>{const[s,o]=O.useState(!1),i=async()=>{try{await navigator.clipboard.writeText(t),o(!0),setTimeout(()=>o(!1),2e3)}catch{const c=document.createRange(),u=document.getElementById("dartcode");if(u){c.selectNodeContents(u);const h=window.getSelection();h==null||h.removeAllRanges(),h==null||h.addRange(c)}}};return _.jsx(mE,{className:"bottom4 right4 w[32rem] maxh[calc(100vh8rem)] shadowxl bgslate900/95 backdropblur",children:_.jsxs(gE,{className:"p4",children:[_.jsx(Bi,{size:"icon",variant:"ghost",onClick:i,className:"top2 right2",children:s?_.jsxs(_.Fragment,{children:[_.jsx(VF,{className:"h5 w5"})," ",_.jsx(_.Fragment,{children:"Copied!"})]}):_.jsxs(_.Fragment,{children:[_.jsx(HF,{className:"h5 w5"}),_.jsx(_.Fragment,{children:"Copy"})]})}),_.jsx("pre",{id:"dartcode",className:"textsm leading6 whitespacepre overflowauto fontmono textgreen200",children:t||"// Dart code will appear here"})]})})},sj=()=>{const{debugMode:t,advanceMode:s,blocklyXml:o,setBlocklyXml:i,currentProject:a,workspace:c,setWorkspace:u,setDartCode:h}=ds(),[p,f]=O.useState(""),g=[{kind:"search",name:"Search",contents:[]},{kind:"sep"},{kind:"sep"},uG,cG,rG,lG,aG];s&&g.push(ZH);const m={kind:"categoryToolbox",contents:g},T={theme:iG,toolbar:rM,grid:{spacing:20,length:3,colour:"#a1caff",snap:!0},zoom:{controls:!0,wheel:!0,startScale:.8,maxScale:3,minScale:.1,scaleSpeed:1.2,pinch:!0,trashcan:!0},toolboxConfiguration:{hidden:!0}},I=A=>{i(A)},C=O.useCallback(A=>{u(A);const S=Ae.workspaceToCode(A);f(S),h(S)},[u,h]),w=A=>{new tG.PositionedMinimap(A).init(),new QH.Backpack(A).init(),new eG.WorkspaceSearch(A).init()};return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"flex w[200px]",children:_.jsx("div",{className:"w64 bgwhite borderr flex flexcol",children:_.jsx(zN,{workspace:c,currentProject:a})})}),_.jsx(ZN,{initialXml:o??void 0,toolboxConfiguration:m,className:"[hscreen100px] relative grow",workspaceConfiguration:T,onXmlChange:I,onWorkspaceChange:C,onInject:w}),t&&_.jsx(nj,{code:p})]})},oj=()=>{const{showDeleteDialog:t,screenToDelete:s,setShowDeleteDialog:o,deleteScreen:i,currentProject:a}=ds();if(!t||!s||!a)return null;const c=a.screens.find(u=>u.id===s);return c?_.jsx("div",{className:"fixed inset-0 bg-white/30 backdrop-blur-sm flex items-center justify-center z-50",children:_.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[_.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Delete Screen"}),_.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',c.name,'"? This action cannot be undone.']}),_.jsxs("div",{className:"flex justify-end space-x-3",children:[_.jsx("button",{className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",onClick:()=>o(!1),children:"Cancel"}),_.jsx("button",{className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",onClick:()=>i(s),children:"Delete"})]})]})}):null};var bM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tx=ye.createContext&&ye.createContext(bM),ij=["attr","size","title"];function rj(t,s){if(t==null)return{};var o=lj(t,s),i,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)i=c[a],!(s.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}return o}function lj(t,s){if(t==null)return{};var o={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(s.indexOf(i)>=0)continue;o[i]=t[i]}return o}function hf(){return hf=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},hf.apply(this,arguments)}function nx(t,s){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);s&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),o.push.apply(o,i)}return o}function pf(t){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?nx(Object(o),!0).forEach(function(i){aj(t,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):nx(Object(o)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))})}return t}function aj(t,s,o){return s=cj(s),s in t?Object.defineProperty(t,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[s]=o,t}function cj(t){var s=uj(t,"string");return typeof s=="symbol"?s:s+""}function uj(t,s){if(typeof t!="object"||!t)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var i=o.call(t,s);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function yM(t){return t&&t.map((s,o)=>ye.createElement(s.tag,pf({key:o},s.attr),yM(s.child)))}function el(t){return s=>ye.createElement(dj,hf({attr:pf({},t.attr)},s),yM(t.child))}function dj(t){var s=o=>{var{attr:i,size:a,title:c}=t,u=rj(t,ij),h=a||o.size||"1em",p;return o.className&&(p=o.className),t.className&&(p=(p?p+" ":"")+t.className),ye.createElement("svg",hf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},o.attr,i,u,{className:p,style:pf(pf({color:t.color||o.color},o.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),c&&ye.createElement("title",null,c),t.children)};return tx!==void 0?ye.createElement(tx.Consumer,null,o=>s(o)):s(bM)}function hj(t){return el({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function pj(t){return el({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(t)}function fj(t){return el({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(t)}function mj(t){return el({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function gj(t){return el({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"},child:[]}]})(t)}function $j(t){return el({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function _j(t){return el({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288m144-144H112"},child:[]}]})(t)}const Tj=[{id:"1",name:"Sample Project",createdAt:new Date().toLocaleString(),thumbnail:"/project-thumbnail.png"}],bj=[{id:"1",title:"Tutorial 1 Video",duration:"1:55",thumbnail:"https://img.youtube.com/vi/dQw4w9WgXcQ/hqdefault.jpg",youtubeUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ"},{id:"2",title:"Tutorial 1 Video",duration:"1:55",thumbnail:"https://img.youtube.com/vi/dQw4w9WgXcQ/hqdefault.jpg",youtubeUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ"},{id:"3",title:"Tutorial 1 Video",duration:"1:55",thumbnail:"https://img.youtube.com/vi/dQw4w9WgXcQ/hqdefault.jpg",youtubeUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ"},{id:"4",title:"Tutorial 1 Video",duration:"1:55",thumbnail:"https://img.youtube.com/vi/dQw4w9WgXcQ/hqdefault.jpg",youtubeUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ"}];function yj(){const t=ai(),[s,o]=O.useState("grid"),[i,a]=O.useState(null),[c,u]=O.useState(""),h=()=>{t("/canvas")},p=f=>{t(`/canvas/${f}`)};return _.jsxs("div",{className:"p-8",children:[_.jsxs("div",{className:"mb-6",children:[_.jsx("h1",{className:"text-2xl font-bold mb-2",children:"My Projects"}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("p",{className:"text-gray-600",children:"Find all of your creations and resources to help you build your first mobile app!"}),_.jsxs("button",{onClick:h,className:"flex items-center gap-2 bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors",children:[_.jsx(_j,{size:20}),"Create New Project"]})]})]}),_.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[_.jsxs("div",{className:"flex-1 relative",children:[_.jsx($j,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),_.jsx("input",{type:"text",placeholder:"Search Projects",value:c,onChange:f=>u(f.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("div",{className:"flex items-center gap-2 border rounded-lg p-1",children:[_.jsx("button",{className:`p-2 rounded ${s==="grid"?"bg-gray-100":""}`,onClick:()=>o("grid"),children:_.jsx(mj,{})}),_.jsx("button",{className:`p-2 rounded ${s==="list"?"bg-gray-100":""}`,onClick:()=>o("list"),children:_.jsx(gj,{})})]}),_.jsxs("div",{className:"relative",children:[_.jsxs("select",{className:"appearance-none border rounded-lg pl-3 pr-10 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[_.jsx("option",{children:"Date Modified"}),_.jsx("option",{children:"Name"})]}),_.jsx(hj,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]})]}),_.jsxs("div",{className:"mb-12",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("h2",{className:"text-xl font-semibold",children:"Getting Started Videos"}),_.jsx("a",{href:"#",className:"text-purple-500 hover:underline",children:"See All Videos"})]}),_.jsx("div",{className:"grid grid-cols-4 gap-4",children:bj.map(f=>_.jsxs("div",{className:"cursor-pointer group",onClick:()=>a(f),children:[_.jsxs("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden relative",children:[_.jsx("img",{src:f.thumbnail,alt:f.title,className:"w-full h-full object-cover"}),_.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity"})]}),_.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[_.jsx("span",{className:"text-sm",children:f.title}),_.jsx("span",{className:"text-sm text-gray-500",children:f.duration})]})]},f.id))})]}),_.jsxs("div",{children:[_.jsx("div",{className:"flex justify-between items-center mb-4",children:_.jsx("h2",{className:"text-xl font-semibold",children:"My Projects"})}),_.jsx("div",{className:s==="grid"?"grid grid-cols-3 gap-4":"space-y-4",children:Tj.map(f=>_.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer hover:border-purple-500 transition-colors ${s==="list"?"flex items-center justify-between":""}`,onClick:()=>p(f.id),children:[_.jsx("div",{className:s==="grid"?"aspect-video bg-gray-100 rounded-lg mb-4":"hidden",children:f.thumbnail&&_.jsx("img",{src:f.thumbnail,alt:f.name,className:"w-full h-full object-cover rounded-lg"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-medium",children:f.name}),_.jsx("p",{className:"text-sm text-gray-500",children:f.createdAt})]})]},f.id))}),_.jsxs("div",{className:"mt-6 flex justify-center items-center gap-4",children:[_.jsx("button",{className:"p-2 rounded hover:bg-gray-100",children:_.jsx(pj,{})}),_.jsx("span",{children:"Page 1 of 1"}),_.jsx("button",{className:"p-2 rounded hover:bg-gray-100",children:_.jsx(fj,{})})]})]}),i&&_.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-8 z-50",children:_.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-3xl",children:[_.jsx("div",{className:"aspect-video mb-4",children:_.jsx("iframe",{width:"100%",height:"100%",src:i.youtubeUrl,title:i.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-medium",children:i.title}),_.jsx("p",{className:"text-sm text-gray-500",children:i.duration})]}),_.jsx("button",{onClick:()=>a(null),className:"text-gray-500 hover:text-gray-700",children:"Close"})]})]})})]})}function Ej({children:t}){const[s,o]=O.useState("my-projects"),i=ai(),a=()=>{i("/")},c=()=>{Ls.isAuthenticated()?i("/profile"):i("/login")};return _.jsxs("div",{className:"h-screen flex flex-col",children:[_.jsxs("header",{className:"h-16 border-b flex items-center justify-between px-6",children:[_.jsx("div",{className:"flex items-center",children:_.jsx("img",{src:"/miniblocks-colored.png",alt:"Miniblocks Logo",className:"h-8 cursor-pointer hover:opacity-80 transition-opacity",onClick:a})}),_.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:c,title:Ls.isAuthenticated()?"View Profile":"Sign In",children:_.jsx(nE,{size:20,className:"text-gray-600"})})]}),_.jsxs("div",{className:"flex-1 flex",children:[_.jsx("div",{className:"w-64 border-r bg-white",children:_.jsxs("div",{className:"p-4",children:[_.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Projects"}),_.jsxs("div",{className:"space-y-1",children:[_.jsxs("button",{className:`w-full text-left px-4 py-2 rounded-lg flex items-center gap-3 ${s==="my-projects"?"bg-purple-100 text-purple-700":"hover:bg-gray-100"}`,onClick:()=>o("my-projects"),children:[_.jsx(Au,{className:s==="my-projects"?"text-purple-700":"text-gray-500"}),"My Projects"]}),_.jsxs("button",{className:`w-full text-left px-4 py-2 rounded-lg flex items-center gap-3 ${s==="sample-projects"?"bg-purple-100 text-purple-700":"hover:bg-gray-100"}`,onClick:()=>o("sample-projects"),children:[_.jsx(Au,{className:s==="sample-projects"?"text-purple-700":"text-gray-500"}),"Sample Projects"]})]})]})}),_.jsx("div",{className:"flex-1 bg-white",children:s==="my-projects"?t:_.jsxs("div",{className:"p-8",children:[_.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Sample Projects"}),_.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(u=>_.jsxs("div",{className:"border rounded-lg p-4 cursor-not-allowed opacity-75",children:[_.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg mb-4"}),_.jsxs("div",{children:[_.jsxs("h3",{className:"font-medium",children:["Sample Project ",u]}),_.jsx("p",{className:"text-sm text-gray-500",children:"Example project template"})]})]},u))})]})})]})]})}function vj(){const t=ai(),[s,o]=O.useState({email:"",password:""}),[i,a]=O.useState(""),c=async u=>{u.preventDefault();try{await Ls.login(s),t("/profile")}catch{a("Invalid email or password")}};return _.jsx("div",{className:"min-h-screen flex flex-col bg-gray-50",children:_.jsx("div",{className:"flex-1 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:_.jsxs("div",{className:"max-w-md w-full space-y-8",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),_.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",_.jsx(H0,{to:"/register",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"create a new account"})]})]}),_.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[i&&_.jsx("div",{className:"rounded-md bg-red-50 p-4",children:_.jsx("div",{className:"text-sm text-red-700",children:i})}),_.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),_.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:s.email,onChange:u=>o({...s,email:u.target.value})})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),_.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:s.password,onChange:u=>o({...s,password:u.target.value})})]})]}),_.jsx("div",{children:_.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})})]})]})})})}function Cj(){const t=ai(),[s,o]=O.useState({name:"",email:"",password:""}),[i,a]=O.useState(""),c=async u=>{u.preventDefault();try{await Ls.register(s),t("/login")}catch{a("Registration failed. Please try again.")}};return _.jsx("div",{className:"min-h-screen flex flex-col bg-gray-50",children:_.jsx("div",{className:"flex-1 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:_.jsxs("div",{className:"max-w-md w-full space-y-8",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),_.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Already have an account?"," ",_.jsx(H0,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Sign in"})]})]}),_.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[i&&_.jsx("div",{className:"rounded-md bg-red-50 p-4",children:_.jsx("div",{className:"text-sm text-red-700",children:i})}),_.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"name",className:"sr-only",children:"Full name"}),_.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Full name",value:s.name,onChange:u=>o({...s,name:u.target.value})})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),_.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:s.email,onChange:u=>o({...s,email:u.target.value})})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),_.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:s.password,onChange:u=>o({...s,password:u.target.value})})]})]}),_.jsx("div",{children:_.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Register"})})]})]})})})}function EM({className:t,type:s,...o}){return _.jsx("input",{type:s,"data-slot":"input",className:ci("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...o})}var Sj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ij=Sj.reduce((t,s)=>{const o=lM(`Primitive.${s}`),i=O.forwardRef((a,c)=>{const{asChild:u,...h}=a,p=u?o:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(p,{...h,ref:c})});return i.displayName=`Primitive.${s}`,{...t,[s]:i}},{}),wj="Label",vM=O.forwardRef((t,s)=>_.jsx(Ij.label,{...t,ref:s,onMouseDown:o=>{var a;o.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,o),!o.defaultPrevented&&o.detail>1&&o.preventDefault())}}));vM.displayName=wj;var kj=vM;function Rj({className:t,...s}){return _.jsx(kj,{"data-slot":"label",className:ci("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function xj(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",s.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}Array(12).fill(0);let Pb=1;class Oj{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const o=this.subscribers.indexOf(s);this.subscribers.splice(o,1)}),this.publish=s=>{this.subscribers.forEach(o=>o(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var o;const{message:i,...a}=s,c=typeof(s==null?void 0:s.id)=="number"||((o=s.id)==null?void 0:o.length)>0?s.id:Pb++,u=this.toasts.find(p=>p.id===c),h=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),u?this.toasts=this.toasts.map(p=>p.id===c?(this.publish({...p,...s,id:c,title:i}),{...p,...s,id:c,dismissible:h,title:i}):p):this.addToast({title:i,...a,dismissible:h,id:c}),c},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(o=>o({id:s,dismiss:!0})))):this.toasts.forEach(o=>{this.subscribers.forEach(i=>i({id:o.id,dismiss:!0}))}),s),this.message=(s,o)=>this.create({...o,message:s}),this.error=(s,o)=>this.create({...o,message:s,type:"error"}),this.success=(s,o)=>this.create({...o,type:"success",message:s}),this.info=(s,o)=>this.create({...o,type:"info",message:s}),this.warning=(s,o)=>this.create({...o,type:"warning",message:s}),this.loading=(s,o)=>this.create({...o,type:"loading",message:s}),this.promise=(s,o)=>{if(!o)return;let i;o.loading!==void 0&&(i=this.create({...o,promise:s,type:"loading",message:o.loading,description:typeof o.description!="function"?o.description:void 0}));const a=Promise.resolve(s instanceof Function?s():s);let c=i!==void 0,u;const h=a.then(async f=>{if(u=["resolve",f],ye.isValidElement(f))c=!1,this.create({id:i,type:"default",message:f});else if(Nj(f)&&!f.ok){c=!1;const m=typeof o.error=="function"?await o.error(`HTTP error! status: ${f.status}`):o.error,T=typeof o.description=="function"?await o.description(`HTTP error! status: ${f.status}`):o.description,C=typeof m=="object"&&!ye.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:T,...C})}else if(f instanceof Error){c=!1;const m=typeof o.error=="function"?await o.error(f):o.error,T=typeof o.description=="function"?await o.description(f):o.description,C=typeof m=="object"&&!ye.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:T,...C})}else if(o.success!==void 0){c=!1;const m=typeof o.success=="function"?await o.success(f):o.success,T=typeof o.description=="function"?await o.description(f):o.description,C=typeof m=="object"&&!ye.isValidElement(m)?m:{message:m};this.create({id:i,type:"success",description:T,...C})}}).catch(async f=>{if(u=["reject",f],o.error!==void 0){c=!1;const g=typeof o.error=="function"?await o.error(f):o.error,m=typeof o.description=="function"?await o.description(f):o.description,I=typeof g=="object"&&!ye.isValidElement(g)?g:{message:g};this.create({id:i,type:"error",description:m,...I})}}).finally(()=>{c&&(this.dismiss(i),i=void 0),o.finally==null||o.finally.call(o)}),p=()=>new Promise((f,g)=>h.then(()=>u[0]==="reject"?g(u[1]):f(u[1])).catch(g));return typeof i!="string"&&typeof i!="number"?{unwrap:p}:Object.assign(i,{unwrap:p})},this.custom=(s,o)=>{const i=(o==null?void 0:o.id)||Pb++;return this.create({jsx:s(i),id:i,...o}),i},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Rs=new Oj,Aj=(t,s)=>{const o=(s==null?void 0:s.id)||Pb++;return Rs.addToast({title:t,...s,id:o}),o},Nj=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Mj=Aj,Lj=()=>Rs.toasts,Dj=()=>Rs.getActiveToasts(),Pj=Object.assign(Mj,{success:Rs.success,info:Rs.info,warning:Rs.warning,error:Rs.error,custom:Rs.custom,message:Rs.message,promise:Rs.promise,dismiss:Rs.dismiss,loading:Rs.loading},{getHistory:Lj,getToasts:Dj});xj("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Bj(){const t=ai(),[s,o]=O.useState(null),[i,a]=O.useState(!1),[c,u]=O.useState(null),[h,p]=O.useState({email:""});O.useEffect(()=>{(async()=>{try{const T=await Ls.getProfile();o(T),p({email:T.email})}catch(T){u("Failed to load profile"),console.error("Error fetching profile:",T)}})()},[]);const f=async m=>{m.preventDefault();try{const T=await Ls.updateProfile(h);o(T),a(!1),Pj.success("Profile updated successfully")}catch(T){u("Failed to update profile"),console.error("Error updating profile:",T)}},g=()=>{Ls.logout(),t("/login")};return c?_.jsx("div",{className:"flex items-center justify-center min-h-screen",children:_.jsx("div",{className:"text-red-500",children:c})}):s?_.jsx("div",{className:"container mx-auto px-4 py-8",children:_.jsxs(mE,{className:"max-w-2xl mx-auto",children:[_.jsx(_M,{children:_.jsx(TM,{children:"Profile"})}),_.jsx(gE,{children:i?_.jsxs("form",{onSubmit:f,className:"space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Rj,{htmlFor:"email",children:"Email"}),_.jsx(EM,{id:"email",type:"email",value:h.email,onChange:m=>p({...h,email:m.target.value}),required:!0})]}),_.jsxs("div",{className:"flex gap-4",children:[_.jsx(Bi,{type:"submit",children:"Save Changes"}),_.jsx(Bi,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"})]})]}):_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Email"}),_.jsx("p",{className:"mt-1",children:s.email})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Role"}),_.jsx("p",{className:"mt-1 capitalize",children:s.role})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Member Since"}),_.jsx("p",{className:"mt-1",children:new Date(s.created_at).toLocaleDateString()})]}),_.jsxs("div",{className:"flex gap-4",children:[_.jsx(Bi,{onClick:()=>a(!0),children:"Edit Profile"}),_.jsx(Bi,{variant:"outline",onClick:g,children:"Logout"})]})]})})]})}):_.jsx("div",{className:"flex items-center justify-center min-h-screen",children:_.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})}function mT({children:t}){const s=ai(),o=()=>{s("/")},i=()=>{Ls.isAuthenticated()?s("/profile"):s("/login")};return _.jsxs("div",{className:"h-screen flex flex-col",children:[_.jsxs("header",{className:"h-36 border-b flex items-center justify-between px-6",children:[_.jsx("div",{className:"flex items-center",children:_.jsx("img",{src:"/miniblocks-colored.png",alt:"Miniblocks Logo",className:"h-8 cursor-pointer hover:opacity-80 transition-opacity",onClick:o})}),_.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:i,title:Ls.isAuthenticated()?"View Profile":"Sign In",children:_.jsx(nE,{size:20,className:"text-gray-600"})})]}),_.jsx("main",{className:"flex-1",children:t})]})}const $E=O.createContext({});function _E(t){const s=O.useRef(null);return s.current===null&&(s.current=t()),s.current}const TE=typeof window<"u",CM=TE?O.useLayoutEffect:O.useEffect,Yf=O.createContext(null);function bE(t,s){t.indexOf(s)===-1&&t.push(s)}function yE(t,s){const o=t.indexOf(s);o>-1&&t.splice(o,1)}const oi=(t,s,o)=>o>s?s:o<t?t:o;let EE=()=>{};const ii={},SM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function IM(t){return typeof t=="object"&&t!==null}const wM=t=>/^0[^.\s]+$/u.test(t);function vE(t){let s;return()=>(s===void 0&&(s=t()),s)}const Ds=t=>t,Fj=(t,s)=>o=>s(t(o)),sd=(...t)=>t.reduce(Fj),Pu=(t,s,o)=>{const i=s-t;return i===0?1:(o-t)/i};class CE{constructor(){this.subscriptions=[]}add(s){return bE(this.subscriptions,s),()=>yE(this.subscriptions,s)}notify(s,o,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](s,o,i);else for(let c=0;c<a;c++){const u=this.subscriptions[c];u&&u(s,o,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Io=t=>t*1e3,wo=t=>t/1e3;function kM(t,s){return s?t*(1e3/s):0}const RM=(t,s,o)=>(((1-3*o+3*s)*t+(3*o-6*s))*t+3*s)*t,Uj=1e-7,Vj=12;function Hj(t,s,o,i,a){let c,u,h=0;do u=s+(o-s)/2,c=RM(u,i,a)-t,c>0?o=u:s=u;while(Math.abs(c)>Uj&&++h<Vj);return u}function od(t,s,o,i){if(t===s&&o===i)return Ds;const a=c=>Hj(c,0,1,t,o);return c=>c===0||c===1?c:RM(a(c),s,i)}const xM=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,OM=t=>s=>1-t(1-s),AM=od(.33,1.53,.69,.99),SE=OM(AM),NM=xM(SE),MM=t=>(t*=2)<1?.5*SE(t):.5*(2-Math.pow(2,-10*(t-1))),IE=t=>1-Math.sin(Math.acos(t)),LM=OM(IE),DM=xM(IE),Gj=od(.42,0,1,1),jj=od(0,0,.58,1),PM=od(.42,0,.58,1),Wj=t=>Array.isArray(t)&&typeof t[0]!="number",BM=t=>Array.isArray(t)&&typeof t[0]=="number",zj={linear:Ds,easeIn:Gj,easeInOut:PM,easeOut:jj,circIn:IE,circInOut:DM,circOut:LM,backIn:SE,backInOut:NM,backOut:AM,anticipate:MM},Xj=t=>typeof t=="string",sx=t=>{if(BM(t)){EE(t.length===4);const[s,o,i,a]=t;return od(s,o,i,a)}else if(Xj(t))return zj[t];return t},rp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ox={value:null};function Yj(t,s){let o=new Set,i=new Set,a=!1,c=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1},p=0;function f(m){u.has(m)&&(g.schedule(m),t()),p++,m(h)}const g={schedule:(m,T=!1,I=!1)=>{const w=I&&a?o:i;return T&&u.add(m),w.has(m)||w.add(m),m},cancel:m=>{i.delete(m),u.delete(m)},process:m=>{if(h=m,a){c=!0;return}a=!0,[o,i]=[i,o],o.forEach(f),s&&ox.value&&ox.value.frameloop[s].push(p),p=0,o.clear(),a=!1,c&&(c=!1,g.process(m))}};return g}const Kj=40;function FM(t,s){let o=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=()=>o=!0,u=rp.reduce((v,M)=>(v[M]=Yj(c,s?M:void 0),v),{}),{setup:h,read:p,resolveKeyframes:f,preUpdate:g,update:m,preRender:T,render:I,postRender:C}=u,w=()=>{const v=ii.useManualTiming?a.timestamp:performance.now();o=!1,ii.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(v-a.timestamp,Kj),1)),a.timestamp=v,a.isProcessing=!0,h.process(a),p.process(a),f.process(a),g.process(a),m.process(a),T.process(a),I.process(a),C.process(a),a.isProcessing=!1,o&&s&&(i=!1,t(w))},A=()=>{o=!0,i=!0,a.isProcessing||t(w)};return{schedule:rp.reduce((v,M)=>{const L=u[M];return v[M]=(P,B=!1,N=!1)=>(o||A(),L.schedule(P,B,N)),v},{}),cancel:v=>{for(let M=0;M<rp.length;M++)u[rp[M]].cancel(v)},state:a,steps:u}}const{schedule:wt,cancel:Ji,state:fn,steps:gT}=FM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ds,!0);let wp;function Jj(){wp=void 0}const zn={now:()=>(wp===void 0&&zn.set(fn.isProcessing||ii.useManualTiming?fn.timestamp:performance.now()),wp),set:t=>{wp=t,queueMicrotask(Jj)}},UM=t=>s=>typeof s=="string"&&s.startsWith(t),wE=UM("--"),qj=UM("var(--"),kE=t=>qj(t)?Zj.test(t.split("/*")[0].trim()):!1,Zj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ma={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bu={...Ma,transform:t=>oi(0,1,t)},lp={...Ma,default:1},au=t=>Math.round(t*1e5)/1e5,RE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Qj(t){return t==null}const eW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xE=(t,s)=>o=>!!(typeof o=="string"&&eW.test(o)&&o.startsWith(t)||s&&!Qj(o)&&Object.prototype.hasOwnProperty.call(o,s)),VM=(t,s,o)=>i=>{if(typeof i!="string")return i;const[a,c,u,h]=i.match(RE);return{[t]:parseFloat(a),[s]:parseFloat(c),[o]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},tW=t=>oi(0,255,t),$T={...Ma,transform:t=>Math.round(tW(t))},Fr={test:xE("rgb","red"),parse:VM("red","green","blue"),transform:({red:t,green:s,blue:o,alpha:i=1})=>"rgba("+$T.transform(t)+", "+$T.transform(s)+", "+$T.transform(o)+", "+au(Bu.transform(i))+")"};function nW(t){let s="",o="",i="",a="";return t.length>5?(s=t.substring(1,3),o=t.substring(3,5),i=t.substring(5,7),a=t.substring(7,9)):(s=t.substring(1,2),o=t.substring(2,3),i=t.substring(3,4),a=t.substring(4,5),s+=s,o+=o,i+=i,a+=a),{red:parseInt(s,16),green:parseInt(o,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const Bb={test:xE("#"),parse:nW,transform:Fr.transform},id=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),Ri=id("deg"),ko=id("%"),Ne=id("px"),sW=id("vh"),oW=id("vw"),ix={...ko,parse:t=>ko.parse(t)/100,transform:t=>ko.transform(t*100)},ta={test:xE("hsl","hue"),parse:VM("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:o,alpha:i=1})=>"hsla("+Math.round(t)+", "+ko.transform(au(s))+", "+ko.transform(au(o))+", "+au(Bu.transform(i))+")"},yn={test:t=>Fr.test(t)||Bb.test(t)||ta.test(t),parse:t=>Fr.test(t)?Fr.parse(t):ta.test(t)?ta.parse(t):Bb.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fr.transform(t):ta.transform(t)},iW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function rW(t){var s,o;return isNaN(t)&&typeof t=="string"&&(((s=t.match(RE))==null?void 0:s.length)||0)+(((o=t.match(iW))==null?void 0:o.length)||0)>0}const HM="number",GM="color",lW="var",aW="var(",rx="${}",cW=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fu(t){const s=t.toString(),o=[],i={color:[],number:[],var:[]},a=[];let c=0;const h=s.replace(cW,p=>(yn.test(p)?(i.color.push(c),a.push(GM),o.push(yn.parse(p))):p.startsWith(aW)?(i.var.push(c),a.push(lW),o.push(p)):(i.number.push(c),a.push(HM),o.push(parseFloat(p))),++c,rx)).split(rx);return{values:o,split:h,indexes:i,types:a}}function jM(t){return Fu(t).values}function WM(t){const{split:s,types:o}=Fu(t),i=s.length;return a=>{let c="";for(let u=0;u<i;u++)if(c+=s[u],a[u]!==void 0){const h=o[u];h===HM?c+=au(a[u]):h===GM?c+=yn.transform(a[u]):c+=a[u]}return c}}const uW=t=>typeof t=="number"?0:t;function dW(t){const s=jM(t);return WM(t)(s.map(uW))}const qi={test:rW,parse:jM,createTransformer:WM,getAnimatableNone:dW};function _T(t,s,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+(s-t)*6*o:o<1/2?s:o<2/3?t+(s-t)*(2/3-o)*6:t}function hW({hue:t,saturation:s,lightness:o,alpha:i}){t/=360,s/=100,o/=100;let a=0,c=0,u=0;if(!s)a=c=u=o;else{const h=o<.5?o*(1+s):o+s-o*s,p=2*o-h;a=_T(p,h,t+1/3),c=_T(p,h,t),u=_T(p,h,t-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(u*255),alpha:i}}function ff(t,s){return o=>o>0?s:t}const Ct=(t,s,o)=>t+(s-t)*o,TT=(t,s,o)=>{const i=t*t,a=o*(s*s-i)+i;return a<0?0:Math.sqrt(a)},pW=[Bb,Fr,ta],fW=t=>pW.find(s=>s.test(t));function lx(t){const s=fW(t);if(!s)return!1;let o=s.parse(t);return s===ta&&(o=hW(o)),o}const ax=(t,s)=>{const o=lx(t),i=lx(s);if(!o||!i)return ff(t,s);const a={...o};return c=>(a.red=TT(o.red,i.red,c),a.green=TT(o.green,i.green,c),a.blue=TT(o.blue,i.blue,c),a.alpha=Ct(o.alpha,i.alpha,c),Fr.transform(a))},Fb=new Set(["none","hidden"]);function mW(t,s){return Fb.has(t)?o=>o<=0?t:s:o=>o>=1?s:t}function gW(t,s){return o=>Ct(t,s,o)}function OE(t){return typeof t=="number"?gW:typeof t=="string"?kE(t)?ff:yn.test(t)?ax:TW:Array.isArray(t)?zM:typeof t=="object"?yn.test(t)?ax:$W:ff}function zM(t,s){const o=[...t],i=o.length,a=t.map((c,u)=>OE(c)(c,s[u]));return c=>{for(let u=0;u<i;u++)o[u]=a[u](c);return o}}function $W(t,s){const o={...t,...s},i={};for(const a in o)t[a]!==void 0&&s[a]!==void 0&&(i[a]=OE(t[a])(t[a],s[a]));return a=>{for(const c in i)o[c]=i[c](a);return o}}function _W(t,s){const o=[],i={color:0,var:0,number:0};for(let a=0;a<s.values.length;a++){const c=s.types[a],u=t.indexes[c][i[c]],h=t.values[u]??0;o[a]=h,i[c]++}return o}const TW=(t,s)=>{const o=qi.createTransformer(s),i=Fu(t),a=Fu(s);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?Fb.has(t)&&!a.values.length||Fb.has(s)&&!i.values.length?mW(t,s):sd(zM(_W(i,a),a.values),o):ff(t,s)};function XM(t,s,o){return typeof t=="number"&&typeof s=="number"&&typeof o=="number"?Ct(t,s,o):OE(t)(t,s)}const bW=t=>{const s=({timestamp:o})=>t(o);return{start:(o=!0)=>wt.update(s,o),stop:()=>Ji(s),now:()=>fn.isProcessing?fn.timestamp:zn.now()}},YM=(t,s,o=10)=>{let i="";const a=Math.max(Math.round(s/o),2);for(let c=0;c<a;c++)i+=t(c/(a-1))+", ";return`linear(${i.substring(0,i.length-2)})`},mf=2e4;function AE(t){let s=0;const o=50;let i=t.next(s);for(;!i.done&&s<mf;)s+=o,i=t.next(s);return s>=mf?1/0:s}function yW(t,s=100,o){const i=o({...t,keyframes:[0,s]}),a=Math.min(AE(i),mf);return{type:"keyframes",ease:c=>i.next(a*c).value/s,duration:wo(a)}}const EW=5;function KM(t,s,o){const i=Math.max(s-EW,0);return kM(o-t(i),s-i)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cx=.001;function vW({duration:t=Dt.duration,bounce:s=Dt.bounce,velocity:o=Dt.velocity,mass:i=Dt.mass}){let a,c,u=1-s;u=oi(Dt.minDamping,Dt.maxDamping,u),t=oi(Dt.minDuration,Dt.maxDuration,wo(t)),u<1?(a=f=>{const g=f*u,m=g*t,T=g-o,I=Ub(f,u),C=Math.exp(-m);return cx-T/I*C},c=f=>{const m=f*u*t,T=m*o+o,I=Math.pow(u,2)*Math.pow(f,2)*t,C=Math.exp(-m),w=Ub(Math.pow(f,2),u);return(-a(f)+cx>0?-1:1)*((T-I)*C)/w}):(a=f=>{const g=Math.exp(-f*t),m=(f-o)*t+1;return-.001+g*m},c=f=>{const g=Math.exp(-f*t),m=(o-f)*(t*t);return g*m});const h=5/t,p=SW(a,c,h);if(t=Io(t),isNaN(p))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:t};{const f=Math.pow(p,2)*i;return{stiffness:f,damping:u*2*Math.sqrt(i*f),duration:t}}}const CW=12;function SW(t,s,o){let i=o;for(let a=1;a<CW;a++)i=i-t(i)/s(i);return i}function Ub(t,s){return t*Math.sqrt(1-s*s)}const IW=["duration","bounce"],wW=["stiffness","damping","mass"];function ux(t,s){return s.some(o=>t[o]!==void 0)}function kW(t){let s={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...t};if(!ux(t,wW)&&ux(t,IW))if(t.visualDuration){const o=t.visualDuration,i=2*Math.PI/(o*1.2),a=i*i,c=2*oi(.05,1,1-(t.bounce||0))*Math.sqrt(a);s={...s,mass:Dt.mass,stiffness:a,damping:c}}else{const o=vW(t);s={...s,...o,mass:Dt.mass},s.isResolvedFromDuration=!0}return s}function gf(t=Dt.visualDuration,s=Dt.bounce){const o=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:i,restDelta:a}=o;const c=o.keyframes[0],u=o.keyframes[o.keyframes.length-1],h={done:!1,value:c},{stiffness:p,damping:f,mass:g,duration:m,velocity:T,isResolvedFromDuration:I}=kW({...o,velocity:-wo(o.velocity||0)}),C=T||0,w=f/(2*Math.sqrt(p*g)),A=u-c,S=wo(Math.sqrt(p/g)),y=Math.abs(A)<5;i||(i=y?Dt.restSpeed.granular:Dt.restSpeed.default),a||(a=y?Dt.restDelta.granular:Dt.restDelta.default);let v;if(w<1){const L=Ub(S,w);v=P=>{const B=Math.exp(-w*S*P);return u-B*((C+w*S*A)/L*Math.sin(L*P)+A*Math.cos(L*P))}}else if(w===1)v=L=>u-Math.exp(-S*L)*(A+(C+S*A)*L);else{const L=S*Math.sqrt(w*w-1);v=P=>{const B=Math.exp(-w*S*P),N=Math.min(L*P,300);return u-B*((C+w*S*A)*Math.sinh(N)+L*A*Math.cosh(N))/L}}const M={calculatedDuration:I&&m||null,next:L=>{const P=v(L);if(I)h.done=L>=m;else{let B=L===0?C:0;w<1&&(B=L===0?Io(C):KM(v,L,P));const N=Math.abs(B)<=i,ee=Math.abs(u-P)<=a;h.done=N&&ee}return h.value=h.done?u:P,h},toString:()=>{const L=Math.min(AE(M),mf),P=YM(B=>M.next(L*B).value,L,30);return L+"ms "+P},toTransition:()=>{}};return M}gf.applyToOptions=t=>{const s=yW(t,100,gf);return t.ease=s.ease,t.duration=Io(s.duration),t.type="keyframes",t};function Vb({keyframes:t,velocity:s=0,power:o=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:u,min:h,max:p,restDelta:f=.5,restSpeed:g}){const m=t[0],T={done:!1,value:m},I=N=>h!==void 0&&N<h||p!==void 0&&N>p,C=N=>h===void 0?p:p===void 0||Math.abs(h-N)<Math.abs(p-N)?h:p;let w=o*s;const A=m+w,S=u===void 0?A:u(A);S!==A&&(w=S-m);const y=N=>-w*Math.exp(-N/i),v=N=>S+y(N),M=N=>{const ee=y(N),ie=v(N);T.done=Math.abs(ee)<=f,T.value=T.done?S:ie};let L,P;const B=N=>{I(T.value)&&(L=N,P=gf({keyframes:[T.value,C(T.value)],velocity:KM(v,N,T.value),damping:a,stiffness:c,restDelta:f,restSpeed:g}))};return B(0),{calculatedDuration:null,next:N=>{let ee=!1;return!P&&L===void 0&&(ee=!0,M(N),B(N)),L!==void 0&&N>=L?P.next(N-L):(!ee&&M(N),T)}}}function RW(t,s,o){const i=[],a=o||ii.mix||XM,c=t.length-1;for(let u=0;u<c;u++){let h=a(t[u],t[u+1]);if(s){const p=Array.isArray(s)?s[u]||Ds:s;h=sd(p,h)}i.push(h)}return i}function xW(t,s,{clamp:o=!0,ease:i,mixer:a}={}){const c=t.length;if(EE(c===s.length),c===1)return()=>s[0];if(c===2&&s[0]===s[1])return()=>s[1];const u=t[0]===t[1];t[0]>t[c-1]&&(t=[...t].reverse(),s=[...s].reverse());const h=RW(s,i,a),p=h.length,f=g=>{if(u&&g<t[0])return s[0];let m=0;if(p>1)for(;m<t.length-2&&!(g<t[m+1]);m++);const T=Pu(t[m],t[m+1],g);return h[m](T)};return o?g=>f(oi(t[0],t[c-1],g)):f}function OW(t,s){const o=t[t.length-1];for(let i=1;i<=s;i++){const a=Pu(0,s,i);t.push(Ct(o,1,a))}}function AW(t){const s=[0];return OW(s,t.length-1),s}function NW(t,s){return t.map(o=>o*s)}function MW(t,s){return t.map(()=>s||PM).splice(0,t.length-1)}function cu({duration:t=300,keyframes:s,times:o,ease:i="easeInOut"}){const a=Wj(i)?i.map(sx):sx(i),c={done:!1,value:s[0]},u=NW(o&&o.length===s.length?o:AW(s),t),h=xW(u,s,{ease:Array.isArray(a)?a:MW(s,a)});return{calculatedDuration:t,next:p=>(c.value=h(p),c.done=p>=t,c)}}const LW=t=>t!==null;function NE(t,{repeat:s,repeatType:o="loop"},i,a=1){const c=t.filter(LW),h=a<0||s&&o!=="loop"&&s%2===1?0:c.length-1;return!h||i===void 0?c[h]:i}const DW={decay:Vb,inertia:Vb,tween:cu,keyframes:cu,spring:gf};function JM(t){typeof t.type=="string"&&(t.type=DW[t.type])}class ME{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,o){return this.finished.then(s,o)}}const PW=t=>t/100;class LE extends ME{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,a;const{motionValue:o}=this.options;o&&o.updatedAt!==zn.now()&&this.tick(zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(i=this.options).onStop)==null||a.call(i))},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;JM(s);const{type:o=cu,repeat:i=0,repeatDelay:a=0,repeatType:c,velocity:u=0}=s;let{keyframes:h}=s;const p=o||cu;p!==cu&&typeof h[0]!="number"&&(this.mixKeyframes=sd(PW,XM(h[0],h[1])),h=[0,100]);const f=p({...s,keyframes:h});c==="mirror"&&(this.mirroredGenerator=p({...s,keyframes:[...h].reverse(),velocity:-u})),f.calculatedDuration===null&&(f.calculatedDuration=AE(f));const{calculatedDuration:g}=f;this.calculatedDuration=g,this.resolvedDuration=g+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=f}updateTime(s){const o=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=o}tick(s,o=!1){const{generator:i,totalDuration:a,mixKeyframes:c,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:p}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:g,repeat:m,repeatType:T,repeatDelay:I,type:C,onUpdate:w,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-a/this.speed,this.startTime)),o?this.currentTime=s:this.updateTime(s);const S=this.currentTime-f*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?S<0:S>a;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let v=this.currentTime,M=i;if(m){const N=Math.min(this.currentTime,a)/h;let ee=Math.floor(N),ie=N%1;!ie&&N>=1&&(ie=1),ie===1&&ee--,ee=Math.min(ee,m+1),!!(ee%2)&&(T==="reverse"?(ie=1-ie,I&&(ie-=I/h)):T==="mirror"&&(M=u)),v=oi(0,1,ie)*h}const L=y?{done:!1,value:g[0]}:M.next(v);c&&(L.value=c(L.value));let{done:P}=L;!y&&p!==null&&(P=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return B&&C!==Vb&&(L.value=NE(g,this.options,A,this.speed)),w&&w(L.value),B&&this.finish(),L}then(s,o){return this.finished.then(s,o)}get duration(){return wo(this.calculatedDuration)}get time(){return wo(this.currentTime)}set time(s){var o;s=Io(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),(o=this.driver)==null||o.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(zn.now());const o=this.playbackSpeed!==s;this.playbackSpeed=s,o&&(this.time=wo(this.currentTime))}play(){var a,c;if(this.isStopped)return;const{driver:s=bW,startTime:o}=this.options;this.driver||(this.driver=s(u=>this.tick(u))),(c=(a=this.options).onPlay)==null||c.call(a);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=o??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var s,o;this.notifyFinished(),this.teardown(),this.state="finished",(o=(s=this.options).onComplete)==null||o.call(s)}cancel(){var s,o;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(o=(s=this.options).onCancel)==null||o.call(s)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){var o;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(o=this.driver)==null||o.stop(),s.observe(this)}}function BW(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const Ur=t=>t*180/Math.PI,Hb=t=>{const s=Ur(Math.atan2(t[1],t[0]));return Gb(s)},FW={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Hb,rotateZ:Hb,skewX:t=>Ur(Math.atan(t[1])),skewY:t=>Ur(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Gb=t=>(t=t%360,t<0&&(t+=360),t),dx=Hb,hx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),px=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),UW={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:hx,scaleY:px,scale:t=>(hx(t)+px(t))/2,rotateX:t=>Gb(Ur(Math.atan2(t[6],t[5]))),rotateY:t=>Gb(Ur(Math.atan2(-t[2],t[0]))),rotateZ:dx,rotate:dx,skewX:t=>Ur(Math.atan(t[4])),skewY:t=>Ur(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function jb(t){return t.includes("scale")?1:0}function Wb(t,s){if(!t||t==="none")return jb(s);const o=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(o)i=UW,a=o;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=FW,a=h}if(!a)return jb(s);const c=i[s],u=a[1].split(",").map(HW);return typeof c=="function"?c(u):u[c]}const VW=(t,s)=>{const{transform:o="none"}=getComputedStyle(t);return Wb(o,s)};function HW(t){return parseFloat(t.trim())}const La=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Da=new Set(La),fx=t=>t===Ma||t===Ne,GW=new Set(["x","y","z"]),jW=La.filter(t=>!GW.has(t));function WW(t){const s=[];return jW.forEach(o=>{const i=t.getValue(o);i!==void 0&&(s.push([o,i.get()]),i.set(o.startsWith("scale")?1:0))}),s}const jr={width:({x:t},{paddingLeft:s="0",paddingRight:o="0"})=>t.max-t.min-parseFloat(s)-parseFloat(o),height:({y:t},{paddingTop:s="0",paddingBottom:o="0"})=>t.max-t.min-parseFloat(s)-parseFloat(o),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>Wb(s,"x"),y:(t,{transform:s})=>Wb(s,"y")};jr.translateX=jr.x;jr.translateY=jr.y;const Wr=new Set;let zb=!1,Xb=!1,Yb=!1;function qM(){if(Xb){const t=Array.from(Wr).filter(i=>i.needsMeasurement),s=new Set(t.map(i=>i.element)),o=new Map;s.forEach(i=>{const a=WW(i);a.length&&(o.set(i,a),i.render())}),t.forEach(i=>i.measureInitialState()),s.forEach(i=>{i.render();const a=o.get(i);a&&a.forEach(([c,u])=>{var h;(h=i.getValue(c))==null||h.set(u)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Xb=!1,zb=!1,Wr.forEach(t=>t.complete(Yb)),Wr.clear()}function ZM(){Wr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Xb=!0)})}function zW(){Yb=!0,ZM(),qM(),Yb=!1}class DE{constructor(s,o,i,a,c,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=o,this.name=i,this.motionValue=a,this.element=c,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Wr.add(this),zb||(zb=!0,wt.read(ZM),wt.resolveKeyframes(qM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:o,element:i,motionValue:a}=this;if(s[0]===null){const c=a==null?void 0:a.get(),u=s[s.length-1];if(c!==void 0)s[0]=c;else if(i&&o){const h=i.readValue(o,u);h!=null&&(s[0]=h)}s[0]===void 0&&(s[0]=u),a&&c===void 0&&a.set(s[0])}BW(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),Wr.delete(this)}cancel(){this.state==="scheduled"&&(Wr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const XW=t=>t.startsWith("--");function YW(t,s,o){XW(s)?t.style.setProperty(s,o):t.style[s]=o}const KW=vE(()=>window.ScrollTimeline!==void 0),JW={};function qW(t,s){const o=vE(t);return()=>JW[s]??o()}const QM=qW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Kc=([t,s,o,i])=>`cubic-bezier(${t}, ${s}, ${o}, ${i})`,mx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kc([0,.65,.55,1]),circOut:Kc([.55,0,1,.45]),backIn:Kc([.31,.01,.66,-.59]),backOut:Kc([.33,1.53,.69,.99])};function eL(t,s){if(t)return typeof t=="function"?QM()?YM(t,s):"ease-out":BM(t)?Kc(t):Array.isArray(t)?t.map(o=>eL(o,s)||mx.easeOut):mx[t]}function ZW(t,s,o,{delay:i=0,duration:a=300,repeat:c=0,repeatType:u="loop",ease:h="easeOut",times:p}={},f=void 0){const g={[s]:o};p&&(g.offset=p);const m=eL(h,a);Array.isArray(m)&&(g.easing=m);const T={delay:i,duration:a,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:c+1,direction:u==="reverse"?"alternate":"normal"};return f&&(T.pseudoElement=f),t.animate(g,T)}function tL(t){return typeof t=="function"&&"applyToOptions"in t}function QW({type:t,...s}){return tL(t)&&QM()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class ez extends ME{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:o,name:i,keyframes:a,pseudoElement:c,allowFlatten:u=!1,finalKeyframe:h,onComplete:p}=s;this.isPseudoElement=!!c,this.allowFlatten=u,this.options=s,EE(typeof s.type!="string");const f=QW(s);this.animation=ZW(o,i,a,f,c),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const g=NE(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):YW(o,i,g),this.animation.cancel()}p==null||p(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var s,o;(o=(s=this.animation).finish)==null||o.call(s)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var s,o;this.isPseudoElement||(o=(s=this.animation).commitStyles)==null||o.call(s)}get duration(){var o,i;const s=((i=(o=this.animation.effect)==null?void 0:o.getComputedTiming)==null?void 0:i.call(o).duration)||0;return wo(Number(s))}get time(){return wo(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=Io(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:o}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,s&&KW()?(this.animation.timeline=s,Ds):o(this)}}const nL={anticipate:MM,backInOut:NM,circInOut:DM};function tz(t){return t in nL}function nz(t){typeof t.ease=="string"&&tz(t.ease)&&(t.ease=nL[t.ease])}const gx=10;class sz extends ez{constructor(s){nz(s),JM(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:o,onUpdate:i,onComplete:a,element:c,...u}=this.options;if(!o)return;if(s!==void 0){o.set(s);return}const h=new LE({...u,autoplay:!1}),p=Io(this.finishedTime??this.time);o.setWithVelocity(h.sample(p-gx).value,h.sample(p).value,gx),h.stop()}}const $x=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(qi.test(t)||t==="0")&&!t.startsWith("url("));function oz(t){const s=t[0];if(t.length===1)return!0;for(let o=0;o<t.length;o++)if(t[o]!==s)return!0}function iz(t,s,o,i){const a=t[0];if(a===null)return!1;if(s==="display"||s==="visibility")return!0;const c=t[t.length-1],u=$x(a,s),h=$x(c,s);return!u||!h?!1:oz(t)||(o==="spring"||tL(o))&&i}function PE(t){return IM(t)&&"offsetHeight"in t}const rz=new Set(["opacity","clipPath","filter","transform"]),lz=vE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function az(t){var f;const{motionValue:s,name:o,repeatDelay:i,repeatType:a,damping:c,type:u}=t;if(!PE((f=s==null?void 0:s.owner)==null?void 0:f.current))return!1;const{onUpdate:h,transformTemplate:p}=s.owner.getProps();return lz()&&o&&rz.has(o)&&(o!=="transform"||!p)&&!h&&!i&&a!=="mirror"&&c!==0&&u!=="inertia"}const cz=40;class uz extends ME{constructor({autoplay:s=!0,delay:o=0,type:i="keyframes",repeat:a=0,repeatDelay:c=0,repeatType:u="loop",keyframes:h,name:p,motionValue:f,element:g,...m}){var C;super(),this.stop=()=>{var w,A;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=zn.now();const T={autoplay:s,delay:o,type:i,repeat:a,repeatDelay:c,repeatType:u,name:p,motionValue:f,element:g,...m},I=(g==null?void 0:g.KeyframeResolver)||DE;this.keyframeResolver=new I(h,(w,A,S)=>this.onKeyframesResolved(w,A,T,!S),p,f,g),(C=this.keyframeResolver)==null||C.scheduleResolve()}onKeyframesResolved(s,o,i,a){this.keyframeResolver=void 0;const{name:c,type:u,velocity:h,delay:p,isHandoff:f,onUpdate:g}=i;this.resolvedAt=zn.now(),iz(s,c,u,h)||((ii.instantAnimations||!p)&&(g==null||g(NE(s,i,o))),s[0]=s[s.length-1],i.duration=0,i.repeat=0);const T={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>cz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:o,...i,keyframes:s},I=!f&&az(T)?new sz({...T,element:T.motionValue.owner.current}):new LE(T);I.finished.then(()=>this.notifyFinished()).catch(Ds),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(s,o){return this.finished.finally(s).then(()=>{})}get animation(){var s;return this._animation||((s=this.keyframeResolver)==null||s.resume(),zW()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var s;this._animation&&this.animation.cancel(),(s=this.keyframeResolver)==null||s.cancel()}}const dz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hz(t){const s=dz.exec(t);if(!s)return[,];const[,o,i,a]=s;return[`--${o??i}`,a]}function sL(t,s,o=1){const[i,a]=hz(t);if(!i)return;const c=window.getComputedStyle(s).getPropertyValue(i);if(c){const u=c.trim();return SM(u)?parseFloat(u):u}return kE(a)?sL(a,s,o+1):a}function BE(t,s){return(t==null?void 0:t[s])??(t==null?void 0:t.default)??t}const oL=new Set(["width","height","top","left","right","bottom",...La]),pz={test:t=>t==="auto",parse:t=>t},iL=t=>s=>s.test(t),rL=[Ma,Ne,ko,Ri,oW,sW,pz],_x=t=>rL.find(iL(t));function fz(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wM(t):!0}const mz=new Set(["brightness","contrast","saturate","opacity"]);function gz(t){const[s,o]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[i]=o.match(RE)||[];if(!i)return t;const a=o.replace(i,"");let c=mz.has(s)?1:0;return i!==o&&(c*=100),s+"("+c+a+")"}const $z=/\b([a-z-]*)\(.*?\)/gu,Kb={...qi,getAnimatableNone:t=>{const s=t.match($z);return s?s.map(gz).join(" "):t}},Tx={...Ma,transform:Math.round},_z={rotate:Ri,rotateX:Ri,rotateY:Ri,rotateZ:Ri,scale:lp,scaleX:lp,scaleY:lp,scaleZ:lp,skew:Ri,skewX:Ri,skewY:Ri,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:Bu,originX:ix,originY:ix,originZ:Ne},FE={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,radius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,..._z,zIndex:Tx,fillOpacity:Bu,strokeOpacity:Bu,numOctaves:Tx},Tz={...FE,color:yn,backgroundColor:yn,outlineColor:yn,fill:yn,stroke:yn,borderColor:yn,borderTopColor:yn,borderRightColor:yn,borderBottomColor:yn,borderLeftColor:yn,filter:Kb,WebkitFilter:Kb},lL=t=>Tz[t];function aL(t,s){let o=lL(t);return o!==Kb&&(o=qi),o.getAnimatableNone?o.getAnimatableNone(s):void 0}const bz=new Set(["auto","none","0"]);function yz(t,s,o){let i=0,a;for(;i<t.length&&!a;){const c=t[i];typeof c=="string"&&!bz.has(c)&&Fu(c).values.length&&(a=t[i]),i++}if(a&&o)for(const c of s)t[c]=aL(o,a)}class Ez extends DE{constructor(s,o,i,a,c){super(s,o,i,a,c,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:o,name:i}=this;if(!o||!o.current)return;super.readKeyframes();for(let p=0;p<s.length;p++){let f=s[p];if(typeof f=="string"&&(f=f.trim(),kE(f))){const g=sL(f,o.current);g!==void 0&&(s[p]=g),p===s.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!oL.has(i)||s.length!==2)return;const[a,c]=s,u=_x(a),h=_x(c);if(u!==h)if(fx(u)&&fx(h))for(let p=0;p<s.length;p++){const f=s[p];typeof f=="string"&&(s[p]=parseFloat(f))}else jr[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:o}=this,i=[];for(let a=0;a<s.length;a++)(s[a]===null||fz(s[a]))&&i.push(a);i.length&&yz(s,i,o)}measureInitialState(){const{element:s,unresolvedKeyframes:o,name:i}=this;if(!s||!s.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jr[i](s.measureViewportBox(),window.getComputedStyle(s.current)),o[0]=this.measuredOrigin;const a=o[o.length-1];a!==void 0&&s.getValue(i,a).jump(a,!1)}measureEndState(){var h;const{element:s,name:o,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const a=s.getValue(o);a&&a.jump(this.measuredOrigin,!1);const c=i.length-1,u=i[c];i[c]=jr[o](s.measureViewportBox(),window.getComputedStyle(s.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([p,f])=>{s.getValue(p).set(f)}),this.resolveNoneKeyframes()}}const bx=30,vz=t=>!isNaN(parseFloat(t));class Cz{constructor(s,o={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,a=!0)=>{var u,h;const c=zn.now();if(this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current),this.dependents))for(const p of this.dependents)p.dirty();a&&((h=this.events.renderRequest)==null||h.notify(this.current))},this.hasAnimated=!1,this.setCurrent(s),this.owner=o.owner}setCurrent(s){this.current=s,this.updatedAt=zn.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=vz(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,o){this.events[s]||(this.events[s]=new CE);const i=this.events[s].add(o);return s==="change"?()=>{i(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,o){this.passiveEffect=s,this.stopPassiveEffect=o}set(s,o=!0){!o||!this.passiveEffect?this.updateAndNotify(s,o):this.passiveEffect(s,this.updateAndNotify)}setWithVelocity(s,o,i){this.set(o),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-i}jump(s,o=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,o&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var s;(s=this.events.change)==null||s.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>bx)return 0;const o=Math.min(this.updatedAt-this.prevUpdatedAt,bx);return kM(parseFloat(this.current)-parseFloat(this.prevFrameValue),o)}start(s){return this.stop(),new Promise(o=>{this.hasAnimated=!0,this.animation=s(o),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var s,o;(s=this.dependents)==null||s.clear(),(o=this.events.destroy)==null||o.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ba(t,s){return new Cz(t,s)}function Sz(t,s,o){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const a=(o==null?void 0:o[t])??i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const cL=(t,s)=>s&&typeof t=="number"?s.transform(t):t,{schedule:UE}=FM(queueMicrotask,!1),Ks={x:!1,y:!1};function uL(){return Ks.x||Ks.y}function Iz(t){return t==="x"||t==="y"?Ks[t]?null:(Ks[t]=!0,()=>{Ks[t]=!1}):Ks.x||Ks.y?null:(Ks.x=Ks.y=!0,()=>{Ks.x=Ks.y=!1})}function dL(t,s){const o=Sz(t),i=new AbortController,a={passive:!0,...s,signal:i.signal};return[o,a,()=>i.abort()]}function yx(t){return!(t.pointerType==="touch"||uL())}function wz(t,s,o={}){const[i,a,c]=dL(t,o),u=h=>{if(!yx(h))return;const{target:p}=h,f=s(p,h);if(typeof f!="function"||!p)return;const g=m=>{yx(m)&&(f(m),p.removeEventListener("pointerleave",g))};p.addEventListener("pointerleave",g,a)};return i.forEach(h=>{h.addEventListener("pointerenter",u,a)}),c}const hL=(t,s)=>s?t===s?!0:hL(t,s.parentElement):!1,VE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,kz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Rz(t){return kz.has(t.tagName)||t.tabIndex!==-1}const kp=new WeakSet;function Ex(t){return s=>{s.key==="Enter"&&t(s)}}function bT(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const xz=(t,s)=>{const o=t.currentTarget;if(!o)return;const i=Ex(()=>{if(kp.has(o))return;bT(o,"down");const a=Ex(()=>{bT(o,"up")}),c=()=>bT(o,"cancel");o.addEventListener("keyup",a,s),o.addEventListener("blur",c,s)});o.addEventListener("keydown",i,s),o.addEventListener("blur",()=>o.removeEventListener("keydown",i),s)};function vx(t){return VE(t)&&!uL()}function Oz(t,s,o={}){const[i,a,c]=dL(t,o),u=h=>{const p=h.currentTarget;if(!vx(h))return;kp.add(p);const f=s(p,h),g=(I,C)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",T),kp.has(p)&&kp.delete(p),vx(I)&&typeof f=="function"&&f(I,{success:C})},m=I=>{g(I,p===window||p===document||o.useGlobalTarget||hL(p,I.target))},T=I=>{g(I,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",T,a)};return i.forEach(h=>{(o.useGlobalTarget?window:h).addEventListener("pointerdown",u,a),PE(h)&&(h.addEventListener("focus",f=>xz(f,a)),!Rz(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),c}function pL(t){return IM(t)&&"ownerSVGElement"in t}function Az(t){return pL(t)&&t.tagName==="svg"}const Cn=t=>!!(t&&t.getVelocity),Nz=[...rL,yn,qi],Mz=t=>Nz.find(iL(t)),HE=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Lz extends O.Component{getSnapshotBeforeUpdate(s){const o=this.props.childRef.current;if(o&&s.isPresent&&!this.props.isPresent){const i=o.offsetParent,a=PE(i)&&i.offsetWidth||0,c=this.props.sizeRef.current;c.height=o.offsetHeight||0,c.width=o.offsetWidth||0,c.top=o.offsetTop,c.left=o.offsetLeft,c.right=a-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Dz({children:t,isPresent:s,anchorX:o}){const i=O.useId(),a=O.useRef(null),c=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=O.useContext(HE);return O.useInsertionEffect(()=>{const{width:h,height:p,top:f,left:g,right:m}=c.current;if(s||!a.current||!h||!p)return;const T=o==="left"?`left: ${g}`:`right: ${m}`;a.current.dataset.motionPopId=i;const I=document.createElement("style");return u&&(I.nonce=u),document.head.appendChild(I),I.sheet&&I.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${p}px !important;
            ${T}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.contains(I)&&document.head.removeChild(I)}},[s]),_.jsx(Lz,{isPresent:s,childRef:a,sizeRef:c,children:O.cloneElement(t,{ref:a})})}const Pz=({children:t,initial:s,isPresent:o,onExitComplete:i,custom:a,presenceAffectsLayout:c,mode:u,anchorX:h})=>{const p=_E(Bz),f=O.useId();let g=!0,m=O.useMemo(()=>(g=!1,{id:f,initial:s,isPresent:o,custom:a,onExitComplete:T=>{p.set(T,!0);for(const I of p.values())if(!I)return;i&&i()},register:T=>(p.set(T,!1),()=>p.delete(T))}),[o,p,i]);return c&&g&&(m={...m}),O.useMemo(()=>{p.forEach((T,I)=>p.set(I,!1))},[o]),O.useEffect(()=>{!o&&!p.size&&i&&i()},[o]),u==="popLayout"&&(t=_.jsx(Dz,{isPresent:o,anchorX:h,children:t})),_.jsx(Yf.Provider,{value:m,children:t})};function Bz(){return new Map}function fL(t=!0){const s=O.useContext(Yf);if(s===null)return[!0,null];const{isPresent:o,onExitComplete:i,register:a}=s,c=O.useId();O.useEffect(()=>{if(t)return a(c)},[t]);const u=O.useCallback(()=>t&&i&&i(c),[c,i,t]);return!o&&i?[!1,u]:[!0]}const ap=t=>t.key||"";function Cx(t){const s=[];return O.Children.forEach(t,o=>{O.isValidElement(o)&&s.push(o)}),s}const Fz=({children:t,custom:s,initial:o=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:c="sync",propagate:u=!1,anchorX:h="left"})=>{const[p,f]=fL(u),g=O.useMemo(()=>Cx(t),[t]),m=u&&!p?[]:g.map(ap),T=O.useRef(!0),I=O.useRef(g),C=_E(()=>new Map),[w,A]=O.useState(g),[S,y]=O.useState(g);CM(()=>{T.current=!1,I.current=g;for(let L=0;L<S.length;L++){const P=ap(S[L]);m.includes(P)?C.delete(P):C.get(P)!==!0&&C.set(P,!1)}},[S,m.length,m.join("-")]);const v=[];if(g!==w){let L=[...g];for(let P=0;P<S.length;P++){const B=S[P],N=ap(B);m.includes(N)||(L.splice(P,0,B),v.push(B))}return c==="wait"&&v.length&&(L=v),y(Cx(L)),A(g),null}const{forceRender:M}=O.useContext($E);return _.jsx(_.Fragment,{children:S.map(L=>{const P=ap(L),B=u&&!p?!1:g===S||m.includes(P),N=()=>{if(C.has(P))C.set(P,!0);else return;let ee=!0;C.forEach(ie=>{ie||(ee=!1)}),ee&&(M==null||M(),y(I.current),u&&(f==null||f()),i&&i())};return _.jsx(Pz,{isPresent:B,initial:!T.current||o?void 0:!1,custom:s,presenceAffectsLayout:a,mode:c,onExitComplete:B?void 0:N,anchorX:h,children:L},P)})})},mL=O.createContext({strict:!1}),Sx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ya={};for(const t in Sx)ya[t]={isEnabled:s=>Sx[t].some(o=>!!s[o])};function Uz(t){for(const s in t)ya[s]={...ya[s],...t[s]}}const Vz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $f(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Vz.has(t)}let gL=t=>!$f(t);function Hz(t){t&&(gL=s=>s.startsWith("on")?!$f(s):t(s))}try{Hz(require("@emotion/is-prop-valid").default)}catch{}function Gz(t,s,o){const i={};for(const a in t)a==="values"&&typeof t.values=="object"||(gL(a)||o===!0&&$f(a)||!s&&!$f(a)||t.draggable&&a.startsWith("onDrag"))&&(i[a]=t[a]);return i}function jz(t){if(typeof Proxy>"u")return t;const s=new Map,o=(...i)=>t(...i);return new Proxy(o,{get:(i,a)=>a==="create"?t:(s.has(a)||s.set(a,t(a)),s.get(a))})}const Kf=O.createContext({});function Jf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Uu(t){return typeof t=="string"||Array.isArray(t)}const GE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jE=["initial",...GE];function qf(t){return Jf(t.animate)||jE.some(s=>Uu(t[s]))}function $L(t){return!!(qf(t)||t.variants)}function Wz(t,s){if(qf(t)){const{initial:o,animate:i}=t;return{initial:o===!1||Uu(o)?o:void 0,animate:Uu(i)?i:void 0}}return t.inherit!==!1?s:{}}function zz(t){const{initial:s,animate:o}=Wz(t,O.useContext(Kf));return O.useMemo(()=>({initial:s,animate:o}),[Ix(s),Ix(o)])}function Ix(t){return Array.isArray(t)?t.join(" "):t}const Xz=Symbol.for("motionComponentSymbol");function na(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Yz(t,s,o){return O.useCallback(i=>{i&&t.onMount&&t.onMount(i),s&&(i?s.mount(i):s.unmount()),o&&(typeof o=="function"?o(i):na(o)&&(o.current=i))},[s])}const WE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Kz="framerAppearId",_L="data-"+WE(Kz),TL=O.createContext({});function Jz(t,s,o,i,a){var w,A;const{visualElement:c}=O.useContext(Kf),u=O.useContext(mL),h=O.useContext(Yf),p=O.useContext(HE).reducedMotion,f=O.useRef(null);i=i||u.renderer,!f.current&&i&&(f.current=i(t,{visualState:s,parent:c,props:o,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p}));const g=f.current,m=O.useContext(TL);g&&!g.projection&&a&&(g.type==="html"||g.type==="svg")&&qz(f.current,o,a,m);const T=O.useRef(!1);O.useInsertionEffect(()=>{g&&T.current&&g.update(o,h)});const I=o[_L],C=O.useRef(!!I&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,I))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,I)));return CM(()=>{g&&(T.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),UE.render(g.render),C.current&&g.animationState&&g.animationState.animateChanges())}),O.useEffect(()=>{g&&(!C.current&&g.animationState&&g.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,I)}),C.current=!1))}),g}function qz(t,s,o,i){const{layoutId:a,layout:c,drag:u,dragConstraints:h,layoutScroll:p,layoutRoot:f,layoutCrossfade:g}=s;t.projection=new o(t.latestValues,s["data-framer-portal-id"]?void 0:bL(t.parent)),t.projection.setOptions({layoutId:a,layout:c,alwaysMeasureLayout:!!u||h&&na(h),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:p,layoutRoot:f})}function bL(t){if(t)return t.options.allowProjection!==!1?t.projection:bL(t.parent)}function Zz({preloadedFeatures:t,createVisualElement:s,useRender:o,useVisualState:i,Component:a}){t&&Uz(t);function c(h,p){let f;const g={...O.useContext(HE),...h,layoutId:Qz(h)},{isStatic:m}=g,T=zz(h),I=i(h,m);if(!m&&TE){e4();const C=t4(g);f=C.MeasureLayout,T.visualElement=Jz(a,I,g,s,C.ProjectionNode)}return _.jsxs(Kf.Provider,{value:T,children:[f&&T.visualElement?_.jsx(f,{visualElement:T.visualElement,...g}):null,o(a,h,Yz(I,T.visualElement,p),I,m,T.visualElement)]})}c.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const u=O.forwardRef(c);return u[Xz]=a,u}function Qz({layoutId:t}){const s=O.useContext($E).id;return s&&t!==void 0?s+"-"+t:t}function e4(t,s){O.useContext(mL).strict}function t4(t){const{drag:s,layout:o}=ya;if(!s&&!o)return{};const i={...s,...o};return{MeasureLayout:s!=null&&s.isEnabled(t)||o!=null&&o.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const Vu={};function n4(t){for(const s in t)Vu[s]=t[s],wE(s)&&(Vu[s].isCSSVariable=!0)}function yL(t,{layout:s,layoutId:o}){return Da.has(t)||t.startsWith("origin")||(s||o!==void 0)&&(!!Vu[t]||t==="opacity")}const s4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},o4=La.length;function i4(t,s,o){let i="",a=!0;for(let c=0;c<o4;c++){const u=La[c],h=t[u];if(h===void 0)continue;let p=!0;if(typeof h=="number"?p=h===(u.startsWith("scale")?1:0):p=parseFloat(h)===0,!p||o){const f=cL(h,FE[u]);if(!p){a=!1;const g=s4[u]||u;i+=`${g}(${f}) `}o&&(s[u]=f)}}return i=i.trim(),o?i=o(s,a?"":i):a&&(i="none"),i}function zE(t,s,o){const{style:i,vars:a,transformOrigin:c}=t;let u=!1,h=!1;for(const p in s){const f=s[p];if(Da.has(p)){u=!0;continue}else if(wE(p)){a[p]=f;continue}else{const g=cL(f,FE[p]);p.startsWith("origin")?(h=!0,c[p]=g):i[p]=g}}if(s.transform||(u||o?i.transform=i4(s,t.transform,o):i.transform&&(i.transform="none")),h){const{originX:p="50%",originY:f="50%",originZ:g=0}=c;i.transformOrigin=`${p} ${f} ${g}`}}const XE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function EL(t,s,o){for(const i in s)!Cn(s[i])&&!yL(i,o)&&(t[i]=s[i])}function r4({transformTemplate:t},s){return O.useMemo(()=>{const o=XE();return zE(o,s,t),Object.assign({},o.vars,o.style)},[s])}function l4(t,s){const o=t.style||{},i={};return EL(i,o,t),Object.assign(i,r4(t,s)),i}function a4(t,s){const o={},i=l4(t,s);return t.drag&&t.dragListener!==!1&&(o.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(o.tabIndex=0),o.style=i,o}const c4={offset:"stroke-dashoffset",array:"stroke-dasharray"},u4={offset:"strokeDashoffset",array:"strokeDasharray"};function d4(t,s,o=1,i=0,a=!0){t.pathLength=1;const c=a?c4:u4;t[c.offset]=Ne.transform(-i);const u=Ne.transform(s),h=Ne.transform(o);t[c.array]=`${u} ${h}`}function vL(t,{attrX:s,attrY:o,attrScale:i,pathLength:a,pathSpacing:c=1,pathOffset:u=0,...h},p,f,g){if(zE(t,h,f),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:T}=t;m.transform&&(T.transform=m.transform,delete m.transform),(T.transform||m.transformOrigin)&&(T.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),T.transform&&(T.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete m.transformBox),s!==void 0&&(m.x=s),o!==void 0&&(m.y=o),i!==void 0&&(m.scale=i),a!==void 0&&d4(m,a,c,u,!1)}const CL=()=>({...XE(),attrs:{}}),SL=t=>typeof t=="string"&&t.toLowerCase()==="svg";function h4(t,s,o,i){const a=O.useMemo(()=>{const c=CL();return vL(c,s,SL(i),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[s]);if(t.style){const c={};EL(c,t.style,t),a.style={...c,...a.style}}return a}const p4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function YE(t){return typeof t!="string"||t.includes("-")?!1:!!(p4.indexOf(t)>-1||/[A-Z]/u.test(t))}function f4(t=!1){return(o,i,a,{latestValues:c},u)=>{const p=(YE(o)?h4:a4)(i,c,u,o),f=Gz(i,typeof o=="string",t),g=o!==O.Fragment?{...f,...p,ref:a}:{},{children:m}=i,T=O.useMemo(()=>Cn(m)?m.get():m,[m]);return O.createElement(o,{...g,children:T})}}function wx(t){const s=[{},{}];return t==null||t.values.forEach((o,i)=>{s[0][i]=o.get(),s[1][i]=o.getVelocity()}),s}function KE(t,s,o,i){if(typeof s=="function"){const[a,c]=wx(i);s=s(o!==void 0?o:t.custom,a,c)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[a,c]=wx(i);s=s(o!==void 0?o:t.custom,a,c)}return s}function Rp(t){return Cn(t)?t.get():t}function m4({scrapeMotionValuesFromProps:t,createRenderState:s},o,i,a){return{latestValues:g4(o,i,a,t),renderState:s()}}const IL=t=>(s,o)=>{const i=O.useContext(Kf),a=O.useContext(Yf),c=()=>m4(t,s,i,a);return o?c():_E(c)};function g4(t,s,o,i){const a={},c=i(t,{});for(const T in c)a[T]=Rp(c[T]);let{initial:u,animate:h}=t;const p=qf(t),f=$L(t);s&&f&&!p&&t.inherit!==!1&&(u===void 0&&(u=s.initial),h===void 0&&(h=s.animate));let g=o?o.initial===!1:!1;g=g||u===!1;const m=g?h:u;if(m&&typeof m!="boolean"&&!Jf(m)){const T=Array.isArray(m)?m:[m];for(let I=0;I<T.length;I++){const C=KE(t,T[I]);if(C){const{transitionEnd:w,transition:A,...S}=C;for(const y in S){let v=S[y];if(Array.isArray(v)){const M=g?v.length-1:0;v=v[M]}v!==null&&(a[y]=v)}for(const y in w)a[y]=w[y]}}}return a}function JE(t,s,o){var c;const{style:i}=t,a={};for(const u in i)(Cn(i[u])||s.style&&Cn(s.style[u])||yL(u,t)||((c=o==null?void 0:o.getValue(u))==null?void 0:c.liveStyle)!==void 0)&&(a[u]=i[u]);return a}const $4={useVisualState:IL({scrapeMotionValuesFromProps:JE,createRenderState:XE})};function wL(t,s,o){const i=JE(t,s,o);for(const a in t)if(Cn(t[a])||Cn(s[a])){const c=La.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[c]=t[a]}return i}const _4={useVisualState:IL({scrapeMotionValuesFromProps:wL,createRenderState:CL})};function T4(t,s){return function(i,{forwardMotionProps:a}={forwardMotionProps:!1}){const u={...YE(i)?_4:$4,preloadedFeatures:t,useRender:f4(a),createVisualElement:s,Component:i};return Zz(u)}}function Hu(t,s,o){const i=t.getProps();return KE(i,s,o!==void 0?o:i.custom,t)}const Jb=t=>Array.isArray(t);function b4(t,s,o){t.hasValue(s)?t.getValue(s).set(o):t.addValue(s,ba(o))}function y4(t){return Jb(t)?t[t.length-1]||0:t}function E4(t,s){const o=Hu(t,s);let{transitionEnd:i={},transition:a={},...c}=o||{};c={...c,...i};for(const u in c){const h=y4(c[u]);b4(t,u,h)}}function v4(t){return!!(Cn(t)&&t.add)}function qb(t,s){const o=t.getValue("willChange");if(v4(o))return o.add(s);if(!o&&ii.WillChange){const i=new ii.WillChange("auto");t.addValue("willChange",i),i.add(s)}}function kL(t){return t.props[_L]}const C4=t=>t!==null;function S4(t,{repeat:s,repeatType:o="loop"},i){const a=t.filter(C4),c=s&&o!=="loop"&&s%2===1?0:a.length-1;return a[c]}const I4={type:"spring",stiffness:500,damping:25,restSpeed:10},w4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),k4={type:"keyframes",duration:.8},R4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},x4=(t,{keyframes:s})=>s.length>2?k4:Da.has(t)?t.startsWith("scale")?w4(s[1]):I4:R4;function O4({when:t,delay:s,delayChildren:o,staggerChildren:i,staggerDirection:a,repeat:c,repeatType:u,repeatDelay:h,from:p,elapsed:f,...g}){return!!Object.keys(g).length}const qE=(t,s,o,i={},a,c)=>u=>{const h=BE(i,t)||{},p=h.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Io(p);const g={keyframes:Array.isArray(o)?o:[null,o],ease:"easeOut",velocity:s.getVelocity(),...h,delay:-f,onUpdate:T=>{s.set(T),h.onUpdate&&h.onUpdate(T)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:t,motionValue:s,element:c?void 0:a};O4(h)||Object.assign(g,x4(t,g)),g.duration&&(g.duration=Io(g.duration)),g.repeatDelay&&(g.repeatDelay=Io(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let m=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(m=!0)),(ii.instantAnimations||ii.skipAnimations)&&(m=!0,g.duration=0,g.delay=0),g.allowFlatten=!h.type&&!h.ease,m&&!c&&s.get()!==void 0){const T=S4(g.keyframes,h);if(T!==void 0){wt.update(()=>{g.onUpdate(T),g.onComplete()});return}}return h.isSync?new LE(g):new uz(g)};function A4({protectedKeys:t,needsAnimating:s},o){const i=t.hasOwnProperty(o)&&s[o]!==!0;return s[o]=!1,i}function RL(t,s,{delay:o=0,transitionOverride:i,type:a}={}){let{transition:c=t.getDefaultTransition(),transitionEnd:u,...h}=s;i&&(c=i);const p=[],f=a&&t.animationState&&t.animationState.getState()[a];for(const g in h){const m=t.getValue(g,t.latestValues[g]??null),T=h[g];if(T===void 0||f&&A4(f,g))continue;const I={delay:o,...BE(c||{},g)},C=m.get();if(C!==void 0&&!m.isAnimating&&!Array.isArray(T)&&T===C&&!I.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const S=kL(t);if(S){const y=window.MotionHandoffAnimation(S,g,wt);y!==null&&(I.startTime=y,w=!0)}}qb(t,g),m.start(qE(g,m,T,t.shouldReduceMotion&&oL.has(g)?{type:!1}:I,t,w));const A=m.animation;A&&p.push(A)}return u&&Promise.all(p).then(()=>{wt.update(()=>{u&&E4(t,u)})}),p}function Zb(t,s,o={}){var p;const i=Hu(t,s,o.type==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};o.transitionOverride&&(a=o.transitionOverride);const c=i?()=>Promise.all(RL(t,i,o)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:m,staggerDirection:T}=a;return N4(t,s,g+f,m,T,o)}:()=>Promise.resolve(),{when:h}=a;if(h){const[f,g]=h==="beforeChildren"?[c,u]:[u,c];return f().then(()=>g())}else return Promise.all([c(),u(o.delay)])}function N4(t,s,o=0,i=0,a=1,c){const u=[],h=(t.variantChildren.size-1)*i,p=a===1?(f=0)=>f*i:(f=0)=>h-f*i;return Array.from(t.variantChildren).sort(M4).forEach((f,g)=>{f.notify("AnimationStart",s),u.push(Zb(f,s,{...c,delay:o+p(g)}).then(()=>f.notify("AnimationComplete",s)))}),Promise.all(u)}function M4(t,s){return t.sortNodePosition(s)}function L4(t,s,o={}){t.notify("AnimationStart",s);let i;if(Array.isArray(s)){const a=s.map(c=>Zb(t,c,o));i=Promise.all(a)}else if(typeof s=="string")i=Zb(t,s,o);else{const a=typeof s=="function"?Hu(t,s,o.custom):s;i=Promise.all(RL(t,a,o))}return i.then(()=>{t.notify("AnimationComplete",s)})}function xL(t,s){if(!Array.isArray(s))return!1;const o=s.length;if(o!==t.length)return!1;for(let i=0;i<o;i++)if(s[i]!==t[i])return!1;return!0}const D4=jE.length;function OL(t){if(!t)return;if(!t.isControllingVariants){const o=t.parent?OL(t.parent)||{}:{};return t.props.initial!==void 0&&(o.initial=t.props.initial),o}const s={};for(let o=0;o<D4;o++){const i=jE[o],a=t.props[i];(Uu(a)||a===!1)&&(s[i]=a)}return s}const P4=[...GE].reverse(),B4=GE.length;function F4(t){return s=>Promise.all(s.map(({animation:o,options:i})=>L4(t,o,i)))}function U4(t){let s=F4(t),o=kx(),i=!0;const a=p=>(f,g)=>{var T;const m=Hu(t,g,p==="exit"?(T=t.presenceContext)==null?void 0:T.custom:void 0);if(m){const{transition:I,transitionEnd:C,...w}=m;f={...f,...w,...C}}return f};function c(p){s=p(t)}function u(p){const{props:f}=t,g=OL(t.parent)||{},m=[],T=new Set;let I={},C=1/0;for(let A=0;A<B4;A++){const S=P4[A],y=o[S],v=f[S]!==void 0?f[S]:g[S],M=Uu(v),L=S===p?y.isActive:null;L===!1&&(C=A);let P=v===g[S]&&v!==f[S]&&M;if(P&&i&&t.manuallyAnimateOnMount&&(P=!1),y.protectedKeys={...I},!y.isActive&&L===null||!v&&!y.prevProp||Jf(v)||typeof v=="boolean")continue;const B=V4(y.prevProp,v);let N=B||S===p&&y.isActive&&!P&&M||A>C&&M,ee=!1;const ie=Array.isArray(v)?v:[v];let Te=ie.reduce(a(S),{});L===!1&&(Te={});const{prevResolvedValues:Ue={}}=y,je={...Ue,...Te},we=ce=>{N=!0,T.has(ce)&&(ee=!0,T.delete(ce)),y.needsAnimating[ce]=!0;const F=t.getValue(ce);F&&(F.liveStyle=!1)};for(const ce in je){const F=Te[ce],ue=Ue[ce];if(I.hasOwnProperty(ce))continue;let ae=!1;Jb(F)&&Jb(ue)?ae=!xL(F,ue):ae=F!==ue,ae?F!=null?we(ce):T.add(ce):F!==void 0&&T.has(ce)?we(ce):y.protectedKeys[ce]=!0}y.prevProp=v,y.prevResolvedValues=Te,y.isActive&&(I={...I,...Te}),i&&t.blockInitialAnimation&&(N=!1),N&&(!(P&&B)||ee)&&m.push(...ie.map(ce=>({animation:ce,options:{type:S}})))}if(T.size){const A={};if(typeof f.initial!="boolean"){const S=Hu(t,Array.isArray(f.initial)?f.initial[0]:f.initial);S&&S.transition&&(A.transition=S.transition)}T.forEach(S=>{const y=t.getBaseTarget(S),v=t.getValue(S);v&&(v.liveStyle=!0),A[S]=y??null}),m.push({animation:A})}let w=!!m.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(w=!1),i=!1,w?s(m):Promise.resolve()}function h(p,f){var m;if(o[p].isActive===f)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(T=>{var I;return(I=T.animationState)==null?void 0:I.setActive(p,f)}),o[p].isActive=f;const g=u(p);for(const T in o)o[T].protectedKeys={};return g}return{animateChanges:u,setActive:h,setAnimateFunction:c,getState:()=>o,reset:()=>{o=kx(),i=!0}}}function V4(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!xL(s,t):!1}function Or(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kx(){return{animate:Or(!0),whileInView:Or(),whileHover:Or(),whileTap:Or(),whileDrag:Or(),whileFocus:Or(),exit:Or()}}class sr{constructor(s){this.isMounted=!1,this.node=s}update(){}}class H4 extends sr{constructor(s){super(s),s.animationState||(s.animationState=U4(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Jf(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:o}=this.node.prevProps||{};s!==o&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)==null||s.call(this)}}let G4=0;class j4 extends sr{constructor(){super(...arguments),this.id=G4++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:o}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===i)return;const a=this.node.animationState.setActive("exit",!s);o&&!s&&a.then(()=>{o(this.id)})}mount(){const{register:s,onExitComplete:o}=this.node.presenceContext||{};o&&o(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const W4={animation:{Feature:H4},exit:{Feature:j4}};function Gu(t,s,o,i={passive:!0}){return t.addEventListener(s,o,i),()=>t.removeEventListener(s,o)}function rd(t){return{point:{x:t.pageX,y:t.pageY}}}const z4=t=>s=>VE(s)&&t(s,rd(s));function uu(t,s,o,i){return Gu(t,s,z4(o),i)}function AL({top:t,left:s,right:o,bottom:i}){return{x:{min:s,max:o},y:{min:t,max:i}}}function X4({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function Y4(t,s){if(!s)return t;const o=s({x:t.left,y:t.top}),i=s({x:t.right,y:t.bottom});return{top:o.y,left:o.x,bottom:i.y,right:i.x}}const NL=1e-4,K4=1-NL,J4=1+NL,ML=.01,q4=0-ML,Z4=0+ML;function Nn(t){return t.max-t.min}function Q4(t,s,o){return Math.abs(t-s)<=o}function Rx(t,s,o,i=.5){t.origin=i,t.originPoint=Ct(s.min,s.max,t.origin),t.scale=Nn(o)/Nn(s),t.translate=Ct(o.min,o.max,t.origin)-t.originPoint,(t.scale>=K4&&t.scale<=J4||isNaN(t.scale))&&(t.scale=1),(t.translate>=q4&&t.translate<=Z4||isNaN(t.translate))&&(t.translate=0)}function du(t,s,o,i){Rx(t.x,s.x,o.x,i?i.originX:void 0),Rx(t.y,s.y,o.y,i?i.originY:void 0)}function xx(t,s,o){t.min=o.min+s.min,t.max=t.min+Nn(s)}function eX(t,s,o){xx(t.x,s.x,o.x),xx(t.y,s.y,o.y)}function Ox(t,s,o){t.min=s.min-o.min,t.max=t.min+Nn(s)}function hu(t,s,o){Ox(t.x,s.x,o.x),Ox(t.y,s.y,o.y)}const Ax=()=>({translate:0,scale:1,origin:0,originPoint:0}),sa=()=>({x:Ax(),y:Ax()}),Nx=()=>({min:0,max:0}),Vt=()=>({x:Nx(),y:Nx()});function ks(t){return[t("x"),t("y")]}function yT(t){return t===void 0||t===1}function Qb({scale:t,scaleX:s,scaleY:o}){return!yT(t)||!yT(s)||!yT(o)}function Mr(t){return Qb(t)||LL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function LL(t){return Mx(t.x)||Mx(t.y)}function Mx(t){return t&&t!=="0%"}function _f(t,s,o){const i=t-o,a=s*i;return o+a}function Lx(t,s,o,i,a){return a!==void 0&&(t=_f(t,a,i)),_f(t,o,i)+s}function ey(t,s=0,o=1,i,a){t.min=Lx(t.min,s,o,i,a),t.max=Lx(t.max,s,o,i,a)}function DL(t,{x:s,y:o}){ey(t.x,s.translate,s.scale,s.originPoint),ey(t.y,o.translate,o.scale,o.originPoint)}const Dx=.999999999999,Px=1.0000000000001;function tX(t,s,o,i=!1){const a=o.length;if(!a)return;s.x=s.y=1;let c,u;for(let h=0;h<a;h++){c=o[h],u=c.projectionDelta;const{visualElement:p}=c.options;p&&p.props.style&&p.props.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&ia(t,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),u&&(s.x*=u.x.scale,s.y*=u.y.scale,DL(t,u)),i&&Mr(c.latestValues)&&ia(t,c.latestValues))}s.x<Px&&s.x>Dx&&(s.x=1),s.y<Px&&s.y>Dx&&(s.y=1)}function oa(t,s){t.min=t.min+s,t.max=t.max+s}function Bx(t,s,o,i,a=.5){const c=Ct(t.min,t.max,a);ey(t,s,o,c,i)}function ia(t,s){Bx(t.x,s.x,s.scaleX,s.scale,s.originX),Bx(t.y,s.y,s.scaleY,s.scale,s.originY)}function PL(t,s){return AL(Y4(t.getBoundingClientRect(),s))}function nX(t,s,o){const i=PL(t,o),{scroll:a}=s;return a&&(oa(i.x,a.offset.x),oa(i.y,a.offset.y)),i}const BL=({current:t})=>t?t.ownerDocument.defaultView:null,Fx=(t,s)=>Math.abs(t-s);function sX(t,s){const o=Fx(t.x,s.x),i=Fx(t.y,s.y);return Math.sqrt(o**2+i**2)}class FL{constructor(s,o,{transformPagePoint:i,contextWindow:a,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=vT(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,I=sX(m.offset,{x:0,y:0})>=3;if(!T&&!I)return;const{point:C}=m,{timestamp:w}=fn;this.history.push({...C,timestamp:w});const{onStart:A,onMove:S}=this.handlers;T||(A&&A(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,m)},this.handlePointerMove=(m,T)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=ET(T,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(m,T)=>{this.end();const{onEnd:I,onSessionEnd:C,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=vT(m.type==="pointercancel"?this.lastMoveEventInfo:ET(T,this.transformPagePoint),this.history);this.startEvent&&I&&I(m,A),C&&C(m,A)},!VE(s))return;this.dragSnapToOrigin=c,this.handlers=o,this.transformPagePoint=i,this.contextWindow=a||window;const u=rd(s),h=ET(u,this.transformPagePoint),{point:p}=h,{timestamp:f}=fn;this.history=[{...p,timestamp:f}];const{onSessionStart:g}=o;g&&g(s,vT(h,this.history)),this.removeListeners=sd(uu(this.contextWindow,"pointermove",this.handlePointerMove),uu(this.contextWindow,"pointerup",this.handlePointerUp),uu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Ji(this.updatePoint)}}function ET(t,s){return s?{point:s(t.point)}:t}function Ux(t,s){return{x:t.x-s.x,y:t.y-s.y}}function vT({point:t},s){return{point:t,delta:Ux(t,UL(s)),offset:Ux(t,oX(s)),velocity:iX(s,.1)}}function oX(t){return t[0]}function UL(t){return t[t.length-1]}function iX(t,s){if(t.length<2)return{x:0,y:0};let o=t.length-1,i=null;const a=UL(t);for(;o>=0&&(i=t[o],!(a.timestamp-i.timestamp>Io(s)));)o--;if(!i)return{x:0,y:0};const c=wo(a.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const u={x:(a.x-i.x)/c,y:(a.y-i.y)/c};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function rX(t,{min:s,max:o},i){return s!==void 0&&t<s?t=i?Ct(s,t,i.min):Math.max(t,s):o!==void 0&&t>o&&(t=i?Ct(o,t,i.max):Math.min(t,o)),t}function Vx(t,s,o){return{min:s!==void 0?t.min+s:void 0,max:o!==void 0?t.max+o-(t.max-t.min):void 0}}function lX(t,{top:s,left:o,bottom:i,right:a}){return{x:Vx(t.x,o,a),y:Vx(t.y,s,i)}}function Hx(t,s){let o=s.min-t.min,i=s.max-t.max;return s.max-s.min<t.max-t.min&&([o,i]=[i,o]),{min:o,max:i}}function aX(t,s){return{x:Hx(t.x,s.x),y:Hx(t.y,s.y)}}function cX(t,s){let o=.5;const i=Nn(t),a=Nn(s);return a>i?o=Pu(s.min,s.max-i,t.min):i>a&&(o=Pu(t.min,t.max-a,s.min)),oi(0,1,o)}function uX(t,s){const o={};return s.min!==void 0&&(o.min=s.min-t.min),s.max!==void 0&&(o.max=s.max-t.min),o}const ty=.35;function dX(t=ty){return t===!1?t=0:t===!0&&(t=ty),{x:Gx(t,"left","right"),y:Gx(t,"top","bottom")}}function Gx(t,s,o){return{min:jx(t,s),max:jx(t,o)}}function jx(t,s){return typeof t=="number"?t:t[s]||0}const hX=new WeakMap;class pX{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vt(),this.visualElement=s}start(s,{snapToCursor:o=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),o&&this.snapToCursor(rd(g).point)},c=(g,m)=>{const{drag:T,dragPropagation:I,onDragStart:C}=this.getProps();if(T&&!I&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Iz(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ks(A=>{let S=this.getAxisMotionValue(A).get()||0;if(ko.test(S)){const{projection:y}=this.visualElement;if(y&&y.layout){const v=y.layout.layoutBox[A];v&&(S=Nn(v)*(parseFloat(S)/100))}}this.originPoint[A]=S}),C&&wt.postRender(()=>C(g,m)),qb(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},u=(g,m)=>{const{dragPropagation:T,dragDirectionLock:I,onDirectionLock:C,onDrag:w}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:A}=m;if(I&&this.currentDirection===null){this.currentDirection=fX(A),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",m.point,A),this.updateAxis("y",m.point,A),this.visualElement.render(),w&&w(g,m)},h=(g,m)=>this.stop(g,m),p=()=>ks(g=>{var m;return this.getAnimationState(g)==="paused"&&((m=this.getAxisMotionValue(g).animation)==null?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new FL(s,{onSessionStart:a,onStart:c,onMove:u,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:BL(this.visualElement)})}stop(s,o){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:a}=o;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&wt.postRender(()=>c(s,o))}cancel(){this.isDragging=!1;const{projection:s,animationState:o}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),o&&o.setActive("whileDrag",!1)}updateAxis(s,o,i){const{drag:a}=this.getProps();if(!i||!cp(s,a,this.currentDirection))return;const c=this.getAxisMotionValue(s);let u=this.originPoint[s]+i[s];this.constraints&&this.constraints[s]&&(u=rX(u,this.constraints[s],this.elastic[s])),c.set(u)}resolveConstraints(){var c;const{dragConstraints:s,dragElastic:o}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(c=this.visualElement.projection)==null?void 0:c.layout,a=this.constraints;s&&na(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=lX(i.layoutBox,s):this.constraints=!1,this.elastic=dX(o),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ks(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=uX(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:o}=this.getProps();if(!s||!na(s))return!1;const i=s.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=nX(i,a.root,this.visualElement.getTransformPagePoint());let u=aX(a.layout.layoutBox,c);if(o){const h=o(X4(u));this.hasMutatedConstraints=!!h,h&&(u=AL(h))}return u}startAnimation(s){const{drag:o,dragMomentum:i,dragElastic:a,dragTransition:c,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),p=this.constraints||{},f=ks(g=>{if(!cp(g,o,this.currentDirection))return;let m=p&&p[g]||{};u&&(m={min:0,max:0});const T=a?200:1e6,I=a?40:1e7,C={type:"inertia",velocity:i?s[g]:0,bounceStiffness:T,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...c,...m};return this.startAxisValueAnimation(g,C)});return Promise.all(f).then(h)}startAxisValueAnimation(s,o){const i=this.getAxisMotionValue(s);return qb(this.visualElement,s),i.start(qE(s,i,0,o,this.visualElement,!1))}stopAnimation(){ks(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){ks(s=>{var o;return(o=this.getAxisMotionValue(s).animation)==null?void 0:o.pause()})}getAnimationState(s){var o;return(o=this.getAxisMotionValue(s).animation)==null?void 0:o.state}getAxisMotionValue(s){const o=`_drag${s.toUpperCase()}`,i=this.visualElement.getProps(),a=i[o];return a||this.visualElement.getValue(s,(i.initial?i.initial[s]:void 0)||0)}snapToCursor(s){ks(o=>{const{drag:i}=this.getProps();if(!cp(o,i,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(o);if(a&&a.layout){const{min:u,max:h}=a.layout.layoutBox[o];c.set(s[o]-Ct(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:o}=this.getProps(),{projection:i}=this.visualElement;if(!na(o)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ks(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const p=h.get();a[u]=cX({min:p,max:p},this.constraints[u])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ks(u=>{if(!cp(u,s,null))return;const h=this.getAxisMotionValue(u),{min:p,max:f}=this.constraints[u];h.set(Ct(p,f,a[u]))})}addListeners(){if(!this.visualElement.current)return;hX.set(this.visualElement,this);const s=this.visualElement.current,o=uu(s,"pointerdown",p=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(p)}),i=()=>{const{dragConstraints:p}=this.getProps();na(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),wt.read(i);const u=Gu(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",({delta:p,hasLayoutChanged:f})=>{this.isDragging&&f&&(ks(g=>{const m=this.getAxisMotionValue(g);m&&(this.originPoint[g]+=p[g].translate,m.set(m.get()+p[g].translate))}),this.visualElement.render())});return()=>{u(),o(),c(),h&&h()}}getProps(){const s=this.visualElement.getProps(),{drag:o=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:u=ty,dragMomentum:h=!0}=s;return{...s,drag:o,dragDirectionLock:i,dragPropagation:a,dragConstraints:c,dragElastic:u,dragMomentum:h}}}function cp(t,s,o){return(s===!0||s===t)&&(o===null||o===t)}function fX(t,s=10){let o=null;return Math.abs(t.y)>s?o="y":Math.abs(t.x)>s&&(o="x"),o}class mX extends sr{constructor(s){super(s),this.removeGroupControls=Ds,this.removeListeners=Ds,this.controls=new pX(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ds}unmount(){this.removeGroupControls(),this.removeListeners()}}const Wx=t=>(s,o)=>{t&&wt.postRender(()=>t(s,o))};class gX extends sr{constructor(){super(...arguments),this.removePointerDownListener=Ds}onPointerDown(s){this.session=new FL(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BL(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:o,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:Wx(s),onStart:Wx(o),onMove:i,onEnd:(c,u)=>{delete this.session,a&&wt.postRender(()=>a(c,u))}}}mount(){this.removePointerDownListener=uu(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zx(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Gc={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(Ne.test(t))t=parseFloat(t);else return t;const o=zx(t,s.target.x),i=zx(t,s.target.y);return`${o}% ${i}%`}},$X={correct:(t,{treeScale:s,projectionDelta:o})=>{const i=t,a=qi.parse(t);if(a.length>5)return i;const c=qi.createTransformer(t),u=typeof a[0]!="number"?1:0,h=o.x.scale*s.x,p=o.y.scale*s.y;a[0+u]/=h,a[1+u]/=p;const f=Ct(h,p,.5);return typeof a[2+u]=="number"&&(a[2+u]/=f),typeof a[3+u]=="number"&&(a[3+u]/=f),c(a)}};class _X extends O.Component{componentDidMount(){const{visualElement:s,layoutGroup:o,switchLayoutGroup:i,layoutId:a}=this.props,{projection:c}=s;n4(TX),c&&(o.group&&o.group.add(c),i&&i.register&&a&&i.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),xp.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:o,visualElement:i,drag:a,isPresent:c}=this.props,{projection:u}=i;return u&&(u.isPresent=c,a||s.layoutDependency!==o||o===void 0||s.isPresent!==c?u.willUpdate():this.safeToRemove(),s.isPresent!==c&&(c?u.promote():u.relegate()||wt.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),UE.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:o,switchLayoutGroup:i}=this.props,{projection:a}=s;a&&(a.scheduleCheckAfterUnmount(),o&&o.group&&o.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function VL(t){const[s,o]=fL(),i=O.useContext($E);return _.jsx(_X,{...t,layoutGroup:i,switchLayoutGroup:O.useContext(TL),isPresent:s,safeToRemove:o})}const TX={borderRadius:{...Gc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gc,borderTopRightRadius:Gc,borderBottomLeftRadius:Gc,borderBottomRightRadius:Gc,boxShadow:$X};function bX(t,s,o){const i=Cn(t)?t:ba(t);return i.start(qE("",i,s,o)),i.animation}const yX=(t,s)=>t.depth-s.depth;class EX{constructor(){this.children=[],this.isDirty=!1}add(s){bE(this.children,s),this.isDirty=!0}remove(s){yE(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(yX),this.isDirty=!1,this.children.forEach(s)}}function vX(t,s){const o=zn.now(),i=({timestamp:a})=>{const c=a-o;c>=s&&(Ji(i),t(c-s))};return wt.setup(i,!0),()=>Ji(i)}const HL=["TopLeft","TopRight","BottomLeft","BottomRight"],CX=HL.length,Xx=t=>typeof t=="string"?parseFloat(t):t,Yx=t=>typeof t=="number"||Ne.test(t);function SX(t,s,o,i,a,c){a?(t.opacity=Ct(0,o.opacity??1,IX(i)),t.opacityExit=Ct(s.opacity??1,0,wX(i))):c&&(t.opacity=Ct(s.opacity??1,o.opacity??1,i));for(let u=0;u<CX;u++){const h=`border${HL[u]}Radius`;let p=Kx(s,h),f=Kx(o,h);if(p===void 0&&f===void 0)continue;p||(p=0),f||(f=0),p===0||f===0||Yx(p)===Yx(f)?(t[h]=Math.max(Ct(Xx(p),Xx(f),i),0),(ko.test(f)||ko.test(p))&&(t[h]+="%")):t[h]=f}(s.rotate||o.rotate)&&(t.rotate=Ct(s.rotate||0,o.rotate||0,i))}function Kx(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const IX=GL(0,.5,LM),wX=GL(.5,.95,Ds);function GL(t,s,o){return i=>i<t?0:i>s?1:o(Pu(t,s,i))}function Jx(t,s){t.min=s.min,t.max=s.max}function ws(t,s){Jx(t.x,s.x),Jx(t.y,s.y)}function qx(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function Zx(t,s,o,i,a){return t-=s,t=_f(t,1/o,i),a!==void 0&&(t=_f(t,1/a,i)),t}function kX(t,s=0,o=1,i=.5,a,c=t,u=t){if(ko.test(s)&&(s=parseFloat(s),s=Ct(u.min,u.max,s/100)-u.min),typeof s!="number")return;let h=Ct(c.min,c.max,i);t===c&&(h-=s),t.min=Zx(t.min,s,o,h,a),t.max=Zx(t.max,s,o,h,a)}function Qx(t,s,[o,i,a],c,u){kX(t,s[o],s[i],s[a],s.scale,c,u)}const RX=["x","scaleX","originX"],xX=["y","scaleY","originY"];function eO(t,s,o,i){Qx(t.x,s,RX,o?o.x:void 0,i?i.x:void 0),Qx(t.y,s,xX,o?o.y:void 0,i?i.y:void 0)}function tO(t){return t.translate===0&&t.scale===1}function jL(t){return tO(t.x)&&tO(t.y)}function nO(t,s){return t.min===s.min&&t.max===s.max}function OX(t,s){return nO(t.x,s.x)&&nO(t.y,s.y)}function sO(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function WL(t,s){return sO(t.x,s.x)&&sO(t.y,s.y)}function oO(t){return Nn(t.x)/Nn(t.y)}function iO(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class AX{constructor(){this.members=[]}add(s){bE(this.members,s),s.scheduleRender()}remove(s){if(yE(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const o=this.members[this.members.length-1];o&&this.promote(o)}}relegate(s){const o=this.members.findIndex(a=>s===a);if(o===0)return!1;let i;for(let a=o;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(s,o){const i=this.lead;if(s!==i&&(this.prevLead=i,this.lead=s,s.show(),i)){i.instance&&i.scheduleRender(),s.scheduleRender(),s.resumeFrom=i,o&&(s.resumeFrom.preserveOpacity=!0),i.snapshot&&(s.snapshot=i.snapshot,s.snapshot.latestValues=i.animationValues||i.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:a}=s.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:o,resumingFrom:i}=s;o.onExitComplete&&o.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function NX(t,s,o){let i="";const a=t.x.translate/s.x,c=t.y.translate/s.y,u=(o==null?void 0:o.z)||0;if((a||c||u)&&(i=`translate3d(${a}px, ${c}px, ${u}px) `),(s.x!==1||s.y!==1)&&(i+=`scale(${1/s.x}, ${1/s.y}) `),o){const{transformPerspective:f,rotate:g,rotateX:m,rotateY:T,skewX:I,skewY:C}=o;f&&(i=`perspective(${f}px) ${i}`),g&&(i+=`rotate(${g}deg) `),m&&(i+=`rotateX(${m}deg) `),T&&(i+=`rotateY(${T}deg) `),I&&(i+=`skewX(${I}deg) `),C&&(i+=`skewY(${C}deg) `)}const h=t.x.scale*s.x,p=t.y.scale*s.y;return(h!==1||p!==1)&&(i+=`scale(${h}, ${p})`),i||"none"}const CT=["","X","Y","Z"],MX={visibility:"hidden"},LX=1e3;let DX=0;function ST(t,s,o,i){const{latestValues:a}=s;a[t]&&(o[t]=a[t],s.setStaticValue(t,0),i&&(i[t]=0))}function zL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const o=kL(s);if(window.MotionHasOptimisedAnimation(o,"transform")){const{layout:a,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(o,"transform",wt,!(a||c))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&zL(i)}function XL({attachResizeListener:t,defaultParent:s,measureScroll:o,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(u={},h=s==null?void 0:s()){this.id=DX++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(FX),this.nodes.forEach(jX),this.nodes.forEach(WX),this.nodes.forEach(UX)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new EX)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new CE),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const p=this.eventHandlers.get(u);p&&p.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=pL(u)&&!Az(u),this.instance=u;const{layoutId:h,layout:p,visualElement:f}=this.options;if(f&&!f.current&&f.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(p||h)&&(this.isLayoutDirty=!0),t){let g;const m=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=vX(m,250),xp.hasAnimatedSinceResize&&(xp.hasAnimatedSinceResize=!1,this.nodes.forEach(lO))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&f&&(h||p)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:m,hasRelativeLayoutChanged:T,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||f.getDefaultTransition()||JX,{onLayoutAnimationStart:w,onLayoutAnimationComplete:A}=f.getProps(),S=!this.targetLayout||!WL(this.targetLayout,I),y=!m&&T;if(this.options.layoutRoot||this.resumeFrom||y||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...BE(C,"layout"),onPlay:w,onComplete:A};(f.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(g,y)}else m||lO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ji(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zX),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const m=this.path[g];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:h,layout:p}=this.options;if(h===void 0&&!p)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rO);return}this.isUpdating||this.nodes.forEach(HX),this.isUpdating=!1,this.nodes.forEach(GX),this.nodes.forEach(PX),this.nodes.forEach(BX),this.clearAllSnapshots();const h=zn.now();fn.delta=oi(0,1e3/60,h-fn.timestamp),fn.timestamp=h,fn.isProcessing=!0,gT.update.process(fn),gT.preRender.process(fn),gT.render.process(fn),fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,UE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(VX),this.sharedNodes.forEach(XX)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Nn(this.snapshot.measuredBox.x)&&!Nn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Vt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const p=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:p,offset:o(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!jL(this.projectionDelta),p=this.getTransformTemplate(),f=p?p(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;u&&this.instance&&(h||Mr(this.latestValues)||g)&&(a(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let p=this.removeElementScroll(h);return u&&(p=this.removeTransform(p)),qX(p),{animationId:this.root.animationId,measuredBox:h,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:u}=this.options;if(!u)return Vt();const h=u.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(ZX))){const{scroll:g}=this.root;g&&(oa(h.x,g.offset.x),oa(h.y,g.offset.y))}return h}removeElementScroll(u){var p;const h=Vt();if(ws(h,u),(p=this.scroll)!=null&&p.wasRoot)return h;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:m,options:T}=g;g!==this.root&&m&&T.layoutScroll&&(m.wasRoot&&ws(h,u),oa(h.x,m.offset.x),oa(h.y,m.offset.y))}return h}applyTransform(u,h=!1){const p=Vt();ws(p,u);for(let f=0;f<this.path.length;f++){const g=this.path[f];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&ia(p,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Mr(g.latestValues)&&ia(p,g.latestValues)}return Mr(this.latestValues)&&ia(p,this.latestValues),p}removeTransform(u){const h=Vt();ws(h,u);for(let p=0;p<this.path.length;p++){const f=this.path[p];if(!f.instance||!Mr(f.latestValues))continue;Qb(f.latestValues)&&f.updateSnapshot();const g=Vt(),m=f.measurePageBox();ws(g,m),eO(h,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return Mr(this.latestValues)&&eO(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var T;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==h;if(!(u||p&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:m}=this.options;if(!(!this.layout||!(g||m))){if(this.resolvedRelativeTargetAt=fn.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vt(),this.relativeTargetOrigin=Vt(),hu(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Vt(),this.targetWithTransforms=Vt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eX(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ws(this.target,this.layout.layoutBox),DL(this.target,this.targetDelta)):ws(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vt(),this.relativeTargetOrigin=Vt(),hu(this.relativeTargetOrigin,this.target,I.target),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Qb(this.parent.latestValues)||LL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var C;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let p=!0;if((this.isProjectionDirty||(C=this.parent)!=null&&C.isProjectionDirty)&&(p=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===fn.timestamp&&(p=!1),p)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;ws(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,T=this.treeScale.y;tX(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Vt());const{target:I}=u;if(!I){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(qx(this.prevProjectionDelta.x,this.projectionDelta.x),qx(this.prevProjectionDelta.y,this.projectionDelta.y)),du(this.projectionDelta,this.layoutCorrected,I,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==T||!iO(this.projectionDelta.x,this.prevProjectionDelta.x)||!iO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),u){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sa(),this.projectionDelta=sa(),this.projectionDeltaWithTransform=sa()}setAnimationOrigin(u,h=!1){const p=this.snapshot,f=p?p.latestValues:{},g={...this.latestValues},m=sa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const T=Vt(),I=p?p.source:void 0,C=this.layout?this.layout.source:void 0,w=I!==C,A=this.getStack(),S=!A||A.members.length<=1,y=!!(w&&!S&&this.options.crossfade===!0&&!this.path.some(KX));this.animationProgress=0;let v;this.mixTargetDelta=M=>{const L=M/1e3;aO(m.x,u.x,L),aO(m.y,u.y,L),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hu(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),YX(this.relativeTarget,this.relativeTargetOrigin,T,L),v&&OX(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Vt()),ws(v,this.relativeTarget)),w&&(this.animationValues=g,SX(g,f,this.latestValues,L,y,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var h,p,f;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(f=(p=this.resumingFrom)==null?void 0:p.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Ji(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{xp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ba(0)),this.currentAnimation=bX(this.motionValue,[0,1e3],{...u,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),u.onUpdate&&u.onUpdate(g)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(LX),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:p,layout:f,latestValues:g}=u;if(!(!h||!p||!f)){if(this!==u&&this.layout&&f&&YL(this.options.animationType,this.layout.layoutBox,f.layoutBox)){p=this.target||Vt();const m=Nn(this.layout.layoutBox.x);p.x.min=u.target.x.min,p.x.max=p.x.min+m;const T=Nn(this.layout.layoutBox.y);p.y.min=u.target.y.min,p.y.max=p.y.min+T}ws(h,p),ia(h,g),du(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new AX),this.sharedNodes.get(u).add(h);const f=h.options.initialPromotionConfig;h.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var h;const{layoutId:u}=this.options;return u?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:u}=this.options;return u?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:p}={}){const f=this.getStack();f&&f.promote(this,p),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:p}=u;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(h=!0),!h)return;const f={};p.z&&ST("z",u,f,this.animationValues);for(let g=0;g<CT.length;g++)ST(`rotate${CT[g]}`,u,f,this.animationValues),ST(`skew${CT[g]}`,u,f,this.animationValues);u.render();for(const g in f)u.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);u.scheduleRender()}getProjectionStyles(u){if(!this.instance||this.isSVG)return;if(!this.isVisible)return MX;const h={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Rp(u==null?void 0:u.pointerEvents)||"",h.transform=p?p(this.latestValues,""):"none",h;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const I={};return this.options.layoutId&&(I.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,I.pointerEvents=Rp(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Mr(this.latestValues)&&(I.transform=p?p({},""):"none",this.hasProjected=!1),I}const g=f.animationValues||f.latestValues;this.applyTransformsToTarget(),h.transform=NX(this.projectionDeltaWithTransform,this.treeScale,g),p&&(h.transform=p(g,h.transform));const{x:m,y:T}=this.projectionDelta;h.transformOrigin=`${m.origin*100}% ${T.origin*100}% 0`,f.animationValues?h.opacity=f===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:h.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const I in Vu){if(g[I]===void 0)continue;const{correct:C,applyTo:w,isCSSVariable:A}=Vu[I],S=h.transform==="none"?g[I]:C(g[I],f);if(w){const y=w.length;for(let v=0;v<y;v++)h[w[v]]=S}else A?this.options.visualElement.renderState.vars[I]=S:h[I]=S}return this.options.layoutId&&(h.pointerEvents=f===this?Rp(u==null?void 0:u.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(rO),this.root.sharedNodes.clear()}}}function PX(t){t.updateLayout()}function BX(t){var o;const s=((o=t.resumeFrom)==null?void 0:o.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=t.layout,{animationType:c}=t.options,u=s.source!==t.layout.source;c==="size"?ks(m=>{const T=u?s.measuredBox[m]:s.layoutBox[m],I=Nn(T);T.min=i[m].min,T.max=T.min+I}):YL(c,s.layoutBox,i)&&ks(m=>{const T=u?s.measuredBox[m]:s.layoutBox[m],I=Nn(i[m]);T.max=T.min+I,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+I)});const h=sa();du(h,i,s.layoutBox);const p=sa();u?du(p,t.applyTransform(a,!0),s.measuredBox):du(p,i,s.layoutBox);const f=!jL(h);let g=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:T,layout:I}=m;if(T&&I){const C=Vt();hu(C,s.layoutBox,T.layoutBox);const w=Vt();hu(w,i,I.layoutBox),WL(C,w)||(g=!0),m.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=C,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:s,delta:p,layoutDelta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function FX(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function UX(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function VX(t){t.clearSnapshot()}function rO(t){t.clearMeasurements()}function HX(t){t.isLayoutDirty=!1}function GX(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function lO(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function jX(t){t.resolveTargetDelta()}function WX(t){t.calcProjection()}function zX(t){t.resetSkewAndRotation()}function XX(t){t.removeLeadSnapshot()}function aO(t,s,o){t.translate=Ct(s.translate,0,o),t.scale=Ct(s.scale,1,o),t.origin=s.origin,t.originPoint=s.originPoint}function cO(t,s,o,i){t.min=Ct(s.min,o.min,i),t.max=Ct(s.max,o.max,i)}function YX(t,s,o,i){cO(t.x,s.x,o.x,i),cO(t.y,s.y,o.y,i)}function KX(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const JX={duration:.45,ease:[.4,0,.1,1]},uO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),dO=uO("applewebkit/")&&!uO("chrome/")?Math.round:Ds;function hO(t){t.min=dO(t.min),t.max=dO(t.max)}function qX(t){hO(t.x),hO(t.y)}function YL(t,s,o){return t==="position"||t==="preserve-aspect"&&!Q4(oO(s),oO(o),.2)}function ZX(t){var s;return t!==t.root&&((s=t.scroll)==null?void 0:s.wasRoot)}const QX=XL({attachResizeListener:(t,s)=>Gu(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),IT={current:void 0},KL=XL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!IT.current){const t=new QX({});t.mount(window),t.setOptions({layoutScroll:!0}),IT.current=t}return IT.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),e3={pan:{Feature:gX},drag:{Feature:mX,ProjectionNode:KL,MeasureLayout:VL}};function pO(t,s,o){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",o==="Start");const a="onHover"+o,c=i[a];c&&wt.postRender(()=>c(s,rd(s)))}class t3 extends sr{mount(){const{current:s}=this.node;s&&(this.unmount=wz(s,(o,i)=>(pO(this.node,i,"Start"),a=>pO(this.node,a,"End"))))}unmount(){}}class n3 extends sr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sd(Gu(this.node.current,"focus",()=>this.onFocus()),Gu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fO(t,s,o){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",o==="Start");const a="onTap"+(o==="End"?"":o),c=i[a];c&&wt.postRender(()=>c(s,rd(s)))}class s3 extends sr{mount(){const{current:s}=this.node;s&&(this.unmount=Oz(s,(o,i)=>(fO(this.node,i,"Start"),(a,{success:c})=>fO(this.node,a,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ny=new WeakMap,wT=new WeakMap,o3=t=>{const s=ny.get(t.target);s&&s(t)},i3=t=>{t.forEach(o3)};function r3({root:t,...s}){const o=t||document;wT.has(o)||wT.set(o,{});const i=wT.get(o),a=JSON.stringify(s);return i[a]||(i[a]=new IntersectionObserver(i3,{root:t,...s})),i[a]}function l3(t,s,o){const i=r3(s);return ny.set(t,o),i.observe(t),()=>{ny.delete(t),i.unobserve(t)}}const a3={some:0,all:1};class c3 extends sr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:o,margin:i,amount:a="some",once:c}=s,u={root:o?o.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:a3[a]},h=p=>{const{isIntersecting:f}=p;if(this.isInView===f||(this.isInView=f,c&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:m}=this.node.getProps(),T=f?g:m;T&&T(p)};return l3(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:o}=this.node;["amount","margin","root"].some(u3(s,o))&&this.startObserver()}unmount(){}}function u3({viewport:t={}},{viewport:s={}}={}){return o=>t[o]!==s[o]}const d3={inView:{Feature:c3},tap:{Feature:s3},focus:{Feature:n3},hover:{Feature:t3}},h3={layout:{ProjectionNode:KL,MeasureLayout:VL}},sy={current:null},JL={current:!1};function p3(){if(JL.current=!0,!!TE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>sy.current=t.matches;t.addListener(s),s()}else sy.current=!1}const f3=new WeakMap;function m3(t,s,o){for(const i in s){const a=s[i],c=o[i];if(Cn(a))t.addValue(i,a);else if(Cn(c))t.addValue(i,ba(a,{owner:t}));else if(c!==a)if(t.hasValue(i)){const u=t.getValue(i);u.liveStyle===!0?u.jump(a):u.hasAnimated||u.set(a)}else{const u=t.getStaticValue(i);t.addValue(i,ba(u!==void 0?u:a,{owner:t}))}}for(const i in o)s[i]===void 0&&t.removeValue(i);return s}const mO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class g3{scrapeMotionValuesFromProps(s,o,i){return{}}constructor({parent:s,props:o,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:c,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=DE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=zn.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,wt.render(this.render,!1,!0))};const{latestValues:p,renderState:f}=u;this.latestValues=p,this.baseTarget={...p},this.initialValues=o.initial?{...p}:{},this.renderState=f,this.parent=s,this.props=o,this.presenceContext=i,this.depth=s?s.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!c,this.isControllingVariants=qf(o),this.isVariantNode=$L(o),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:g,...m}=this.scrapeMotionValuesFromProps(o,{},this);for(const T in m){const I=m[T];p[T]!==void 0&&Cn(I)&&I.set(p[T],!1)}}mount(s){this.current=s,f3.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((o,i)=>this.bindToMotionValue(i,o)),JL.current||p3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ji(this.notifyUpdate),Ji(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const o=this.features[s];o&&(o.unmount(),o.isMounted=!1)}this.current=null}bindToMotionValue(s,o){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const i=Da.has(s);i&&this.onBindTransform&&this.onBindTransform();const a=o.on("change",h=>{this.latestValues[s]=h,this.props.onUpdate&&wt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),c=o.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,s,o)),this.valueSubscriptions.set(s,()=>{a(),c(),u&&u(),o.owner&&o.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in ya){const o=ya[s];if(!o)continue;const{isEnabled:i,Feature:a}=o;if(!this.features[s]&&a&&i(this.props)&&(this.features[s]=new a(this)),this.features[s]){const c=this.features[s];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vt()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,o){this.latestValues[s]=o}update(s,o){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=o;for(let i=0;i<mO.length;i++){const a=mO[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c="on"+a,u=s[c];u&&(this.propEventSubscriptions[a]=this.on(a,u))}this.prevMotionValues=m3(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const o=this.getClosestVariantNode();if(o)return o.variantChildren&&o.variantChildren.add(s),()=>o.variantChildren.delete(s)}addValue(s,o){const i=this.values.get(s);o!==i&&(i&&this.removeValue(s),this.bindToMotionValue(s,o),this.values.set(s,o),this.latestValues[s]=o.get())}removeValue(s){this.values.delete(s);const o=this.valueSubscriptions.get(s);o&&(o(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,o){if(this.props.values&&this.props.values[s])return this.props.values[s];let i=this.values.get(s);return i===void 0&&o!==void 0&&(i=ba(o===null?void 0:o,{owner:this}),this.addValue(s,i)),i}readValue(s,o){let i=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return i!=null&&(typeof i=="string"&&(SM(i)||wM(i))?i=parseFloat(i):!Mz(i)&&qi.test(o)&&(i=aL(s,o)),this.setBaseTarget(s,Cn(i)?i.get():i)),Cn(i)?i.get():i}setBaseTarget(s,o){this.baseTarget[s]=o}getBaseTarget(s){var c;const{initial:o}=this.props;let i;if(typeof o=="string"||typeof o=="object"){const u=KE(this.props,o,(c=this.presenceContext)==null?void 0:c.custom);u&&(i=u[s])}if(o&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,s);return a!==void 0&&!Cn(a)?a:this.initialValues[s]!==void 0&&i===void 0?void 0:this.baseTarget[s]}on(s,o){return this.events[s]||(this.events[s]=new CE),this.events[s].add(o)}notify(s,...o){this.events[s]&&this.events[s].notify(...o)}}class qL extends g3{constructor(){super(...arguments),this.KeyframeResolver=Ez}sortInstanceNodePosition(s,o){return s.compareDocumentPosition(o)&2?1:-1}getBaseTargetFromProps(s,o){return s.style?s.style[o]:void 0}removeValueFromRenderState(s,{vars:o,style:i}){delete o[s],delete i[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;Cn(s)&&(this.childSubscription=s.on("change",o=>{this.current&&(this.current.textContent=`${o}`)}))}}function ZL(t,{style:s,vars:o},i,a){Object.assign(t.style,s,a&&a.getProjectionStyles(i));for(const c in o)t.style.setProperty(c,o[c])}function $3(t){return window.getComputedStyle(t)}class _3 extends qL{constructor(){super(...arguments),this.type="html",this.renderInstance=ZL}readValueFromInstance(s,o){var i;if(Da.has(o))return(i=this.projection)!=null&&i.isProjecting?jb(o):VW(s,o);{const a=$3(s),c=(wE(o)?a.getPropertyValue(o):a[o])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(s,{transformPagePoint:o}){return PL(s,o)}build(s,o,i){zE(s,o,i.transformTemplate)}scrapeMotionValuesFromProps(s,o,i){return JE(s,o,i)}}const QL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function T3(t,s,o,i){ZL(t,s,void 0,i);for(const a in s.attrs)t.setAttribute(QL.has(a)?a:WE(a),s.attrs[a])}class b3 extends qL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Vt}getBaseTargetFromProps(s,o){return s[o]}readValueFromInstance(s,o){if(Da.has(o)){const i=lL(o);return i&&i.default||0}return o=QL.has(o)?o:WE(o),s.getAttribute(o)}scrapeMotionValuesFromProps(s,o,i){return wL(s,o,i)}build(s,o,i){vL(s,o,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(s,o,i,a){T3(s,o,i,a)}mount(s){this.isSVGTag=SL(s.tagName),super.mount(s)}}const y3=(t,s)=>YE(t)?new b3(s):new _3(s,{allowProjection:t!==O.Fragment}),E3=T4({...W4,...d3,...e3,...h3},y3),v3=jz(E3),C3=()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z",fill:"#4CAF50"}),_.jsx("path",{d:"M12 6C8.69 6 6 8.69 6 12C6 15.31 8.69 18 12 18C15.31 18 18 15.31 18 12C18 8.69 15.31 6 12 6ZM12 16C9.79 16 8 14.21 8 12C8 9.79 9.79 8 12 8C14.21 8 16 9.79 16 12C16 14.21 14.21 16 12 16Z",fill:"#81C784"}),_.jsx("path",{d:"M12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z",fill:"#2E7D32"}),_.jsx("path",{d:"M7 8C7.55 8 8 7.55 8 7C8 6.45 7.55 6 7 6C6.45 6 6 6.45 6 7C6 7.55 6.45 8 7 8Z",fill:"#2E7D32"}),_.jsx("path",{d:"M17 8C17.55 8 18 7.55 18 7C18 6.45 17.55 6 17 6C16.45 6 16 6.45 16 7C16 7.55 16.45 8 17 8Z",fill:"#2E7D32"})]}),S3="/assets/Mascot-DcBFArAP.gif",I3=()=>{var f;const[t,s]=O.useState(!1),[o,i]=O.useState(""),[a,c]=O.useState([]),u=()=>{if(!o.trim())return;c(m=>[...m,{type:"user",text:o}]);const g=h(o);c(m=>[...m,{type:"pika",text:g}]),i("")},h=g=>{const m=g.toLowerCase();return m.includes("build")?"The Build button is in the top header. It compiles your project so you can preview or deploy it.":m.includes("preview")?"The Preview button, located in the top header, lets you see how your app will look and behave before deploying.":m.includes("request web view")||m.includes("request")&&m.includes("web")?"Request Web View is in the top header. Use it to request a deployable web version of your project.":m.includes("view web")||m.includes("view")&&m.includes("web")?"The View Web button in the top header takes you to the live, deployed version of your project.":m.includes("button")?"You can find button components in the UI components section. They're styled using Tailwind CSS and follow our design system!":m.includes("radio button")||m.includes("radio")?"To add a radio button, you can use the RadioGroup component from our UI library. Check out the documentation for examples!":m.includes("checkbox")?"Checkbox components are available in the Form Elements section. You can configure their state and labels.":m.includes("slider")?"You can add sliders from the Form Elements section. They are useful for selecting a value within a range.":m.includes("input field")||m.includes("input")||m.includes("text field")?"Input fields are under Form Elements. You can use them to get text input from the user.":m.includes("counter")?"The Counter component is in the Form Elements section. It provides a simple way to increment and decrement a value.":m.includes("dropdown")||m.includes("select")?"Dropdowns are also in Form Elements. They allow users to select an option from a list.":m.includes("text")?"You can add Text components from the General section to display static text on the screen.":m.includes("image")?"Image components are in the General section. You can use them to display images in your app.":m.includes("spacer")?"The Spacer component is in the General section and is used to add empty space between elements for layout.":m.includes("circle")?"Circle shapes can be added from the Shapes section to include basic geometric shapes.":m.includes("line")?"You can add Line shapes from the Shapes section, useful for dividers or visual elements.":m.includes("rectangle")||m.includes("square")?"Rectangle shapes are available in the Shapes section, for adding rectangular visual elements.":m.includes("component")?"All our components are located in the src/components directory. We have UI components, layout components, and more!":"I'm not so sure about that.. Maybe you can check the documentation here: https://miniblocks-docs.vercel.app/"},p=((f=a.filter(g=>g.type==="pika").pop())==null?void 0:f.text)??"How can I help?";return _.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[_.jsx(Fz,{children:t&&_.jsxs(v3.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"flex items-start space-x-2",children:[_.jsx("img",{src:S3,alt:"Pika",className:"w-48 h-48 object-contain"}),_.jsx("div",{className:"bg-white p-4 rounded-lg shadow-lg w-64",children:_.jsxs("div",{className:"flex flex-col space-y-4",children:[_.jsxs("div",{className:"relative max-w-full",children:[_.jsx("div",{className:"bg-gray-100 text-gray-800 p-3 rounded-lg",children:p}),_.jsx("div",{className:"absolute left-0 top-full w-0 h-0 border-t-8 border-t-gray-100 border-x-8 border-x-transparent"})]}),_.jsxs("div",{className:"flex w-full",children:[_.jsx(EM,{value:o,onChange:g=>i(g.target.value),placeholder:"Ask Pika something...",onKeyPress:g=>g.key==="Enter"&&u(),className:"flex-1 mr-2"}),_.jsx(Bi,{onClick:u,className:"bg-blue-500 hover:bg-blue-600 text-white",children:"Send"})]})]})})]})}),_.jsxs(Bi,{onClick:()=>s(g=>!g),className:"bg-blue-500 hover:bg-blue-600 text-white rounded-full p-4 shadow-lg flex items-center gap-2",children:[_.jsx(C3,{}),"Ask Pika!"]})]})},up=({children:t})=>Ls.isAuthenticated()?_.jsx(_.Fragment,{children:t}):_.jsx(U0,{to:"/login",replace:!0});function gO(){const{activeTab:t}=ds();return ye.useEffect(()=>{const{currentProject:s,setCurrentProject:o}=ds.getState();s||o({id:crypto.randomUUID(),name:"My First Project",screens:[]})},[]),_.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[_.jsx(HV,{}),_.jsxs("main",{className:"flex-1 flex",children:[t==="DESIGN"&&_.jsx(xH,{}),_.jsx("div",{className:`flex-1 flex ${t==="DESIGN"?"hidden":""}`,children:_.jsx(sj,{})})]}),_.jsx(oj,{}),_.jsx(I3,{})]})}function w3(){return _.jsxs(V0,{children:[_.jsx(Eo,{path:"/login",element:_.jsx(mT,{children:_.jsx(vj,{})})}),_.jsx(Eo,{path:"/register",element:_.jsx(mT,{children:_.jsx(Cj,{})})}),_.jsx(Eo,{path:"/profile",element:_.jsx(up,{children:_.jsx(mT,{children:_.jsx(Bj,{})})})}),_.jsx(Eo,{path:"/",element:_.jsx(up,{children:_.jsx(Ej,{children:_.jsx(yj,{})})})}),_.jsx(Eo,{path:"/canvas",element:_.jsx(up,{children:_.jsx(gO,{})})}),_.jsx(Eo,{path:"/canvas/:projectId",element:_.jsx(up,{children:_.jsx(gO,{})})}),_.jsx(Eo,{path:"*",element:_.jsx(U0,{to:"/",replace:!0})})]})}const k3=()=>{const{screenId:t}=QB(),{currentProject:s}=ds(),[o,i]=O.useState(1),[a,c]=O.useState(!1),[u,h]=O.useState("mobile"),[p,f]=O.useState(Date.now()),[g,m]=O.useState(!1),T=s==null?void 0:s.screens.find(v=>v.id===t);O.useEffect(()=>{const M=setInterval(()=>{const L=JSON.parse(localStorage.getItem("miniblocks-storage")||"{}"),P=JSON.stringify(L),B=JSON.stringify(window._previousState||{});P!==B&&(window._previousState=L,f(Date.now()))},1e3);return()=>clearInterval(M)},[]);const I=()=>{m(!0);const v=JSON.parse(localStorage.getItem("miniblocks-storage")||"{}");window._previousState=v,f(Date.now()),setTimeout(()=>{m(!1)},500)};if(!T)return _.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:_.jsxs("div",{className:"text-center",children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Screen not found"}),_.jsx("p",{className:"text-gray-600",children:"The screen you're looking for doesn't exist."})]})});const C={mobile:{width:390,height:844},tablet:{width:820,height:1180}},{width:w,height:A}=C[u],S=a?A:w,y=a?w:A;return _.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-100",children:[_.jsxs("div",{className:"bg-white border-b px-6 py-3 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsx("button",{className:Bt("p-2 rounded-md transition-colors",u==="mobile"?"bg-blue-50 text-blue-600":"hover:bg-gray-100"),onClick:()=>h("mobile"),title:"Mobile view",children:_.jsx(Au,{className:"w-5 h-5"})}),_.jsx("button",{className:Bt("p-2 rounded-md transition-colors",u==="tablet"?"bg-blue-50 text-blue-600":"hover:bg-gray-100"),onClick:()=>h("tablet"),title:"Tablet view",children:_.jsx(lU,{className:"w-5 h-5"})}),_.jsx("div",{className:"h-6 w-px bg-gray-200"}),_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-md transition-colors",onClick:()=>c(!a),title:"Rotate device",children:_.jsx(sU,{className:"w-5 h-5"})}),_.jsx("div",{className:"h-6 w-px bg-gray-200"}),_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-md transition-colors",onClick:()=>i(v=>Math.min(v+.1,1.5)),title:"Zoom in",children:_.jsx(ZF,{className:"w-5 h-5"})}),_.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(o*100),"%"]}),_.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-md transition-colors",onClick:()=>i(v=>Math.max(v-.1,.5)),title:"Zoom out",children:_.jsx(QF,{className:"w-5 h-5"})})]}),_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsxs("div",{className:"flex items-center",children:[_.jsx("span",{className:"text-sm text-gray-500 mr-2",children:"Auto-refreshing"}),_.jsx(J0,{className:"w-4 h-4 text-green-500 animate-spin"})]}),_.jsx("button",{className:Bt("p-2 rounded-md text-blue-600 hover:bg-blue-50 transition-colors",g&&"animate-spin"),onClick:I,title:"Manual refresh",children:_.jsx(nU,{className:"w-5 h-5"})})]})]}),_.jsx("div",{className:"flex-1 overflow-auto p-8",children:_.jsx("div",{className:"flex items-center justify-center min-h-full",children:_.jsxs("div",{className:"relative transition-transform duration-300 ease-in-out",style:{transform:`scale(${o})`,transformOrigin:"center"},children:[_.jsx("div",{className:"absolute inset-0 bg-black rounded-[60px] -m-4 shadow-xl"}),_.jsxs("div",{className:Bt("bg-white rounded-[50px] overflow-hidden relative p-8 transition-all duration-300",a&&"origin-center rotate-90"),style:{width:`${S}px`,height:`${y}px`,backgroundColor:T.settings.backgroundColor},children:[_.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[150px] h-[35px] bg-black rounded-b-[20px]"}),_.jsx("div",{className:Bt("h-full pt-[35px] relative",T.settings.scrollable&&"overflow-y-auto"),children:T.components.map(v=>{const M=v;return _.jsx("div",{style:M.props.style,className:"absolute",children:_.jsx(pE,{type:M.type,props:M.props})},M.id)})})]})]})})})]})};R0(document.getElementById("root")).render(_.jsx(O.StrictMode,{children:_.jsx(yF,{children:_.jsxs(V0,{children:[_.jsx(Eo,{path:"/preview/:screenId",element:_.jsx(k3,{})}),_.jsx(Eo,{path:"/*",element:_.jsx(w3,{})})]})})}));
